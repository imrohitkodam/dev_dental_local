"use strict";function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,a){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,n,r,o,_=[],l=!0,c=!1;try{if(r=(t=t.call(e)).next,0===a){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=r.call(t)).done)&&(_.push(i.value),_.length!==a);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw n}}return _}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,_=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){_=!0,r=e},f:function(){try{o||null==t.return||t.return()}finally{if(_)throw r}}}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=Array(a);t<a;t++)i[t]=e[t];return i}var acym_helperCampaigns={attachmentNb:1,initCampaigns:function(){acym_helperCampaigns.setChooseConfirmReplaceTemplate(),acym_helperCampaigns.initAttachmentCampaigns(),acym_helperCampaigns.setStopScheduled(),acym_helperCampaigns.setStopSending(),acym_helperCampaigns.setDeactivateAutomatic(),acym_helperCampaigns.setSummaryScroll(),jQuery("#acym__wysid").length<1&&acym_helperCampaigns.setSendSettingsButtons()},setSummaryScroll:function(){var e=jQuery("#workflow"),a=e.find("a").attr("href");void 0!==a&&(a.indexOf("summary")||a.indexOf("test"))&&jQuery(document).ready(function(){e.scrollLeft(e.outerWidth())})},setChooseConfirmReplaceTemplate:function(){var e=jQuery("#acym__campaign__choose__campaign").val();jQuery("#acym__templates__choose__create__empty").off("click").on("click",function(a){if(e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM))return a.preventDefault(),!1}),jQuery(".acym__templates__oneTpl").off("click").on("click",function(a){e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM)||(window.location.href=jQuery(this).find(".acym__templates__oneTpl__choose").val())})},setAutoOpenEditor:function(){jQuery("#acym__campaign__edit_email").length&&"0"===jQuery("#acym__campaign__recipients__form__campaign").val()&&jQuery("#acym__wysid__edit__button").trigger("click")},initAttachmentCampaigns:function(){acym_helperCampaigns.setAddAttachmentButton(),acym_helperCampaigns.setRemoveAttachment(),acym_helperCampaigns.setDeleteAttachment()},setAddAttachmentButton:function(){jQuery("#acym__campaigns__attach__add").off("click").on("click",function(){acym_helperCampaigns.attachmentNb>9||(jQuery("#acym__campaigns__attach__"+acym_helperCampaigns.attachmentNb).css("display",""),acym_helperCampaigns.attachmentNb++)})},setRemoveAttachment:function(){jQuery(".acym__campaigns__attach__remove").off("click").on("click",function(e){var a=e.currentTarget.getAttribute("data-id");jQuery("#attachments"+a+"selection").html(""),jQuery("#attachments"+a+"suppr").css("display","none"),jQuery("#attachments"+a).val("")})},setDeleteAttachment:function(){jQuery(".acym__campaigns__attach__delete").off("click").on("click",function(e){var a=jQuery(".acym__campaigns__attach__delete"),t=jQuery(this),i="",n="";a.each(function(e){jQuery(this).attr("data-id")==t.attr("data-id")&&(i=e,n=t.attr("data-id"))});var r=t.attr("data-mail");jQuery.post(ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlCampaigns+"&task=deleteAttachmentAjax&id="+i+"&mail="+r,function(e){(e=acym_helper.parseJson(e)).error?acym_helperCampaigns.setDisplayNotif(e.message,"error"):(acym_helperCampaigns.setDisplayNotif(e.message,"info"),jQuery("#acym__campaigns__attach__del"+n).remove())}).fail(function(e){console.log(e)})})},setDisplayNotif:function(e,a){"front"!==acym_helper.ctrlCampaigns.substring(0,5)?acym_helperNotification.addNotification(e,a):console.log(e)},setSendSettingsButtons:function(){jQuery(".acym__campaign__sendsettings__buttons-type").off("click").on("click",function(){if(jQuery(this).hasClass("disabled"))return!0;jQuery(".acym__campaign__sendsettings__buttons-type").addClass("button-radio-unselected").removeClass("button-radio-selected"),jQuery(this).removeClass("button-radio-unselected").addClass("button-radio-selected"),jQuery(".acym__campaign__sendsettings__params").hide(),jQuery('[data-show="'+jQuery(this).attr("id")+'"]').show(),jQuery('[name="sending_type"]').val(jQuery(this).attr("data-sending-type")),"acym__campaign__sendsettings__scheduled"!==jQuery(this).attr("id")?jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").removeAttr("required"):jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").attr("required","required")})},setStopScheduled:function(){jQuery(".acym__campaign__listing__scheduled__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),a=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopScheduledCampaignId" value="'+a+'">'),e.find('[name="task"]').val("stopScheduled"),e.submit()})},setStopSending:function(){jQuery(".acym__campaign__listing__sending__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),a=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopSendingCampaignId" value="'+a+'">'),e.find('[name="task"]').val("stopSending"),e.submit()})},setDeactivateAutomatic:function(){jQuery(".acym__campaign__listing__automatic__deactivate").off("click").on("click",function(){var e=jQuery("#acym_form"),a=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="campaignId" value="'+a+'">'),e.find('[name="task"]').val("toggleActivateColumnCampaign"),e.submit()})},setSelectionCreateNewMail:function(){var e=jQuery(".acym__email__new__card:not(.acym__email__new__card__disabled)");e.off("click").on("click",function(){jQuery(this).hasClass("acym__email__new__card-selected")||(e.removeClass("acym__email__new__card-selected"),jQuery(this).addClass("acym__email__new__card-selected"),jQuery(this).hasClass("acym__email__new__card-list")&&""!==jQuery(this).find(".acym__email__new__card__select").val()||!jQuery(this).hasClass("acym__email__new__card-list")?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setSelectCreateNewMail:function(){jQuery(".acym__email__new__card__select").on("change",function(){jQuery(this).closest(".acym__email__new__card").hasClass("acym__email__new__card-selected")&&(""!==jQuery(this).val()?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setButtonCreateNewEmail:function(){jQuery("#acym__email__new__button-create").off("click").on("click",function(){var e=jQuery(".acym__email__new__card-selected"),a=e.attr("acym-data-link");if(-1!==a.indexOf("{listid}")){var t=e.find(".acym__email__new__card__select").val();a=a.replace("{listid}",t)}window.location.href=a})},setClickFlagsSummary:function(){jQuery(".acym__campaign__summary__preview__languages-one").not(".acym__campaign__summary__preview__languages-one__empty").off("click").on("click",function(){if(!jQuery(this).hasClass("language__selected")){jQuery(".language__selected").removeClass("language__selected"),jQuery(this).addClass("language__selected");var e="#acym__summary-body-"+jQuery(this).attr("data-acym-lang"),a="#acym__summary-subject-"+jQuery(this).attr("data-acym-lang"),t="#acym__summary-preview-"+jQuery(this).attr("data-acym-lang");jQuery(".acym__hidden__mail__content").val(jQuery(e).val()),acym_helperPreview.loadIframe("acym__wysid__preview__iframe__acym__wysid__email__preview",!1),jQuery(".acym__campaign__summary__email__information-subject").html(jQuery(a).val()),jQuery(".acym__campaign__summary__generated__mail__one__preview").html(jQuery(t).val())}})},setClickVersionSummary:function(){jQuery(".acym__campaign__summary__preview__versions-one").not(".acym__campaign__summary__preview__versions-one__empty").off("click").on("click",function(){if(!jQuery(this).hasClass("version__selected")){jQuery(".version__selected").removeClass("version__selected"),jQuery(this).addClass("version__selected");var e="#acym__summary-body-"+jQuery(this).attr("data-acym-version"),a="#acym__summary-subject-"+jQuery(this).attr("data-acym-version"),t="#acym__summary-preview-"+jQuery(this).attr("data-acym-version");jQuery(".acym__hidden__mail__content").val(jQuery(e).val()),acym_helperPreview.loadIframe("acym__wysid__preview__iframe__acym__wysid__email__preview",!1),jQuery(".acym__campaign__summary__email__information-subject").html(jQuery(a).val()),jQuery(".acym__campaign__summary__generated__mail__one__preview").html(jQuery(t).val())}})}},acym_helperDatePicker={setDatePickerGlobal:function(){jQuery(".acy_date_picker").off("click").on("click",function(){var e=jQuery(this),a=void 0===e.attr("data-acym-translate")||"0"!==e.attr("data-acym-translate"),t=e.val()?moment(e.val(),a?"DD MMM YYYY HH:mm":"YYYY-MM-DD HH:mm"):moment();new MaterialDatetimePicker({default:t}).on("submit",function(t){e.val(moment(t,"MM-DD-YYYY").format(a?"DD MMM YYYY HH:mm":"YYYY-MM-DD HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},setRelativeTime:function(e){var a=e.closest(".reveal"),t=parseInt(a.find(".relativenumber").val())*parseInt(a.find(".relativetype").val());jQuery('[data-rs="'+a.attr("id")+'"]').val("[time]"+(t>0?a.find(".relativewhen").val()+t:"")),jQuery('[data-open="'+a.attr("id")+'"]').val("[time]"+(t>0?a.find(".relativewhen").val()+t:"")).trigger("change")},setSpecificTime:function(e){var a=e.closest(".reveal"),t=a.find('[name^="specific_"]');jQuery('[data-rs="'+a.attr("id")+'"]').val(moment(t.val()).unix()),jQuery('[data-open="'+a.attr("id")+'"]').val(t.val()).trigger("change")},setRSDateChoice:function(){jQuery(".acym__button__clear__time").on("click",function(){var e=jQuery(this).closest(".reveal").attr("id");jQuery('[data-rs="'+e+'"]').val(""),jQuery('[data-open="'+e+'"]').val("").trigger("change")}),jQuery(".acym__button__set__time").on("click",function(){"relative"===jQuery(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?acym_helperDatePicker.setRelativeTime(jQuery(this)):acym_helperDatePicker.setSpecificTime(jQuery(this))}),jQuery(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var a=jQuery(this).closest(".date_rs_selection_popup");a.find(".date_rs_selection").removeClass("is-active"),jQuery(this).addClass("is-active"),a.find(".date_rs_selection_choice").hide(),a.find(".date_rs_selection_"+jQuery(this).attr("data-type")).show()}),acym_helperDatePicker.resetThePopup()},resetThePopup:function(){jQuery(".rs_date_field").on("click",function(){var e=jQuery(this),a=jQuery('[data-rs="'.concat(e.attr("data-open"),'"]')),t=jQuery("#".concat(e.attr("data-open")));if(void 0===a.val()||""===a.val()||"[time]"===a.val())return t.find(".relativetype").val("60").trigger("change"),t.find(".relativenumber").val("0").trigger("change"),!0;if(-1!==a.val().indexOf("[time]")){t.find('[data-type="relative"]').trigger("click");var i,n,r=-1!==a.val().indexOf("-")?"-":"+",o=a.val().split(r),_=parseInt(o[1]);t.find(".relativewhen").val(r).trigger("change"),i=_/(n=_>=86400&&_%86400==0?86400:_>=3600&&_%3600==0?3600:60),t.find(".relativetype").val(n).trigger("change"),t.find(".relativenumber").val(i).trigger("change")}else t.find('[data-type="specific"]').trigger("click"),t.find(".acy_date_picker").val(moment.unix(a.val()).format("YYYY-MM-DD HH:mm"))})}},acym_helperDebugger={initDebugger:function(){window.addEventListener("keydown",function(e){e.key},!1)}},acym_helperEditorHtml={initEditorHtml:function(){acym_helperEditorHtml.setEditorField()},setEditorField:function(){jQuery("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}},acym_helperEditorWysid={initEditor:function(){var e=jQuery("#acym__wysid");if(e.length<1)return!1;acym_helperEditorWysid.mailsSettings=acym_helper.parseJson(acym_helperEditorWysid.saveSettings),jQuery("#editor_thumbnail").val(""),jQuery("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+acym_helperEditorWysid.parseTextToCss(acym_helperEditorWysid.savedStylesheet)+"</style>"),jQuery("#acym__walkthrough__email").length>0&&e.parent().insertAfter("#acym__walkthrough__email"),acym_editorWysidVersioning.checkForUnsavedVersion(),acym_editorWysidVersioning.setVersionControlCtrlZ(),acym_editorWysidImage.setChangeBuiltWithImage(),acym_editorWysidDragDrop.setFixJquerySortableWYSID(),acym_editorWysidDragDrop.setNewZoneDraggable(),acym_editorWysidDragDrop.setNewBlockDraggable(),acym_editorWysidDragDrop.setZonesSortable(),acym_editorWysidDragDrop.setBlocksDraggable(),acym_editorWysidFormAction.setOpenEditorButton(),acym_editorWysidFormAction.setCancelButtonWYSID(),acym_editorWysidFormAction.setSaveButtonWYSID(),acym_editorWysidFormAction.setSaveAsTmplButtonWYSID(),acym_editorWysidModal.setModalWindowWYSID(),acym_editorWysidModal.setDTextInsertion(),acym_editorWysidToolbar.setRightToolbarWYSID(),acym_editorWysidFontStyle.setOpenStylesheet(),acym_editorWysidFontStyle.setCancelStylesheet(),acym_editorWysidFontStyle.setApplyStylesheetSettings(),acym_editorWysidFontStyle.setSocialIconImport(),acym_helperEditorWysid.setAlertTimeoutSession(),acym_helperEditorWysid.preventSubmitEditor(),acym_helperEditorWysid.setSelectOneTemplate(),acym_helperEditorWysid.setSizeEditorWYSID(),acym_editorWysidTest.toggleSendTest(),acym_editorWysidTest.sendTestAjax(),jQuery('[id^="mce_"]').removeAttr("id"),acym_editorWysidVersions.setVersionSelection(),acym_editorWysidDynamic.setDTexts()},setColumnRefreshUiWYSID:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];jQuery(".ui-helper-hidden-accessible").remove(),acym_editorWysidDragDrop.setBlocksSortable(),acym_helperEditorWysid.resizeBlockContainers(),acym_editorWysidDynamic.setTagPWordBreak(),acym_editorWysidDynamic.setTagPreInserted(),acym_helperEditorWysid.removeBlankCharacters(),acym_editorWysidTinymce.checkForEmptyText(),jQuery(".acym__wysid__column__element__button").css("overflow","unset"),e&&acym_editorWysidVersioning.setUndoAndAutoSave(a)},resizeBlockContainers:function(){jQuery(".acym__wysid__column tbody").each(function(){0===jQuery(this).children().length?jQuery(this).css({"min-height":"75px",display:"block"}).closest("table").css("min-height","75px").css("display","block"):jQuery(this).css({"min-height":"0px",display:"table-row-group"}).closest("table").css("min-height","0").css("display","table")})},addDefaultZone:function(){var e=jQuery(".acym__wysid__row"),a=!1;e.each(function(){0===jQuery(this).children().length?(jQuery(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),acym_editorWysidNewRow.addRow1WYSID(jQuery("#acym__wysid__row__temp_div")),a=!0):1===jQuery(this).children().length&&"acym__powered_by_acymailing"===jQuery(this).children().first().attr("id")?(jQuery(".acym__wysid__row").prepend('<div id="acym__wysid__row__temp_div"></div>'),acym_editorWysidNewRow.addRow1WYSID(jQuery("#acym__wysid__row__temp_div")),a=!0):jQuery(this).css({"min-height":"0",display:"table-cell"})}),a&&(acym_helperEditorWysid.addDefaultBlock(),acym_helperEditorWysid.setColumnRefreshUiWYSID())},addDefaultBlock:function(){var e=jQuery(".acym__wysid__row");if(1===e.length){var a=e.find(".acym__wysid__column");if(1===a.length&&!a.find("tbody").children().length&&!jQuery("#acym__wysid__default").length){a.addClass("acym__wysid__column__first");var t='<div id="acym__wysid__default">';t+='<div id="acym__wysid__default__start" class="cell grid-x acym_vcenter">',t+='<h1 class="cell">'+ACYM_JS_TXT.ACYM_TEMPLATE_EMPTY+"</h1>",t+='<p class="cell">'+ACYM_JS_TXT.ACYM_DRAG_BLOCK_AND_DROP_HERE+"</p>",t+="</div>",t+='<div id="acym__wysid__default__dragging" style="display: none" class="cell grid-x acym_vcenter">',t+='<h1 class="cell text-center">'+ACYM_JS_TXT.ACYM_WELL_DONE_DROP_HERE+"</h1>",t+="</div>",t+="</div>",a.before(t);var i=jQuery("#acym__wysid__default__start");i.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(i.height()).find("table").height(i.height()).find("tbody").height(i.height()),acym_helperEditorWysid.resizeBlockContainers()}}},removeBlankCharacters:function(){var e=jQuery(".acym__wysid__link__image");jQuery.each(e,function(){jQuery(this).html(jQuery(this).html().replace(/\uFEFF/g,""))})},setSizeEditorWYSID:function(){jQuery(window).off("resize").on("resize",function(){clearTimeout(window.acymResize),window.acymResize=setTimeout(function(){acym_editorWysidTinymce.addTinyMceWYSID(),acym_helperEditorWysid.resizeEditorBasedOnPage()},200)})},resizeEditorBasedOnPage:function(){var e;e="wordpress"===ACYM_CMS?jQuery("#wpadminbar").innerHeight():ACYM_J40?0:jQuery("nav.navbar").innerHeight()+jQuery("#status").innerHeight();var a=jQuery(window).width()>639?56:0,t=jQuery("#acym__wysid__top-toolbar").innerHeight();jQuery("#acym__wysid").css("min-height",jQuery(window).height()-(a+e));var i=jQuery(window).height()-(a+e+t+64);jQuery("#acym__wysid__template").css({"max-height":i,"min-height":i}),jQuery(".acym__wysid__right-toolbar__content").css("max-height",jQuery(window).height()-(a+e+48))},setSelectOneTemplate:function(){jQuery(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){jQuery(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var a=jQuery(this).find("a").attr("href");jQuery.ajax({type:"POST",url:ACYM_AJAX_URL,data:{page:"acymailing_mails",ctrl:acym_helper.ctrlMails,task:"getMailContent",from:jQuery(this).attr("id")},success:function(e){(e=acym_helper.parseJson(e)).error?alert(e.message):window.location.href=a}})})})},parseTextToCss:function(e){var a="",t=_toConsumableArray(e.matchAll(/@import[^;]*;/gi));for(var i in t)a+=t[i],e=e.replace(t[i],"");return jQuery.parsecss(e,function(t){jQuery("#acym__wysid__custom__style").remove(),a+=acym_helperEditorWysid.parsecssP(t);var i=_toConsumableArray(e.matchAll(/@media[^{(]*(\([^{]*\))[^{]*{([^{}]*({[^}]*}[^{}]*)*[^{}]*)}/gi));for(var n in i)void 0!==i[n][2]&&(a+="@media"+i[n][1]+"{",jQuery.parsecss(i[n][2],function(e){a+=acym_helperEditorWysid.parsecssP(e)}),a+="}")}),a},parsecssP:function(e){var a="",t=e;for(var i in t){var n=t[i],r=-1!==i.indexOf("#acym__wysid__template")?"":"#acym__wysid__template .body ";for(var o in a+=r+i+"{",n)a+=o+":"+n[o]+";";a+="} "}return a},preventSubmitEditor:function(){jQuery("#acym_wrapper").on("keydown",function(e){if("Enter"===e.key&&"TEXTAREA"!==e.target.nodeName)return e.preventDefault(),!1})},setAlertTimeoutSession:function(){var e=jQuery("#acym__wysid__session--lifetime").val();setTimeout(function(){acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END,level:"warning"})},1e3*(e-60))},_selectedRows:[],$focusElement:"",saveSettings:jQuery(".acym__wysid__hidden__save__settings").val(),mailsSettings:{},stylesheetTemp:"",savedStylesheet:jQuery(".acym__wysid__hidden__save__stylesheet").val(),savedColors:jQuery(".acym__wysid__hidden__save__colors").val(),clicking:!1,$resizingElement:"",versionControl:0,timeClickImage:0,dynamicPreviewIdentifier:0,typingTimer:"",defaultMailsSettings:{"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},a:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#0000F1"},"span.acym_link":{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#0000F1"},li:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","line-height":"inherit","font-style":"normal",color:"#000000"},default:{"font-family":"Helvetica"}},socialMedia:{facebook:{src:ACYM_MEDIA_URL+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:ACYM_MEDIA_URL+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:ACYM_MEDIA_URL+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:ACYM_MEDIA_URL+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:ACYM_MEDIA_URL+"/images/logo/instagram.png"},vimeo:{src:ACYM_MEDIA_URL+"/images/logo/vimeo.png"},wordpress:{src:ACYM_MEDIA_URL+"/images/logo/wordpress.png"},youtube:{src:ACYM_MEDIA_URL+"/images/logo/youtube.png"},x:{src:ACYM_MEDIA_URL+"/images/logo/x.png"},telegram:{src:ACYM_MEDIA_URL+"/images/logo/telegram.png"}}},acym_helperErrorMessage={initErrorMessage:function(){var e=[],a=!1;jQuery(document).on("invalid.zf.abide",function(a,t){if(!t.is(":radio")||void 0!==t.attr("required")){jQuery("#formSubmit")[0].disabled=!1;var i=acym_helperErrorMessage.getErrorMessage(t);t.after('<div class="acym__input-error"><i class="acymicon-exclamation-circle"></i>'+i+"</div>");var n=jQuery(".acym__input-error");setTimeout(function(){n.remove()},5e3),e=[]}}).on("valid.zf.abide",function(a,t){"email"===t.attr("type")&&""!==t.val()&&(e[0]=void 0===e[0]?0:e[0],e[0]=acym_helper.emailValid(t.val())&&""!==t.val()?0:e[0]+1)}).on("submit",function(t){var i=jQuery("#formSubmit")[0];if(void 0===i)return!0;e[3]=void 0===e[3]?0:e[3];var n=jQuery("#acym__users__export"),r=n.find("#acym__modal__lists-selected"),o=jQuery('input[name="export_users-to-export"]:checked');n.length>0&&"list"===o.val()&&"[]"===r.val()?(e[3]++,acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error")):n.length>0&&"list"===o.val()&&"[]"!==r.val()&&(e[3]=0),e.length>0&&jQuery.each(e,function(e,t){t>0&&(a=!0)}),a?(i.disabled=!1,t.preventDefault(),a=!1):(i.disabled=!0,a=!1)})},getErrorMessage:function(e){var a=e.attr("type"),t=e.attr("pattern"),i=[];return void 0!==e.attr("required")&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"===a?i.push(ACYM_JS_TXT.email):"text"===a&&(void 0!==t&&void 0!==ACYM_JS_TXT[t]?i.push(ACYM_JS_TXT[t]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}},acym_helperFile={initFile:function(){acym_helperFile.setAttachment(),acym_helperFile.setDisplayFileTree(),acym_helperFile.setSwitchView(),acym_helperFile.setChangeFolder()},setAttachment:function(){jQuery(".acym__file__select__add").off("click").on("click",function(e){var a=jQuery("#acym__file__select__mapid").val(),t=e.currentTarget.getAttribute("mapdata"),i=jQuery("#currentPath").val();jQuery("#"+a,window.parent.document).val(i+"/"+t),jQuery("#"+a+"suppr",window.parent.document).css("display",""),jQuery("#"+a+"selection",window.parent.document).html(t),jQuery("#acym__campaign__email__"+a,window.parent.document).closest(".reveal-overlay").trigger("click")}),jQuery(".acym__file__select__add.acym_clickme").trigger("click")},setSwitchView:function(){jQuery("#acym__file__select__area__switch button").off("click").on("click",function(){jQuery("#acym__file__select__area__switch button").toggleClass("is-hidden"),jQuery("#acym__file__select__area__grid").toggleClass("is-hidden"),jQuery("#acym__file__select__area__list").toggleClass("is-hidden")})},setDisplayFileTree:function(){jQuery("#displaytree").on("click",function(){var e=jQuery("#treefile");"none"===e.css("display")?e.css("display","block"):e.css("display","none")})},setChangeFolder:function(){jQuery(".tree-child-item").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var a=e.currentTarget.getAttribute("data-path"),t=window.location.href,i=t.substring(t.lastIndexOf("&")+1);"selected_folder"===(i=i.split("="))?t=t.replace(i,"selected_folder="+a):t+="&currentFolder="+a,window.location.href=t})}},acym_helper={ctrlMails:ACYM_IS_ADMIN?"mails":"frontmails",ctrlDynamics:ACYM_IS_ADMIN?"dynamics":"frontdynamics",ctrlLists:ACYM_IS_ADMIN?"lists":"frontlists",ctrlUsers:ACYM_IS_ADMIN?"users":"frontusers",ctrlCampaigns:ACYM_IS_ADMIN?"campaigns":"frontcampaigns",config_get:function(e){var a=ACYM_IS_ADMIN?"configuration":"frontconfiguration";return jQuery.ajax({type:"GET",url:ACYM_AJAX_URL+"&ctrl="+a+"&task=getAjax&field="+e,dataType:"json"})},emailValid:function(e){return null!==e.match(ACYM_REGEX_EMAIL)},escape:function(e){return e=e.replace(/"/g,"&quot;")},parseJson:function(e,a){if("object"===_typeof(e)||void 0===e)return e;try{var t=e.indexOf("{"),i=e.indexOf("[");if(!isNaN(t)&&t>0&&!isNaN(i)&&i>0&&(e=e.substring(t)),void 0!==e||""!==e)return JSON.parse(e)}catch(e){console.log(e.stack)}return a},sprintf:function(){var e=Object.values(arguments),a=e.splice(0,1)[0];return 1===e.length?a=a.replace("%s",e[0]):jQuery.each(e,function(e,t){a=a.replace("%"+(e+1)+"$s",t)}),a},setSubmitButtonGlobal:function setSubmitButtonGlobal(){jQuery(".acy_button_submit").off("click").on("click",function(e){if(void 0!==jQuery(this).attr("data-force-submit")&&jQuery("[required]").removeAttr("required"),jQuery(this).hasClass("disabled"))return!1;e.preventDefault();var condition=jQuery(this).attr("data-condition");if(condition&&"function"==typeof jQuery[condition]&&!jQuery[condition]())return!1;var confirmationMessage=jQuery(this).attr("data-confirmation-message");if("undefined"!==_typeof(confirmationMessage)&&!acym_helper.confirm(ACYM_JS_TXT[confirmationMessage]))return!1;if(jQuery(this).attr("acym-data-before")){var result=eval(jQuery(this).attr("acym-data-before"));if(!1===result)return!1}var $form=jQuery("#acym_form"),task=jQuery(this).attr("data-task"),controller=jQuery(this).attr("data-ctrl");void 0!==controller&&$form.find("[name=ctrl]").val(controller),$form.find('[name="task"]').val(task);var step=jQuery(this).attr("data-step");null!=step&&$form.find('[name="nextstep"]').val(step);var and=jQuery(this).attr("data-and");null!=and&&$form.append('<input type="hidden" value="'+and+'" name="and_action">');var $buttonSubmit=$form.find("#formSubmit");if(null==$buttonSubmit[0]){var evt=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(evt)}else $buttonSubmit.trigger("click")})},setDeleteOptionsGlobal:function(){jQuery(".js-acym__listing__block__delete__trash").off("click").on("click",function(e){e.preventDefault();var a=jQuery(this).closest(" .acym__listing__block__delete");a.css("width","56px"),a.find(".acym__listing__block__delete__trash").css("display","none"),a.animate({maxWidth:"56px"},"fast",function(){jQuery(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).closest(".acym__listing__block__delete"))})}),jQuery(".acym__listing__block").off("mouseleave").on("mouseleave",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).find(".acym__listing__block__delete"))})})},setHideDeleteOptionsGlobal:function(e){jQuery(".js-acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"28px"},"fast",function(){e.find(".acym__listing__block__delete__trash").css("display","block")})},confirm:function(e){function a(a){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}(function(e){return confirm(e.replace("<br />","\n"))}),setMessageClose:function(){jQuery(".acym_message i.acymicon-close").off("click").on("click",function(){jQuery(this).parent().remove()})},preventEnter:function(){jQuery("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(e){if("Enter"===e.key&&!jQuery('[name$="_pagination_page"], [name="pagination_page_ajax"]').is(":visible"))return e.preventDefault(),!1})},getIntValueWithoutPixel:function(e){return void 0===e||""===e?0:parseInt(e.replace(/[^-\d\.]/g,""))},empty:function(e){return null===e||(void 0===e||(void 0===e||(""===e||(0===e.length||(0===e||("0"===e||!1===e))))))},alert:function(e){function a(a){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}(function(e){return alert(e)}),getCookie:function(e){var a="";return document.cookie.split(";").map(function(t){(t=t.trim().split("="))[0]===e&&(a=t[1])}),a},setCookie:function(e,a,t){var i=e+"="+this.escape(a);if(null!=t){var n=new Date;n.setDate(n.getDate()+t),i+=";expires="+n.toUTCString()}document.cookie=i},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ACYM_AJAX_URL,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return jQuery.get(e,a).then(acym_helper.parseResponse).fail(acym_helper.handleErrors)},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ACYM_AJAX_URL,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=jQuery.post(e,a);return t?(i.then(acym_helper.parseJson).fail(acym_helper.handleErrors),i):i.then(acym_helper.parseResponse).fail(acym_helper.handleErrors)},parseResponse:function(e){return"object"!==_typeof(e)&&(e=acym_helper.parseJson(e)),e.error&&!acym_helper.empty(e.message)&&console.error(e.message),e},handleErrors:function(e,a,t){var i={error:!0};return i.message=t,i.data=[],console.error("Ajax error, responded with error ".concat(a," ").concat(t)),i},sameArrays:function(e,a){return e.length===a.length&&e.every(function(e,t){return e===a[t]})},setButtonRadio:function(){jQuery(".button-radio").off("click").on("click",function(e){e.preventDefault(),jQuery('[acym-button-radio-group="'+jQuery(this).attr("acym-button-radio-group")+'"]').removeClass("button-radio-selected"),jQuery(this).addClass("button-radio-selected");var a=jQuery(this).attr("acym-callback");setTimeout(function(){acym_helper.empty(a)||"function"!=typeof window[a]||window[a]()},100)})},setKonami:function(){var e=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"],a=0;jQuery(document).on("keydown",function(t){t.key===e[a]?++a===e.length&&(jQuery("<style>* {animation: acy-spin 20s linear infinite;}</style>").appendTo("body"),a=0):a=0})},setLicenseLink:function(){jQuery(".acym_link_license_tab").on("click",function(){localStorage.setItem("acyconfiguration","license")})}},acym_helperImage={openMediaManager:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"wordpress"===ACYM_CMS?acym_heleperWordPressGlobal.openMediaManager(e,a):acym_helperJoomlaGlobal.openMediaManager(e,a,!1)}},acym_helperImport={initImport:function(){acym_helperImport.setVerificationGenericImport(),acym_helperImport.setImportCMSLists(),acym_helperImport.setImportFromFileEvent(),acym_helperImport.setImportSubmit(),acym_helperImport.setChangeCharset(),acym_helperImport.setChangeTableName(),acym_helperImport.setCreateListFromImportPage()},setImportCMSLists:function(){jQuery(".acym__users__import__button").off("click").on("click",function(){acym_helperImport.getSubmitButton().trigger("click")}),jQuery("#acym__users__import__skip__button").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').attr("value",""),acym_helperImport.getSubmitButton().trigger("click")})},getSubmitButton:function(){return jQuery("#acym__users__import__from_database").is(":visible")?jQuery("#submit_import_database"):jQuery("#acym__users__import__cms_users").is(":visible")?jQuery("#submit_import_cms"):jQuery("#acym__users__import__cms_contact").is(":visible")?jQuery("#submit_import_contact"):jQuery("#submit_import_mailpoet")},setVerificationGenericImport:function(){var e=jQuery("#formSubmit");jQuery(".acym__users__import__generic__import__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&e.trigger("click")}),jQuery("#acym__users__generic__import__skip__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&(jQuery('[name="acym__entity_select__selected"]').attr("value",""),e.trigger("click"))})},verifyGenericImport:function(){"no-list"===jQuery(this).attr("id")&&(jQuery("#acym__modal__lists-selected").attr("value",""),jQuery("#acym__import__new-list").attr("value",""));var e=!0,a="",t="",i=!1,n="",r=[],o=jQuery(".fieldAssignment").length;isNaN(o)&&(o=1);for(var _=0;_<o;_++){var l=jQuery("#fieldAssignment"+_);0==(t=l.val())&&(l.val(1),t=1),"email"==t&&(i=!0),1!=t&&-1!==r.indexOf(t)?(e=!1,a+="\n"+acym_helper.sprintf(ACYM_JS_TXT.ACYM_DUPLICATE_X_FOR_X,t,_+1)):r.push(t),n+=","+t}return i||(e=!1,a+="\n"+ACYM_JS_TXT.ACYM_ASSIGN_EMAIL_COLUMN),!1===e?(alert(ACYM_JS_TXT.ACYM_FILL_ALL_INFORMATION+"\n"+a),!1):(","===n.substring(0,1)&&(n=n.substring(1)),jQuery("#import_columns").val(n),!0)},setImportFromFileEvent:function(){var e=jQuery("#acym__users__import__from_file__import__input");e.val(null),e.off("change").on("change",function(){var a=jQuery("#acym_form");this.files.length>0&&"csv"===this.files[0].name.substring(this.files[0].name.length-3).toLowerCase()?(jQuery(".acym__users__import__from_file__file-name").html(this.files[0].name),jQuery(".acym__users__import__from_file__file").show(),jQuery(".acym__users__import__from_file__choose").hide(),jQuery(".acym__users__import__from_file__button-valid").removeAttr("disabled"),jQuery(".acym__users__import__from_file__file__close").off("click").on("click",function(){jQuery(".acym__users__import__from_file__file-name").html(""),jQuery(".acym__users__import__from_file__button-valid").prop("disabled",!0),jQuery(".acym__users__import__from_file__file").hide(),jQuery(".acym__users__import__from_file__choose").show(),e.val(null)}),jQuery(".acym__users__import__from_file__button-valid").off("click").on("click",function(){a.find('[name="import_from"]').val("file"),a.submit()})):acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_COULD_NOT_UPLOAD_CSV_FILE,"error")})},setImportSubmit:function(){jQuery(".acym__import__submit").on("click",function(){var e=jQuery(this).attr("data-from"),a=jQuery("#acym_form");a.find('[name="import_from"]').val(e),a.find("#formSubmit").trigger("click")})},setChangeCharset:function(){jQuery("#acyencoding").on("change",function(){var e=jQuery(".fieldAssignment").length;isNaN(e)&&(e=1);for(var a={ctrl:acym_helper.ctrlUsers,task:"ajaxEncoding",encoding:jQuery(this).val(),acym_import_filename:jQuery(this).attr("data-filename")},t=0;t<e;t++)a["fieldAssignment"+t]=jQuery("#fieldAssignment"+t).val();jQuery.ajax({url:ACYM_AJAX_URL,type:"POST",data:a}).then(function(e){e=acym_helper.parseJson(e),jQuery("#acym__users__import__generic__matchdata").html(e.data.preview),jQuery(".fieldAssignment").select2({theme:"foundation"})})})},setChangeTableName:function(){var e="";jQuery("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){e=jQuery(this).val(),jQuery("#select2-acym__users__import__from_database__field--tablename-container").html(e);var a=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlUsers+"&task=getColumnsFromTable&tablename="+e;jQuery.post(a,function(e){jQuery(".acym__users__import__from_database__fields").html(e)})})},setCreateListFromImportPage:function(){var e=jQuery("#acym__users__import__create-list__button"),a=jQuery("#acym__users__generic__import__create-list__button");e.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!1)}),a.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!0)})},setActionListenerButtonCreateList:function(e){var a=jQuery("#acym__users__import__create-list"),t=jQuery("#acym__users__import__create-list__field"),i=jQuery("#acym__user__import__add-subscription__modal");if(a.is(":visible")){if(""===t.val())return;jQuery("#acym__users__import__create-list__loading-logo").show();var n=jQuery('[name="acym__entity_select__selected"]').val(),r=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlLists+"&task=ajaxCreateNewList&list_name="+encodeURIComponent(t.val())+"&generic="+(e?"1":"0")+"&selected="+n;jQuery.post(r,function(e){i.html(e),i.children().show(),i.children().append('<button class="close-button" data-close aria-label="Close reveal" type="button"><span aria-hidden="true">&times;</span></button>'),a.hide(),jQuery(window).trigger("refreshEntitySelect"),jQuery("#acym__users__import__create-list__loading-logo").hide(),acym_helperImport.setCreateListFromImportPage()})}else a.show(),t.focus();t.keydown(function(e){if("Enter"===e.key)return e.preventDefault(),!1})}},acym_helperInput={setInputFile:function(){jQuery(".acym__button__file").off("click").on("click",function(){var e=jQuery(this),a=e.prev();a.trigger("click"),a.off("change").on("change",function(){e.next().html(jQuery(this).val().split("\\").pop())})})},setMulticouple:function(){jQuery(".multikeyvalue_container_new").off("click").on("click",function(e){e.preventDefault(),jQuery(this).before('<div class="multikeyvalue_container_separator cell small-6"></div><input type="text" class="cell" placeholder="'+ACYM_JS_TXT.ACYM_DKIM_KEY+'" value=""/><input type="text" class="cell" placeholder="'+ACYM_JS_TXT.ACYM_VALUE+'" value="" />'),acym_helperInput.setNewMulticouple()}),acym_helperInput.setNewMulticouple()},setNewMulticouple:function(){jQuery('.multikeyvalue_container input[type="text"]').off("change").on("change",function(){var e={},a=jQuery('.multikeyvalue_container input[type="text"]');a.each(function(t){if(t%2!=1){var i=jQuery(this).val(),n=a[t+1].value;0!==i.length&&0!==n.length&&(e[i]=n)}}),jQuery('.multikeyvalue_container input[type="hidden"]').val(JSON.stringify(e))})}},acym_helperJoomlaGlobal={openMediaManager:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=jQuery("#acym__upload__modal__joomla-image__ui__iframe"),n="";(n=t?i.attr("data-acym-src-image"):i.attr("data-acym-src"))!==i.attr("src")&&i.attr("src",n);var r="1"===i.attr("data-acym-is-j4");i.css({height:r?"90%":"100%",width:"100%"}),r||jQuery("#acym__upload__modal__joomla-image__ui__actions").css("margin-top","-50px"),(r||!r&&!t)&&jQuery("#acym__upload__modal__joomla-image__ui__actions").show(),i.contents().find(".chzn-container-single").attr("style","").css("width","150px"),acym_helperJoomlaGlobal.openMediaManagerEvents(i,e,a),i.on("load",function(){acym_helperJoomlaGlobal.openMediaManagerEvents(i,e,a)}),jQuery("#acym__upload__modal__joomla-image").css("display","inherit")},openMediaManagerEvents:function(e,a,t){jQuery("#acym__upload__modal__joomla-image__ui__actions__cancel").off("click").on("click",function(){jQuery("#acym__upload__modal__joomla-image").hide(),jQuery("#acym__upload__modal__joomla-image__ui__actions").hide(),null!==t&&t()}),jQuery("#acym__upload__modal__joomla-image__ui__actions__select").off("click").on("click",function(){var t="1"===e.attr("data-acym-is-j4"),i=ACYM_ROOT_URI;if(t)e.contents().find(".media-breadcrumb-item a").each(function(){i+=jQuery(this).text().trim()+"/"});else{var n=e.contents().find("#folderframe").contents().find(".breadcrumbs p").text().trim();i+="".concat(n,"/")}var r=[];t?e.contents().find(".media-browser-grid .media-browser-item.selected .media-browser-item-info").each(function(){r.push(i+jQuery(this).text().trim())}):e.contents().find("#folderframe").contents().find('[name="rm[]"]').each(function(){if(jQuery(this)[0].checked){var e=jQuery(this).closest(".imgOutline").find(".imgPreview a").attr("title");e||(e=jQuery(this).closest(".imgOutline").find(".small").attr("title")),r.push(i+e)}}),0===r.length&&e.contents().find(".media-browser .media-browser-item.selected").each(function(){acym_helper.empty(jQuery(this).find(".size").text().trim())||r.push(i+jQuery(this).find(".name").text().trim())});var o={url:r.pop(),alt:jQuery("#acym__upload__context__image__alt").val(),title:jQuery("#acym__upload_context__image__title").val(),caption:jQuery("#acym__upload__context__image__caption").val()};a(o),jQuery("#acym__upload__modal__joomla-image").hide(),jQuery("#acym__upload__modal__joomla-image__ui__actions").hide()}),e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){jQuery("#acym__upload__modal__joomla-image").hide(),jQuery("#acym__upload__modal__joomla-image__ui__actions").hide(),null!==t&&t()}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var t=e.contents().find("#f_url").val();acym_helper.empty(t)||(t.match("^"+ACYM_JOOMLA_MEDIA_FOLDER)||t.match("^"+ACYM_JOOMLA_MEDIA_FOLDER_IMAGES))&&(t=ACYM_JOOMLA_MEDIA_IMAGE+t);var i={url:t,alt:e.contents().find("#f_alt").val(),title:e.contents().find("#f_title").val(),caption:e.contents().find("#f_caption").val()};a(i),jQuery("#acym__upload__modal__joomla-image").hide(),jQuery("#acym__upload__modal__joomla-image__ui__actions").hide()})}},acym_helperListing={initJsListing:function(){acym_helperListing.setCheckAll(),acym_helperListing.setOrdering(),acym_helperListing.setSelectActions(),acym_helperListing.setCheckboxesActionsListings(),acym_helperToolbar.initToolbar()},setSortableListing:function(){var e=function(){var e=jQuery(".acym__sortable__listing .acym__listing__row");e.filter(".acym__no__sortable").insertAfter(e.last()),e=jQuery(".acym__sortable__listing .acym__listing__row");var a=jQuery(".acym__sortable__listing").attr("data-sort-ctrl"),t=[];e.each(function(e){t.push(jQuery(this).attr("data-id-element"))}),acym_helper.post(ACYM_AJAX_URL,{ctrl:a,task:"ajaxSetOrdering",order:JSON.stringify(t)}).then(function(e){e.error&&console.log("Error can't order these elements")})},a=jQuery(".acym__sortable__listing");a.sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(a,t){e()}}),a.length&&e()},setCheckAll:function(){jQuery("#checkbox_all").off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]');jQuery(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")})},setOrdering:function(){jQuery("#acym__listing__ordering").off("change").on("change",function(){var e=jQuery(this).closest("#acym_form");"campaigns"!=e.find('[name="ctrl"]').val()&&e.find('[name="task"]').val("listing"),e.submit()}),jQuery(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=jQuery("#acym__listing__ordering__sort-order--input"),a=jQuery(this).closest("#acym_form");"asc"===e.val()?e.val("desc"):e.val("asc"),""===a.find('[name="task"]').val()&&a.find('[name="task"]').val("listing"),a.submit()}),jQuery(".acym__select__sort").on("change",function(){jQuery(this).closest("#acym_form").submit()})},setSelectActions:function(){function e(){var e=this.value,a=!1,t=jQuery('[name="elements_checked[]"]:checked').length;e&&"0"!==e||(e=this.dataset.action,t=1,a=!0);var i,n=function(){var e=new URLSearchParams(window.location.search),a=e.get("page"),t="";return a?t=a.replace(/^acymailing_/,""):e.get("ctrl")&&(t=e.get("ctrl")),t?t.replace("front",""):""}(),r=function(){var e=new URLSearchParams(window.location.search).get("task");return e||""}();i=["welcome","unsubscribe","specificListing","mailboxes","followup"].includes(r)?"followup"===r?{campaigns:{fastAction:ACYM_JS_TXT.ACYM_FOLLOW_UP,regularAction:ACYM_JS_TXT.ACYM_FOLLOW_UPS}}:{bounces:{fastAction:ACYM_JS_TXT.ACYM_MAILBOX_ACTION,regularAction:ACYM_JS_TXT.ACYM_MAILBOX_ACTIONS},campaigns:{fastAction:ACYM_JS_TXT.ACYM_EMAIL,regularAction:ACYM_JS_TXT.ACYM_EMAILS}}:{forms:{fastAction:ACYM_JS_TXT.ACYM_FORM,regularAction:ACYM_JS_TXT.ACYM_FORMS},users:{fastAction:ACYM_JS_TXT.ACYM_USER,regularAction:ACYM_JS_TXT.ACYM_USERS},fields:{fastAction:ACYM_JS_TXT.ACYM_FIELD,regularAction:ACYM_JS_TXT.ACYM_FIELDS},lists:{fastAction:ACYM_JS_TXT.ACYM_LIST,regularAction:ACYM_JS_TXT.ACYM_LISTS},segments:{fastAction:ACYM_JS_TXT.ACYM_SEGMENT,regularAction:ACYM_JS_TXT.ACYM_SEGMENTS},campaigns:{fastAction:ACYM_JS_TXT.ACYM_CAMPAIGN,regularAction:ACYM_JS_TXT.ACYM_CAMPAIGNS},mails:{fastAction:ACYM_JS_TXT.ACYM_TEMPLATE,regularAction:ACYM_JS_TXT.ACYM_TEMPLATES},override:{fastAction:ACYM_JS_TXT.ACYM_OVERRIDE,regularAction:ACYM_JS_TXT.ACYM_OVERRIDES},automation:{fastAction:ACYM_JS_TXT.ACYM_AUTOMATION,regularAction:ACYM_JS_TXT.ACYM_AUTOMATIONS},scenarios:{fastAction:ACYM_JS_TXT.ACYM_SCENARIO,regularAction:ACYM_JS_TXT.ACYM_SCENARIOS},bounces:{fastAction:ACYM_JS_TXT.ACYM_BOUNCE,regularAction:ACYM_JS_TXT.ACYM_BOUNCES},"":{fastAction:ACYM_JS_TXT.ACYM_ENTITY,regularAction:ACYM_JS_TXT.ACYM_ENTITY}};var o=a||1===t?i[n].fastAction:i[n].regularAction,_=jQuery("#acym__listing__action__delete-message").val(),l={delete:a||1===t?"".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE_ONE_X):"".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE_X," ").concat(_),setActive:"".concat(a||1===t?ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE_ONE_X:ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE_X),setInactive:"".concat(a||1===t?ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE_ONE_X:ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE_X),default:"".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)};e.includes("delete")&&(e="delete");var c=l[e]||l.default,s=acym_helper.sprintf(c,t>0?"".concat(t," ").concat(o.toLowerCase()):o.toLowerCase());if("duplicate"===e||"duplicateFollowup"===e||"export"===e||acym_helper.confirm(s)){var u=jQuery(this).closest("#acym_form"),m=jQuery(this).attr("data-ctrl");if(void 0!==m&&(u.find('[name="return_listing"]').val(u.find('[name="ctrl"]').val()),u.find('[name="ctrl"]').val(m)),jQuery(this).val()&&"0"!==jQuery(this).val()||(e=this.dataset.action),u.find('[name="task"]').val(a?e:jQuery(this).val()),a){jQuery(":checkbox").prop("checked",!1);var y="#checkbox_"+this.dataset.acyElementid;jQuery(y).prop("checked",!0)}u.submit()}else jQuery(this).val("0")}ACYM_IS_ADMIN&&jQuery("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),jQuery("#listing_actions").off("change").on("change",e),jQuery(".fastActions").on("click",e)},setCheckboxesActionsListings:function(){var e=jQuery('[name="elements_checked[]"]');e.off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]:checked').length;if(1===e?jQuery(".acym__campaign__duplicate").show():jQuery(".acym__campaign__duplicate").hide(),e>0?jQuery("#listing_actions").removeAttr("disabled"):jQuery("#listing_actions").attr("disabled","true"),jQuery('[name="elements_checked[]"]:not(:checked)').length>0?jQuery("#checkbox_all").prop("checked",!1):jQuery("#checkbox_all").prop("checked",!0),jQuery("#acym__users").length){var a=jQuery("#acym__users__listing__number_to_export"),t=jQuery("#acym__users__listing__number_to_add_to_list"),i=jQuery("#acym__users__listing__button--add-to-list");acym_helperListing.checkFiltersApplied(),0===e?(a.html("&nbsp;("+a.attr("data-default")+")"),i.addClass("disabled").attr("disabled","true"),t.html(e)):(a.html("&nbsp;("+e+")"),i.removeClass("disabled").removeAttr("disabled"),t.html(e))}if(jQuery("#acym__lists").length){var n=jQuery("#acym__lists__listing__number_to_export");0===e?n.html(n.attr("data-default")):n.html(e)}}),e.trigger("change"),jQuery("#acym__users").length&&(jQuery('#users_list, [name="users_search"]').on("change",function(){acym_helperListing.checkFiltersApplied()}),jQuery(".acym__status__select").on("click",function(){acym_helperListing.checkFiltersApplied()}))},checkFiltersApplied:function(){var e=jQuery('[name="elements_checked[]"]:checked').length,a=jQuery("#acym__users__listing__number_to_export");0===e&&(jQuery("#users_list").val()>0||jQuery('[name="users_search"]').val().length>0||jQuery(".acym__status__select").attr("acym-data-status").length>0)?a.hide():a.show()}},acym_helperModal={isMultilingualEdition:jQuery("#acym__wysid__edit__versions").length>0,initModal:function(){acym_helperModal.setPopupIframeToggleGlobal(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setButtonModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists(),acym_helperModal.getContentAjaxModalPaginationLists(),acym_helperModal.setButtonModalPaginationUsers(),acym_helperModal.setShowSelectedOrShowAllUsersModalPaginationUsers(),acym_helperModal.setSearchUserModalPaginationUsers(),acym_helperModal.setButtonConfirmModalPaginationUsers(),acym_helperModal.initOverlay()},initOverlay:function(){!jQuery("#acym_form").length||jQuery("#acym__editor__content").length||jQuery(".campaigns_edit_email").length||jQuery(".frontcampaigns_edit_email").length?jQuery(".reveal-overlay").appendTo("#acym_wrapper"):jQuery(".reveal-overlay").appendTo("#acym_form")},setResetMail:function(){jQuery(".acym__automation__action__reset__mail").off("click").on("click",function(){if(acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var e=jQuery(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),a=jQuery(this).parent(),t=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=deleteMailAutomation&id="+e.val();jQuery.post(t,function(t){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),a.html(""),acym_helperModal.setAjaxCallStartFrom()})}})},setAjaxCallStartFrom:function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getTemplateAjax",a=jQuery('input[name="return"]'),t=a.length>0&&-1!==a.val().indexOf("automation")||jQuery("#acym__automation__actions__json").length>0?"1":"0",i=jQuery('input[name="id"]').val(),n=jQuery('input[name="followup[id]"]');n.length>0&&(e+="&followup_id="+n.val()),this.isMultilingualEdition&&(e+="&is_multilingual_edition=1"),e+="&search="+jQuery("#acym_search_template_choose__ajax").val(),e+="&tag="+jQuery("#acym_tag_template_choose__ajax").val(),e+="&type="+jQuery("#acym__mail__type").val(),e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&editor="+jQuery("#acym__mail__edit__editor").val(),e+="&automation="+t,e+="&inmail="+(jQuery("#editor_autoSave").length>0?"1":"0"),e+="&id="+(void 0===i?0:i),e+="&acym_pagination_element_per_page="+jQuery('[name="acym_pagination_element_per_page"]').val(),a.length>=1&&(e+="&return="+encodeURIComponent(a.val())),jQuery("#acym__mail__list-id").length>0&&(e+="&list_id="+jQuery("#acym__mail__list-id").val()),jQuery.post(e,function(e){jQuery(".acym__template__choose__ajax").html(e),acym_helperModal.setSearchAjaxModalChooseTemplateStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.setStartFromHtmlEditor(),acym_helperModal.isMultilingualEdition&&acym_editorWysidVersions.setClickStartFromTemplate(),jQuery("#acym__automation__actions").length>0&&acym_helperModal.chooseOneTemplate()})},setPaginationAjaxStartFrom:function(){jQuery(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),jQuery("#acym_pagination__ajax").attr("value",jQuery(this).attr("page")),acym_helperModal.setAjaxCallStartFrom()}),ACYM_IS_ADMIN&&jQuery('[name="acym_pagination_element_per_page"]').select2({theme:"foundation",width:"100%"}),jQuery('#acym_pagination__ajax, [name="acym_pagination_element_per_page"]').on("change",function(){acym_helperModal.setAjaxCallStartFrom()})},setSearchAjaxModalChooseTemplateStartFrom:function(){acym_helperModal.setSearchValueStartFrom(),acym_helperModal.setSelectTagStartFrom(),acym_helperModal.setChoosenTypeStartFrom()},setStartFromHtmlEditor:function(){"acyEditor"!==jQuery("#acym__mail__edit__editor").val()&&jQuery("#acym__automation__actions").length<1&&(jQuery(".reveal .acym__templates__oneTpl").on("click",function(){window.location.replace(jQuery(this).find("a").attr("href"))}),jQuery(".acym__templates__choose__ribbon").on("click",function(){window.location.replace(jQuery(this).closest(".acym__templates__pic").find("a").attr("href"))}))},chooseOneTemplate:function(){jQuery(".acym__templates__oneTpl").off("click").on("click",function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=duplicateMailAutomation&id="+jQuery(this).attr("id"),a=jQuery("#acym__template__choose__modal"),t=jQuery('[data-modal-name="'+a.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+t.find('[name$="[mail_id]"]').val(),jQuery.post(e,function(e){if((e=acym_helper.parseJson(e,{error:!0,message:acym_helper.sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)})).error)return alert(e.message),!1;t.find(".acym__automation__action__mail__name").html(e.data.newMail.name+'<i class="cursor-pointer acymicon-close acym__color__red acym__automation__action__reset__mail margin-left-1"></i>'),t.find('[name$="[mail_id]"]').val(e.data.newMail.id),t.find('[data-task="createMail"]').html(ACYM_JS_TXT.ACYM_EDIT_MAIL),jQuery(".reveal").foundation("close"),acym_helperModal.setResetMail()})})},setSearchValueStartFrom:function(){var e=null;jQuery('input[name="mailchoose_search__ajax"]').off("keydown").on("keydown",function(a){var t=jQuery(this),i=t.val();if((i||"Backspace"===a.key)&&!acym_helper.empty(i)&&i.length>=2&&(clearTimeout(e),e=setTimeout(function(){jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom()},1500)),"Enter"===a.key)return a.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom(),!1;"Backspace"===a.key&&""==t.val()&&(clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",""),acym_helperModal.setAjaxAndResetPaginationStartFrom())}),jQuery("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(a){a.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",jQuery('input[name="mailchoose_search__ajax"]').attr("value")),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setAjaxAndResetPaginationStartFrom:function(){jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.setAjaxCallStartFrom()},setSelectTagStartFrom:function(){jQuery("#mailchoose_tag__ajax").on("change",function(e){jQuery("#acym_tag_template_choose__ajax").attr("value",jQuery(this).val()),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setChoosenTypeStartFrom:function(){jQuery("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(e){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym__type__choosen").removeClass("is-active"),jQuery(this).addClass("is-active").blur(),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setTemplateModal:function(e){e=void 0!==e,acym_helperModal.setAjaxAndResetPaginationStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.isMultilingualEdition&&acym_editorWysidVersions.setClickStartFromTemplate(),acym_helperModal.setClearButtonStartFrom(),e&&jQuery('[data-open="acym__template__choose__modal"]').on("click",function(){jQuery("#acym__template__choose__modal").attr("data-button",jQuery(this).attr("data-modal-name"))})},setClearButtonStartFrom:function(){jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(){jQuery('input[name="mailchoose_search__ajax"]').val(""),jQuery("#acym_search_template_choose__ajax").val(""),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setPopupIframeToggleGlobal:function(){jQuery("[data-iframe]").on("click",function(){var e=jQuery("#"+jQuery(this).attr("data-open")),a=jQuery(this).attr("data-reload"),t=jQuery(this).attr("data-ajax"),i=jQuery(this).attr("data-iframe-class"),n="true"===t?ACYM_AJAX_URL+jQuery(this).attr("data-iframe"):jQuery(this).attr("data-iframe");e.prepend('<iframe src="'+n+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){jQuery(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){jQuery(this).siblings("iframe").remove(),a&&location.reload()}),jQuery(".reveal-overlay").on("click",function(){e.find("iframe").remove(),a&&location.reload()})})},setShowSelectedOrShowAllListsModalPaginationLists:function(){var e=jQuery(".modal__pagination__show-selected"),a=jQuery(".modal__pagination__show-all");e.hasClass("selected")?(a.hide(),e.show()):(a.show(),e.hide()),jQuery(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(a.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(a.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1)),acym_helperModal.getContentAjaxModalPaginationLists()})},getContentAjaxModalPaginationLists:function(){var e=jQuery(".modal__pagination__listing__lists__in-form");if(0!==e.length){var a=ACYM_AJAX_URL+"&page=acymailing_lists&ctrl="+acym_helper.ctrlLists+"&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";a+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),a+="&selectedLists="+jQuery("#acym__modal__lists-selected").val(),a+="&alreadyLists="+jQuery("#acym__user__lists_already_add").val(),a+="&show_selected="+jQuery("#modal__pagination__show-information").val(),a+="&search_lists="+jQuery("#modal__pagination__search__lists").val(),a+=jQuery("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0",jQuery.get(a,function(a){jQuery("#modal__pagination__search__spinner").hide(),e.html(a),acym_helperModal.setAjaxPaginationModalPagination(),acym_helperModal.setListingAjaxUserModalPaginationLists(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists()})}},setAjaxPaginationModalPagination:function(){jQuery(".acym__pagination__page__ajax").off("click").on("click",function(){jQuery("#acym_pagination__ajax").val(jQuery(this).attr("page")),acym_helperModal.getContentAjaxModalPaginationLists()})},setListingAjaxUserModalPaginationLists:function(){jQuery(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=jQuery(this).next().children("label .modal__pagination__listing__lists__list-name "),a=jQuery("#acym__modal__lists-selected"),t=a.val(),i=[];t=""===t?[]:acym_helper.parseJson(t),jQuery(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),t.splice(t.indexOf(parseInt(jQuery(this).val())),1)),jQuery(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(parseInt(jQuery(this).val()))}),jQuery.each(i,function(e){-1===jQuery.inArray(i[e],t)&&t.push(i[e])}),a.val(JSON.stringify(t)),jQuery("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),jQuery("#acym__popup__subscription__change").trigger("change")})},setSearchListModalPaginationLists:function(){var e=null,a=jQuery('input[name="modal_search_lists"]'),t=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__search__lists");a.off("keydown").on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),acym_helperModal.setSearchLists(e))}),a.off("keyup").on("keyup",function(a){var n=jQuery(this),r=n.val();(r||"Backspace"===a.key)&&""!=r&&r.length>=2?(jQuery("#modal__pagination__search__spinner").show(),t.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",r),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists()},1e3)):clearTimeout(e),""==n.val()&&(clearTimeout(e),t.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists())}),jQuery(".modal__pagination__search .acym__search__button").off("click").on("click",function(a){a.preventDefault(),acym_helperModal.setSearchLists(e)}),jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(n){n.preventDefault(),clearTimeout(e),i.attr("value",""),a.attr("value",""),t.show(),acym_helperModal.getContentAjaxModalPaginationLists()})},setShowSelectedOrShowAllUsersModalPaginationUsers:function(){var e=jQuery(".modal__pagination__users__show-selected"),a=jQuery(".modal__pagination__users__show-all");e.hasClass("selected")?(a.hide(),e.show()):(a.show(),e.hide()),jQuery(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(a.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(a.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1))})},setSearchUserModalPaginationUsers:function(){var e=null,a=jQuery('input[name="modal_search_users"]'),t=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__users__search__input");a.off("keydown").on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),acym_helperModal.setSearchUsers(e))}),a.off("keyup").on("keyup",function(a){var n=jQuery(this).val();(n||"Backspace"===a.key)&&""!=n&&n.length>=2?(jQuery("#modal__pagination__users__search__spinner").show(),t.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",n),jQuery("#acym_pagination__ajax").attr("value",1)},1e3)):clearTimeout(e),""==n&&(clearTimeout(e),t.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1))}),jQuery(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(a){a.preventDefault(),acym_helperModal.setSearchUsers(e)}),jQuery(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(n){n.preventDefault(),clearTimeout(e),i.attr("value",""),a.attr("value",""),t.show()})},setSearchUsers:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__users__search__input").attr("value",jQuery('input[name="modal_search_users"]').attr("value"))},setSearchLists:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__search__lists").attr("value",jQuery('input[name="modal_search_lists"]').attr("value")),acym_helperModal.getContentAjaxModalPaginationLists()},setButtonModalPaginationLists:function(){jQuery(".modal__pagination__button-open").off("click").on("click",function(){acym_helperModal.getContentAjaxModalPaginationLists()})},setButtonModalPaginationUsers:function(){jQuery(".modal__pagination__users__button-open").off("click").on("click",function(){jQuery("#acym__modal__users-selected").val("")})},setButtonConfirmModalPaginationUsers:function(){jQuery("#modal__pagination__users__confirm").off("click").on("click",function(){var e=jQuery("#acym__modal__users__form-task").val();jQuery('input[name="task"]').val(e),jQuery("#acym_form").submit()})}},acym_helperPagination={setPaginationGlobal:function(){jQuery(".acym__pagination__page").off("click").on("click",function(){jQuery("#acym_pagination").val(jQuery(this).attr("page")),jQuery("#acym_form").submit()}),jQuery(".acym__lists__filter__tags").off("change").on("change",function(){jQuery("#select2-lists_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__templates__filter__tags").off("change").on("change",function(){jQuery("#select2-mails_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__choose_template__filter__tags").on("change",function(){jQuery("#acym_pagination").val(1),jQuery("#acym_form").submit()}),jQuery(".acym__campaigns__filter__tags").off("change").on("change",function(){jQuery("#select2-campaigns_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__type__choosen").off("click").on("click",function(){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym_ordering_option").removeClass("is-active"),jQuery(this).addClass("is-active"),acym_helperPagination.initPagination()}),jQuery(".acym__filter__status").off("click").on("click",function(){jQuery("#acym_filter_status").val(jQuery(this).attr("acym-data-status")),acym_helperPagination.initPagination()}),ACYM_IS_ADMIN&&jQuery(".acym__select__pagination__dropdown").select2({theme:"foundation",width:"60px"}),jQuery("#acym_pagination_element_per_page").on("change",function(){jQuery("#formSubmit").trigger("click")})},initPagination:function(){jQuery("#acym_pagination").val(1),jQuery("#acym_form").trigger("submit")}},acym_helperPreview={setPreviewIframe:function(){jQuery(".acym__wysid__hidden__save__content").off("change").on("change",function(){acym_helperPreview.setPreviewIframe()}),acym_helperPreview.addIframePreview("acym__wysid__email__preview","desktop"),jQuery("#acym__wysid__view__desktop").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!0)}),jQuery("#acym__wysid__view__smartphone").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!1)})},addIframePreview:function(e,a,t){t=null!=t;var i,n=!0,r=jQuery("#acym__wysid__email__preview"),o="acym__wysid__preview__iframe__"+e,_='<div class="cell auto"></div>';_+='<iframe id="'+o+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"></iframe>',_+='<div class="cell auto"></div>',_+='<div class="acym__fadeout"></div>',_+='<i class="acymicon-keyboard-arrow-down acym__preview__extend acym__preview__toggle acym__preview-toggle"></i>',_+='<i class="acymicon-sort acym__preview-toggle acym__preview__toggle__top"></i>',jQuery("#"+e).html(_);var l=jQuery("#"+o);"smartphone"==a?l.css("maxWidth","425px"):l.css("maxWidth","inherit"),l.css("height","100%"),i=l.css("height");jQuery("#acym__campaign__summary").length?(l.css({height:"200px"}),r.css("padding-bottom","200px"),l.contents().find("body").css("overflow","hidden"),jQuery(".acym__preview-toggle").off("click").on("click",function(){jQuery(".acym__fadeout").toggle(),n?(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard-arrow-down").removeClass("acym__preview__extend").addClass("acymicon-keyboard-arrow-up").addClass("acym__preview__collapse"),l.css({height:i}).contents().find("body").css("overflow","auto"),r.css("padding-bottom",i),n=!n):(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard-arrow-up").removeClass("acym__preview__collapse").addClass("acymicon-keyboard-arrow-down").addClass("acym__preview__extend"),l.css({height:"200px"}).contents().find("body").css("overflow","hidden"),r.css("padding-bottom","200px"),n=!n)})):(jQuery(".acym__fadeout").hide(),jQuery(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?acym_helperPreview.loadIframe(o,t):l.on("load",function(){acym_helperPreview.loadIframe(o,t)})},setTemplateForPreview:function(e){var a=jQuery("#acym__wysid__template"),t=e?"desktop":"smartphone";a.find(".acym__wysid__row__selector").remove(),jQuery("#acym__template__preview").val(a.html()),jQuery(".acym__wysid__fullscreen__modal__content__container").hide(),jQuery("#acym__wysid__fullscreen__modal__content__"+t).closest(".acym__wysid__fullscreen__modal__content__container").show(),acym_helperPreview.addIframePreview("acym__wysid__fullscreen__modal__content__"+t,t,!0),jQuery("#acym__wysid__fullscreen__modal").css("display","flex").on("click",function(){acym_helperEditorWysid.setColumnRefreshUiWYSID(!1),acym_editorWysidTinymce.addTinyMceWYSID(),acym_editorWysidRowSelector.setZoneAndBlockOverlays(),jQuery(this).css("display","none")})},loadIframe:function(e,a){var t='<div id="acym__wysid__template" class="cell acym__foundation__for__email">';t+='<table class="body"><tbody><tr>',t+='<td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(239, 239, 239);"><center>',t+='<table align="center" border="0" cellpadding="0" cellspacing="0"><tbody>',t+='<tr><td class="acym__wysid__row ui-droppable ui-sortable">',t+='<table class="row acym__wysid__row__element" border="0" cellpadding="0" cellspacing="0"><tbody style="background-color: transparent;">',t+='<tr><th class="small-12 medium-12 large-12 columns">',t+='<table class="acym__wysid__column" style="min-height: 75px; display: block;" border="0" cellpadding="0" cellspacing="0"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table>',t+="</th></tr>",t+="</tbody></table>",t+="</td></tr>",t+="</tbody></table>",t+="</center></td>",t+="</tr></tbody></table>",t+="</div>";var i=jQuery("#"+e).contents(),n=i.find("head"),r=i.find("body"),o=jQuery(".acym__wysid__hidden__save__stylesheet").attr("value"),_=jQuery(".acym__wysid__hidden__save__content"),l=jQuery(".acym__hidden__mail__content").val(),c=jQuery("#acym__wysid__template"),s=c.find("#acym__wysid__default").detach();c.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove();var u=c.html();c.find(".acym__wysid__column__first").before(s),n.append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'),n.append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),n.append("<style>"+ACYM_FIXES_FOR_EMAIL+"</style>"),n.append('<style type="text/css">#acym__wysid__template center > table { width: 100%; }</style>'),void 0!==o&&""!==o&&setTimeout(function(){n.append("<style>"+o+"</style>")},100);var m="";if(a?(_.attr("value",'<div id="acym__wysid__template" class="cell">'+u+"</div>"),m='<div id="acym__wysid__template" class="cell">'+jQuery("#acym__template__preview").val()+"</div>"):""===_.attr("value")&&(""===u?_.attr("value",t):_.attr("value",'<div id="acym__wysid__template" class="cell">'+u+"</div>")),"empty"===_.attr("value")&&_.attr("value",t),""!==l){var y=jQuery(".acym__hidden__mail__stylesheet").html();void 0!==y&&""!==y&&n.append("<style>"+y+"</style>"),r.html(""),r.append(l)}""!==m?r.css("margin","0").append(m):r.css("margin","0").append(_.attr("value")),i.find("a").attr("target","_blank"),i.find('a[href^="#"]').attr("target","_top"),jQuery(document).trigger("acy_preview_loaded")}},acym_helperRadio={setRadioIconsGlobal:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery('[for="'+jQuery(this).attr("data-radio")+'"]').trigger("click")}),jQuery('.acym_radio_group > input[type="radio"]').off("change").on("change",function(){var e=jQuery(this).attr("name"),a=jQuery('input[name="'+e+'"]:checked').val(),t=jQuery('input[name="'+e+'"]');t.each(function(){var e=jQuery(this).attr("id"),t=jQuery(this).attr("acym-data-related");jQuery(this).val()!==a&&(jQuery('i[data-radio="'+e+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+e+'"].acym_radio_checked').hide(),acym_helper.empty(t)||jQuery("."+t).hide())}),t.each(function(){var e=jQuery(this).attr("id"),t=jQuery(this).attr("acym-data-related");jQuery(this).val()===a&&(jQuery('i[data-radio="'+e+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+e+'"].acym_radio_checked').show(),acym_helper.empty(t)||jQuery("."+t).show())})}).change()}},acym_helperSearch={setClearSearch:function(){jQuery(".acym__search-clear").off("click").on("click",function(){jQuery(".acym__search-field").attr("value",""),acym_helperPagination.initPagination()})}},acym_helperSegments={beforeSave:function(){var e=jQuery("[name^=acym_action]").length>0;return e||acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_PLEASE_SELECT_FILTERS,"error",!0),e}},acym_helperSelectionMultilingual={mainLanguage:"",currentLanguage:"",previousLanguage:"",translation:{},defaultTranslation:{},$translationInput:"",mainParams:{},init:function(e){var a=jQuery("#acym__multilingual__selection-".concat(e," .acym__multilingual__selection__main-language"));if(a.length?this.currentLanguage=this.mainLanguage=a.val():this.currentLanguage=this.mainLanguage="defaultLanguage",this.$translationInput=jQuery("#acym__multilingual__selection-".concat(e," .acym__multilingual__selection__translation")),this.$defaultTranslationInput=jQuery("#acym__multilingual__selection-".concat(e," .acym__multilingual__selection__translation__default")),this.$translationInput.length&&void 0!==this.$translationInput.val())try{this.translation=acym_helper.empty(this.$translationInput.val())?{}:acym_helper.parseJson(this.$translationInput.val())}catch(e){this.translation={}}else this.translation={};if(this.$defaultTranslationInput.length&&void 0!==this.$defaultTranslationInput.val())try{this.defaultTranslation=acym_helper.empty(this.$defaultTranslationInput.val())?{}:acym_helper.parseJson(this.$defaultTranslationInput.val())}catch(e){this.defaultTranslation={}}else this.defaultTranslation={};this.translation=acym_helper.empty(this.$translationInput.val())?{}:acym_helper.parseJson(this.$translationInput.val()),this.defaultTranslation=acym_helper.empty(this.$defaultTranslationInput.val())?{}:acym_helper.parseJson(this.$defaultTranslationInput.val()),"[]"===JSON.stringify(this.translation)&&(this.translation={}),"function"==typeof acym_helperSelectionMultilingual["setMainParams_".concat(e)]&&acym_helperSelectionMultilingual["setMainParams_".concat(e)](),"function"==typeof acym_helperSelectionMultilingual["updateTranslation_".concat(e)]&&acym_helperSelectionMultilingual["updateTranslation_".concat(e)](),jQuery("#acym__multilingual__selection-".concat(e," .acym__multilingual__selection__one")).off("click").on("click",function(){if(!jQuery(this).hasClass("acym__multilingual__selection__one__selected")){var a=jQuery(this).attr("data-acym-code");acym_helper.empty(a)||(jQuery("#acym__multilingual__selection-".concat(e," .acym__multilingual__selection__one")).removeClass("acym__multilingual__selection__one__selected"),jQuery(this).addClass("acym__multilingual__selection__one__selected"),"function"==typeof acym_helperSelectionMultilingual["changeLanguage_".concat(e)]&&(acym_helperSelectionMultilingual.previousLanguage=acym_helperSelectionMultilingual.currentLanguage,acym_helperSelectionMultilingual.currentLanguage=a,acym_helperSelectionMultilingual["changeLanguage_".concat(e)](a)))}})},changeLanguage_list:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={name:"",display_name:"",description:""});var a=e===this.mainLanguage?this.mainParams.name:this.translation[this.currentLanguage].name,t=e===this.mainLanguage?this.mainParams.description:this.translation[this.currentLanguage].description,i=e===this.mainLanguage?this.mainParams.display_name:this.translation[this.currentLanguage].display_name;jQuery('[name="list[name]"]').val(a),jQuery('[name="list[display_name]"]').val(i),jQuery('[name="list[description]"]').val(t)},updateTranslation_list:function(){jQuery('[name="list[name]"], [name="list[description]"], [name="list[display_name]"]').off("keyup").on("keyup",function(){var e=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,a=jQuery(this).attr("name"),t=a.substring(a.indexOf("[")+1,a.lastIndexOf("]"));e?acym_helperSelectionMultilingual.mainParams[t]=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][t]=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},setMainParams_list:function(){this.mainParams.name=jQuery('[name="list[name]"]').val(),this.mainParams.description=jQuery('[name="list[description]"]').val(),this.mainParams.display_name=jQuery('[name="list[display_name]"]').val()},setMainParams_field:function(){this.mainParams.name=jQuery('[name="field[name]"]').val()},updateTranslation_field:function(){jQuery('[name="field[name]"]').off("keyup").on("keyup",function(){acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage?acym_helperSelectionMultilingual.mainParams.name=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].name=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},changeLanguage_field:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={name:""});var a=e===this.mainLanguage?this.mainParams.name:this.translation[this.currentLanguage].name;jQuery('[name="field[name]"]').val(a)},setMainParams_campaign:function(){var e=jQuery('[name="senderInformation[from_name]"]'),a=jQuery('[name="senderInformation[from_email]"]'),t=jQuery('[name="senderInformation[reply_to_name]"]'),i=jQuery('[name="senderInformation[reply_to_email]"]');this.mainParams.from_name=e.val(),this.mainParams.from_email=a.val(),this.mainParams.reply_to_name=t.val(),this.mainParams.reply_to_email=i.val(),this.defaultTranslation[this.mainLanguage]={from_name:e.attr("placeholder"),from_email:a.attr("placeholder"),reply_to_name:t.attr("placeholder"),reply_to_email:i.attr("placeholder")}},updateTranslation_campaign:function(){jQuery('[name="senderInformation[from_name]"], [name="senderInformation[from_email]"], [name="senderInformation[reply_to_name]"], [name="senderInformation[reply_to_email]"]').off("keyup").on("keyup",function(){var e=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,a="from_name";"senderInformation[from_email]"===jQuery(this).attr("name")?a="from_email":"senderInformation[reply_to_name]"===jQuery(this).attr("name")?a="reply_to_name":"senderInformation[reply_to_email]"===jQuery(this).attr("name")&&(a="reply_to_email"),e?acym_helperSelectionMultilingual.mainParams[a]=jQuery(this).val():(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][a]=jQuery(this).val(),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation)))})},changeLanguage_campaign:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={from_name:"",from_email:"",reply_to_name:"",reply_to_email:""});var a=e===this.mainLanguage?this.mainParams.from_name:this.translation[this.currentLanguage].from_name,t=e===this.mainLanguage?this.mainParams.from_email:this.translation[this.currentLanguage].from_email,i=e===this.mainLanguage?this.mainParams.reply_to_name:this.translation[this.currentLanguage].reply_to_name,n=e===this.mainLanguage?this.mainParams.reply_to_email:this.translation[this.currentLanguage].reply_to_email,r=jQuery('[name="senderInformation[from_name]"]'),o=jQuery('[name="senderInformation[from_email]"]'),_=jQuery('[name="senderInformation[reply_to_name]"]'),l=jQuery('[name="senderInformation[reply_to_email]"]');if(r.val(a),o.val(t),_.val(i),l.val(n),!acym_helper.empty(this.defaultTranslation[this.currentLanguage])){var c=ACYM_JS_TXT.ACYM_DEFAULT+": ";void 0!==this.defaultTranslation[this.currentLanguage].from_name&&r.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].from_name),void 0!==this.defaultTranslation[this.currentLanguage].from_email&&o.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].from_email),void 0!==this.defaultTranslation[this.currentLanguage].reply_to_name&&_.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].reply_to_name),void 0!==this.defaultTranslation[this.currentLanguage].reply_to_email&&l.attr("placeholder",c+this.defaultTranslation[this.currentLanguage].reply_to_email)}},setMainParams_configuration:function(){this.mainParams.from_name=jQuery('[name="config[from_name]"]').val(),this.mainParams.from_email=jQuery('[name="config[from_email]"]').val(),this.mainParams.replyto_name=jQuery('[name="config[replyto_name]"]').val(),this.mainParams.replyto_email=jQuery('[name="config[replyto_email]"]').val(),this.mainLanguage=acym_helperSelectionMultilingual.mainLanguage||{}},updateTranslation_configuration:function(){jQuery('[name="config[from_name]"], [name="config[from_email]"], [name="config[replyto_name]"], [name="config[replyto_email]"]').off("keyup").on("keyup",function(){var e=jQuery("#from_as_replyto").is(":checked"),a=acym_helperSelectionMultilingual.mainLanguage===acym_helperSelectionMultilingual.currentLanguage,t="from_name";"config[from_email]"===jQuery(this).attr("name")?t="from_email":"config[replyto_name]"===jQuery(this).attr("name")?t="replyto_name":"config[replyto_email]"===jQuery(this).attr("name")&&(t="replyto_email");var i="";a?(acym_helperSelectionMultilingual.mainParams[t]=jQuery(this).val(),e&&-1!==t.indexOf("from")&&(i=t.replace("from","replyto"),acym_helperSelectionMultilingual.mainParams[i]=jQuery(this).val())):(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][t]=jQuery(this).val(),e&&-1!==t.indexOf("from")&&(i=t.replace("from","replyto"),acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage][i]=jQuery(this).val()),acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation))),""!==i&&jQuery('[name="config['.concat(i,']"]')).val(jQuery(this).val())}),jQuery("#from_as_replyto").on("change",function(){if(!jQuery(this).is(":checked")||acym_helperSelectionMultilingual.currentLanguage===acym_helperSelectionMultilingual.mainLanguage)return!1;jQuery('[name="config[replyto_name]"]').val(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].from_name),jQuery('[name="config[replyto_email]"]').val(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].from_email)})},changeLanguage_configuration:function(e){void 0===this.translation[this.currentLanguage]&&e!==this.mainLanguage&&(this.translation[this.currentLanguage]={from_name:"",from_email:"",replyto_name:"",replyto_email:""});var a=e===this.mainLanguage?this.mainParams.from_name:this.translation[this.currentLanguage].from_name,t=e===this.mainLanguage?this.mainParams.from_email:this.translation[this.currentLanguage].from_email,i=e===this.mainLanguage?this.mainParams.replyto_name:this.translation[this.currentLanguage].replyto_name,n=e===this.mainLanguage?this.mainParams.replyto_email:this.translation[this.currentLanguage].replyto_email;jQuery('[name="config[from_name]"]').val(a),jQuery('[name="config[from_email]"]').val(t),jQuery('[name="config[replyto_name]"]').val(i),jQuery('[name="config[replyto_email]"]').val(n)},setMainParams_configuration_subscription:function(){var e=this;for(var a in this.mainParams.unsub_survey=[],jQuery(".acym__customs__answer__answer").each(function(a,t){e.mainParams.unsub_survey[a]=jQuery(t).val()}),this.mainLanguage=acym_helperSelectionMultilingual.mainLanguage||{},this.translation[this.mainLanguage]||(this.translation[this.mainLanguage]={}),this.translation[this.mainLanguage].unsub_survey=this.mainParams.unsub_survey,this.translation)this.translation.hasOwnProperty(a)&&this.synchronizeUnsubSurvey(a)},updateTranslation_configuration_subscription:function(){jQuery(document).off("keyup",".acym__customs__answer__answer").on("keyup",".acym__customs__answer__answer",function(){var e=jQuery(this).val(),a=jQuery(".acym__customs__answer__answer").index(this);acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage]||(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage]={}),acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].unsub_survey||(acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].unsub_survey=[]);var t=acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].unsub_survey;Array.isArray(t)||(t=[t]),t[a]=e,acym_helperSelectionMultilingual.translation[acym_helperSelectionMultilingual.currentLanguage].unsub_survey=t,acym_helperSelectionMultilingual.$translationInput.val(JSON.stringify(acym_helperSelectionMultilingual.translation))})},changeLanguage_configuration_subscription:function(e){for(var a in this.translation[this.mainLanguage]||(this.translation[this.mainLanguage]={unsub_survey:[]}),this.translation)this.translation.hasOwnProperty(a)&&this.synchronizeUnsubSurvey(a);if(e===this.mainLanguage){var t=this.translation[this.mainLanguage].unsub_survey;jQuery(".acym__customs__answer__answer").each(function(e){jQuery(this).val(t[e]||"")})}else if(this.translation[e]&&this.translation[e].unsub_survey){var i=this.translation[e].unsub_survey;jQuery(".acym__customs__answer__answer").each(function(e){jQuery(this).val(i[e]||"")})}acym_helperSelectionMultilingual.currentLanguage===acym_helperSelectionMultilingual.mainLanguage&&(acym_helperSelectionMultilingual.mainParams.unsub_survey||(acym_helperSelectionMultilingual.mainParams.unsub_survey=[]),jQuery(".acym__customs__answer__answer").each(function(e,a){acym_helperSelectionMultilingual.mainParams.unsub_survey[e]=jQuery(a).val()})),jQuery("form").on("submit",function(){jQuery('#acym__multilingual__selection-configuration_subscription .acym__multilingual__selection__one[data-acym-code="'.concat(acym_helperSelectionMultilingual.mainLanguage,'"]')).trigger("click")}),jQuery('[name="config[unsub_survey]"]').val(JSON.stringify(this.translation[this.mainLanguage].unsub_survey)),jQuery('[name="config[unsub_survey_translation]"]').val(JSON.stringify(this.translation))},synchronizeUnsubSurvey:function(e){this.translation[e].unsub_survey||(this.translation[e].unsub_survey=[]);for(var a=this.translation[e].unsub_survey;a.length<this.mainParams.unsub_survey.length;)a.push("");a.length>this.mainParams.unsub_survey.length&&a.splice(this.mainParams.unsub_survey.length);for(var t=0;t<a.length;t++)""===a[t]&&(a[t]=this.translation[this.mainLanguage].unsub_survey[t]);this.translation[e].unsub_survey=a}},acym_helperSelectionPage={initSelectionPage:function(){0===jQuery(".acym__selection_disabled").length&&(this.setSelectionElement(!1,!1,void 0,"#acym__selection__button-select"),this.setSelectionButton(),this.setCampaignSelectionButton(),this.handlePromotionPopup(),this.setCampaignTabs())},setSelectionElement:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=void 0!==n.prefix?n.prefix:"",o=jQuery("".concat(r," .acym__selection__card:not(.acym__selection__card__disabled), ").concat(r," .acym__campaign__selection__card:not(.acym__selection__card__disabled)"));o.off("click").on("click",function(){jQuery(this).hasClass("acym__selection__card-selected")||(o.removeClass("acym__selection__card-selected"),jQuery(this).addClass("acym__selection__card-selected"),e&&acym_helperSelectionPage.setDisplaySettings(this),void 0!==t&&t(this),!jQuery(this).hasClass("acym__selection__card__promotion")&&jQuery(this).hasClass("acym__campaign__selection__card")&&jQuery(this).hasClass("acym__selection__scroll")&&void 0!==i&&document.querySelector(i).scrollIntoView({behavior:"smooth",block:"center"}),a||(jQuery(this).hasClass("acym__selection__card__promotion")?(acym_helperSelectionPage.updatePromotionPopupText(this),jQuery("#acym__selection__button-select").attr("disabled","true"),jQuery(".acym__promotion__popup__container").css("display","flex")):jQuery(this).hasClass("acym__selection__select-card")&&""===jQuery(this).find(".acym__selection__select-card__select").val()?jQuery("#acym__selection__button-select").attr("disabled","true"):jQuery("#acym__selection__button-select").removeAttr("disabled")))})},setSelectionButton:function(){jQuery("#acym__selection__button-select").off("click").on("click",function(){var e=jQuery(".acym__selection__card-selected"),a=e.attr("acym-data-link");if(-1!==a.indexOf("{dataid}")){var t=e.find(".acym__email__new__card__select").val();a=a.replace("{dataid}",t)}window.location.href=a})},setDisplaySettings:function(e){var a,t,i=_createForOfIteratorHelper(document.getElementsByClassName("send_settings"));try{for(i.s();!(t=i.n()).done;){var n=t.value;n.id==="".concat(e.id,"_settings")&&(a=n),n.style.display="none"}}catch(e){i.e(e)}finally{i.f()}void 0!==a&&(a.style.display="flex")},setCampaignSelectionButton:function(){jQuery(".acym__campaign__selection__button-select").off("click").on("click",function(){if(jQuery(this).hasClass("acym__promotion__disabled__button"))jQuery(".acym__promotion__popup__container").css("display","flex");else{var e=jQuery(this).attr("acym-data-link");if(e&&-1!==e.indexOf("{dataid}")){var a=jQuery(this).closest(".acym__campaign__selection__card").find(".acym__email__new__card__select").val();e=e.replace("{dataid}",a)}e&&(window.location.href=e)}})},handlePromotionPopup:function(){var e=jQuery(".acym__promotion__popup__container"),a=jQuery(".acym__promotion__popup__content"),t="",i=jQuery(".acym__selection__card")?".acym__selection__card":".acym__campaign__selection__card";t=".acym__selection__card"===i?"acym__selection":"acym__campaign__selection",jQuery(".acym__promotion__popup__back").off("click").on("click",function(){e.css("display","none"),jQuery(".".concat(t,"__card-selected")).removeClass("".concat(t,"__card-selected")),jQuery("#".concat(t,"__button-select")).attr("disabled","true")}),e.off("click").on("click",function(i){a.is(i.target)||0!==a.has(i.target).length||(e.css("display","none"),jQuery(".".concat(t,"__card-selected")).removeClass("".concat(t,"__card-selected")),jQuery("#".concat(t,"__button-select")).attr("disabled","true"))})},setCampaignTabs:function(){jQuery(".step").off("click").on("click",function(){jQuery(".step").removeClass("current_step"),jQuery(this).addClass("current_step");var e=jQuery(this).attr("data-tab");jQuery("#acym__campaign__selection__newsletters, #acym__campaign__selection__onetime").hide(),jQuery("#".concat(e)).show()})},updatePromotionPopupText:function(e){var a=jQuery(e);a.hasClass("scheduled")?a.hasClass("scheduled")&&(console.log("Essential"),jQuery("#promotionPopup .acym__enterprise__popup").hide(),jQuery("#promotionPopup .acym__essential__popup").show()):(jQuery("#promotionPopup .acym__enterprise__popup").show(),jQuery("#promotionPopup .acym__essential__popup").hide())}},acym_helperSwitch={setSwitchFieldsGlobal:function(){jQuery(".switch-label").on("click",function(){if(!jQuery(this).hasClass("disabled")){var e=jQuery('input[data-switch="'+jQuery(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}})},setButtonSwitch:function(){var e=jQuery("button[acym-button-switch-type]");e.off("click").on("click",function(e){e.preventDefault();var a=jQuery(this);a.parent().find('> .button:not("button-secondary")').addClass("button-secondary"),a.removeClass("button-secondary"),jQuery('a[data-tab-identifier="'+a.attr("acym-button-switch-type").toLowerCase()+'"]').trigger("click")}),e.first().trigger("click")}},acym_helperTab={initTab:function(){acym_helperTab.setTab(),acym_helperTab.reloadRadioButtons()},setTab:function(){jQuery(".acym_tab").off("click").on("click",function(e){if("true"===jQuery(this).attr("data-empty"))return!1;var a=jQuery(this).closest(".tabs").attr("id");localStorage.setItem("acy"+a,jQuery(this).attr("data-tab-identifier"));var t=jQuery(this).attr("data-tab-identifier");jQuery(".acym__tabs__inbar__element").each(function(){var e=jQuery(this).attr("acym-data-identifier");e.length>0&&(e===t?jQuery(this).show():jQuery(this).hide())})});var e=jQuery(".tabs").attr("id"),a=localStorage.getItem("acy"+e),t=jQuery("#"+e).find('a[data-tab-identifier="'+a+'"]');t.length&&!t.closest(".tabs-title").hasClass("tabs-title-empty")?t.trigger("click"):jQuery("#"+e+" .acym_tab").each(function(){if(!jQuery(this).closest(".tabs-title").hasClass("tabs-title-empty"))return jQuery(this).trigger("click"),!1})},reloadRadioButtons:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery("#"+jQuery(this).attr("data-radio")).trigger("click")}),jQuery('input[type="radio"]').on("change",function(){var e=jQuery('input[name="'+jQuery(this).attr("name")+'"]:checked').val();jQuery('input[name="'+jQuery(this).attr("name")+'"]').each(function(){jQuery(this).val()===e?(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').show()):(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').hide())})}).change()}},acym_helperThumbnail={setAjaxSaveThumbnail:function(){if(!ACYM_IS_ADMIN)return!0;var e=jQuery("#editor_thumbnail"),a=jQuery('[name="thumbnail"]');if(-1!==e.val().indexOf(".png"))return!0;if(""===e.val())return""!==a.val()&&e.val(a.val()),!0;var t=a.val();a.val("");var i={ctrl:acym_helper.ctrlMails,task:"setNewThumbnail",content:e.val(),thumbnail:t,mailId:jQuery("#editor_mailid").val()};return acym_helper.post(ACYM_AJAX_URL,i).then(function(a){a.error?(acym_helperNotification.addNotification(acym_helper.sprintf(ACYM_JS_TXT.ACYM_COULD_NOT_SAVE_THUMBNAIL_ERROR_X,a.message),"error"),e.val("")):e.val(a.data.fileName)})}},acym_helperToggle={initJsToggle:function(){acym_helperToggle.setSwitchToggle(),acym_helperToggle.setToggleArrow(),acym_helperToggle.setToggleGlobal(),acym_helperToggle.setToggleCheckboxesGlobal(),acym_helperToggle.setSelectToggle(),acym_helperToggle.setShowMore()},setToggleGlobal:function(){jQuery(".acym_toggleable").off("click").on("click",function(){var e=jQuery(this);e.attr("class","acymicon-circle-o-notch acymicon-spin");var a=e.attr("data-acy-table"),t=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),n=e.attr("data-acy-newvalue"),r=ACYM_TOGGLE_URL+"&task=toggle&table="+a+"&field="+t+"&id="+i+"&value="+n;acym_helper.get(r).then(function(e){if(e.error)console.error(e.message);else{var n=jQuery("[data-acy-table="+a+"][data-acy-field="+t+"][data-acy-elementid="+i+"]");n.attr("data-acy-newvalue",e.data.value).attr("class",e.data.classes),void 0!==e.data.tooltip&&n.closest(".acym__tooltip").find(".acym__tooltip__text").html(e.data.tooltip)}})}),jQuery(".acym_subscription.acym_toggleable").off("click").on("click",function(){var e=jQuery(this).addClass("acymicon-circle-o-notch acymicon-spin"),a=e.attr("data-acy-user-id"),t=e.attr("data-acy-list-id"),i=e.attr("data-acy-list-name"),n=e.attr("data-acy-task"),r=e.attr("data-acy-newvalue"),o=ACYM_TOGGLE_URL+"&task="+n+"&userid="+a+"&listid="+t,_=!1;e.hasClass("acymicon-circle")&&(_=!0),e.removeClass("acymicon-radio-button-unchecked").removeClass("acymicon-circle"),acym_helper.get(o).then(function(a){var t;a.error||(e.removeClass("acymicon-circle-o-notch acymicon-spin"),_?(e.addClass("acymicon-radio-button-unchecked").attr("data-acy-task","subscribeOnClick"),t=acym_helper.sprintf(ACYM_JS_TXT.ACYM_UNSUBSCRIBED_FROM_LIST,i)):(e.addClass("acymicon-circle").attr("data-acy-task","unsubscribeOnClick"),t=acym_helper.sprintf(ACYM_JS_TXT.ACYM_SUBSCRIBED_TO_LIST,i)),e.attr("data-acy-newvalue",1==r?0:1).parent().find(".acym__tooltip__text").text(t))})}),jQuery(".js-acym_toggle_delete").off("click").on("click",function(){var e=jQuery(this);if(!e.attr("confirmation")||acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var a=e.attr("data-acy-table"),t=e.attr("data-acy-elementid"),i=e.attr("data-acy-method"),n=ACYM_TOGGLE_URL+"&task=delete&table="+a+"&id="+t;void 0!==i&&(n+="&method="+i),jQuery.ajax({url:n,type:"GET"}).done(function(e){"mail"===a?jQuery("#acym_form").submit():jQuery(".grid-x[data-acy-elementid="+t+"]").remove()})}}),jQuery(".switch-label").off("click").on("click",function(){var e=jQuery(this).attr("for");jQuery('[data-switch="'+e+'"]').trigger("change")}),jQuery(".acym_toggle_switch").off("change").on("change",function(){var e=jQuery(this),a=e.attr("data-acy-table"),t=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),n=e.attr("data-acy-newvalue"),r=ACYM_TOGGLE_URL+"&task=toggle&table="+a+"&field="+t+"&id="+i+"&value="+n;jQuery.ajax({url:r,type:"GET"}).done(function(a){var t=jQuery.parseJSON(a);t.error?console.log(t.message):e.attr("data-acy-newvalue",t.data.value)})})},setToggleCheckboxesGlobal:function(){var e=jQuery('input.acym_toggle[type="checkbox"]');e.off("change").on("change",function(){var e=jQuery("."+jQuery(this).attr("data-toggle")),a=jQuery(this).is(":checked"),t=jQuery("#"+jQuery(this).attr("data-value"));e.each(function(){var e=jQuery(this);a?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),t&&t.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),t&&t.val(0))})}),e.trigger("change")},setSwitchToggle:function(){var e=jQuery('[data-toggle-switch]:not([data-toggle-switch=""])');e.off("change").on("change",function(){var e=jQuery(this).attr("data-toggle-switch-open");1!=jQuery(this).val()&&"show"==e||1==jQuery(this).val()&&"hide"==e?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()}),e.each(function(e){var a=jQuery(this).attr("data-toggle-switch-open");1==jQuery(this).val()&&"show"==a||1!=jQuery(this).val()&&"hide"==a?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()})},setShowMore:function(){jQuery(".acym__configuration__showmore-head").off("click").on("click",function(){event.preventDefault(),jQuery("#"+jQuery(this).find("[data-toggle-showmore]").attr("data-toggle-showmore")).slideToggle(),jQuery(this).find("i").toggleClass("acymicon-keyboard-arrow-up acymicon-keyboard-arrow-down"),jQuery(this).find(".acym__title").toggleClass("margin-bottom-0")})},setToggleArrow:function(){jQuery(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=jQuery(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),jQuery(this).find("i").removeClass("acymicon-keyboard-arrow-up").addClass("acymicon-keyboard-arrow-down")):(e.show(),jQuery(this).find("i").removeClass("acymicon-keyboard-arrow-down").addClass("acymicon-keyboard-arrow-up"))})},setSelectToggle:function(){jQuery('[data-toggle-select]:not([data-toggle-select=""])').on("change",function(){var e=acym_helper.parseJson(jQuery(this).attr("data-toggle-select")),a=jQuery(this).val();jQuery.each(e,function(e,a){jQuery(a).hide()}),jQuery.each(e,function(t,i){if(a===t){var n=e[t].split(",");jQuery.each(n,function(e,a){jQuery(a).show()})}})}).trigger("change")}},acym_helperToolbar={initToolbar:function(){this.setMoreOptionsButtons(),this.setStatusOnload()},setMoreOptionsButtons:function(){var e=jQuery("#acym__toolbar__button-more-filters"),a=jQuery(".acym__toolbar__more-filters"),t=jQuery("#acym__toolbar__more-filters-apply");e.off("click").on("click",function(){a.toggle(),a.is(":visible")?(e.addClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_HIDE_FILTERS)):(e.removeClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_SHOW_FILTERS))}),t.off("click").on("click",function(){jQuery("#acym_form").submit()})},setStatusOnload:function(){var e=jQuery("#acym__toolbar__statuses-value").val();void 0!==e&&""!==e&&(e=acym_helper.parseJson(e),Object.keys(e).map(function(a){var t=jQuery('[name="'+a+'"]');if(0===t.length)return!1;t.val(e[a])}),jQuery("#acym__toolbar__button-more-filters").trigger("click"))}},acym_helperTooltip={setTooltip:function(){jQuery(".acym__tooltip, [data-acym-tooltip]").off("mouseenter").on("mouseenter",function(){if(void 0!==jQuery(this).attr("data-acym-tooltip")){jQuery(this).addClass("acym__tooltip");var e=void 0!==jQuery(this).attr("data-acym-tooltip-position")?"acym__tooltip__text__"+jQuery(this).attr("data-acym-tooltip-position"):"";0==jQuery(this).find(".acym__tooltip__text").length&&jQuery(this).append('<span class="acym__tooltip__text '+e+'">'+jQuery(this).attr("data-acym-tooltip")+"</span>")}acym_helperTooltip.setPositionTooltip(jQuery(this).find(".acym__tooltip__text"),jQuery(this))})},setPositionTooltip:function(e,a){if(e.hasClass("wysid_tooltip"))e.css({position:"absolute",top:a.outerHeight()+14+"px",left:"-"+(250-a.outerWidth())/2+"px",width:"250px"});else{var t,i,n=a.offset(),r=jQuery(window).scrollTop(),o=n.top-r;e.hasClass("acym__tooltip__text__right")?(t=o-e.height()<0?0:o-e.height(),i=n.left+a.width()+10<0?0:n.left+a.width()+10):e.hasClass("acym__tooltip__text__left")?(t=o-e.height()<0?0:o-e.height(),i=n.left-e.width()-a.width()-10<0?0:n.left-e.width()-a.width()-10):(t=Math.max(0,o-e.height()-15),i=Math.max(0,n.left-e.width()/2+a.width()/2)),e.css({top:t+"px",left:i+"px"})}},addTooltip:function(e,a,t,i){return'<span class="acym__tooltip '.concat(t,'"><span class="acym__tooltip__text ').concat(i,'">').concat(a,"</span>").concat(e,"</span>")},addInfo:function(e,a){return a=void 0===a?"":a,this.addTooltip('<span class="acym__tooltip__info__container"><i class="acym__tooltip__info__icon acymicon-info-circle"></i></span>',e,"acym__tooltip__info",a)},setUserInfoLoadingHover:function(){jQuery(".acym__hover__user_info").off("mouseenter").on("mouseenter",function(){var e=this;if(jQuery(this).find(".acymicon-spin").length>0){var a=ACYM_AJAX_URL+"&ctrl=users&task=getUserInfoAjax",t={userId:jQuery(this).attr("data-id")};acym_helper.get(a,t).then(function(a){var t="";if(acym_helper.empty(a.message))for(var i=0,n=Object.entries(a.data);i<n.length;i++){var r=_slicedToArray(n[i],2),o=r[0],_=r[1];t+="".concat(o,": ").concat(_,"<br>")}else t=a.message;jQuery(e).find(".acym__tooltip__text").html(t)})}})}},acym_helperUser={setSubscribeUnsubscribeUser:function(){var e=jQuery("#acym_form");jQuery(".acym__user__action--subscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","subscribeUser"),e.submit()}),jQuery(".acym__user__action--unsubscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","unsubscribeUser"),e.submit()}),jQuery(".acym__user__action--reset").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("acym-data-id")),e.find('[name="task"]').attr("value","resetSubscription"),e.submit()}),jQuery(".acym__user__action--unsubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","unsubscribeUserFromAll"),e.submit()}),jQuery(".acym__user__action--resubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","resubscribeUserToAll"),e.submit()})}},acym_heleperWordPressGlobal={openMediaManager:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=wp.media.frames.file_frame=wp.media({title:ACYM_JS_TXT.ACYM_SELECT_IMAGE_TO_UPLOAD,button:{text:ACYM_JS_TXT.ACYM_USE_THIS_IMAGE},multiple:!1});t.on("select",function(){var a=t.state().get("selection").first().toJSON(),i={url:a.url,alt:a.alt,title:a.title,caption:a.caption};e(i)}),t.on("escape",function(){null!==a&&a()}),t.open()}};