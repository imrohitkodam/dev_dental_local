!function(){function e(t){function e(){n.push([this,arguments]),o||e.execute()}var n=[],o=1,a=0,t=t;return e.execute=function(){if(!a){var e;for(a=1,o=0;e=n.shift();)t.apply(e[0],e[1]);a=0}},e.lock=function(){o=0},e}var a,t,l={},c=0,i=[],n=window.FD50={setup:function(e){t=e,n.init()},jquery:function(e){a||(a=e,n.init())},init:function(){c||a&&t&&(n.$=a.initialize(t),n.plugin.execute(),c=1)},plugin:e(function(e,t){t.apply(n,[a])}),module:e(function(e,t){a.module(e,t)}),installer:function(e,t,n){if(i[e]||(i[e]=[]),!t)return i[e];var o=l[e];if(o.registered)return o.install(t,n);i[e].push([t,n])},component:function(r,e){if(!r)return l;if(!e)return l[r];if("function"==typeof e)return(n=e).registered=!0,l[r]=n;function o(e,t,n){for(var o=0;o<t.length;o++){var a=t[o];e[a]=function(e,t,n){return function(){return(n||s).push(i(e,this,arguments)),t}}(a,e,n)}return e}function t(t,n){return function(){var e=[i(t,this,arguments)];return s.push(e),o({},n,e)}}var n,s=[],i=function(e,t,n){return{method:e,context:this,args:n}};return s.execute=function(){for(var e=l[r],t=0;t<s.length;t++){var n=s[t];if("[object Array]"===Object.prototype.toString.call(n))for(var o=n,a=e,i=0;i<o.length;i++)a=a[o[i].method].apply(a,o[i].args);else e[n.method].apply(e,n.args)}},(n=o(function(){n.run.apply(this.arguments)},["run","ready","template","dialog"])).className=r,n.options=e,n.queue=s,n.module=t("module",["done","always","fail","progress"]),n.require=t("require",["library","script","stylesheet","language","template","app","view","done","always","fail","progress"]),window[r]=l[r]=n,c&&a.Component.register(n),n}}}(),FD50.setup({environment:window.ezb.environment,source:"local",mode:"production"==window.ezb.environment?"compressed":"uncompressed",path:window.ezb.rootUrl+"/media/com_easyblog/scripts/vendors",cdn:"",extension:".js",cdnPath:"",rootPath:window.ezb.rootUrl,basePath:window.ezb.rootUrl,indexUrl:window.ezb.rootUrl+"/index.php",token:window.ezb.token,locale:{lang:window.ezb.locale}}),FD50.component("EasyBlog",{environment:window.ezb.environment,source:"local",mode:(window.ezb.environment,"compressed"),version:"2.0",momentLang:window.ezb.momentLang,ajaxUrl:window.ezb.ajaxUrl,scriptVersioning:window.ezb.scriptVersioning,scriptVersion:window.ezb.version}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(h,e){function s(e){var t=e.length,n=Q.type(e);return"function"!==n&&!Q.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e))}function t(e,n,o){if(Q.isFunction(n))return Q.grep(e,function(e,t){return!!n.call(e,t,e)!==o});if(n.nodeType)return Q.grep(e,function(e){return e===n!==o});if("string"==typeof n){if(ie.test(n))return Q.filter(n,e,o);n=Q.filter(n,e)}return Q.grep(e,function(e){return 0<=Q.inArray(e,n)!==o})}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(){re.addEventListener?(re.removeEventListener("DOMContentLoaded",a,!1),h.removeEventListener("load",a,!1)):(re.detachEvent("onreadystatechange",a),h.detachEvent("onload",a))}function a(){!re.addEventListener&&"load"!==event.type&&"complete"!==re.readyState||(o(),Q.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var o="data-"+t.replace(ve,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ge.test(n)?Q.parseJSON(n):n)}catch(e){}Q.data(e,t,n)}else n=void 0}return n}function c(e){for(var t in e)if(("data"!==t||!Q.isEmptyObject(e[t]))&&"toJSON"!==t)return;return 1}function i(e,t,n,o){if(Q.acceptData(e)){var a,i=Q.expando,r=e.nodeType,s=r?Q.cache:e,l=r?e[i]:e[i]&&i;if(l&&s[l]&&(o||s[l].data)||void 0!==n||"string"!=typeof t)return s[l=l||(r?e[i]=U.pop()||Q.guid++:i)]||(s[l]=r?{}:{toJSON:Q.noop}),"object"!=typeof t&&"function"!=typeof t||(o?s[l]=Q.extend(s[l],t):s[l].data=Q.extend(s[l].data,t)),l=s[l],o||(l.data||(l.data={}),l=l.data),void 0!==n&&(l[Q.camelCase(t)]=n),"string"==typeof t?null==(a=l[t])&&(a=l[Q.camelCase(t)]):a=l,a}}function r(e,t,n){if(Q.acceptData(e)){var o,a,i=e.nodeType,r=i?Q.cache:e,s=i?e[Q.expando]:Q.expando;if(r[s]){if(t&&(o=n?r[s]:r[s].data)){a=(t=Q.isArray(t)?t.concat(Q.map(t,Q.camelCase)):t in o||(t=Q.camelCase(t))in o?[t]:t.split(" ")).length;for(;a--;)delete o[t[a]];if(n?!c(o):!Q.isEmptyObject(o))return}(n||(delete r[s].data,c(r[s])))&&(i?Q.cleanData([e],!0):Y.deleteExpando||r!=r.window?delete r[s]:r[s]=null)}}}function d(){return!0}function u(){return!1}function p(){try{return re.activeElement}catch(e){}}function m(e){var t=Se.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,o,a=0,i=typeof e.getElementsByTagName!=me?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!=me?e.querySelectorAll(t||"*"):void 0;if(!i)for(i=[],n=e.childNodes||e;null!=(o=n[a]);a++)!t||Q.nodeName(o,t)?i.push(o):Q.merge(i,g(o,t));return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],i):i}function v(e){Ce.test(e.type)&&(e.defaultChecked=e.checked)}function f(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==Q.find.attr(e,"type"))+"/"+e.type,e}function y(e){var t=Ne.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function k(e,t){for(var n,o=0;null!=(n=e[o]);o++)Q._data(n,"globalEval",!t||Q._data(t[o],"globalEval"))}function w(e,t){if(1===t.nodeType&&Q.hasData(e)){var n,o,a,i=Q._data(e),e=Q._data(t,i),r=i.events;if(r)for(n in delete e.handle,e.events={},r)for(o=0,a=r[n].length;o<a;o++)Q.event.add(t,n,r[n][o]);e.data&&(e.data=Q.extend({},e.data))}}function C(e,t){e=Q(t.createElement(e)).appendTo(t.body),t=h.getDefaultComputedStyle?h.getDefaultComputedStyle(e[0]).display:Q.css(e[0],"display");return e.detach(),t}function x(e){var t=re,n=Ve[e];return n||("none"!==(n=C(e,t))&&n||((t=((Re=(Re||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Re[0].contentDocument).document).write(),t.close(),n=C(e,t),Re.detach()),Ve[e]=n),n}function B(t,n){return{get:function(){var e=t();if(null!=e){if(!e)return(this.get=n).apply(this,arguments);delete this.get}}}}function T(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),o=t,a=dt.length;a--;)if((t=dt[a]+n)in e)return t;return o}function I(e,t){for(var n,o,a,i=[],r=0,s=e.length;r<s;r++)(o=e[r]).style&&(i[r]=Q._data(o,"olddisplay"),n=o.style.display,t?(i[r]||"none"!==n||(o.style.display=""),""===o.style.display&&be(o)&&(i[r]=Q._data(o,"olddisplay",x(o.nodeName)))):i[r]||(a=be(o),(n&&"none"!==n||!a)&&Q._data(o,"olddisplay",a?n:Q.css(o,"display"))));for(r=0;r<s;r++)(o=e[r]).style&&(t&&"none"!==o.style.display&&""!==o.style.display||(o.style.display=t?i[r]||"":"none"));return e}function E(e,t,n){var o=rt.exec(t);return o?Math.max(0,o[1]-(n||0))+(o[2]||"px"):t}function S(e,t,n,o,a){for(var i=n===(o?"border":"content")?4:"width"===t?1:0,r=0;i<4;i+=2)"margin"===n&&(r+=Q.css(e,n+ke[i],!0,a)),o?("content"===n&&(r-=Q.css(e,"padding"+ke[i],!0,a)),"margin"!==n&&(r-=Q.css(e,"border"+ke[i]+"Width",!0,a))):(r+=Q.css(e,"padding"+ke[i],!0,a),"padding"!==n&&(r+=Q.css(e,"border"+ke[i]+"Width",!0,a)));return r}function _(e,t,n){var o=!0,a="width"===t?e.offsetWidth:e.offsetHeight,i=qe(e),r=Y.boxSizing()&&"border-box"===Q.css(e,"boxSizing",!1,i);if(a<=0||null==a){if(((a=Ge(e,t,i))<0||null==a)&&(a=e.style[t]),et.test(a))return a;o=r&&(Y.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+S(e,t,n||(r?"border":"content"),o,i)+"px"}function F(e,t,n,o,a){return new F.prototype.init(e,t,n,o,a)}function M(){return setTimeout(function(){ut=void 0}),ut=Q.now()}function P(e,t){var n,o={height:e},a=0;for(t=t?1:0;a<4;a+=2-t)o["margin"+(n=ke[a])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function D(e,t,n){for(var o,a=(yt[t]||[]).concat(yt["*"]),i=0,r=a.length;i<r;i++)if(o=a[i].call(n,t,e))return o}function L(a,e,t){var n,i,o=0,r=bt.length,s=Q.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=ut||M(),e=Math.max(0,c.startTime+c.duration-e),t=1-(e/c.duration||0),n=0,o=c.tweens.length;n<o;n++)c.tweens[n].run(t);return s.notifyWith(a,[c,t,e]),t<1&&o?e:(s.resolveWith(a,[c]),!1)},c=s.promise({elem:a,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:ut||M(),duration:t.duration,tweens:[],createTween:function(e,t){e=Q.Tween(a,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(e),e},stop:function(e){var t=0,n=e?c.tweens.length:0;if(i)return this;for(i=!0;t<n;t++)c.tweens[t].run(1);return e?s.resolveWith(a,[c,e]):s.rejectWith(a,[c,e]),this}}),d=c.props;for(!function(e,t){var n,o,a,i,r;for(n in e)if(a=t[o=Q.camelCase(n)],i=e[n],Q.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==o&&(e[o]=i,delete e[n]),(r=Q.cssHooks[o])&&"expand"in r)for(n in i=r.expand(i),delete e[o],i)n in e||(e[n]=i[n],t[n]=a);else t[o]=a}(d,c.opts.specialEasing);o<r;o++)if(n=bt[o].call(c,a,d,c.opts))return n;return Q.map(d,D,c),Q.isFunction(c.opts.start)&&c.opts.start.call(a,c),Q.fx.timer(Q.extend(l,{elem:a,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function z(i){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,o=0,a=e.toLowerCase().match(pe)||[];if(Q.isFunction(t))for(;n=a[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(i[n]=i[n]||[]).unshift(t)):(i[n]=i[n]||[]).push(t)}}function A(t,o,a,i){function r(e){var n;return s[e]=!0,Q.each(t[e]||[],function(e,t){t=t(o,a,i);return"string"!=typeof t||l||s[t]?l?!(n=t):void 0:(o.dataTypes.unshift(t),r(t),!1)}),n}var s={},l=t===$t;return r(o.dataTypes[0])||!s["*"]&&r("*")}function H(e,t){var n,o,a=Q.ajaxSettings.flatOptions||{};for(o in t)void 0!==t[o]&&((a[o]?e:n=n||{})[o]=t[o]);return n&&Q.extend(!0,e,n),e}function O(){try{return new h.XMLHttpRequest}catch(e){}}function N(e){return Q.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}function j(e,t){return t.toUpperCase()}var U=[],$=U.slice,R=U.concat,W=U.push,V=U.indexOf,q={},G=q.toString,X=q.hasOwnProperty,K="".trim,Y={},J="1.11.1pre",Q=function(e,t){return new Q.fn.init(e,t)},Z=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,te=/-([\da-z])/gi;Q.fn=Q.prototype={jquery:J,constructor:Q,selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:$.call(this)},pushStack:function(e){e=Q.merge(this.constructor(),e);return e.prevObject=this,e.context=this.context,e},each:function(e,t){return Q.each(this,e,t)},map:function(n){return this.pushStack(Q.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:U.sort,splice:U.splice},Q.extend=Q.fn.extend=function(){var e,t,n,o,a,i=arguments[0]||{},r=1,s=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[r]||{},r++),"object"==typeof i||Q.isFunction(i)||(i={}),r===s&&(i=this,r--);r<s;r++)if(null!=(o=arguments[r]))for(n in o)a=i[n],i!==(t=o[n])&&(l&&t&&(Q.isPlainObject(t)||(e=Q.isArray(t)))?(a=e?(e=!1,a&&Q.isArray(a)?a:[]):a&&Q.isPlainObject(a)?a:{},i[n]=Q.extend(l,a,t)):void 0!==t&&(i[n]=t));return i},Q.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray||function(e){return"array"===Q.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return 0<=e-parseFloat(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},isPlainObject:function(e){if(!e||"object"!==Q.type(e)||e.nodeType||Q.isWindow(e))return!1;try{if(e.constructor&&!X.call(e,"constructor")&&!X.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(Y.ownLast)for(var t in e)return X.call(e,t);for(t in e);return void 0===t||X.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[G.call(e)]||"object":typeof e},globalEval:function(e){e&&Q.trim(e)&&(h.execScript||function(e){h.eval.call(h,e)})(e)},camelCase:function(e){return e.replace(ee,"ms-").replace(te,j)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o=0,a=e.length,i=s(e);if(n){if(i)for(;o<a&&!1!==t.apply(e[o],n);o++);else for(o in e)if(!1===t.apply(e[o],n))break}else if(i)for(;o<a&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:K&&!K.call("\ufeffÂ ")?function(e){return null==e?"":K.call(e)}:function(e){return null==e?"":(e+"").replace(Z,"")},makeArray:function(e,t){t=t||[];return null!=e&&(s(Object(e))?Q.merge(t,"string"==typeof e?[e]:e):W.call(t,e)),t},inArray:function(e,t,n){var o;if(t){if(V)return V.call(t,e,n);for(o=t.length,n=n?n<0?Math.max(0,o+n):n:0;n<o;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,o=0,a=e.length;o<n;)e[a++]=t[o++];if(n!=n)for(;void 0!==t[o];)e[a++]=t[o++];return e.length=a,e},grep:function(e,t,n){for(var o=[],a=0,i=e.length,r=!n;a<i;a++)!t(e[a],a)!=r&&o.push(e[a]);return o},map:function(e,t,n){var o,a=0,i=e.length,r=[];if(s(e))for(;a<i;a++)null!=(o=t(e[a],a,n))&&r.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&r.push(o);return R.apply([],r)},guid:1,proxy:function(e,t){var n,o;if("string"==typeof t&&(o=e[t],t=e,e=o),Q.isFunction(e))return n=$.call(arguments,2),(o=function(){return e.apply(t||this,n.concat($.call(arguments)))}).guid=e.guid=e.guid||Q.guid++,o},now:function(){return+new Date},support:Y}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});var ne=function(n){function k(e,t,n,o){var a,i,r,s,l,c,d;if((t?t.ownerDocument||t:H)!==_&&S(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=(t=t||_).nodeType)&&9!==a)return[];if(M&&!o){if(c=he.exec(e))if(d=c[1]){if(9===a){if(!(s=t.getElementById(d))||!s.parentNode)return n;if(s.id===d)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(d))&&z(t,s)&&s.id===d)return n.push(s),n}else{if(c[2])return K.apply(n,t.getElementsByTagName(e)),n;if((d=c[3])&&v.getElementsByClassName&&t.getElementsByClassName)return K.apply(n,t.getElementsByClassName(d)),n}if(v.qsa&&(!P||!P.test(e))){if(l=s=A,c=t,d=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(r=p(e),(s=t.getAttribute("id"))?l=s.replace(ge,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",i=r.length;i--;)r[i]=l+f(r[i]);c=me.test(e)&&u(t.parentNode)||t,d=r.join(",")}if(d)try{return K.apply(n,c.querySelectorAll(d)),n}catch(e){}finally{s||t.removeAttribute("id")}}}return B(e.replace(ae,"$1"),t,n,o)}function e(){function n(e,t){return o.push(e+" ")>C.cacheLength&&delete n[o.shift()],n[e+" "]=t}var o=[];return n}function l(e){return e[A]=!0,e}function t(e){var t=_.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function o(e,t){for(var n=e.split("|"),o=e.length;o--;)C.attrHandle[n[o]]=t}function c(e,t){var n=t&&e,o=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(o)return o;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(r){return l(function(i){return i=+i,l(function(e,t){for(var n,o=r([],e.length,i),a=o.length;a--;)e[n=o[a]]&&(e[n]=!(t[n]=e[n]))})})}function u(e){return e&&typeof e.getElementsByTagName!==W&&e}function i(){}function p(e,t){var n,o,a,i,r,s,l,c=U[e+" "];if(c)return t?0:c.slice(0);for(r=e,s=[],l=C.preFilter;r;){for(i in n&&!(o=ie.exec(r))||(o&&(r=r.slice(o[0].length)||r),s.push(a=[])),n=!1,(o=re.exec(r))&&(n=o.shift(),a.push({value:n,type:o[0].replace(ae," ")}),r=r.slice(n.length)),C.filter)!(o=de[i].exec(r))||l[i]&&!(o=l[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),r=r.slice(n.length));if(!n)break}return t?r.length:r?k.error(e):U(e,s).slice(0)}function f(e){for(var t=0,n=e.length,o="";t<n;t++)o+=e[t].value;return o}function h(r,e,t){var s=e.dir,l=t&&"parentNode"===s,c=N++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||l)return r(e,t,n)}:function(e,t,n){var o,a,i=[O,c];if(n){for(;e=e[s];)if((1===e.nodeType||l)&&r(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((o=(a=e[A]||(e[A]={}))[s])&&o[0]===O&&o[1]===c)return i[2]=o[2];if((a[s]=i)[2]=r(e,t,n))return!0}}}function m(a){return 1<a.length?function(e,t,n){for(var o=a.length;o--;)if(!a[o](e,t,n))return!1;return!0}:a[0]}function w(e,t,n,o,a){for(var i,r=[],s=0,l=e.length,c=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,o,a)||(r.push(i),c&&t.push(s)));return r}function b(f,h,m,g,v,e){return g&&!g[A]&&(g=b(g)),v&&!v[A]&&(v=b(v,e)),l(function(e,t,n,o){var a,i,r,s=[],l=[],c=t.length,d=e||function(e,t,n){for(var o=0,a=t.length;o<a;o++)k(e,t[o],n);return n}(h||"*",n.nodeType?[n]:n,[]),u=!f||!e&&h?d:w(d,s,f,n,o),p=m?v||(e?f:c||g)?[]:t:u;if(m&&m(u,p,n,o),g)for(a=w(p,l),g(a,[],n,o),i=a.length;i--;)(r=a[i])&&(p[l[i]]=!(u[l[i]]=r));if(e){if(v||f){if(v){for(a=[],i=p.length;i--;)(r=p[i])&&a.push(u[i]=r);v(null,p=[],a,o)}for(i=p.length;i--;)(r=p[i])&&-1<(a=v?J.call(e,r):s[i])&&(e[a]=!(t[a]=r))}}else p=w(p===t?p.splice(c,p.length):p),v?v(null,t,p,o):K.apply(t,p)})}function r(g,v){function e(e,t,n,o,a){var i,r,s,l=0,c="0",d=e&&[],u=[],p=T,f=e||y&&C.find.TAG("*",a),h=O+=null==p?1:Math.random()||.1,m=f.length;for(a&&(T=t!==_&&t);c!==m&&null!=(i=f[c]);c++){if(y&&i){for(r=0;s=g[r++];)if(s(i,t,n)){o.push(i);break}a&&(O=h)}b&&((i=!s&&i)&&l--,e&&d.push(i))}if(l+=c,b&&c!==l){for(r=0;s=v[r++];)s(d,u,t,n);if(e){if(0<l)for(;c--;)d[c]||u[c]||(u[c]=G.call(o));u=w(u)}K.apply(o,u),a&&!e&&0<u.length&&1<l+v.length&&k.uniqueSort(o)}return a&&(O=h,T=p),d}var b=0<v.length,y=0<g.length;return b?l(e):e}function g(e,t,n){var o="0x"+t-65536;return o!=o||n?t:o<0?String.fromCharCode(65536+o):String.fromCharCode(o>>10|55296,1023&o|56320)}var s,v,C,d,y,x,B,T,I,E,S,_,F,M,P,D,L,z,A="sizzle"+-new Date,H=n.document,O=0,N=0,j=e(),U=e(),$=e(),R=function(e,t){return e===t&&(E=!0),0},W="undefined",V={}.hasOwnProperty,q=[],G=q.pop,X=q.push,K=q.push,Y=q.slice,J=q.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Z="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",te=ee.replace("w","w#"),ne="\\["+Z+"*("+ee+")"+Z+"*(?:([*^$|!~]?=)"+Z+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+te+")|)|)"+Z+"*\\]",oe=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ne.replace(3,8)+")*)|.*)\\)|)",ae=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g"),ie=new RegExp("^"+Z+"*,"+Z+"*"),re=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),se=new RegExp("="+Z+"*([^\\]'\"]*?)"+Z+"*\\]","g"),le=new RegExp(oe),ce=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+ee+")"),CLASS:new RegExp("^\\.("+ee+")"),TAG:new RegExp("^("+ee.replace("w","w*")+")"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},ue=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/[+~]/,ge=/'|\\/g,ve=new RegExp("\\\\([\\da-f]{1,6}"+Z+"?|("+Z+")|.)","ig");try{K.apply(q=Y.call(H.childNodes),H.childNodes),q[H.childNodes.length].nodeType}catch(e){K={apply:q.length?function(e,t){X.apply(e,Y.call(t))}:function(e,t){for(var n=e.length,o=0;e[n++]=t[o++];);e.length=n-1}}}for(s in v=k.support={},y=k.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},S=k.setDocument=function(e){var l=e?e.ownerDocument||e:H,e=l.defaultView;return l!==_&&9===l.nodeType&&l.documentElement?(F=(_=l).documentElement,M=!y(l),e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",function(){S()},!1):e.attachEvent&&e.attachEvent("onunload",function(){S()})),v.attributes=t(function(e){return e.className="i",!e.getAttribute("className")}),v.getElementsByTagName=t(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),v.getElementsByClassName=fe.test(l.getElementsByClassName)&&t(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),v.getById=t(function(e){return F.appendChild(e).id=A,!l.getElementsByName||!l.getElementsByName(A).length}),v.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==W&&M){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},C.filter.ID=function(e){var t=e.replace(ve,g);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(ve,g);return function(e){e=typeof e.getAttributeNode!==W&&e.getAttributeNode("id");return e&&e.value===t}}),C.find.TAG=v.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==W)return t.getElementsByTagName(e)}:function(e,t){var n,o=[],a=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[a++];)1===n.nodeType&&o.push(n);return o},C.find.CLASS=v.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==W&&M)return t.getElementsByClassName(e)},D=[],P=[],(v.qsa=fe.test(l.querySelectorAll))&&(t(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&P.push("[*^$]="+Z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+Z+"*(?:value|"+Q+")"),e.querySelectorAll(":checked").length||P.push(":checked")}),t(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+Z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(v.matchesSelector=fe.test(L=F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&t(function(e){v.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),D.push("!=",oe)}),P=P.length&&new RegExp(P.join("|")),D=D.length&&new RegExp(D.join("|")),e=fe.test(F.compareDocumentPosition),z=e||fe.test(F.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=e?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument===H&&z(H,e)?-1:t===l||t.ownerDocument===H&&z(H,t)?1:I?J.call(I,e)-J.call(I,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,o=0,a=e.parentNode,i=t.parentNode,r=[e],s=[t];if(!a||!i)return e===l?-1:t===l?1:a?-1:i?1:I?J.call(I,e)-J.call(I,t):0;if(a===i)return c(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;r[o]===s[o];)o++;return o?c(r[o],s[o]):r[o]===H?-1:s[o]===H?1:0},l):_},k.matches=function(e,t){return k(e,null,null,t)},k.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&S(e),t=t.replace(se,"='$1']"),v.matchesSelector&&M&&(!D||!D.test(t))&&(!P||!P.test(t)))try{var n=L.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<k(t,_,null,[e]).length},k.contains=function(e,t){return(e.ownerDocument||e)!==_&&S(e),z(e,t)},k.attr=function(e,t){(e.ownerDocument||e)!==_&&S(e);var n=C.attrHandle[t.toLowerCase()],n=n&&V.call(C.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==n?n:v.attributes||!M?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},k.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},k.uniqueSort=function(e){var t,n=[],o=0,a=0;if(E=!v.detectDuplicates,I=!v.sortStable&&e.slice(0),e.sort(R),E){for(;t=e[a++];)t===e[a]&&(o=n.push(a));for(;o--;)e.splice(n[o],1)}return I=null,e},d=k.getText=function(e){var t,n="",o=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=d(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[o++];)n+=d(t);return n},(C=k.selectors={cacheLength:50,createPseudo:l,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,g),e[3]=(e[4]||e[5]||"").replace(ve,g),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||k.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&k.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return de.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&le.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,g).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+Z+")"+e+"("+Z+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==W&&e.getAttribute("class")||"")})},ATTR:function(t,n,o){return function(e){e=k.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===o:"!="===n?e!==o:"^="===n?o&&0===e.indexOf(o):"*="===n?o&&-1<e.indexOf(o):"$="===n?o&&e.slice(-o.length)===o:"~="===n?-1<(" "+e+" ").indexOf(o):"|="===n&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(f,e,t,h,m){var g="nth"!==f.slice(0,3),v="last"!==f.slice(-4),b="of-type"===e;return 1===h&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var o,a,i,r,s,l,c=g!=v?"nextSibling":"previousSibling",d=e.parentNode,u=b&&e.nodeName.toLowerCase(),p=!n&&!b;if(d){if(g){for(;c;){for(i=e;i=i[c];)if(b?i.nodeName.toLowerCase()===u:1===i.nodeType)return!1;l=c="only"===f&&!l&&"nextSibling"}return!0}if(l=[v?d.firstChild:d.lastChild],v&&p){for(s=(o=(a=d[A]||(d[A]={}))[f]||[])[0]===O&&o[1],r=o[0]===O&&o[2],i=s&&d.childNodes[s];i=++s&&i&&i[c]||(r=s=0)||l.pop();)if(1===i.nodeType&&++r&&i===e){a[f]=[O,s,r];break}}else if(p&&(o=(e[A]||(e[A]={}))[f])&&o[0]===O)r=o[1];else for(;(i=++s&&i&&i[c]||(r=s=0)||l.pop())&&((b?i.nodeName.toLowerCase()!==u:1!==i.nodeType)||!++r||(p&&((i[A]||(i[A]={}))[f]=[O,r]),i!==e)););return(r-=m)===h||r%h==0&&0<=r/h}}},PSEUDO:function(e,i){var t,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||k.error("unsupported pseudo: "+e);return r[A]?r(i):1<r.length?(t=[e,e,"",i],C.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var n,o=r(e,i),a=o.length;a--;)e[n=J.call(e,o[a])]=!(t[n]=o[a])}):function(e){return r(e,0,t)}):r}},pseudos:{not:l(function(e){var o=[],a=[],s=x(e.replace(ae,"$1"));return s[A]?l(function(e,t,n,o){for(var a,i=s(e,null,o,[]),r=e.length;r--;)(a=i[r])&&(e[r]=!(t[r]=a))}):function(e,t,n){return o[0]=e,s(o,null,n,a),!a.pop()}}),has:l(function(t){return function(e){return 0<k(t,e).length}}),contains:l(function(t){return function(e){return-1<(e.textContent||e.innerText||d(e)).indexOf(t)}}),lang:l(function(n){return ce.test(n||"")||k.error("unsupported lang: "+n),n=n.replace(ve,g).toLowerCase(),function(e){var t;do{if(t=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===F},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[n<0?n+t:n]}),even:a(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var o=n<0?n+t:n;0<=--o;)e.push(o);return e}),gt:a(function(e,t,n){for(var o=n<0?n+t:n;++o<t;)e.push(o);return e})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[s]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(s);for(s in{submit:!0,reset:!0})C.pseudos[s]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(s);return i.prototype=C.filters=C.pseudos,C.setFilters=new i,x=k.compile=function(e,t){var n,o=[],a=[],i=$[e+" "];if(!i){for(n=(t=t||p(e)).length;n--;)((i=function e(t){for(var o,n,a,i=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],l=r?1:0,c=h(function(e){return e===o},s,!0),d=h(function(e){return-1<J.call(o,e)},s,!0),u=[function(e,t,n){return!r&&(n||t!==T)||((o=t).nodeType?c:d)(e,t,n)}];l<i;l++)if(n=C.relative[t[l].type])u=[h(m(u),n)];else{if((n=C.filter[t[l].type].apply(null,t[l].matches))[A]){for(a=++l;a<i&&!C.relative[t[a].type];a++);return b(1<l&&m(u),1<l&&f(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(ae,"$1"),n,l<a&&e(t.slice(l,a)),a<i&&e(t=t.slice(a)),a<i&&f(t))}u.push(n)}return m(u)}(t[n]))[A]?o:a).push(i);(i=$(e,r(a,o))).selector=e}return i},B=k.select=function(e,t,n,o){var a,i,r,s,l,c="function"==typeof e&&e,d=!o&&p(e=c.selector||e);if(n=n||[],1===d.length){if(2<(i=d[0]=d[0].slice(0)).length&&"ID"===(r=i[0]).type&&v.getById&&9===t.nodeType&&M&&C.relative[i[1].type]){if(!(t=(C.find.ID(r.matches[0].replace(ve,g),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=de.needsContext.test(e)?0:i.length;a--&&(r=i[a],!C.relative[s=r.type]);)if((l=C.find[s])&&(o=l(r.matches[0].replace(ve,g),me.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(a,1),!(e=o.length&&f(i)))return K.apply(n,o),n;break}}return(c||x(e,d))(o,t,!M,n,me.test(e)&&u(t.parentNode)||t),n},v.sortStable=A.split("").sort(R).join("")===A,v.detectDuplicates=!!E,S(),v.sortDetached=t(function(e){return 1&e.compareDocumentPosition(_.createElement("div"))}),t(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),v.attributes&&t(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),t(function(e){return null==e.getAttribute("disabled")})||o(Q,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),k}(h);Q.find=ne,Q.expr=ne.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=ne.uniqueSort,Q.text=ne.getText,Q.isXMLDoc=ne.isXML,Q.contains=ne.contains;var oe=Q.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ie=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var o=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?Q.find.matchesSelector(o,e)?[o]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=[],o=this,a=o.length;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;t<a;t++)if(Q.contains(o[t],this))return!0}));for(t=0;t<a;t++)Q.find(e,o[t],n);return(n=this.pushStack(1<a?Q.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&oe.test(e)?Q(e):e||[],!1).length}});var re=h.document,se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(Q.fn.init=function(e,t){var n,o;if(!e)return this;if("string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?void 0!==le.ready?le.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this));if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:se.exec(e))||!n[1]&&t)return(!t||t.jquery?t||le:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:re,!0)),ae.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((o=re.getElementById(n[2]))&&o.parentNode){if(o.id!==n[2])return le.find(e);this.length=1,this[0]=o}return this.context=re,this.selector=e,this}).prototype=Q.fn;var le=Q(re),ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var o=[],a=e[t];a&&9!==a.nodeType&&(void 0===n||1!==a.nodeType||!Q(a).is(n));)1===a.nodeType&&o.push(a),a=a[t];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t,n=Q(e,this),o=n.length;return this.filter(function(){for(t=0;t<o;t++)if(Q.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,o=0,a=this.length,i=[],r=oe.test(e)||"string"!=typeof e?Q(e,t||this.context):0;o<a;o++)for(n=this[o];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?-1<r.index(n):1===n.nodeType&&Q.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?Q.unique(i):i)},index:function(e){return e?"string"==typeof e?Q.inArray(this[0],Q(e)):Q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return Q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Q.merge([],e.childNodes)}},function(o,a){Q.fn[o]=function(e,t){var n=Q.map(this,a,e);return(t="Until"!==o.slice(-5)?e:t)&&"string"==typeof t&&(n=Q.filter(t,n)),1<this.length&&(de[o]||(n=Q.unique(n)),ce.test(o)&&(n=n.reverse())),this.pushStack(n)}});var ue,pe=/\S+/g,fe={};Q.Callbacks=function(a){var e,n;a="string"==typeof a?fe[a]||(n=fe[e=a]={},Q.each(e.match(pe)||[],function(e,t){n[t]=!0}),n):Q.extend({},a);function o(e){for(t=a.memory&&e,r=!0,l=c||0,c=0,s=d.length,i=!0;d&&l<s;l++)if(!1===d[l].apply(e[0],e[1])&&a.stopOnFalse){t=!1;break}i=!1,d&&(u?u.length&&o(u.shift()):t?d=[]:p.disable())}var i,t,r,s,l,c,d=[],u=!a.once&&[],p={add:function(){var e;return d&&(e=d.length,function o(e){Q.each(e,function(e,t){var n=Q.type(t);"function"===n?a.unique&&p.has(t)||d.push(t):t&&t.length&&"string"!==n&&o(t)})}(arguments),i?s=d.length:t&&(c=e,o(t))),this},remove:function(){return d&&Q.each(arguments,function(e,t){for(var n;-1<(n=Q.inArray(t,d,n));)d.splice(n,1),i&&(n<=s&&s--,n<=l&&l--)}),this},has:function(e){return e?-1<Q.inArray(e,d):!(!d||!d.length)},empty:function(){return d=[],s=0,this},disable:function(){return d=u=t=void 0,this},disabled:function(){return!d},lock:function(){return u=void 0,t||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!d||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):o(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},Q.extend({Deferred:function(e){var i=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],a="pending",r={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var a=arguments;return Q.Deferred(function(o){Q.each(i,function(e,t){var n=Q.isFunction(a[e])&&a[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[t[0]+"With"](this===r?o.promise():this,n?[e]:arguments)})}),a=null}).promise()},promise:function(e){return null!=e?Q.extend(e,r):r}},s={};return r.pipe=r.then,Q.each(i,function(e,t){var n=t[2],o=t[3];r[t[1]]=n.add,o&&n.add(function(){a=o},i[1^e][2].disable,i[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?r:this,arguments),this},s[t[0]+"With"]=n.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(e){function t(t,n,o){return function(e){n[t]=this,o[t]=1<arguments.length?$.call(arguments):e,o===a?c.notifyWith(n,o):--l||c.resolveWith(n,o)}}var a,n,o,i=0,r=$.call(arguments),s=r.length,l=1!==s||e&&Q.isFunction(e.promise)?s:0,c=1===l?e:Q.Deferred();if(1<s)for(a=new Array(s),n=new Array(s),o=new Array(s);i<s;i++)r[i]&&Q.isFunction(r[i].promise)?r[i].promise().done(t(i,o,r)).fail(c.reject).progress(t(i,n,a)):--l;return l||c.resolveWith(o,r),c.promise()}}),Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){if(!0===e?!--Q.readyWait:!Q.isReady){if(!re.body)return setTimeout(Q.ready);(Q.isReady=!0)!==e&&0<--Q.readyWait||(ue.resolveWith(re,[Q]),Q.fn.trigger&&Q(re).trigger("ready").off("ready"))}}}),Q.ready.promise=function(e){if(!ue)if(ue=Q.Deferred(),"complete"===re.readyState)setTimeout(Q.ready);else if(re.addEventListener)re.addEventListener("DOMContentLoaded",a,!1),h.addEventListener("load",a,!1);else{re.attachEvent("onreadystatechange",a),h.attachEvent("onload",a);var n=!1;try{n=null==h.frameElement&&re.documentElement}catch(e){}n&&n.doScroll&&!function t(){if(!Q.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}o(),Q.ready()}}()}return ue.promise(e)};var he,me="undefined";for(he in Q(Y))break;Y.ownLast="0"!==he,Y.inlineBlockNeedsLayout=!1,Q(function(){var e,t,n=re.getElementsByTagName("body")[0];n&&((e=re.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=re.createElement("div"),n.appendChild(e).appendChild(t),typeof t.style.zoom!=me&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(Y.inlineBlockNeedsLayout=3===t.offsetWidth)&&(n.style.zoom=1)),n.removeChild(e))}),function(){var e=re.createElement("div");if(null==Y.deleteExpando){Y.deleteExpando=!0;try{delete e.test}catch(e){Y.deleteExpando=!1}}}(),Q.acceptData=function(e){var t=Q.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ve=/([A-Z])/g;Q.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?Q.cache[e[Q.expando]]:e[Q.expando])&&!c(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return r(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return r(e,t,!0)}}),Q.fn.extend({data:function(e,t){var n,o,a,i=this[0],r=i&&i.attributes;if(void 0!==e)return"object"==typeof e?this.each(function(){Q.data(this,e)}):1<arguments.length?this.each(function(){Q.data(this,e,t)}):i?l(i,e,Q.data(i,e)):void 0;if(this.length&&(a=Q.data(i),1===i.nodeType&&!Q._data(i,"parsedAttrs"))){for(n=r.length;n--;)0===(o=r[n].name).indexOf("data-")&&l(i,o=Q.camelCase(o.slice(5)),a[o]);Q._data(i,"parsedAttrs",!0)}return a},removeData:function(e){return this.each(function(){Q.removeData(this,e)})}}),Q.extend({queue:function(e,t,n){var o;if(e)return o=Q._data(e,t=(t||"fx")+"queue"),n&&(!o||Q.isArray(n)?o=Q._data(e,t,Q.makeArray(n)):o.push(n)),o||[]},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),o=n.length,a=n.shift(),i=Q._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),o--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){Q.dequeue(e,t)},i)),!o&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q._data(e,n)||Q._data(e,n,{empty:Q.Callbacks("once memory").add(function(){Q._removeData(e,t+"queue"),Q._removeData(e,n)})})}}),Q.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?Q.queue(this[0],t):void 0===n?this:this.each(function(){var e=Q.queue(this,t,n);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Q.dequeue(this,t)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--a||i.resolveWith(r,[r])}var o,a=1,i=Q.Deferred(),r=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(o=Q._data(r[s],e+"queueHooks"))&&o.empty&&(a++,o.empty.add(n));return n(),i.promise(t)}});function be(e,t){return"none"===Q.css(e=t||e,"display")||!Q.contains(e.ownerDocument,e)}var ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],we=Q.access=function(e,t,n,o,a,i,r){var s=0,l=e.length,c=null==n;if("object"===Q.type(n))for(s in a=!0,n)Q.access(e,t,s,n[s],!0,i,r);else if(void 0!==o&&(a=!0,Q.isFunction(o)||(r=!0),t=c?r?(t.call(e,o),null):(c=t,function(e,t,n){return c.call(Q(e),n)}):t))for(;s<l;s++)t(e[s],n,r?o:o.call(e[s],s,t(e[s],n)));return a?e:c?t.call(e):l?t(e[0],n):i},Ce=/^(?:checkbox|radio)$/i;!function(){var e=re.createDocumentFragment(),t=re.createElement("div"),n=re.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",Y.leadingWhitespace=3===t.firstChild.nodeType,Y.tbody=!t.getElementsByTagName("tbody").length,Y.htmlSerialize=!!t.getElementsByTagName("link").length,Y.html5Clone="<:nav></:nav>"!==re.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),Y.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",Y.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,Y.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){Y.noCloneEvent=!1}),t.cloneNode(!0).click()),null==Y.deleteExpando){Y.deleteExpando=!0;try{delete t.test}catch(e){Y.deleteExpando=!1}}}(),function(){var e,t,n=re.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})(Y[e+"Bubbles"]=(t="on"+e)in h)||(n.setAttribute(t,"t"),Y[e+"Bubbles"]=!1===n.attributes[t].expando)}();var xe=/^(?:input|select|textarea)$/i,Be=/^key/,Te=/^(?:mouse|contextmenu)|click/,Ie=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,o,a){var i,r,s,l,c,d,u,p,f,h=Q._data(e);if(h)for(n.handler&&(n=(s=n).handler,a=s.selector),n.guid||(n.guid=Q.guid++),(i=h.events)||(i=h.events={}),(c=h.handle)||((c=h.handle=function(e){return typeof Q==me||e&&Q.event.triggered===e.type?void 0:Q.event.dispatch.apply(c.elem,arguments)}).elem=e),r=(t=(t||"").match(pe)||[""]).length;r--;)u=f=(d=Ee.exec(t[r])||[])[1],p=(d[2]||"").split(".").sort(),u&&(l=Q.event.special[u]||{},u=(a?l.delegateType:l.bindType)||u,l=Q.event.special[u]||{},d=Q.extend({type:u,origType:f,data:o,handler:n,guid:n.guid,selector:a,needsContext:a&&Q.expr.match.needsContext.test(a),namespace:p.join(".")},s),(f=i[u])||((f=i[u]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,o,p,c)||(e.addEventListener?e.addEventListener(u,c,!1):e.attachEvent&&e.attachEvent("on"+u,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,d):f.push(d),Q.event.global[u]=!0)},remove:function(e,t,n,o,a){var i,r,s,l,c,d,u,p,f,h,m,g=Q.hasData(e)&&Q._data(e);if(g&&(d=g.events)){for(c=(t=(t||"").match(pe)||[""]).length;c--;)if(f=m=(s=Ee.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),f){for(u=Q.event.special[f]||{},p=d[f=(o?u.delegateType:u.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=i=p.length;i--;)r=p[i],!a&&m!==r.origType||n&&n.guid!==r.guid||s&&!s.test(r.namespace)||o&&o!==r.selector&&("**"!==o||!r.selector)||(p.splice(i,1),r.selector&&p.delegateCount--,u.remove&&u.remove.call(e,r));l&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,h,g.handle)||Q.removeEvent(e,f,g.handle),delete d[f])}else for(f in d)Q.event.remove(e,f+t[c],n,o,!0);Q.isEmptyObject(d)&&(delete g.handle,Q._removeData(e,"events"))}},trigger:function(e,t,n,o){var a,i,r,s,l,c,d=[n||re],u=X.call(e,"type")?e.type:e,p=X.call(e,"namespace")?e.namespace.split("."):[],f=l=n=n||re;if(3!==n.nodeType&&8!==n.nodeType&&!Ie.test(u+Q.event.triggered)&&(0<=u.indexOf(".")&&(u=(p=u.split(".")).shift(),p.sort()),i=u.indexOf(":")<0&&"on"+u,(e=e[Q.expando]?e:new Q.Event(u,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:Q.makeArray(t,[e]),s=Q.event.special[u]||{},o||!s.trigger||!1!==s.trigger.apply(n,t))){if(!o&&!s.noBubble&&!Q.isWindow(n)){for(r=s.delegateType||u,Ie.test(r+u)||(f=f.parentNode);f;f=f.parentNode)d.push(f),l=f;l===(n.ownerDocument||re)&&d.push(l.defaultView||l.parentWindow||h)}for(c=0;(f=d[c++])&&!e.isPropagationStopped();)e.type=1<c?r:s.bindType||u,(a=(Q._data(f,"events")||{})[e.type]&&Q._data(f,"handle"))&&a.apply(f,t),(a=i&&f[i])&&a.apply&&Q.acceptData(f)&&(e.result=a.apply(f,t),!1===e.result&&e.preventDefault());if(e.type=u,!o&&!e.isDefaultPrevented()&&(!s._default||!1===s._default.apply(d.pop(),t))&&Q.acceptData(n)&&i&&n[u]&&!Q.isWindow(n)){(l=n[i])&&(n[i]=null),Q.event.triggered=u;try{n[u]()}catch(e){}Q.event.triggered=void 0,l&&(n[i]=l)}return e.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,o,a,i,r=$.call(arguments),s=(Q._data(this,"events")||{})[e.type]||[],l=Q.event.special[e.type]||{};if((r[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(i=Q.event.handlers.call(this,e,s),t=0;(o=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(n=o.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,void 0!==(n=((Q.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,r))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,o,a,i,r=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(a=[],i=0;i<s;i++)void 0===a[n=(o=t[i]).selector+" "]&&(a[n]=o.needsContext?0<=Q(n,this).index(l):Q.find(n,this,null,[l]).length),a[n]&&a.push(o);a.length&&r.push({elem:l,handlers:a})}return s<t.length&&r.push({elem:this,handlers:t.slice(s)}),r},fix:function(e){if(e[Q.expando])return e;var t,n,o,a=e.type,i=e,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=Te.test(a)?this.mouseHooks:Be.test(a)?this.keyHooks:{}),o=r.props?this.props.concat(r.props):this.props,e=new Q.Event(i),t=o.length;t--;)e[n=o[t]]=i[n];return e.target||(e.target=i.srcElement||re),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,i):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,o,a=t.button,i=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=(n=e.target.ownerDocument||re).documentElement,n=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?t.toElement:i),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(Q.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,o){e=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});o?Q.event.trigger(e,null,t):Q.event.dispatch.call(t,e),e.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=re.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){t="on"+t;e.detachEvent&&(typeof e[t]==me&&(e[t]=null),e.detachEvent(t,n))},Q.Event=function(e,t){if(!(this instanceof Q.Event))return new Q.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault())?d:u):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),this[Q.expando]=!0},Q.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,a){Q.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,n=e.relatedTarget,o=e.handleObj;return n&&(n===this||Q.contains(this,n))||(e.type=o.origType,t=o.handler.apply(this,arguments),e.type=a),t}}}),Y.submitBubbles||(Q.event.special.submit={setup:function(){if(Q.nodeName(this,"form"))return!1;Q.event.add(this,"click._submit keypress._submit",function(e){e=e.target,e=Q.nodeName(e,"input")||Q.nodeName(e,"button")?e.form:void 0;e&&!Q._data(e,"submitBubbles")&&(Q.event.add(e,"submit._submit",function(e){e._submit_bubble=!0}),Q._data(e,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Q.nodeName(this,"form"))return!1;Q.event.remove(this,"._submit")}}),Y.changeBubbles||(Q.event.special.change={setup:function(){if(xe.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Q.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Q.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,e,!0)})),!1;Q.event.add(this,"beforeactivate._change",function(e){e=e.target;xe.test(e.nodeName)&&!Q._data(e,"changeBubbles")&&(Q.event.add(e,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||Q.event.simulate("change",this.parentNode,e,!0)}),Q._data(e,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Q.event.remove(this,"._change"),!xe.test(this.nodeName)}}),Y.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(n,o){function a(e){Q.event.simulate(o,e.target,Q.event.fix(e),!0)}Q.event.special[o]={setup:function(){var e=this.ownerDocument||this,t=Q._data(e,o);t||e.addEventListener(n,a,!0),Q._data(e,o,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q._data(e,o)-1;t?Q._data(e,o,t):(e.removeEventListener(n,a,!0),Q._removeData(e,o))}}}),Q.fn.extend({on:function(e,t,n,o,a){var i,r;if("object"==typeof e){for(i in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(i,t,n,e[i],a);return this}if(null==n&&null==o?(o=t,n=t=void 0):null==o&&("string"==typeof t?(o=n,n=void 0):(o=n,n=t,t=void 0)),!1===o)o=u;else if(!o)return this;return 1===a&&(r=o,(o=function(e){return Q().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,o,n,t)})},one:function(e,t,n,o){return this.on(e,t,n,o,1)},off:function(e,t,n){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Q(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=u),this.each(function(){Q.event.remove(this,e,n,t)});for(a in e)this.off(a,t,e[a]);return this},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Q.event.trigger(e,t,n,!0)}});var Se="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_e=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Se+")[\\s/>]","i"),Me=/^\s+/,Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,Le=/<tbody/i,ze=/<|&#?\w+;/,Ae=/<(?:script|style|link)/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^$|\/(?:java|ecma)script/i,Ne=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ue={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Y.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},$e=m(re).appendChild(re.createElement("div"));Ue.optgroup=Ue.option,Ue.tbody=Ue.tfoot=Ue.colgroup=Ue.caption=Ue.thead,Ue.th=Ue.td,Q.extend({clone:function(e,t,n){var o,a,i,r,s,l=Q.contains(e.ownerDocument,e);if(Y.html5Clone||Q.isXMLDoc(e)||!Fe.test("<"+e.nodeName+">")?i=e.cloneNode(!0):($e.innerHTML=e.outerHTML,$e.removeChild(i=$e.firstChild)),!(Y.noCloneEvent&&Y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(o=g(i),s=g(e),r=0;null!=(a=s[r]);++r)o[r]&&function(e,t){var n,o,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!Y.noCloneEvent&&t[Q.expando]){for(o in(a=Q._data(t)).events)Q.removeEvent(t,o,a.handle);t.removeAttribute(Q.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,y(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.html5Clone&&e.innerHTML&&!Q.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ce.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}(a,o[r]);if(t)if(n)for(s=s||g(e),o=o||g(i),r=0;null!=(a=s[r]);r++)w(a,o[r]);else w(e,i);return 0<(o=g(i,"script")).length&&k(o,!l&&g(e,"script")),o=s=a=null,i},buildFragment:function(e,t,n,o){for(var a,i,r,s,l,c,d,u=e.length,p=m(t),f=[],h=0;h<u;h++)if((i=e[h])||0===i)if("object"===Q.type(i))Q.merge(f,i.nodeType?[i]:i);else if(ze.test(i)){for(s=s||p.appendChild(t.createElement("div")),l=(De.exec(i)||["",""])[1].toLowerCase(),d=Ue[l]||Ue._default,s.innerHTML=d[1]+i.replace(Pe,"<$1></$2>")+d[2],a=d[0];a--;)s=s.lastChild;if(!Y.leadingWhitespace&&Me.test(i)&&f.push(t.createTextNode(Me.exec(i)[0])),!Y.tbody)for(a=(i="table"!==l||Le.test(i)?"<table>"!==d[1]||Le.test(i)?0:s:s.firstChild)&&i.childNodes.length;a--;)Q.nodeName(c=i.childNodes[a],"tbody")&&!c.childNodes.length&&i.removeChild(c);for(Q.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else f.push(t.createTextNode(i));for(s&&p.removeChild(s),Y.appendChecked||Q.grep(g(f,"input"),v),h=0;i=f[h++];)if((!o||-1===Q.inArray(i,o))&&(r=Q.contains(i.ownerDocument,i),s=g(p.appendChild(i),"script"),r&&k(s),n))for(a=0;i=s[a++];)Oe.test(i.type||"")&&n.push(i);return s=null,p},cleanData:function(e,t){for(var n,o,a,i,r=0,s=Q.expando,l=Q.cache,c=Y.deleteExpando,d=Q.event.special;null!=(n=e[r]);r++)if((t||Q.acceptData(n))&&(i=(a=n[s])&&l[a])){if(i.events)for(o in i.events)d[o]?Q.event.remove(n,o):Q.removeEvent(n,o,i.handle);l[a]&&(delete l[a],c?delete n[s]:typeof n.removeAttribute!=me?n.removeAttribute(s):n[s]=null,U.push(a))}}}),Q.fn.extend({text:function(e){return we(this,function(e){return void 0===e?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||re).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||f(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=f(this,e)).insertBefore(e,t.firstChild)})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,o=e?Q.filter(e,this):this,a=0;null!=(n=o[a]);a++)t||1!==n.nodeType||Q.cleanData(g(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&k(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&Q.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&Q.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return we(this,function(e){var t=this[0]||{},n=0,o=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(_e,""):void 0;if("string"==typeof e&&!Ae.test(e)&&(Y.htmlSerialize||!Fe.test(e))&&(Y.leadingWhitespace||!Me.test(e))&&!Ue[(De.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;n<o;n++)1===(t=this[n]||{}).nodeType&&(Q.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Q.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(n,o){n=R.apply([],n);var e,t,a,i,r,s,l=0,c=this.length,d=this,u=c-1,p=n[0],f=Q.isFunction(p);if(f||1<c&&"string"==typeof p&&!Y.checkClone&&He.test(p))return this.each(function(e){var t=d.eq(e);f&&(n[0]=p.call(this,e,t.html())),t.domManip(n,o)});if(c&&(e=(s=Q.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===s.childNodes.length&&(s=e),e)){for(a=(i=Q.map(g(s,"script"),b)).length;l<c;l++)t=s,l!==u&&(t=Q.clone(t,!0,!0),a&&Q.merge(i,g(t,"script"))),o.call(this[l],t,l);if(a)for(r=i[i.length-1].ownerDocument,Q.map(i,y),l=0;l<a;l++)t=i[l],Oe.test(t.type||"")&&!Q._data(t,"globalEval")&&Q.contains(r,t)&&(t.src?Q._evalUrl&&Q._evalUrl(t.src):Q.globalEval((t.text||t.textContent||t.innerHTML||"").replace(je,"")));s=e=null}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){Q.fn[e]=function(e){for(var t,n=0,o=[],a=Q(e),i=a.length-1;n<=i;n++)t=n===i?this:this.clone(!0),Q(a[n])[r](t),W.apply(o,t.get());return this.pushStack(o)}});var Re,We,Ve={};(ht=re.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(ft=ht.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",Y.opacity=/^0.5/.test(ft.style.opacity),Y.cssFloat=!!ft.style.cssFloat,ht.style.backgroundClip="content-box",ht.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===ht.style.backgroundClip,ft=ht=null,Y.shrinkWrapBlocks=function(){var e,t,n;if(null==We){if(!(e=re.getElementsByTagName("body")[0]))return;t=re.createElement("div"),n=re.createElement("div"),e.appendChild(t).appendChild(n),We=!1,typeof n.style.zoom!=me&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",n.innerHTML="<div></div>",n.firstChild.style.width="5px",We=3!==n.offsetWidth),e.removeChild(t),e=n=null}return We};var qe,Ge,Xe,Ke,Ye,Je,Qe,Ze=/^margin/,et=new RegExp("^("+ye+")(?!px)[a-z%]+$","i"),tt=/^(top|right|bottom|left)$/;function nt(){var e,t,n=re.getElementsByTagName("body")[0];n&&(e=re.createElement("div"),t=re.createElement("div"),e.style.cssText=Qe,n.appendChild(e).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",Q.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){Ke=4===t.offsetWidth}),Je=!(Ye=!0),h.getComputedStyle&&(Je="1%"!==(h.getComputedStyle(t,null)||{}).top,Ye="4px"===(h.getComputedStyle(t,null)||{width:"4px"}).width),n.removeChild(e),t=null)}h.getComputedStyle?(qe=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Ge=function(e,t,n){var o,a=e.style,i=(n=n||qe(e))?n.getPropertyValue(t)||n[t]:void 0;return n&&(""!==i||Q.contains(e.ownerDocument,e)||(i=Q.style(e,t)),et.test(i)&&Ze.test(t)&&(o=a.width,e=a.minWidth,t=a.maxWidth,a.minWidth=a.maxWidth=a.width=i,i=n.width,a.width=o,a.minWidth=e,a.maxWidth=t)),void 0===i?i:i+""}):re.documentElement.currentStyle&&(qe=function(e){return e.currentStyle},Ge=function(e,t,n){var o,a,i,r=e.style;return null==(i=(n=n||qe(e))?n[t]:void 0)&&r&&r[t]&&(i=r[t]),et.test(i)&&!tt.test(t)&&(o=r.left,(n=(a=e.runtimeStyle)&&a.left)&&(a.left=e.currentStyle.left),r.left="fontSize"===t?"1em":i,i=r.pixelLeft+"px",r.left=o,n&&(a.left=n)),void 0===i?i:i+""||"auto"}),J=re.createElement("div"),Qe="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",J.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(ne=J.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",Y.opacity=/^0.5/.test(ne.style.opacity),Y.cssFloat=!!ne.style.cssFloat,J.style.backgroundClip="content-box",J.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===J.style.backgroundClip,ne=J=null,Q.extend(Y,{reliableHiddenOffsets:function(){if(null!=Xe)return Xe;var e,t,n,o=re.createElement("div"),a=re.getElementsByTagName("body")[0];return a?(o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=re.createElement("div")).style.cssText=Qe,a.appendChild(e).appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(t=o.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",Xe=n&&0===t[0].offsetHeight,a.removeChild(e),o=a=null,Xe):void 0},boxSizing:function(){return null==Ke&&nt(),Ke},boxSizingReliable:function(){return null==Ye&&nt(),Ye},pixelPosition:function(){return null==Je&&nt(),Je},reliableMarginRight:function(){var e,t,n,o,a=!0;if(h.getComputedStyle){if(!(e=re.getElementsByTagName("body")[0]))return;t=re.createElement("div"),n=re.createElement("div"),t.style.cssText=Qe,e.appendChild(t).appendChild(n),(o=n.appendChild(re.createElement("div"))).style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",o.style.marginRight=o.style.width="0",n.style.width="1px",a=!parseFloat((h.getComputedStyle(o,null)||{}).marginRight),e.removeChild(t)}return a}}),Q.swap=function(e,t,n,o){var a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in o=n.apply(e,o||[]),t)e.style[a]=i[a];return o};var ot=/alpha\([^)]*\)/i,at=/opacity\s*=\s*([^)]*)/,it=/^(none|table(?!-c[ea]).+)/,rt=new RegExp("^("+ye+")(.*)$","i"),st=new RegExp("^([+-])=("+ye+")","i"),lt={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:0,fontWeight:400},dt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=Ge(e,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:Y.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,r,s=Q.camelCase(t),l=e.style;if(t=Q.cssProps[s]||(Q.cssProps[s]=T(l,s)),r=Q.cssHooks[t]||Q.cssHooks[s],void 0===n)return r&&"get"in r&&void 0!==(a=r.get(e,!1,o))?a:l[t];if("string"===(i=typeof n)&&(a=st.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(Q.css(e,t)),i="number"),null!=n&&n==n&&("number"!==i||Q.cssNumber[s]||(n+="px"),Y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(r&&"set"in r&&void 0===(n=r.set(e,n,o)))))try{l[t]="",l[t]=n}catch(e){}}},css:function(e,t,n,o){var a,i=Q.camelCase(t);return t=Q.cssProps[i]||(Q.cssProps[i]=T(e.style,i)),"normal"===(a=void 0===(a=(i=Q.cssHooks[t]||Q.cssHooks[i])&&"get"in i?i.get(e,!0,n):a)?Ge(e,t,o):a)&&t in ct&&(a=ct[t]),""===n||n?(t=parseFloat(a),!0===n||Q.isNumeric(t)?t||0:a):a}}),Q.each(["height","width"],function(e,a){Q.cssHooks[a]={get:function(e,t,n){if(t)return 0===e.offsetWidth&&it.test(Q.css(e,"display"))?Q.swap(e,lt,function(){return _(e,a,n)}):_(e,a,n)},set:function(e,t,n){var o=n&&qe(e);return E(0,t,n?S(e,a,n,Y.boxSizing()&&"border-box"===Q.css(e,"boxSizing",!1,o),o):0)}}}),Y.opacity||(Q.cssHooks.opacity={get:function(e,t){return at.test((t&&e.currentStyle?e.currentStyle:e.style).filter||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,o=e.currentStyle,a=Q.isNumeric(t)?"alpha(opacity="+100*t+")":"",e=o&&o.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===Q.trim(e.replace(ot,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||o&&!o.filter)||(n.filter=ot.test(e)?e.replace(ot,a):e+" "+a)}}),Q.cssHooks.marginRight=B(Y.reliableMarginRight,function(e,t){if(t)return Q.swap(e,{display:"inline-block"},Ge,[e,"marginRight"])}),Q.each({margin:"",padding:"",border:"Width"},function(a,i){Q.cssHooks[a+i]={expand:function(e){for(var t=0,n={},o="string"==typeof e?e.split(" "):[e];t<4;t++)n[a+ke[t]+i]=o[t]||o[t-2]||o[0];return n}},Ze.test(a)||(Q.cssHooks[a+i].set=E)}),Q.fn.extend({css:function(e,t){return we(this,function(e,t,n){var o,a,i={},r=0;if(Q.isArray(t)){for(o=qe(e),a=t.length;r<a;r++)i[t[r]]=Q.css(e,t[r],!1,o);return i}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,1<arguments.length)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){be(this)?Q(this).show():Q(this).hide()})}}),(Q.Tween=F).prototype={constructor:F,init:function(e,t,n,o,a,i){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=i||(Q.cssNumber[n]?"":"px")},cur:function(){var e=F.propHooks[this.prop];return(e&&e.get?e:F.propHooks._default).get(this)},run:function(e){var t,n=F.propHooks[this.prop];return this.options.duration?this.pos=t=Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:F.propHooks._default).set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=F.prototype.init,Q.fx.step={};var ut,pt,ft,ht,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+ye+")([a-z%]*)$","i"),vt=/queueHooks$/,bt=[function(t,e,n){var o,a,i,r,s,l,c,d,u=this,p={},f=t.style,h=t.nodeType&&be(t),m=Q._data(t,"fxshow");for(o in n.queue||(null==(s=Q._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,Q.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=Q.css(t,"display"),d=x(t.nodeName),"inline"===(c="none"===c?d:c)&&"none"===Q.css(t,"float")&&(Y.inlineBlockNeedsLayout&&"inline"!==d?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",Y.shrinkWrapBlocks()||u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(a=e[o],mt.exec(a)){if(delete e[o],i=i||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!m||void 0===m[o])continue;h=!0}p[o]=m&&m[o]||Q.style(t,o)}if(!Q.isEmptyObject(p))for(o in m?"hidden"in m&&(h=m.hidden):m=Q._data(t,"fxshow",{}),i&&(m.hidden=!h),h?Q(t).show():u.done(function(){Q(t).hide()}),u.done(function(){for(var e in Q._removeData(t,"fxshow"),p)Q.style(t,e,p[e])}),p)r=D(h?m[o]:0,o,u),o in m||(m[o]=r.start,h&&(r.end=r.start,r.start="width"===o||"height"===o?1:0))}],yt={"*":[function(e,t){var n=this.createTween(e,t),o=n.cur(),t=gt.exec(t),a=t&&t[3]||(Q.cssNumber[e]?"":"px"),i=(Q.cssNumber[e]||"px"!==a&&+o)&&gt.exec(Q.css(n.elem,e)),r=1,s=20;if(i&&i[3]!==a)for(a=a||i[3],t=t||[],i=+o||1;i/=r=r||".5",Q.style(n.elem,e,i+a),r!==(r=n.cur()/o)&&1!==r&&--s;);return t&&(i=n.start=+i||+o||0,n.unit=a,n.end=t[1]?i+(t[1]+1)*t[2]:+t[2]),n}]};Q.Animation=Q.extend(L,{tweener:function(e,t){for(var n,o=0,a=(e=Q.isFunction(e)?(t=e,["*"]):e.split(" ")).length;o<a;o++)n=e[o],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?bt.unshift(e):bt.push(e)}}),Q.speed=function(e,t,n){var o=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return o.duration=Q.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in Q.fx.speeds?Q.fx.speeds[o.duration]:Q.fx.speeds._default,null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){Q.isFunction(o.old)&&o.old.call(this),o.queue&&Q.dequeue(this,o.queue)},o},Q.fn.extend({fadeTo:function(e,t,n,o){return this.filter(be).css("opacity",0).show().end().animate({opacity:t},e,n,o)},animate:function(t,e,n,o){var a=Q.isEmptyObject(t),i=Q.speed(e,n,o),o=function(){var e=L(this,Q.extend({},t),i);(a||Q._data(this,"finish"))&&e.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(a,e,i){function r(e){var t=e.stop;delete e.stop,t(i)}return"string"!=typeof a&&(i=e,e=a,a=void 0),e&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var e=!0,t=null!=a&&a+"queueHooks",n=Q.timers,o=Q._data(this);if(t)o[t]&&o[t].stop&&r(o[t]);else for(t in o)o[t]&&o[t].stop&&vt.test(t)&&r(o[t]);for(t=n.length;t--;)n[t].elem!==this||null!=a&&n[t].queue!==a||(n[t].anim.stop(i),e=!1,n.splice(t,1));!e&&i||Q.dequeue(this,a)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var e,t=Q._data(this),n=t[r+"queue"],o=t[r+"queueHooks"],a=Q.timers,i=n?n.length:0;for(t.finish=!0,Q.queue(this,r,[]),o&&o.stop&&o.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===r&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<i;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),Q.each(["toggle","show","hide"],function(e,o){var a=Q.fn[o];Q.fn[o]=function(e,t,n){return null==e||"boolean"==typeof e?a.apply(this,arguments):this.animate(P(o,!0),e,t,n)}}),Q.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,o){Q.fn[e]=function(e,t,n){return this.animate(o,e,t,n)}}),Q.timers=[],Q.fx.tick=function(){var e,t=Q.timers,n=0;for(ut=Q.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||Q.fx.stop(),ut=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){pt=pt||setInterval(Q.fx.tick,Q.fx.interval)},Q.fx.stop=function(){clearInterval(pt),pt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(o,e){return o=Q.fx&&Q.fx.speeds[o]||o,this.queue(e=e||"fx",function(e,t){var n=setTimeout(e,o);t.stop=function(){clearTimeout(n)}})},(ht=re.createElement("div")).setAttribute("className","t"),ht.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ft=ht.getElementsByTagName("a")[0],ne=(J=re.createElement("select")).appendChild(re.createElement("option")),ye=ht.getElementsByTagName("input")[0],ft.style.cssText="top:1px",Y.getSetAttribute="t"!==ht.className,Y.style=/top/.test(ft.getAttribute("style")),Y.hrefNormalized="/a"===ft.getAttribute("href"),Y.checkOn=!!ye.value,Y.optSelected=ne.selected,Y.enctype=!!re.createElement("form").enctype,J.disabled=!0,Y.optDisabled=!ne.disabled,(ye=re.createElement("input")).setAttribute("value",""),Y.input=""===ye.getAttribute("value"),ye.value="t",ye.setAttribute("type","radio"),Y.radioValue="t"===ye.value;var kt=/\r/g;Q.fn.extend({val:function(t){var n,e,o,a=this[0];return arguments.length?(o=Q.isFunction(t),this.each(function(e){1===this.nodeType&&(null==(e=o?t.call(this,e,Q(this).val()):t)?e="":"number"==typeof e?e+="":Q.isArray(e)&&(e=Q.map(e,function(e){return null==e?"":e+""})),(n=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):a?(n=Q.valHooks[a.type]||Q.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(a,"value"))?e:"string"==typeof(e=a.value)?e.replace(kt,""):null==e?"":e:void 0}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.text(e)}},select:{get:function(e){for(var t,n=e.options,o=e.selectedIndex,a="select-one"===e.type||o<0,i=a?null:[],r=a?o+1:n.length,s=o<0?r:a?o:0;s<r;s++)if(((t=n[s]).selected||s===o)&&(Y.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!Q.nodeName(t.parentNode,"optgroup"))){if(t=Q(t).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var n,o,a=e.options,i=Q.makeArray(t),r=a.length;r--;)if(o=a[r],0<=Q.inArray(Q.valHooks.option.get(o),i))try{o.selected=n=!0}catch(e){o.scrollHeight}else o.selected=!1;return n||(e.selectedIndex=-1),a}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){if(Q.isArray(t))return e.checked=0<=Q.inArray(Q(e).val(),t)}},Y.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt,Ct,xt=Q.expr.attrHandle,Bt=/^(?:checked|selected)$/i,Tt=Y.getSetAttribute,It=Y.input;Q.fn.extend({attr:function(e,t){return we(this,Q.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return typeof e.getAttribute==me?Q.prop(e,t,n):(1===i&&Q.isXMLDoc(e)||(t=t.toLowerCase(),o=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?Ct:wt)),void 0===n?!(o&&"get"in o&&null!==(a=o.get(e,t)))&&null==(a=Q.find.attr(e,t))?void 0:a:null!==n?o&&"set"in o&&void 0!==(a=o.set(e,n,t))?a:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,o,a=0,i=t&&t.match(pe);if(i&&1===e.nodeType)for(;n=i[a++];)o=Q.propFix[n]||n,Q.expr.match.bool.test(n)?It&&Tt||!Bt.test(n)?e[o]=!1:e[Q.camelCase("default-"+n)]=e[o]=!1:Q.attr(e,n,""),e.removeAttribute(Tt?n:o)},attrHooks:{type:{set:function(e,t){if(!Y.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ct={set:function(e,t,n){return!1===t?Q.removeAttr(e,n):It&&Tt||!Bt.test(n)?e.setAttribute(!Tt&&Q.propFix[n]||n,n):e[Q.camelCase("default-"+n)]=e[n]=!0,n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var i=xt[t]||Q.find.attr;xt[t]=It&&Tt||!Bt.test(t)?function(e,t,n){var o,a;return n||(a=xt[t],xt[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,xt[t]=a),o}:function(e,t,n){if(!n)return e[Q.camelCase("default-"+t)]?t.toLowerCase():null}}),It&&Tt||(Q.attrHooks.value={set:function(e,t,n){if(!Q.nodeName(e,"input"))return wt&&wt.set(e,t,n);e.defaultValue=t}}),Tt||(wt={set:function(e,t,n){var o=e.getAttributeNode(n);if(o||e.setAttributeNode(o=e.ownerDocument.createAttribute(n)),o.value=t+="","value"===n||t===e.getAttribute(n))return t}},xt.id=xt.name=xt.coords=function(e,t,n){if(!n)return(t=e.getAttributeNode(t))&&""!==t.value?t.value:null},Q.valHooks.button={get:function(e,t){t=e.getAttributeNode(t);if(t&&t.specified)return t.value},set:wt.set},Q.attrHooks.contenteditable={set:function(e,t,n){wt.set(e,""!==t&&t,n)}},Q.each(["width","height"],function(e,n){Q.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),Y.style||(Q.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Et=/^(?:input|select|textarea|button|object)$/i,St=/^(?:a|area)$/i;Q.fn.extend({prop:function(e,t){return we(this,Q.prop,e,t,1<arguments.length)},removeProp:function(e){return e=Q.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),Q.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return(1!==i||!Q.isXMLDoc(e))&&(t=Q.propFix[t]||t,a=Q.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(o=a.set(e,n,t))?o:e[t]=n:a&&"get"in a&&null!==(o=a.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=Q.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}}}),Y.hrefNormalized||Q.each(["href","src"],function(e,t){Q.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),Y.optSelected||(Q.propHooks.selected={get:function(e){e=e.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this}),Y.enctype||(Q.propFix.enctype="encoding");var _t=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(t){var e,n,o,a,i,r,s=0,l=this.length,c="string"==typeof t&&t;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(pe)||[];s<l;s++)if(o=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(_t," "):" ")){for(i=0;a=e[i++];)o.indexOf(" "+a+" ")<0&&(o+=a+" ");r=Q.trim(o),n.className!==r&&(n.className=r)}return this},removeClass:function(t){var e,n,o,a,i,r,s=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(pe)||[];s<l;s++)if(o=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(_t," "):"")){for(i=0;a=e[i++];)for(;0<=o.indexOf(" "+a+" ");)o=o.replace(" "+a+" "," ");r=t?Q.trim(o):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(a,t){var i=typeof a;return"boolean"==typeof t&&"string"==i?t?this.addClass(a):this.removeClass(a):Q.isFunction(a)?this.each(function(e){Q(this).toggleClass(a.call(this,e,this.className,t),t)}):this.each(function(){if("string"==i)for(var e,t=0,n=Q(this),o=a.match(pe)||[];e=o[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else i!=me&&"boolean"!=i||(this.className&&Q._data(this,"__className__",this.className),this.className=!this.className&&!1!==a&&Q._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,o=this.length;n<o;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(_t," ").indexOf(t))return!0;return!1}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){Q.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,o){return this.on(t,e,n,o)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Ft=Q.now(),Mt=/\?/,Pt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;Q.parseJSON=function(e){if(h.JSON&&h.JSON.parse)return h.JSON.parse(e+"");var a,i=null,t=Q.trim(e+"");return t&&!Q.trim(t.replace(Pt,function(e,t,n,o){return 0===(i=a&&t?0:i)?e:(a=n||t,i+=!o-!n,"")}))?Function("return "+t)():Q.error("Invalid JSON: "+e)},Q.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{h.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+e),t};var Dt,Lt,zt=/#.*$/,At=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ot=/^(?:GET|HEAD)$/,Nt=/^\/\//,jt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ut={},$t={},Rt="*/".concat("*");try{Lt=location.href}catch(e){(Lt=re.createElement("a")).href="",Lt=Lt.href}Dt=jt.exec(Lt.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Dt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,Q.ajaxSettings),t):H(Q.ajaxSettings,e)},ajaxPrefilter:z(Ut),ajaxTransport:z($t),ajax:function(e,t){function n(e,t,n,o){var a,i,r,s=t;2!==y&&(y=2,d&&clearTimeout(d),p=void 0,c=o||"",k.readyState=0<e?4:0,o=200<=e&&e<300||304===e,n&&(r=function(e,t,n){for(var o,a,i,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(r in s)if(s[r]&&s[r].test(a)){l.unshift(r);break}if(l[0]in n)i=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){i=r;break}o=o||r}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}(f,k,n)),r=function(e,t,n,o){var a,i,r,s,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(i=d.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=d.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(r=c[l+" "+i]||c["* "+i]))for(a in c)if((s=a.split(" "))[1]===i&&(r=c[l+" "+s[0]]||c["* "+s[0]])){!0===r?r=c[a]:!0!==c[a]&&(i=s[0],d.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(f,r,k,o),o?(f.ifModified&&((n=k.getResponseHeader("Last-Modified"))&&(Q.lastModified[l]=n),(n=k.getResponseHeader("etag"))&&(Q.etag[l]=n)),204===e||"HEAD"===f.type?s="nocontent":304===e?s="notmodified":(s=r.state,a=r.data,o=!(i=r.error))):(i=s,!e&&s||(s="error",e<0&&(e=0))),k.status=e,k.statusText=(t||s)+"",o?g.resolveWith(h,[a,s,k]):g.rejectWith(h,[k,s,i]),k.statusCode(b),b=void 0,u&&m.trigger(o?"ajaxSuccess":"ajaxError",[k,f,o?a:i]),v.fireWith(h,[k,s]),u&&(m.trigger("ajaxComplete",[k,f]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0);var o,l,c,d,u,p,a,f=Q.ajaxSetup({},t=t||{}),h=f.context||f,m=f.context&&(h.nodeType||h.jquery)?Q(h):Q.event,g=Q.Deferred(),v=Q.Callbacks("once memory"),b=f.statusCode||{},i={},r={},y=0,s="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!a)for(a={};t=Ht.exec(c);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?c:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=r[n]=r[n]||e,i[e]=t),this},overrideMimeType:function(e){return y||(f.mimeType=e),this},statusCode:function(e){if(e)if(y<2)for(var t in e)b[t]=[b[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){e=e||s;return p&&p.abort(e),n(0,e),this}};if(g.promise(k).complete=v.add,k.success=k.done,k.error=k.fail,f.url=((e||f.url||Lt)+"").replace(zt,"").replace(Nt,Dt[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Q.trim(f.dataType||"*").toLowerCase().match(pe)||[""],null==f.crossDomain&&(e=jt.exec(f.url.toLowerCase()),f.crossDomain=!(!e||e[1]===Dt[1]&&e[2]===Dt[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Dt[3]||("http:"===Dt[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Q.param(f.data,f.traditional)),A(Ut,f,t,k),2===y)return k;for(o in(u=f.global)&&0==Q.active++&&Q.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ot.test(f.type),l=f.url,f.hasContent||(f.data&&(l=f.url+=(Mt.test(l)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=At.test(l)?l.replace(At,"$1_="+Ft++):l+(Mt.test(l)?"&":"?")+"_="+Ft++)),f.ifModified&&(Q.lastModified[l]&&k.setRequestHeader("If-Modified-Since",Q.lastModified[l]),Q.etag[l]&&k.setRequestHeader("If-None-Match",Q.etag[l])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(!1===f.beforeSend.call(h,k,f)||2===y))return k.abort();for(o in s="abort",{success:1,error:1,complete:1})k[o](f[o]);return p=A($t,f,t,k),k.send=function(){k.readyState=1,u&&m.trigger("ajaxSend",[k,f]),f.async&&0<f.timeout&&(d=setTimeout(function(){k.abort("timeout")},f.timeout));try{y=1,p.send(i,n)}catch(e){if(!(y<2))throw e;n(-1,e)}},p?!1!==t.autostart&&k.send():n(-1,"No Transport"),k},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,a){Q[a]=function(e,t,n,o){return Q.isFunction(t)&&(o=o||n,n=t,t=void 0),Q.ajax({url:e,type:a,dataType:o,data:t,success:n})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Q.fn.extend({wrapAll:function(t){return Q.isFunction(t)?this.each(function(e){Q(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Q(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)),this);var e},wrapInner:function(n){return Q.isFunction(n)?this.each(function(e){Q(this).wrapInner(n.call(this,e))}):this.each(function(){var e=Q(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=Q.isFunction(t);return this.each(function(e){Q(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!Y.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||Q.css(e,"display"))},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var Wt=/%20/g,Vt=/\[\]$/,qt=/\r?\n/g,Gt=/^(?:submit|button|image|reset|file)$/i,Xt=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){function n(e,t){t=Q.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var o,a=[];if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){n(this.name,this.value)});else for(o in e)!function n(o,e,a,i){if(Q.isArray(e))Q.each(e,function(e,t){a||Vt.test(o)?i(o,t):n(o+"["+("object"==typeof t?e:"")+"]",t,a,i)});else if(a||"object"!==Q.type(e))i(o,e);else for(var t in e)n(o+"["+t+"]",e[t],a,i)}(o,e[o],t,n);return a.join("&").replace(Wt,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&Xt.test(this.nodeName)&&!Gt.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(qt,"\r\n")}}):{name:t.name,value:n.replace(qt,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=void 0!==h.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&O()||function(){try{return new h.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:O;var Kt=0,Yt={},ne=Q.ajaxSettings.xhr();h.ActiveXObject&&Q(h).on("unload",function(){for(var e in Yt)Yt[e](void 0,!0)}),Y.cors=!!ne&&"withCredentials"in ne,(ne=Y.ajax=!!ne)&&Q.ajaxTransport(function(l){var c;if(!l.crossDomain||Y.cors)return{send:function(e,i){var t,r=l.xhr(),s=++Kt;if(r.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(t in l.xhrFields)r[t]=l.xhrFields[t];for(t in l.mimeType&&r.overrideMimeType&&r.overrideMimeType(l.mimeType),l.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)void 0!==e[t]&&r.setRequestHeader(t,e[t]+"");r.send(l.hasContent&&l.data||null),c=function(e,t){var n,o,a;if(c&&(t||4===r.readyState))if(delete Yt[s],c=void 0,r.onreadystatechange=Q.noop,t)4!==r.readyState&&r.abort();else{a={},n=r.status,"string"==typeof r.responseText&&(a.text=r.responseText);try{o=r.statusText}catch(e){o=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=a.text?200:404}a&&i(n,o,a,r.getAllResponseHeaders())},l.async?4===r.readyState?setTimeout(c):r.onreadystatechange=Yt[s]=c:c()},abort:function(){c&&c(void 0,!0)}}}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var o,a=re.head||Q("head")[0]||re.documentElement;return{send:function(e,n){(o=re.createElement("script")).async=!0,t.scriptCharset&&(o.charset=t.scriptCharset),o.src=t.url,o.onload=o.onreadystatechange=function(e,t){!t&&o.readyState&&!/loaded|complete/.test(o.readyState)||(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),o=null,t||n(200,"success"))},a.insertBefore(o,a.firstChild)},abort:function(){o&&o.onload(void 0,!0)}}}});var Jt=[],Qt=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||Q.expando+"_"+Ft++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(e,t,n){var o,a,i,r=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=Q.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Qt,"$1"+o):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||Q.error(o+" was not called"),i[0]},e.dataTypes[0]="json",a=h[o],h[o]=function(){i=arguments},n.always(function(){h[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(o)),i&&Q.isFunction(a)&&a(i[0]),i=a=void 0}),"script"}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||re;var o=ae.exec(e),n=!n&&[];return o?[t.createElement(o[1])]:(o=Q.buildFragment([e],t,n),n&&n.length&&Q(n).remove(),Q.merge([],o.childNodes))};var Zt=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&Zt)return Zt.apply(this,arguments);var o,a,i,r=this,s=e.indexOf(" ");return 0<=s&&(o=e.slice(s,e.length),e=e.slice(0,s)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<r.length&&Q.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){a=arguments,r.html(o?Q("<div>").append(Q.parseHTML(e)).find(o):e)}).complete(n&&function(e,t){r.each(n,a||[e.responseText,t,e])}),this},Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length};var en=h.document.documentElement;return Q.offset={setOffset:function(e,t,n){var o,a,i,r,s=Q.css(e,"position"),l=Q(e),c={};"static"===s&&(e.style.position="relative"),i=l.offset(),o=Q.css(e,"top"),r=Q.css(e,"left"),r=("absolute"===s||"fixed"===s)&&-1<Q.inArray("auto",[o,r])?(a=(s=l.position()).top,s.left):(a=parseFloat(o)||0,parseFloat(r)||0),null!=(t=Q.isFunction(t)?t.call(e,n,i):t).top&&(c.top=t.top-i.top+a),null!=t.left&&(c.left=t.left-i.left+r),"using"in t?t.using.call(e,c):l.css(c)}},Q.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var e,n={top:0,left:0},o=this[0],a=o&&o.ownerDocument;return a?(e=a.documentElement,Q.contains(e,o)?(typeof o.getBoundingClientRect!=me&&(n=o.getBoundingClientRect()),a=N(a),{top:n.top+(a.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(a.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},o=this[0];return"fixed"===Q.css(o,"position")?t=o.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),(n=!Q.nodeName(e[0],"html")?e.offset():n).top+=Q.css(e[0],"borderTopWidth",!0),n.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-Q.css(o,"marginTop",!0),left:t.left-n.left-Q.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||en;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||en})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var i=/Y/.test(a);Q.fn[t]=function(e){return we(this,function(e,t,n){var o=N(e);if(void 0===n)return o?a in o?o[a]:o.document.documentElement[t]:e[t];o?o.scrollTo(i?Q(o).scrollLeft():n,i?n:Q(o).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),Q.each(["top","left"],function(e,n){Q.cssHooks[n]=B(Y.pixelPosition,function(e,t){if(t)return t=Ge(e,n),et.test(t)?Q(e).position()[n]+"px":t})}),Q.each({Height:"height",Width:"width"},function(i,r){Q.each({padding:"inner"+i,content:r,"":"outer"+i},function(o,e){Q.fn[e]=function(e,t){var n=arguments.length&&(o||"boolean"!=typeof e),a=o||(!0===e||!0===t?"margin":"border");return we(this,function(e,t,n){var o;return Q.isWindow(e)?e.document.documentElement["client"+i]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+i],o["scroll"+i],e.body["offset"+i],o["offset"+i],o["client"+i])):void 0===n?Q.css(e,t,a):Q.style(e,t,n,a)},r,n?e:void 0,n,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,Q.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},ye={},(ne=Q.uaMatch(navigator.userAgent)).browser&&(ye[ne.browser]=!0,ye.version=ne.version),ye.chrome?ye.webkit=!0:ye.webkit&&(ye.safari=!0),Q.browser=ye,Q.version="5.0",Q.long_version="5.0.10",Q.uid=function(e,t){return(e||"")+Math.random().toString().replace(".","")+(t||"")},Q.globalNamespace=Q.uid("Foundry"),(h[Q.globalNamespace]=Q).run=function(e){return Q.isFunction(e)?e(Q):null},Q.initialize=function(e){Q.initialized||(Q.extend(Q,e),"development"==Q.environment&&(h.F=Q),Q.initialized=!0,FD50.module.execute())},FD50.jquery(Q),"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q}),Q}),FD50.plugin("lodash",function(n){function mn(e,t){return e.set(t[0],t[1]),e}function gn(e,t){return e.add(t),e}function vn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function bn(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}function yn(e,t){for(var n=-1,o=null==e?0:e.length,a=0,i=[];++n<o;){var r=e[n];t(r,n,e)&&(i[a++]=r)}return i}function kn(e,t){return!!(null==e?0:e.length)&&-1<Tn(e,t,0)}function wn(e,t,n){for(var o=-1,a=null==e?0:e.length;++o<a;)if(n(t,e[o]))return!0;return!1}function Cn(e,t){for(var n=-1,o=null==e?0:e.length,a=Array(o);++n<o;)a[n]=t(e[n],n,e);return a}function xn(e,t){for(var n=-1,o=t.length,a=e.length;++n<o;)e[a+n]=t[n];return e}function Bn(e,t,n,o){var a=-1,i=null==e?0:e.length;for(o&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function Tn(e,t,n){return t==t?function(e,t,n){var o=n-1,a=e.length;for(;++o<a;)if(e[o]===t)return o;return-1}(e,t,n):function(e,t,n,o){for(var a=e.length,i=n+(o?1:-1);o?i--:++i<a;)if(t(e[i],i,e))return i;return-1}(e,o,n)}function In(e,t,n,o){for(var a=n-1,i=e.length;++a<i;)if(o(e[a],t))return a;return-1}function o(e){return e!=e}function En(t){return function(e){return t(e)}}function Sn(e,t){return e.has(t)}function _n(e){var n=-1,o=Array(e.size);return e.forEach(function(e,t){o[++n]=[t,e]}),o}function Fn(t,n){return function(e){return t(n(e))}}function Mn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Pn(e){return m.test(e)?e.match(h)||[]:e.split("")}var Dn,Ln="Expected a function",zn="__lodash_hash_undefined__",An="__lodash_placeholder__",Hn=9007199254740991,On=4294967295,Nn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],jn="[object Arguments]",Un="[object Array]",$n="[object Boolean]",Rn="[object Date]",Wn="[object Error]",Vn="[object Function]",qn="[object GeneratorFunction]",Gn="[object Map]",Xn="[object Number]",Kn="[object Object]",Yn="[object Promise]",Jn="[object RegExp]",Qn="[object Set]",Zn="[object String]",eo="[object Symbol]",to="[object WeakMap]",no="[object ArrayBuffer]",oo="[object DataView]",ao="[object Float32Array]",io="[object Float64Array]",ro="[object Int8Array]",so="[object Int16Array]",lo="[object Int32Array]",co="[object Uint8Array]",uo="[object Uint8ClampedArray]",po="[object Uint16Array]",fo="[object Uint32Array]",ho=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mo=/^\w*$/,go=/^\./,vo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bo=/[\\^$.*+?()[\]{}|]/g,yo=/^\s+|\s+$/g,ko=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wo=/\{\n\/\* \[wrapped with (.+)\] \*/,Co=/,? & /,xo=/\\(\\)?/g,Bo=/\w*$/,To=/^[-+]0x[0-9a-f]+$/i,Io=/^0b[01]+$/i,Eo=/^\[object .+?Constructor\]$/,So=/^0o[0-7]+$/i,_o=/^(?:0|[1-9]\d*)$/,e="\\ud800-\\udfff",t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",a="\\ufe0e\\ufe0f",i="["+e+"]",r="["+t+"]",s="\\ud83c[\\udffb-\\udfff]",l="[^"+e+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",u="\\u200d",p="(?:"+r+"|"+s+")"+"?",f="["+a+"]?",p=f+p+("(?:"+u+"(?:"+[l,c,d].join("|")+")"+f+p+")*"),i="(?:"+[l+r+"?",r,c,d,i].join("|")+")",h=RegExp(s+"(?="+s+")|"+i+p,"g"),m=RegExp("["+u+e+t+a+"]"),Fo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mo={};Mo[ao]=Mo[io]=Mo[ro]=Mo[so]=Mo[lo]=Mo[co]=Mo[uo]=Mo[po]=Mo[fo]=!0,Mo[jn]=Mo[Un]=Mo[no]=Mo[$n]=Mo[oo]=Mo[Rn]=Mo[Wn]=Mo[Vn]=Mo[Gn]=Mo[Xn]=Mo[Kn]=Mo[Jn]=Mo[Qn]=Mo[Zn]=Mo[to]=!1;var Po={};Po[jn]=Po[Un]=Po[no]=Po[oo]=Po[$n]=Po[Rn]=Po[ao]=Po[io]=Po[ro]=Po[so]=Po[lo]=Po[Gn]=Po[Xn]=Po[Kn]=Po[Jn]=Po[Qn]=Po[Zn]=Po[eo]=Po[co]=Po[uo]=Po[po]=Po[fo]=!0,Po[Wn]=Po[Vn]=Po[to]=!1;var Do=parseInt,e="object"==typeof global&&global&&global.Object===Object&&global,t="object"==typeof self&&self&&self.Object===Object&&self,Lo=e||t||Function("return this")(),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,t=a&&"object"==typeof module&&module&&!module.nodeType&&module,zo=t&&t.exports===a,g=zo&&e.process,e=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),Ao=e&&e.isTypedArray,e=function e(t){function x(e){if(Se(e)&&!un(e)&&!(e instanceof B)){if(e instanceof h)return e;if(lt.call(e,"__wrapped__"))return ue(e)}return new h(e)}function i(){}function h(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=Dn}function B(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=On,this.__views__=[]}function n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function g(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}function v(e){e=this.__data__=new a(e);this.size=e.size}function o(e,t){var n,o=un(e),a=!o&&dn(e),i=!o&&!a&&pn(e),r=!o&&!a&&!i&&fn(e),s=o||a||i||r,l=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,tt):[],c=l.length;for(n in e)!t&&!lt.call(e,n)||s&&("length"==n||i&&("offset"==n||"parent"==n)||r&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||te(n,c))||l.push(n);return l}function b(e,t,n){var o=e[t];lt.call(e,t)&&Ce(o,n)&&(n!==Dn||t in e)||c(e,t,n)}function s(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function c(e,t,n){"__proto__"==t&&xt?xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function y(n,o,a,e,t,i){var r,s=1&o,l=2&o,c=4&o;if((r=a?t?a(n,e,t,i):a(n):r)!==Dn)return r;if(!Ee(n))return n;var d,u,p,f=un(n);if(f){if(r=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!s)return U(n,r)}else{var h=Zt(n),e=h==Vn||h==qn;if(pn(n))return function(e,t){if(t)return e.slice();t=e.length,t=mt?mt(t):new e.constructor(t);return e.copy(t),t}(n,s);if(h==Kn||h==jn||e&&!t){if(r=l||e?{}:"function"!=typeof(e=n).constructor||ae(e)?{}:$t(gt(e)),!s)return l?(p=d=n,p=(u=r)&&$(p,Ne(p),u),$(d,Qt(d),p)):(d=u=n,p=(p=r)&&$(d,Oe(d),p),$(u,Jt(u),p))}else{if(!Po[h])return t?n:{};r=function(e,t,n,o){var a=e.constructor;switch(t){case no:return j(e);case $n:case Rn:return new a(+e);case oo:return function(e,t){t=t?j(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,o);case ao:case io:case ro:case so:case lo:case co:case uo:case po:case fo:return function(e,t){t=t?j(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,o);case Gn:return function(e,t,n){return Bn(t?n(_n(e),1):_n(e),mn,new e.constructor)}(e,o,n);case Xn:case Zn:return new a(e);case Jn:return function(e){var t=new e.constructor(e.source,Bo.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Qn:return function(e,t,n){return Bn(t?n(Mn(e),1):Mn(e),gn,new e.constructor)}(e,o,n);case eo:return function(e){return jt?Ze(jt.call(e)):{}}(e)}}(n,h,y,s)}}s=(i=i||new v).get(n);if(s)return s;i.set(n,r);var m=f?Dn:(c?l?K:X:l?Ne:Oe)(n);return bn(m||n,function(e,t){m&&(e=n[t=e]),b(r,t,y(e,o,a,t,n,i))}),r}function l(e,o){var a=[];return Gt(e,function(e,t,n){o(e,t,n)&&a.push(e)}),a}function d(e,t,n,o,a){var i=-1,r=e.length;for(n=n||ee,a=a||[];++i<r;){var s=e[i];0<t&&n(s)?1<t?d(s,t-1,n,o,a):xn(a,s):o||(a[a.length]=s)}return a}function u(e,t){return e&&Xt(e,t,Oe)}function p(t,e){return yn(e,function(e){return Te(t[e])})}function f(e,t){for(var n=0,o=(t=N(t,e)).length;null!=e&&n<o;)e=e[ce(t[n++])];return n&&n==o?e:Dn}function m(e,t,n){t=t(e);return un(e)?t:xn(t,n(e))}function k(e){return null==e?e===Dn?"[object Undefined]":"[object Null]":Ct&&Ct in Ze(e)?function(e){var t=lt.call(e,Ct),n=e[Ct];try{e[Ct]=Dn;var o=!0}catch(e){}var a=dt.call(e);o&&(t?e[Ct]=n:delete e[Ct]);return a}(e):dt.call(e)}function w(e,t){return null!=e&&lt.call(e,t)}function C(e,t){return null!=e&&t in Ze(e)}function T(e,t,n){var o,a;t=N(t,e),o=e;t=null==(e=(a=t).length<2?o:f(o,function(e,t,n){var o=-1,a=e.length;t<0&&(t=a<-t?0:a+t);(n=a<n?a:n)<0&&(n+=a);a=n<t?0:n-t>>>0,t>>>=0;var i=Ke(a);for(;++o<a;)i[o]=e[o+t];return i}(a,0,-1)))?e:e[ce(fe(t))];return null==t?Dn:vn(t,e,n)}function I(e){return Se(e)&&k(e)==jn}function E(e,t,n,o,a){return e===t||(null==e||null==t||!Se(e)&&!Se(t)?e!=e&&t!=t:function(e,t,n,o,a,i){var r=un(e),s=un(t),l=r?Un:Zt(e),c=s?Un:Zt(t),d=(l=l==jn?Kn:l)==Kn,s=(c=c==jn?Kn:c)==Kn,c=l==c;if(c&&pn(e)){if(!pn(t))return!1;d=!(r=!0)}if(c&&!d)return i=i||new v,r||fn(e)?q(e,t,n,o,a,i):function(e,t,n,o,a,i,r){switch(n){case oo:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case no:return e.byteLength==t.byteLength&&i(new ht(e),new ht(t))?!0:!1;case $n:case Rn:case Xn:return Ce(+e,+t);case Wn:return e.name==t.name&&e.message==t.message;case Jn:case Zn:return e==t+"";case Gn:var s=_n;case Qn:var l=1&o;if(s=s||Mn,e.size!=t.size&&!l)return!1;l=r.get(e);if(l)return l==t;o|=2,r.set(e,t);s=q(s(e),s(t),o,a,i,r);return r.delete(e),s;case eo:if(jt)return jt.call(e)==jt.call(t)}return!1}(e,t,l,n,o,a,i);if(!(1&n)){d=d&&lt.call(e,"__wrapped__"),s=s&&lt.call(t,"__wrapped__");if(d||s){d=d?e.value():e,s=s?t.value():t;return i=i||new v,a(d,s,n,o,i)}}return c&&(i=i||new v,function(e,t,n,o,a,i){var r=1&n,s=X(e),l=s.length,c=X(t).length;if(l!=c&&!r)return!1;var d=l;for(;d--;){var u=s[d];if(!(r?u in t:lt.call(t,u)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var f=!0;i.set(e,t),i.set(t,e);var h=r;for(;++d<l;){u=s[d];var m,g=e[u],v=t[u];if(!((m=o?r?o(v,g,u,t,e,i):o(g,v,u,e,t,i):m)===Dn?g===v||a(g,v,n,o,i):m)){f=!1;break}h=h||"constructor"==u}f&&!h&&(c=e.constructor,p=t.constructor,c!=p&&"constructor"in e&&"constructor"in t&&!("function"==typeof c&&c instanceof c&&"function"==typeof p&&p instanceof p)&&(f=!1));return i.delete(e),i.delete(t),f}(e,t,n,o,a,i))}(e,t,n,o,E,a))}function S(e){var t;return Ee(e)&&(t=e,!(ct&&ct in t))&&(Te(e)?ut:Eo).test(de(e))}function _(e){return"function"==typeof e?e:null==e?$e:"object"==typeof e?un(e)?function(n,o){if(oe(n)&&ie(o))return re(ce(n),o);return function(e){var t=Ae(e,n);return t===Dn&&t===o?He(e,n):E(o,t,3)}}(e[0],e[1]):function(t){var n=function(e){var t=Oe(e),n=t.length;for(;n--;){var o=t[n],a=e[o];t[n]=[o,a,ie(a)]}return t}(t);if(1==n.length&&n[0][2])return re(n[0][0],n[0][1]);return function(e){return e===t||function(e,t,n,o){var a=n.length,i=a,r=!o;if(null==e)return!i;for(e=Ze(e);a--;){var s=n[a];if(r&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){var l=(s=n[a])[0],c=e[l],d=s[1];if(r&&s[2]){if(c===Dn&&!(l in e))return!1}else{var u,p=new v;if(!((u=o?o(c,d,l,e,t,p):u)===Dn?E(d,c,3,o,p):u))return!1}}return!0}(e,t,n)}}(e):qe(e)}function F(e){if(!ae(e))return It(e);var t,n=[];for(t in Ze(e))lt.call(e,t)&&"constructor"!=t&&n.push(t);return n}function M(e){if(!Ee(e))return function(e){var t=[];if(null!=e)for(var n in Ze(e))t.push(n);return t}(e);var t,n=ae(e),o=[];for(t in e)("constructor"!=t||!n&&lt.call(e,t))&&o.push(t);return o}function P(e,o){var a=-1,i=xe(e)?Ke(e.length):[];return Gt(e,function(e,t,n){i[++a]=o(e,t,n)}),i}function D(e,o,n){var a=-1;return o=Cn(o.length?o:[$e],En(Y())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(P(e,function(t,e,n){return{criteria:Cn(o,function(e){return e(t)}),index:++a,value:t}}),function(e,t){return function(e,t,n){var o=-1,a=e.criteria,i=t.criteria,r=a.length,s=n.length;for(;++o<r;){var l=function(e,t){if(e!==t){var n=e!==Dn,o=null===e,a=e==e,i=Fe(e),r=t!==Dn,s=null===t,l=t==t,c=Fe(t);if(!s&&!c&&!i&&t<e||i&&r&&l&&!s&&!c||o&&r&&l||!n&&l||!a)return 1;if(!o&&!i&&!c&&e<t||c&&n&&a&&!o&&!i||s&&n&&a||!r&&a||!l)return-1}return 0}(a[o],i[o]);if(l){if(s<=o)return l;var c=n[o];return l*("desc"==c?-1:1)}}return e.index-t.index}(e,t,n)})}function L(n,e){return function(e,t,n){var o=-1,a=t.length,i={};for(;++o<a;){var r=t[o],s=f(e,r);n(s,r)&&function(e,t,n,o){if(!Ee(e))return;t=N(t,e);var a=-1,i=t.length,r=i-1,s=e;for(;null!=s&&++a<i;){var l,c=ce(t[a]),d=n;a!=r&&(l=s[c],(d=o?o(l,c,s):Dn)===Dn&&(d=Ee(l)?l:te(t[a+1])?[]:{})),b(s,c,d),s=s[c]}}(i,N(r,e),s)}return i}(n,e,function(e,t){return He(n,t)})}function z(e,t){return an(se(e,t,$e),e+"")}function A(e){if("string"==typeof e)return e;if(un(e))return Cn(e,A)+"";if(Fe(e))return Ut?Ut.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function H(e,t){var n=e;return Bn(t,function(e,t){return t.func.apply(t.thisArg,xn([e],t.args))},n=e instanceof B?e.value():n)}function O(e){return Be(e)?e:[]}function N(e,t){return un(e)?e:oe(e,t)?[e]:rn(ze(e))}function j(e){var t=new e.constructor(e.byteLength);return new ht(t).set(new ht(e)),t}function U(e,t){var n=-1,o=e.length;for(t=t||Ke(o);++n<o;)t[n]=e[n];return t}function $(e,t,n,o){var a=!n;n=n||{};for(var i=-1,r=t.length;++i<r;){var s=t[i],l=o?o(n[s],e[s],s,n,e):Dn;(a?c:b)(n,s,l=l===Dn?e[s]:l)}return n}function R(o){return function(){var e=arguments;switch(e.length){case 0:return new o;case 1:return new o(e[0]);case 2:return new o(e[0],e[1]);case 3:return new o(e[0],e[1],e[2]);case 4:return new o(e[0],e[1],e[2],e[3]);case 5:return new o(e[0],e[1],e[2],e[3],e[4]);case 6:return new o(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new o(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=$t(o.prototype),n=o.apply(t,e);return Ee(n)?n:t}}function W(s,l,c,d,u,p,f,h,m,g){var v=128&l,b=1&l,y=2&l,k=24&l,w=512&l,C=y?Dn:R(s);return function e(){for(var t,n=arguments.length,o=Ke(n),a=n;a--;)o[a]=arguments[a];if(k&&(t=e,t=function(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}(o,r=(lt.call(x,"placeholder")?x:t).placeholder)),d&&(o=function(e,t,n,o){for(var a=-1,i=e.length,r=n.length,s=-1,l=t.length,c=Et(i-r,0),d=Ke(l+c),u=!o;++s<l;)d[s]=t[s];for(;++a<r;)(u||a<i)&&(d[n[a]]=e[a]);for(;c--;)d[s++]=e[a++];return d}(o,d,u,k)),p&&(o=function(e,t,n,o){for(var a=-1,i=e.length,r=-1,s=n.length,l=-1,c=t.length,d=Et(i-s,0),u=Ke(d+c),p=!o;++a<d;)u[a]=e[a];for(var f=a;++l<c;)u[f+l]=t[l];for(;++r<s;)(p||a<i)&&(u[f+n[r]]=e[a++]);return u}(o,p,f,k)),n-=t,k&&n<g){var i=function(e,t){for(var n=-1,o=e.length,a=0,i=[];++n<o;){var r=e[n];r!==t&&r!==An||(e[n]=An,i[a++]=n)}return i}(o,r);return function(e,t,n,o,a,i,r,s,l,c){var d=8&t;return t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4),c=[e,t,a,d?i:Dn,d?r:Dn,d?Dn:i,d?Dn:r,s,l,c],n=n.apply(Dn,c),function(e){var t=function(e){for(var t=e.name+"",n=Lt[t],o=lt.call(Lt,t)?n.length:0;o--;){var a=n[o],i=a.func;if(null==i||i==e)return a.name}return t}(e),n=x[t];return"function"==typeof n&&t in B.prototype&&(e===n||(n=Yt(n))&&e===n[0])}(e)&&nn(n,c),n.placeholder=o,function(e,t,n){return an(e,function(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(1<n?"& ":"")+t[o],t=t.join(2<n?", ":" "),e.replace(ko,"{\n/* [wrapped with "+t+"] */\n")}(t+="",function(n,o){return bn(Nn,function(e){var t="_."+e[0];o&e[1]&&!kn(n,t)&&n.push(t)}),n.sort()}(function(e){return(e=e.match(wo))?e[1].split(Co):[]}(t),n)))}(n,e,t)}(s,l,W,e.placeholder,c,o,i,h,m,g-n)}var r=b?c:this,i=y?r[s]:s,n=o.length;return h?o=function(e,t){for(var n=e.length,o=St(t.length,n),a=U(e);o--;){var i=t[o];e[o]=te(i,n)?a[i]:Dn}return e}(o,h):w&&1<n&&o.reverse(),v&&m<n&&(o.length=m),(i=this&&this!==Lo&&this instanceof e?C||R(i):i).apply(r,o)}}function V(e,t,n,o){return e===Dn||Ce(e,it[n])&&!lt.call(o,n)?t:e}function q(e,t,n,o,a,i){var r=1&n,s=e.length,l=t.length;if(s!=l&&!(r&&s<l))return!1;l=i.get(e);if(l&&i.get(t))return l==t;var c=-1,d=!0,u=2&n?new g:Dn;for(i.set(e,t),i.set(t,e);++c<s;){var p,f=e[c],h=t[c];if((p=o?r?o(h,f,c,t,e,i):o(f,h,c,e,t,i):p)!==Dn){if(p)continue;d=!1;break}if(u){if(!function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return 1}(t,function(e,t){return!Sn(u,t)&&(f===e||a(f,e,n,o,i))&&u.push(t)})){d=!1;break}}else if(f!==h&&!a(f,h,n,o,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function G(e){return an(se(e,Dn,pe),e+"")}function X(e){return m(e,Oe,Jt)}function K(e){return m(e,Ne,Qt)}function Y(e,t){var n=(n=x.iteratee||Re)===Re?_:n;return arguments.length?n(e,t):n}function J(e,t){var n,o=e.__data__;return("string"==(e=typeof(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Q(e,t){t=t,t=null==(e=e)?Dn:e[t];return S(t)?t:Dn}function Z(e,t,n){for(var o=-1,a=(t=N(t,e)).length,i=!1;++o<a;){var r=ce(t[o]);if(!(i=null!=e&&n(e,r)))break;e=e[r]}return i||++o!=a?i:!!(a=null==e?0:e.length)&&Ie(a)&&te(r,a)&&(un(e)||dn(e))}function ee(e){return un(e)||dn(e)||!!(kt&&e&&e[kt])}function te(e,t){return!!(t=null==t?Hn:t)&&("number"==typeof e||_o.test(e))&&-1<e&&e%1==0&&e<t}function ne(e,t,n){if(Ee(n)){var o=typeof t;return("number"==o?xe(n)&&te(t,n.length):"string"==o&&t in n)&&Ce(n[t],e)}}function oe(e,t){if(!un(e)){var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Fe(e)||(mo.test(e)||!ho.test(e)||null!=t&&e in Ze(t))}}function ae(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||it)}function ie(e){return e==e&&!Ee(e)}function re(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==Dn||t in Ze(e)))}}function se(i,r,s){return r=Et(r===Dn?i.length-1:r,0),function(){for(var e=arguments,t=-1,n=Et(e.length-r,0),o=Ke(n);++t<n;)o[t]=e[r+t];for(var t=-1,a=Ke(r+1);++t<r;)a[t]=e[t];return a[r]=s(o),vn(i,this,a)}}function le(n){var o=0,a=0;return function(){var e=_t(),t=16-(e-a);if(a=e,0<t){if(800<=++o)return arguments[0]}else o=0;return n.apply(Dn,arguments)}}function ce(e){if("string"==typeof e||Fe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function de(e){if(null!=e){try{return st.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ue(e){if(e instanceof B)return e.clone();var t=new h(e.__wrapped__,e.__chain__);return t.__actions__=U(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function pe(e){return(null==e?0:e.length)?d(e,1):[]}function fe(e){var t=null==e?0:e.length;return t?e[t-1]:Dn}function he(e,t){return e&&e.length&&t&&t.length?function(e,t,n,o){var a=o?In:Tn,i=-1,r=t.length,s=e;for(e===t&&(t=U(t)),n&&(s=Cn(e,En(n)));++i<r;)for(var l=0,c=t[i],d=n?n(c):c;-1<(l=a(s,d,l,o));)s!==e&&yt.call(s,l,1),yt.call(e,l,1);return e}(e,t):e}function me(e){return null==e?e:Ft.call(e)}function ge(e){e=x(e);return e.__chain__=!0,e}function ve(e,t){return t(e)}function be(e,t){return(un(e)?bn:Gt)(e,Y(t,3))}function ye(o,n,e){function a(e){var t=l,n=c;return l=c=Dn,h=e,u=o.apply(n,t)}function i(e){var t=e-f;return f===Dn||n<=t||t<0||g&&d<=e-h}function r(){var e,t=sn();if(i(t))return s(t);p=on(r,(t=n-((e=t)-f),g?St(t,d-(e-h)):t))}function s(e){return p=Dn,v&&l?a(e):(l=c=Dn,u)}function t(){var e=sn(),t=i(e);if(l=arguments,c=this,f=e,t){if(p===Dn)return h=t=f,p=on(r,n),m?a(t):u;if(g)return p=on(r,n),a(f)}return p===Dn&&(p=on(r,n)),u}var l,c,d,u,p,f,h=0,m=!1,g=!1,v=!0;if("function"!=typeof o)throw new nt(Ln);return n=Le(n)||0,Ee(e)&&(m=!!e.leading,g="maxWait"in e,d=g?Et(Le(e.maxWait)||0,n):d,v="trailing"in e?!!e.trailing:v),t.cancel=function(){p!==Dn&&Kt(p),h=0,l=f=c=p=Dn},t.flush=function(){return p===Dn?u:s(sn())},t}function ke(o,a){if("function"!=typeof o||null!=a&&"function"!=typeof a)throw new nt(Ln);function i(){var e=arguments,t=a?a.apply(this,e):e[0],n=i.cache;return n.has(t)?n.get(t):(e=o.apply(this,e),i.cache=n.set(t,e)||n,e)}return i.cache=new(ke.Cache||r),i}function we(t){if("function"!=typeof t)throw new nt(Ln);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ce(e,t){return e===t||e!=e&&t!=t}function xe(e){return null!=e&&Ie(e.length)&&!Te(e)}function Be(e){return Se(e)&&xe(e)}function Te(e){if(!Ee(e))return!1;e=k(e);return e==Vn||e==qn||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ie(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=Hn}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Se(e){return null!=e&&"object"==typeof e}function _e(e){return"string"==typeof e||!un(e)&&Se(e)&&k(e)==Zn}function Fe(e){return"symbol"==typeof e||Se(e)&&k(e)==eo}function Me(e){if(!e)return[];if(xe(e))return(_e(e)?Pn:U)(e);if(wt&&e[wt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[wt]());var t=Zt(e);return(t==Gn?_n:t==Qn?Mn:je)(e)}function Pe(e){return e?(e=Le(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}function De(e){var t=Pe(e),e=t%1;return t==t?e?t-e:t:0}function Le(e){if("number"==typeof e)return e;if(Fe(e))return NaN;if("string"!=typeof(e=Ee(e)?Ee(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(yo,"");var t=Io.test(e);return t||So.test(e)?Do(e.slice(2),t?2:8):To.test(e)?NaN:+e}function ze(e){return null==e?"":A(e)}function Ae(e,t,n){t=null==e?Dn:f(e,t);return t===Dn?n:t}function He(e,t){return null!=e&&Z(e,t,C)}function Oe(e){return(xe(e)?o:F)(e)}function Ne(e){return xe(e)?o(e,!0):M(e)}function je(e){return null==e?[]:Cn(Oe(t=e),function(e){return t[e]});var t}function Ue(e){return function(){return e}}function $e(e){return e}function Re(e){return _("function"==typeof e?e:y(e,1))}function We(o,t,e){var n=Oe(t),a=p(t,n);null!=e||Ee(t)&&(a.length||!n.length)||(e=t,t=o,o=this,a=p(t,Oe(t)));var i=!(Ee(e)&&"chain"in e&&!e.chain),r=Te(o);return bn(a,function(e){var n=t[e];o[e]=n,r&&(o.prototype[e]=function(){var e=this.__chain__;if(i||e){var t=o(this.__wrapped__);return(t.__actions__=U(this.__actions__)).push({func:n,args:arguments,thisArg:o}),t.__chain__=e,t}return n.apply(o,xn([this.value()],arguments))})}),o}function Ve(){}function qe(e){return oe(e)?(n=ce(e),function(e){return null==e?Dn:e[n]}):(t=e,function(e){return f(e,t)});var t,n}function Ge(){return[]}function Xe(){return!1}var Ke=(t=null==t?Lo:Ho.defaults(Lo.Object(),t,Ho.pick(Lo,Fo))).Array,Ye=t.Date,Je=(t.Error,t.Function),Qe=t.Math,Ze=t.Object,et=t.RegExp,tt=t.String,nt=t.TypeError,ot=Ke.prototype,at=Je.prototype,it=Ze.prototype,rt=t["__core-js_shared__"],st=at.toString,lt=it.hasOwnProperty,ct=(Tt=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+Tt:"",dt=it.toString,ut=(st.call(Ze),Lo._,et("^"+st.call(lt).replace(bo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$")),pt=zo?t.Buffer:Dn,ft=t.Symbol,ht=t.Uint8Array,mt=pt?pt.allocUnsafe:Dn,gt=Fn(Ze.getPrototypeOf,Ze),vt=Ze.create,bt=it.propertyIsEnumerable,yt=ot.splice,kt=ft?ft.isConcatSpreadable:Dn,wt=ft?ft.iterator:Dn,Ct=ft?ft.toStringTag:Dn,xt=function(){try{var e=Q(Ze,"defineProperty");return e({},"",{}),e}catch(e){}}(),Je=t.clearTimeout!==Lo.clearTimeout&&t.clearTimeout,at=Ye&&Ye.now!==Lo.Date.now&&Ye.now,rt=t.setTimeout!==Lo.setTimeout&&t.setTimeout,Bt=(Qe.ceil,Qe.floor,Ze.getOwnPropertySymbols),Tt=pt?pt.isBuffer:Dn,It=(t.isFinite,ot.join,Fn(Ze.keys,Ze)),Et=Qe.max,St=Qe.min,_t=Ye.now,Ft=(t.parseInt,Qe.random,ot.reverse),et=Q(t,"DataView"),Mt=Q(t,"Map"),pt=Q(t,"Promise"),Ye=Q(t,"Set"),Qe=Q(t,"WeakMap"),Pt=Q(Ze,"create"),Dt=Qe&&new Qe,Lt={},zt=de(et),At=de(Mt),Ht=de(pt),Ot=de(Ye),Nt=de(Qe),t=ft?ft.prototype:Dn,jt=t?t.valueOf:Dn,Ut=t?t.toString:Dn,$t=function(e){if(!Ee(e))return{};if(vt)return vt(e);Rt.prototype=e;e=new Rt;return Rt.prototype=Dn,e};function Rt(){}x.prototype=i.prototype,x.prototype.constructor=x,h.prototype=$t(i.prototype),h.prototype.constructor=h,B.prototype=$t(i.prototype),B.prototype.constructor=B,n.prototype.clear=function(){this.__data__=Pt?Pt(null):{},this.size=0},n.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},n.prototype.get=function(e){var t=this.__data__;if(Pt){var n=t[e];return n===zn?Dn:n}return lt.call(t,e)?t[e]:Dn},n.prototype.has=function(e){var t=this.__data__;return Pt?t[e]!==Dn:lt.call(t,e)},n.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pt&&t===Dn?zn:t,this},a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var t=this.__data__;return!((e=s(t,e))<0)&&(e==t.length-1?t.pop():yt.call(t,e,1),--this.size,!0)},a.prototype.get=function(e){var t=this.__data__;return(e=s(t,e))<0?Dn:t[e][1]},a.prototype.has=function(e){return-1<s(this.__data__,e)},a.prototype.set=function(e,t){var n=this.__data__,o=s(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},r.prototype.clear=function(){this.size=0,this.__data__={hash:new n,map:new(Mt||a),string:new n}},r.prototype.delete=function(e){return e=J(this,e).delete(e),this.size-=e?1:0,e},r.prototype.get=function(e){return J(this,e).get(e)},r.prototype.has=function(e){return J(this,e).has(e)},r.prototype.set=function(e,t){var n=J(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},g.prototype.add=g.prototype.push=function(e){return this.__data__.set(e,zn),this},g.prototype.has=function(e){return this.__data__.has(e)},v.prototype.clear=function(){this.__data__=new a,this.size=0},v.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},v.prototype.get=function(e){return this.__data__.get(e)},v.prototype.has=function(e){return this.__data__.has(e)},v.prototype.set=function(e,t){var n=this.__data__;if(n instanceof a){var o=n.__data__;if(!Mt||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new r(o)}return n.set(e,t),this.size=n.size,this};var Wt,Vt,qt,Gt=(Wt=u,function(e,t){if(null==e)return e;if(!xe(e))return Wt(e,t);for(var n=e.length,o=Vt?n:-1,a=Ze(e);(Vt?o--:++o<n)&&!1!==t(a[o],o,a););return e}),Xt=function(e,t,n){for(var o=-1,a=Ze(e),i=n(e),r=i.length;r--;){var s=i[qt?r:++o];if(!1===t(a[s],s,a))break}return e},ft=Dt?function(e,t){return Dt.set(e,t),e}:$e,t=xt?function(e,t){return xt(e,"toString",{configurable:!0,enumerable:!1,value:Ue(t),writable:!0})}:$e,Kt=Je||function(e){return Lo.clearTimeout(e)},Yt=Dt?function(e){return Dt.get(e)}:Ve,Jt=Bt?function(t){return null==t?[]:(t=Ze(t),yn(Bt(t),function(e){return bt.call(t,e)}))}:Ge,Qt=Bt?function(e){for(var t=[];e;)xn(t,Jt(e)),e=gt(e);return t}:Ge,Zt=k;(et&&Zt(new et(new ArrayBuffer(1)))!=oo||Mt&&Zt(new Mt)!=Gn||pt&&Zt(pt.resolve())!=Yn||Ye&&Zt(new Ye)!=Qn||Qe&&Zt(new Qe)!=to)&&(Zt=function(e){var t=k(e),e=t==Kn?e.constructor:Dn,e=e?de(e):"";if(e)switch(e){case zt:return oo;case At:return Gn;case Ht:return Yn;case Ot:return Qn;case Nt:return to}return t});var en,tn,nn=le(ft),on=rt||function(e,t){return Lo.setTimeout(e,t)},an=le(t),rn=(tn=(en=ke(en=function(e){var a=[];return go.test(e)&&a.push(""),e.replace(vo,function(e,t,n,o){a.push(n?o.replace(xo,"$1"):t||e)}),a},function(e){return 500===tn.size&&tn.clear(),e})).cache,en),Ye=z(function(e){var t=Cn(e,O);return t.length&&t[0]===e[0]?function(e,t,n){for(var o=n?wn:kn,a=e[0].length,i=e.length,r=i,s=Ke(i),l=1/0,c=[];r--;){var d=e[r];r&&t&&(d=Cn(d,En(t))),l=St(d.length,l),s[r]=!n&&(t||120<=a&&120<=d.length)?new g(r&&d):Dn}var d=e[0],u=-1,p=s[0];e:for(;++u<a&&c.length<l;){var f=d[u],h=t?t(f):f,f=n||0!==f?f:0;if(!(p?Sn(p,h):o(c,h,n))){for(r=i;--r;){var m=s[r];if(!(m?Sn(m,h):o(e[r],h,n)))continue e}p&&p.push(h),c.push(f)}}return c}(t):[]}),Qe=z(he),ft=z(function(e,t){return Be(e)?function(e,t,n,o){var a=-1,i=kn,r=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Cn(t,En(n))),o?(i=wn,r=!1):200<=t.length&&(i=Sn,r=!1,t=new g(t));e:for(;++a<s;){var d=e[a],u=null==n?d:n(d),d=o||0!==d?d:0;if(r&&u==u){for(var p=c;p--;)if(t[p]===u)continue e;l.push(d)}else i(t,u,o)||l.push(d)}return l}(e,t):[]}),rt=(G(function(t){function e(e){return function(e,t){for(var n=-1,o=t.length,a=Ke(o),i=null==e;++n<o;)a[n]=i?Dn:Ae(e,t[n]);return a}(e,t)}var n=t.length,o=n?t[0]:0,a=this.__wrapped__;return!(1<n||this.__actions__.length)&&a instanceof B&&te(o)?((a=a.slice(o,+o+(n?1:0))).__actions__.push({func:ve,args:[e],thisArg:Dn}),new h(a,this.__chain__).thru(function(e){return n&&!e.length&&e.push(Dn),e})):this.thru(e)}),z(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&ne(e,t[0],t[1])?t=[]:2<n&&ne(t[0],t[1],t[2])&&(t=[t[0]]),D(e,d(t,1),[])})),sn=at||function(){return Lo.Date.now()},t=z(function(e,t,n){return function(e,t,n){if("function"!=typeof e)throw new nt(Ln);return on(function(){e.apply(Dn,n)},t)}(e,Le(t)||0,n)});ke.Cache=r;var ln,cn,dn=I(function(){return arguments}())?I:function(e){return Se(e)&&lt.call(e,"callee")&&!bt.call(e,"callee")},un=Ke.isArray,pn=Tt||Xe,fn=Ao?En(Ao):function(e){return Se(e)&&Ie(e.length)&&!!Mo[k(e)]},hn=(ln=function(e,t,n,o){$(t,Ne(t),e,o)},z(function(e,t){var n=-1,o=t.length,a=1<o?t[o-1]:Dn,i=2<o?t[2]:Dn,a=3<ln.length&&"function"==typeof a?(o--,a):Dn;for(i&&ne(t[0],t[1],i)&&(a=o<3?Dn:a,o=1),e=Ze(e);++n<o;){var r=t[n];r&&ln(e,r,n,a)}return e})),at=z(function(e){return e.push(Dn,V),vn(hn,Dn,e)}),Tt=G(function(e,t){return null==e?{}:L(e,t)});return x.assignInWith=hn,x.chain=ge,x.constant=Ue,x.debounce=ye,x.defaults=at,x.delay=t,x.filter=function(e,t){return(un(e)?yn:l)(e,Y(t,3))},x.flatten=pe,x.intersection=Ye,x.iteratee=Re,x.keys=Oe,x.keysIn=Ne,x.map=function(e,t){return(un(e)?Cn:P)(e,Y(t,3))},x.memoize=ke,x.mixin=We,x.negate=we,x.pick=Tt,x.property=qe,x.pull=Qe,x.pullAll=he,x.reverse=me,x.sortBy=rt,x.tap=function(e,t){return t(e),e},x.throttle=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new nt(Ln);return Ee(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),ye(e,t,{leading:o,maxWait:t,trailing:a})},x.thru=ve,x.toArray=Me,x.values=je,x.without=ft,x.extendWith=hn,We(x,x),x.eq=Ce,x.forEach=be,x.get=Ae,x.has=function(e,t){return null!=e&&Z(e,t,w)},x.hasIn=He,x.identity=$e,x.indexOf=function(e,t,n){var o=null==e?0:e.length;return o?(n=null==n?0:De(n),Tn(e,t,n=n<0?Et(o+n,0):n)):-1},x.isArguments=dn,x.isArray=un,x.isArrayLike=xe,x.isArrayLikeObject=Be,x.isBoolean=function(e){return!0===e||!1===e||Se(e)&&k(e)==$n},x.isBuffer=pn,x.isEmpty=function(e){if(null==e)return!0;if(xe(e)&&(un(e)||"string"==typeof e||"function"==typeof e.splice||pn(e)||fn(e)||dn(e)))return!e.length;var t,n=Zt(e);if(n==Gn||n==Qn)return!e.size;if(ae(e))return!F(e).length;for(t in e)if(lt.call(e,t))return!1;return!0},x.isFunction=Te,x.isLength=Ie,x.isObject=Ee,x.isObjectLike=Se,x.isString=_e,x.isSymbol=Fe,x.isTypedArray=fn,x.isUndefined=function(e){return e===Dn},x.last=fe,x.stubArray=Ge,x.stubFalse=Xe,x.noop=Ve,x.now=sn,x.runInContext=e,x.toFinite=Pe,x.toInteger=De,x.toNumber=Le,x.toString=ze,x.each=be,We(x,(cn={},u(x,function(e,t){lt.call(x.prototype,t)||(cn[t]=e)}),cn),{chain:!1}),x.VERSION="4.17.4",bn(["drop","take"],function(n,o){B.prototype[n]=function(e){e=e===Dn?1:Et(De(e),0);var t=this.__filtered__&&!o?new B(this):this.clone();return t.__filtered__?t.__takeCount__=St(e,t.__takeCount__):t.__views__.push({size:St(e,On),type:n+(t.__dir__<0?"Right":"")}),t},B.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),bn(["filter","map","takeWhile"],function(e,t){var n=t+1,o=1==n||3==n;B.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Y(e,3),type:n}),t.__filtered__=t.__filtered__||o,t}}),bn(["head","last"],function(e,t){var n="take"+(t?"Right":"");B.prototype[e]=function(){return this[n](1).value()[0]}}),bn(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");B.prototype[e]=function(){return this.__filtered__?new B(this):this[n](1)}}),B.prototype.compact=function(){return this.filter($e)},B.prototype.find=function(e){return this.filter(e).head()},B.prototype.findLast=function(e){return this.reverse().find(e)},B.prototype.invokeMap=z(function(t,n){return"function"==typeof t?new B(this):this.map(function(e){return T(e,t,n)})}),B.prototype.reject=function(e){return this.filter(we(Y(e)))},B.prototype.slice=function(e,t){e=De(e);var n=this;return n.__filtered__&&(0<e||t<0)?new B(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==Dn?(t=De(t))<0?n.dropRight(-t):n.take(t-e):n)},B.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},B.prototype.toArray=function(){return this.take(On)},u(B.prototype,function(c,e){var d=/^(?:filter|find|map|reject)|While$/.test(e),u=/^(?:head|last)$/.test(e),p=x[u?"take"+("last"==e?"Right":""):e],f=u||/^find/.test(e);p&&(x.prototype[e]=function(){function e(e){return e=p.apply(x,xn([e],n)),u&&r?e[0]:e}var t=this.__wrapped__,n=u?[1]:arguments,o=t instanceof B,a=n[0],i=o||un(t);i&&d&&"function"==typeof a&&1!=a.length&&(o=i=!1);var r=this.__chain__,s=!!this.__actions__.length,a=f&&!r,s=o&&!s;if(f||!i)return a&&s?c.apply(this,n):(l=this.thru(e),a?u?l.value()[0]:l.value():l);var t=s?t:new B(this),l=c.apply(t,n);return l.__actions__.push({func:ve,args:[e],thisArg:Dn}),new h(l,r)})}),bn(["pop","push","shift","sort","splice","unshift"],function(e){var n=ot[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);x.prototype[e]=function(){var t=arguments;if(!a||this.__chain__)return this[o](function(e){return n.apply(un(e)?e:[],t)});var e=this.value();return n.apply(un(e)?e:[],t)}}),u(B.prototype,function(e,t){var n,o=x[t];o&&(n=o.name+"",(Lt[n]||(Lt[n]=[])).push({name:t,func:o}))}),Lt[W(Dn,2).name]=[{name:"wrapper",func:Dn}],B.prototype.clone=function(){var e=new B(this.__wrapped__);return e.__actions__=U(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=U(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=U(this.__views__),e},B.prototype.reverse=function(){var e;return this.__filtered__?((e=new B(this)).__dir__=-1,e.__filtered__=!0):(e=this.clone()).__dir__*=-1,e},B.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=un(e),o=t<0,a=n?e.length:0,i=function(e,t,n){var o=-1,a=n.length;for(;++o<a;){var i=n[o],r=i.size;switch(i.type){case"drop":e+=r;break;case"dropRight":t-=r;break;case"take":t=St(t,e+r);break;case"takeRight":e=Et(e,t-r)}}return{start:e,end:t}}(0,a,this.__views__),r=i.start,s=(i=i.end)-r,l=o?i:r-1,c=this.__iteratees__,d=c.length,u=0,p=St(s,this.__takeCount__);if(!n||!o&&a==s&&p==s)return H(e,this.__actions__);var f=[];e:for(;s--&&u<p;){for(var h=-1,m=e[l+=t];++h<d;){var g=c[h],v=g.iteratee,g=g.type,v=v(m);if(2==g)m=v;else if(!v){if(1==g)continue e;break e}}f[u++]=m}return f},x.prototype.chain=function(){return ge(this)},x.prototype.commit=function(){return new h(this.value(),this.__chain__)},x.prototype.next=function(){this.__values__===Dn&&(this.__values__=Me(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?Dn:this.__values__[this.__index__++]}},x.prototype.plant=function(e){for(var t,n=this;n instanceof i;){var o=ue(n);o.__index__=0,o.__values__=Dn,t?a.__wrapped__=o:t=o;var a=o,n=n.__wrapped__}return a.__wrapped__=e,t},x.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof B){e=e;return(e=(e=this.__actions__.length?new B(this):e).reverse()).__actions__.push({func:ve,args:[me],thisArg:Dn}),new h(e,this.__chain__)}return this.thru(me)},x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=function(){return H(this.__wrapped__,this.__actions__)},x.prototype.first=x.prototype.head,wt&&(x.prototype[wt]=function(){return this}),x},Ho=e();(Ho=n._=e()).pluck=Ho.map,n.each(Ho,function(e,t){Object.hasOwnProperty.call(Ho,e)&&!/VERSION/.test(name)&&(n[e]||(n[e]=t))})}),FD50.plugin("bootstrap",function(a){var o,e=a;function t(e,t){var n;return this.$element=o(e),this.$note=o('<div class="alert"></div>'),this.options=o.extend(!0,o.fn.notify.defaults,t),this.options.transition?("fade"==this.options.transition?this.$note.addClass("in"):this.$note).addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass("alert-"+this.options.type):this.$note.addClass("alert-success"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable&&(n=o('<a class="close pull-right" href="javascript: void(0);">&times;</a>')),o(n).on("click",o.proxy(onClose,this)),this.$note.prepend(n),this}!function(o){"use strict";o.fn.emulateTransitionEnd=function(e){var t=!1,n=this;o(this).one(o.support.transition.end,function(){t=!0});return setTimeout(function(){t||o(n).trigger(o.support.transition.end)},e),this},o(function(){o.support.transition=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return{end:n[e]}}()})}(e),function(i){"use strict";function o(e){i(e).on("click",t,this.close)}var t='[data-bp-dismiss="alert"]';o.prototype.close=function(e){function t(){a.trigger("closed.bs.alert").remove()}var n=i(this),o=(o=n.attr("data-target"))||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,""),a=i(o);e&&e.preventDefault(),(a=!a.length?n.hasClass("alert")?n:n.parent():a).trigger(e=i.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),i.support.transition&&a.hasClass("fade")?a.one(i.support.transition.end,t).emulateTransitionEnd(150):t())};var e=i.fn.alert;i.fn.alert=function(n){return this.each(function(){var e=i(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new o(this)),"string"==typeof n&&t[n].call(e)})},i.fn.alert.Constructor=o,i.fn.alert.noConflict=function(){return i.fn.alert=e,this},i(document).on("click.bs.alert.data-api",t,o.prototype.close)}(e),function(o){"use strict";function a(e,t){this.$element=o(e),this.options=o.extend({},a.DEFAULTS,t)}a.DEFAULTS={loadingText:"loading..."},a.prototype.setState=function(e){var t="disabled",n=this.$element,o=n.is("input")?"val":"html",a=n.data();e+="Text",a.resetText||n.data("resetText",n[o]()),n[o](a[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},a.prototype.toggle=function(){var e,t=this.$element.closest('[data-bp-toggle="buttons"]'),n=!0;t.length&&("radio"===(e=this.$element.find("input")).prop("type")&&(e.prop("checked")&&this.$element.hasClass("active")?n=!1:t.find(".active").removeClass("active")),n&&e.prop("checked",!this.$element.hasClass("active")).trigger("change")),n&&this.$element.toggleClass("active")};var e=o.fn.button;o.fn.button=function(n){return this.each(function(){var e=o(this),t=e.data("bs.button");t||e.data("bs.button",t=new a(this,"object"==typeof n&&n)),"toggle"==n?t.toggle():n&&t.setState(n)})},o.fn.button.Constructor=a,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.bs.button.data-api","[data-bp-toggle^=button]",function(e){var t=o(e.target);(t=!t.hasClass("btn")?t.closest(".btn"):t).button("toggle"),e.preventDefault()})}(e),function(s){"use strict";function i(e,t){this.$element=s(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",s.proxy(this.pause,this)).on("mouseleave",s.proxy(this.cycle,this))}i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(s.proxy(this.next,this),this.options.interval)),this},i.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},i.prototype.to=function(e){var t=this,n=this.getActiveIndex();if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(n<e?"next":"prev",s(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&s.support.transition.end&&(this.$element.trigger(s.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,t){var n=this.$element.find(".item.active"),o=t||n[e](),a=this.interval,i="next"==e?"left":"right",t="next"==e?"first":"last",r=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[t]()}this.sliding=!0,a&&this.pause();t=s.Event("slide.bs.carousel",{relatedTarget:o[0],direction:i});if(!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=s(r.$indicators.children()[r.getActiveIndex()]);e&&e.addClass("active")})),s.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(t),t.isDefaultPrevented())return;o.addClass(e),o[0].offsetWidth,n.addClass(i),o.addClass(i),n.one(s.support.transition.end,function(){o.removeClass([e,i].join(" ")).addClass("active"),n.removeClass(["active",i].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(t),t.isDefaultPrevented())return;n.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return a&&this.cycle(),this}};var e=s.fn.carousel;s.fn.carousel=function(a){return this.each(function(){var e=s(this),t=e.data("bs.carousel"),n=s.extend({},i.DEFAULTS,e.data(),"object"==typeof a&&a),o="string"==typeof a?a:n.slide;t||e.data("bs.carousel",t=new i(this,n)),"number"==typeof a?t.to(a):o?t[o]():n.interval&&t.pause().cycle()})},s.fn.carousel.Constructor=i,s.fn.carousel.noConflict=function(){return s.fn.carousel=e,this},s(document).on("click.bs.carousel.data-api","[data-bp-slide], [data-bp-slide-to]",function(e){var t,n=s(this),o=s(n.attr("data-target")||(t=n.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"")),a=s.extend({},o.data(),n.data());(t=n.attr("data-bp-slide-to"))&&(a.interval=!1),o.carousel(a),(t=n.attr("data-bp-slide-to"))&&o.data("bs.carousel").to(t),e.preventDefault()}),s(window).on("load",function(){s('[data-bp-ride="carousel"]').each(function(){var e=s(this);e.carousel(e.data())})})}(e),function(r){"use strict";function a(e,t){this.$element=r(e),this.options=r.extend({},a.DEFAULTS,t),this.transitioning=null,this.options.parent&&(this.$parent=r(this.options.parent)),this.options.toggle&&this.toggle()}a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=r.Event("show.bs.collapse");if(this.$element.triggerHandler(e),!e.isDefaultPrevented()){e=this.$parent&&this.$parent.find("> .panel > .in");if(e&&e.length){var t=e.data("bs.collapse");if(t&&t.transitioning)return;e.collapse("hide"),t||e.data("bs.collapse",null)}var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0),this.transitioning=1;t=function(){this.$element.removeClass("collapsing").addClass("in")[n]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!r.support.transition)return t.call(this);e=r.camelCase(["scroll",n].join("-"));this.$element.one(r.support.transition.end,r.proxy(t,this)).emulateTransitionEnd(350)[n](this.$element[0][e])}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=r.Event("hide.bs.collapse");if(this.$element.triggerHandler(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;e=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!r.support.transition)return e.call(this);this.$element[t](0).one(r.support.transition.end,r.proxy(e,this)).emulateTransitionEnd(350)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var e=r.fn.collapse;r.fn.collapse=function(o){return this.each(function(){var e=r(this),t=e.data("bs.collapse"),n=r.extend({},a.DEFAULTS,e.data(),"object"==typeof o&&o);t||e.data("bs.collapse",t=new a(this,n)),"string"==typeof o&&t[o]()})},r.fn.collapse.Constructor=a,r.fn.collapse.noConflict=function(){return r.fn.collapse=e,this},r(document).on("click.bs.collapse.data-api","[data-eb-toggle=collapse]",function(e){var t=r(this),n=t.attr("data-target")||e.preventDefault()||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=r(n),a=o.data("bs.collapse"),e=a?"toggle":t.data(),i=t.attr("data-parent"),n=i&&r(i);a&&a.transitioning||(n&&n.find('[data-eb-toggle=collapse][data-parent="'+i+'"]').not(t).addClass("collapsed"),t[o.hasClass("in")?"addClass":"removeClass"]("collapsed")),o.collapse(e)})}(e),function(a){"use strict";function i(){(!window["Foundry/Bootstrap"]||0<a(e).length)&&a(e).remove(),a(s).each(function(e){var t=r(a(this));t.hasClass("open")&&(t.triggerHandler(e=a.Event("hide.bs.dropdown")),e.isDefaultPrevented()||t.removeClass("open").trigger("hidden.bs.dropdown"))})}function r(e){var t=e.attr("data-target"),t=(t=t||(t=e.attr("href"))&&/#/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""))&&a(t);return t&&t.length?t:e.parent()}function o(e){a(e).on("click.bs.dropdown",this.toggle)}var e=".dropdown-backdrop",s="[data-bp-toggle=dropdown]";o.prototype.toggle=function(e){var t=a(this);if(!t.is(".disabled, :disabled")){var n=r(t),o=n.hasClass("open");if(i(),!o){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",i),n.triggerHandler(e=a.Event("show.bs.dropdown")),e.isDefaultPrevented())return;n.toggleClass("open").trigger("shown.bs.dropdown"),t.focus()}return!1}},o.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var t=a(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var n=r(t),o=n.hasClass("open");if(!o||27==e.keyCode)return 27==e.which&&n.find(s).focus(),t.click();t=a("[role=menu] li:not(.divider):visible a",n);t.length&&(n=t.index(t.filter(":focus")),38==e.keyCode&&0<n&&n--,40==e.keyCode&&n<t.length-1&&n++,t.eq(n=!~n?0:n).focus())}}};var t=a.fn.dropdown;a.fn.dropdown=function(n){return this.each(function(){var e=a(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new o(this)),"string"==typeof n&&t[n].call(e)})},a.fn.dropdown.Constructor=o,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=t,this},a(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown_ form, .dropdown-static",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s+", [role=menu]",o.prototype.keydown)}(e),function(i){"use strict";function r(e,t){this.options=t,this.$element=i(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)}r.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},r.prototype.toggle=function(e){return this[this.isShown?"hide":"show"](e)},r.prototype.show=function(n){var o=this,e=i.Event("show.bs.modal",{relatedTarget:n});this.$element.triggerHandler(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-bp-dismiss="modal"]',i.proxy(this.hide,this)),this.backdrop(function(){var e=i.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(document.body),o.$element.show(),e&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var t=i.Event("shown.bs.modal",{relatedTarget:n});e?o.$element.find(".modal-dialog").one(i.support.transition.end,function(){o.$element.focus().trigger(t)}).emulateTransitionEnd(300):o.$element.focus().trigger(t)}))},r.prototype.hide=function(e){e&&e.preventDefault(),e=i.Event("hide.bs.modal"),this.$element.triggerHandler(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),i(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),i.support.transition&&this.$element.hasClass("fade")?this.$element.one(i.support.transition.end,i.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},r.prototype.enforceFocus=function(){i(document).off("focusin.bs.modal").on("focusin.bs.modal",i.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},r.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",i.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},r.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden.bs.modal")})},r.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},r.prototype.backdrop=function(e){var t,n=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(t=i.support.transition&&n,this.$backdrop=i('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",i.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),t&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e&&(t?this.$backdrop.one(i.support.transition.end,e).emulateTransitionEnd(150):e())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(i.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var e=i.fn.modal;i.fn.modal=function(o,a){return this.each(function(){var e=i(this),t=e.data("bs.modal"),n=i.extend({},r.DEFAULTS,e.data(),"object"==typeof o&&o);t||e.data("bs.modal",t=new r(this,n)),"string"==typeof o?t[o](a):n.show&&t.show(a)})},i.fn.modal.Constructor=r,i.fn.modal.noConflict=function(){return i.fn.modal=e,this},i(document).on("click.bs.modal.data-api",'[data-bp-toggle="modal"]',function(e){var t=i(this),n=t.attr("href"),o=i(t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),n=o.data("modal")?"toggle":i.extend({remote:!/#/.test(n)&&n},o.data(),t.data());e.preventDefault(),o.modal(n,this).one("hide",function(){t.is(":visible")&&t.focus()})}),i(document).on("show.bs.modal",".modal.bs",function(){i(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal.bs",function(){i(document.body).removeClass("modal-open")})}(e),function(d){"use strict";function o(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)}o.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},o.prototype.init=function(e,t,n){this.enabled=!0,this.type=e,this.$element=d(t),this.options=this.getOptions(n);for(var o=this.options.trigger.split(" "),a=o.length;a--;){var i,r=o[a];"click"==r?this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this)):"manual"!=r&&(i="hover"==r?"mouseleave":"blur",this.$element.on(("hover"==r?"mouseenter":"focus")+"."+this.type,this.options.selector,d.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,d.proxy(this.leave,this)))}this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.getOptions=function(e){return(e=d.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},o.prototype.getDelegateOptions=function(){var n={},o=this.getDefaults();return this._options&&d.each(this._options,function(e,t){o[e]!=t&&(n[e]=t)}),n},o.prototype.enter=function(e){var t=e instanceof this.constructor?e:d(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},o.prototype.leave=function(e){var t=e instanceof this.constructor?e:d(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)},o.prototype.show=function(){var e,t,n,o,a,i,r,s,l,c=d.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.triggerHandler(c),c.isDefaultPrevented()||(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,(i=(a=/\s?auto?\s?/i).test(s))&&(s=s.replace(a,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(s.split("-")[0]),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),t=this.getPosition(),n=e[0].offsetWidth,l=e[0].offsetHeight,i&&(r=this.$element.parent(),o=s,c=document.documentElement.scrollTop||document.body.scrollTop,a="body"==this.options.container?window.innerWidth:r.outerWidth(),i="body"==this.options.container?window.innerHeight:r.outerHeight(),r="body"==this.options.container?0:r.offset().left,s="bottom"==s&&t.top+t.height+l-c>i?"top":"top"==s&&t.top-c-l<0?"bottom":"right"==s&&t.right+n>a?"left":"left"==s&&t.left-n<r?"right":s,e.removeClass(o).addClass(s)),l=this.getCalculatedOffset(s,t,n,l),this.applyPlacement(l,s),this.$element.trigger("shown.bs."+this.type)))},o.prototype.applyPlacement=function(e,t){var n,o=this.tip(),a=o[0].offsetWidth,i=o[0].offsetHeight,r=parseInt(o.css("margin-top"),10),s=parseInt(o.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),e.top=e.top+r,e.left=e.left+s,o.offset(e).addClass("in");var l=o[0].offsetWidth,r=o[0].offsetHeight;"top"==t&&r!=i&&(n=!0,e.top=e.top+i-r),0===["top","bottom"].indexOf(t.split("-")[0])&&(e.left<(s=0)&&(s=-2*e.left,e.left=0,o.offset(e),l=o[0].offsetWidth,r=o[0].offsetHeight),this.replaceArrow(s-a+l,l,"left")),0===["left","right"].indexOf(t.split("-")[0])&&this.replaceArrow(r-i,r,"top"),n&&o.offset(e)},o.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},o.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},o.prototype.hide=function(){function e(){"in"!=t.hoverState&&n.detach()}var t=this,n=this.tip(),o=d.Event("hide.bs."+this.type);if(this.$element.triggerHandler(o),!o.isDefaultPrevented())return n.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?n.one(d.support.transition.end,e).emulateTransitionEnd(150):e(),this.$element.trigger("hidden.bs."+this.type),this},o.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},o.prototype.hasContent=function(){return this.getTitle()},o.prototype.getPosition=function(){var e=this.$element[0];return d.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},o.prototype.getCalculatedOffset=function(e,t,n,o){return"left-top"==e?{top:t.top,left:t.left-n}:"left-bottom"==e?{top:t.top+t.height-o,left:t.left-n}:"right-top"==e?{top:t.top,left:t.left+t.width}:"right-bottom"==e?{top:t.top+t.height-o,left:t.left+t.width}:"top-left"==e?{top:t.top-o,left:t.left}:"top-right"==e?{top:t.top-o,left:t.left+t.width-n}:"bottom-left"==e?{top:t.top+t.height,left:t.left}:"bottom-right"==e?{top:t.top+t.height,left:t.left+t.width-n}:"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-o,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-o/2,left:t.left-n}:{top:t.top+t.height/2-o/2,left:t.left+t.width}},o.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},o.prototype.tip=function(){return this.$tip=this.$tip||d(this.options.template)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},o.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.toggleEnabled=function(){this.enabled=!this.enabled},o.prototype.toggle=function(e){e=e?d(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;e.tip().hasClass("in")?e.leave(e):e.enter(e)},o.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var e=d.fn.tooltip;d.fn.tooltip=function(n){return this.each(function(){var e=d(this),t=e.data("bs.tooltip");t||e.data("bs.tooltip",t=new o(this,"object"==typeof n&&n)),"string"==typeof n&&t[n]()})},d.fn.tooltip.Constructor=o,d.fn.tooltip.noConflict=function(){return d.fn.tooltip=e,this}}(e),function(o){"use strict";function a(e,t){this.init("popover",e,t)}if(!o.fn.tooltip)throw new Error("Popover requires tooltip.js");a.DEFAULTS=o.extend({},o.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div id="eb" class="eb-popover"><div class="arrow"></div><h3 class="eb-popover-title"></h3><div class="eb-popover-content"></div></div>'}),a.prototype=o.extend({},o.fn.tooltip.Constructor.prototype),(a.prototype.constructor=a).prototype.getDefaults=function(){return a.DEFAULTS},a.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".eb-popover-title")[this.options.html?"html":"text"](t),e.find(".eb-popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".eb-popover-title").html()||e.find(".eb-popover-title").hide()},a.prototype.hasContent=function(){return this.getTitle()||this.getContent()},a.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},a.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},a.prototype.tip=function(){return this.$tip||(this.$tip=o(this.options.template)),this.$tip};var e=o.fn.popover;o.fn.popover=function(n){return this.each(function(){var e=o(this),t=e.data("bs.popover");t||e.data("bs.popover",t=new a(this,"object"==typeof n&&n)),"string"==typeof n&&t[n]()})},o.fn.popover.Constructor=a,o.fn.popover.noConflict=function(){return o.fn.popover=e,this}}(e),function(r){"use strict";function o(e){this.element=r(e)}o.prototype.show=function(){var e,t,n=this.element,o=n.closest("ul:not(.dropdown-menu)"),a=(a=n.data("target"))||(a=n.attr("href"))&&a.replace(/.*(?=#[^\s]*$)/,"");n.parent("li").hasClass("active")||(e=o.find(".active:last a")[0],t=r.Event("show.bs.tab",{relatedTarget:e}),n.triggerHandler(t),t.isDefaultPrevented()||(a=r(a),this.activate(n.parent("li"),o),this.activate(a,a.parent(),function(){n.trigger({type:"shown.bs.tab",relatedTarget:e})})))},o.prototype.activate=function(e,t,n){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),i?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var a=t.find("> .active"),i=n&&r.support.transition&&a.hasClass("fade");i?a.one(r.support.transition.end,o).emulateTransitionEnd(150):o(),a.removeClass("in")};var e=r.fn.tab;r.fn.tab=function(n){return this.each(function(){var e=r(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new o(this)),"string"==typeof n&&t[n]()})},r.fn.tab.Constructor=o,r.fn.tab.noConflict=function(){return r.fn.tab=e,this},r(document).on("click.bs.tab.data-api",'[data-bp-toggle="tab"], [data-bp-toggle="pill"]',function(e){e.preventDefault(),r(this).tab("show")})}(e),a(document).on("click.button.data-bp-api","[data-bp-toggle-value]",function(){var e=a(this),t=(e.siblings("[data-bp-toggle-value]"),e.parents('[data-bp-toggle="radio-buttons"]'));t.hasClass("disabled")||0<t.length&&(e=e.data("bp-toggle-value"),t.find("input[type=hidden]").val(e).trigger("change"))}),a(document).on("change.data-bp-input",'[data-bp-toggle="radio-buttons"] input[type=hidden]',function(){var e=a(this),t=e.siblings("[data-bp-toggle-value]");e.val();t.removeClass("active").filter('[data-bp-toggle-value="'+e.val()+'"]').addClass("active")}),a(document).on("mouseover.tooltip.data-eb-api","[data-eb-provide=tooltip]",function(e){var t=a(this),n=t.parents("#eb").is(".w320, .w480"),o=void 0!==t.data("html")&&t.data("html");n||t.tooltip({delay:{show:200,hide:100},html:o,animation:!1,template:'<div id="eb" class="eb tooltip tooltip-eb"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container:"body"}).tooltip("show")}),a(document).on("mouseover.popover.data-eb-api","[data-eb-provide=popover]",function(){a(this).popover({delay:{show:200,hide:100},animation:!1,trigger:"hover",container:"body"}).popover("show")}),o=a,onClose=function(){this.options.onClose(),o(this.$note).remove(),this.options.onClosed()},t.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",o.proxy(onClose,this)),this.$element.append(this.$note),this.$note.alert()},t.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",o.proxy(onClose,this)):onClose.call(this)},o.fn.notify=function(e){return new t(this,e)},o.fn.notify.defaults={type:"success",closable:!0,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}),FD50.plugin("utils",function(d){function t(e){this.items=e,this.start=0,this.end=e.length-1,this.node=null,this.stopped=!1}function n(){this.lastId=0}var a,i,o,r,s,l;function c(e){this.threads=[],this.threadCount=0,this.threadLimit=e.threadLimit||1,this.threadDelay=e.threadDelay||0}function u(e){return{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}}function p(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),n=o-n;return t.b=o,t.s=0!=o?255*n/o:0,0!=t.s?(e.r==o?t.h=(e.g-e.b)/n:e.g==o?t.h=2+(e.b-e.r)/n:t.h=4+(e.r-e.g)/n,t.h*=60):t.h=360,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function f(e){var t={},n=e.h,o=255*e.s/100,a=255*e.b/100;return 0==o?t.r=t.g=t.b=a:(a=n%60*((e=a)-(o=(255-o)*a/255))/60,(n=360==n?0:n)<60?(t.r=e,t.b=o,t.g=o+a):n<120?(t.g=e,t.b=o,t.r=e-a):n<180?(t.g=e,t.r=o,t.b=o+a):n<240?(t.b=e,t.r=o,t.g=e-a):n<300?(t.b=e,t.g=o,t.r=o+a):n<360?(t.r=e,t.g=o,t.b=e-a):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function h(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return d.each(n,function(e,t){1==t.length&&(n[e]="0"+t)}),n.join("")}function m(e){return e.split(".")[0]}function g(e){this.fnList={},this.events={},this.mode=e}d.extend(t.prototype,{isLooping:function(){return!this.stopped&&(1<Math.abs(this.start-this.end)&&(this.node=Math.floor((this.start+this.end)/2),!0))},flip:function(e){e?this.end=this.node-1:this.start=this.node+1},stop:function(){this.stop=!0}}),d.Bloop=function(e){return new t(e)},a=d.isFunction,n.prototype.queue=function(t){var n=this,o=d.uid();return n.lastId=o,function(){if(n.lastId===o){var e=arguments,e=a(t)?t.apply(this,e):e;return a(n.fn)?n.fn.apply(this,e):e}}},d.Enqueue=function(e){var t=new n;a(e)&&(t.fn=e);e=d.proxy(t.queue,t);return e.reset=function(){t.lastId=0},e},i={error:"error",warning:"warn",success:"log",info:"info"},d.Exception=function(e){var t=arguments,n=1==t.length,o=3==t.length;return e=d.isPlainObject(e)?e:{type:n?"error":t[0],message:n?t[0]:t[1]},o&&d.extend(e,t[2]),"development"==d.environment&&console[i[e.type]](e.message,e),e},d.IE=function(){var e=navigator.userAgent;if(e.match(/MSIE 9/))return 9;if(e.match(/MSIE 10/))return 10;if(e.match(/rv:11/i))return 11;for(var t=3,n=document.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",o[0];);return 4<t?t:void 0}(),d.Task=function(e){var t=d.extend(d.Deferred(),{data:{},list:[],add:function(e){e=d.extend(d.Deferred(),{name:e,item:void 0});return t.list.push(e),e},process:function(){return t._promise||(t._promise=d.when.apply(d,t.list).then(t.resolve,t.reject,t.progress)),t}},e);return t},d.extend(c.prototype,{add:function(e,t){d.isFunction(e)&&(e.type=t||"normal","deferred"==t&&(e.deferred=d.Deferred().always(d.proxy(this.next,this))),this.threads.push(e),this.run())},addDeferred:function(e){return this.add(e,"deferred")},next:function(){this.threadCount--,this.run()},run:function(){var t=this;setTimeout(function(){if(!(t.threads.length<1)&&t.threadCount<t.threadLimit){t.threadCount++;var e=t.threads.shift();try{e.call(e,e.deferred)}catch(e){console.error(e)}e.deferred||t.next()}},t.threadDelay)}}),d.Threads=function(e){return new c(e)},d.callback=function(e,t){if(d.isFunction(e)){var n=d.uid("cb");return window[n]=function(){return t||delete window[n],e.apply(null,arguments)},n}d.isString(e)&&"destroy"===e&&(n=t,delete window[n])},d.fn.switchClass=function(n,e){var e=e||"-",o=n.split(e)[0]+e,a=o.length;return this.each(function(){var e=d(this),t=d.map((e.attr("class")||"").split(" "),function(e){return e.slice(0,a)==o||""==e?null:e});t.push(n),e.attr("class",t.join(" "))})},d.fn.activateClass=function(e){return this.prevObject.removeClass(e),d(this).addClass(e)},d.fn.loading=function(){var e=this.attr("class"),t=this.data("loader");this.data("loading",!0),this.data("original",e),this.attr("class",t)},d.fn.doneLoading=function(){var e=this.data("original");this.attr("class",e),this.data("loading",!1)},d.fn.toggleLoading=function(){this.data("loading")||!1?this.doneLoading():this.loading()},d.fn.activateClass=function(e){return this.prevObject.removeClass(e),d(this).addClass(e)},d.extend(d,{hexToRgb:u,hexToHsb:function(e){return p(u(e))},rgbToHsb:p,hsbToRgb:f,rgbToHex:h,hsbToHex:function(e){return h(f(e))},fixHsb:function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},fixRgb:function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},fixHex:function(e){var t=6-e.length;if(3==t)for(var n,o=e.split(""),e="";n=o.shift();)e+=n+n;else for(;t--;)e="0"+e;return e.replace(/[^A-Fa-f0-9]/g,"0"),e}}),d.fn.htmlData=function(e,i){var r,i=void 0===i||i,s=new RegExp("^data-"+(e?e+"-":"")+"(.*)","i"),l={};return d.each(this[0].attributes,function(e,t){if(t.specified&&(r=t.name.match(s))&&r[1])if(i){var n,o=r[1].split("-"),a=l;for(max=o.length-1,e=0;e<=max;e++)n=o[e],e==max?a[n]=t.value:(a[n]||(a[n]={}),a=a[n])}else l[r[1]]=t.value}),l},d.fn.defineData=function(e,t){return void 0===this.data(e)&&this.data(e,t),this},d.deletes=function(n,e){d.each(e,function(e,t){delete n[t]})},d.fn.disabled=function(e){return void 0===e?this.is(":disabled")||this.hasClass("disabled"):this.prop("disabled",!!e).toggleClass("disabled",!!e)},d.fn.enabled=function(e){return void 0===e?!this.disabled():this.disabled(!e)},d.fn.tagName=function(){return(this[0]||{}).tagName},d.create=function(e){return d(document.createElement(e))},d.fn.editable=function(e){return d.isUndefined(e)?"true"===this.prop("contenteditable"):(this.prop("contenteditable",e),!1===e&&this.removeAttr("contenteditable"),this)},d.ns=function(e,t){return e.split(" ").join(t+" ")+t},d.getPointerPosition=function(e){return e.type.match("touch")?{x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}},o="___eventable",r=["on","off","fire"],d.extend(g.prototype,{createEvent:function(e){return this.events[e]=d.Callbacks(this.mode)},on:function(e,t){if(!e||!d.isFunction(t))return this;var n=this.fnList;(n[e]||(n[e]=[])).push(t);e=m(e);return(this.events[e]||this.createEvent(e)).add(t),this},off:function(e){if(!e)return this;var n=m(e),o=this.events[n];if(!o)return this;function a(e){d.each(e,function(e,t){o.remove(t)})}return n!==e?d.each(this.fnList,function(e,t){-1<e.indexOf(n)&&a(t)}):a(this.fnList[e]),this},fire:function(e){var t=this.events[e];if(t)return t.fire.apply(t,d.makeArray(arguments).slice(1)),this},destroy:function(){for(name in this.events)this.events[name].disable()}}),d.eventable=function(e,t){var n=e[o];return n&&"destroy"===t?(n.destroy(),d.deletes(e,r),delete e[o]):(n=e[o]=new g(t),e.on=d.proxy(n.on,n),e.off=d.proxy(n.off,n),e.fire=d.proxy(n.fire,n),e)},d.fn.checked=function(n,o){return arguments.length<1?this.is(":checked"):(this.each(function(e){var t=d(this);"boolean"!=typeof n?(t.is("input[type=checkbox]")||t.is("input[type=radio]"))&&t.off("change.checked").on("change.checked",function(){try{return(t.is(":checked")?n:o).apply(t)}catch(e){}}):t.attr("checked",n).trigger("change")}),this)},d.fn.locate=function(e){var n="data";return d.each(this[0].attributes,function(e,t){if(t.specified&&"$"===t.value)return n=t.name,!1}),this.find("["+n+"-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")},s=["overflow","overflow-x","overflow-y"],d.fn.noscroll=function(e){return void 0===e&&(e=!0),this.each(function(){var n=d(this),o=n.data("noscroll");!o&&e&&(o={},d.each(s,function(e,t){o[t]=n.css(t)}),n.data("noscroll",o)),e?d.each(s,function(e,t){n.css(t,"hidden")}):o&&n.css(o)})},d.fn.visible=function(e){var t=d(this),n=d(window);if(!(t.length<1)){var o=n.scrollTop(),a=o+n.height(),n=t.offset().top,t=n+t.height();return(!0===e?n:t)<=a&&o<=(!0===e?t:n)}},d.fn.where=d.fn.filterBy=function(e,t,n){n=n||"=",t="[data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+n+t+"]";return this.filter(t)},d.fn.checked=function(n,o){return arguments.length<1?this.is(":checked"):(this.each(function(e){var t=d(this);"boolean"!=typeof n?(t.is("input[type=checkbox]")||t.is("input[type=radio]"))&&t.off("change.checked").on("change.checked",function(){try{return(t.is(":checked")?n:o).apply(t)}catch(e){}}):t.attr("checked",n).trigger("change")}),this)},d.fn.selectAll=function(){return this.each(function(){this.select()})},d.fn.unselect=function(){return this.each(function(){var e=this.value;this.value+=" ",this.value=e})},d.fn.toObject=d.fn.serializeObject=function(){var n={};return d.each(d(this).serializeArray(),function(e,t){n.hasOwnProperty(t.name)?(d.isArray(n[t.name])||(n[t.name]=[n[t.name]]),n[t.name].push(t.value)):n[t.name]=t.value}),n},d.fn.toJSON=d.fn.serializeJSON=function(){return JSON.stringify(d(this).serializeObject())},d.sanitizeHTML=function(e){return d(d.parseHTML(e,document,!0)).toHTML()},d.toHTML=function(e){return d("<div>").html(e).html()},d.fn.toHTML=function(){return d.toHTML(this.clone())},d.toXHTML=function(e,t){var n=e.innerHTML?String(e.innerHTML):e,o=n.match(/(<.+[^>])/g);if(o)for(var a=0;a<o.length;a+=1){var i,r=o[a];if(o[a]=o[a].replace(/([<|<\/].+?\w+).+[^>]/,function(e){return e}),i=o[a].match(/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+[?\s+|?>]/g))for(var s=0,l=i.length;s<l;)o[a]=o[a].replace(i[s],i[s].replace(/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9\/]+)?([\s+|?>])/g,function(){var e=Array.prototype.slice.call(arguments);return'="'+(t?e[2]:e[2].toLowerCase())+'"'+e[3]})),s+=1;n=n.replace(r,o[a])}return n},d.fn.xhtml=function(){return d.IE?d.toXHTML(this[0]):this.html()},d.buildHTML=function(e,t){if(e instanceof d)return e;var n,o=document;window.CloudFlare&&((n=d.buildHTML.iframe)&&n.contentDocument||((n=d.buildHTML.iframe=document.createElement("iframe")).style.display="none",document.body.appendChild(n)),o=n.contentDocument);var e=d.trim(e),a=[],e=d.buildFragment([e],o,a),i=d.merge([],e.childNodes);if(!t&&0<a.length){var r=o.createElement("script");r.text="try{"+d.callback(function(){d(a).remove()})+"();}catch(e){}";for(var s,l,c=i.length-1;(s=i[c--])&&("SCRIPT"===s.nodeName?l=i.push(r):1===s.nodeType&&(l=s.appendChild(r)),!l););l||i.push(r),a.push(r)}return d(i)},d.isDeferred=function(e){return e&&d.isFunction(e.always)},d.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},d.regExpEscape=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},(l=d.Ajax=function(e){e.autostart=!1;var t=d.ajax(e);return"function"==typeof t.send&&l.queue.addDeferred(function(e){t.send(),setTimeout(e.resolve,l.interval)}),t}).queue=d.Threads({threadLimit:1}),l.interval=1200,l.interval=0,d.cssUrl=function(e){return'url("'+encodeURI(e)+'")'},function(){d.fn.addTransitoryClass=function(e,t){var n=this.addClass(e);return setTimeout(function(){n.removeClass(e)},t||1),this};function n(e,t,n){var o=this;return setTimeout(function(){o[e+"Class"](t)},n||50),this}d.fn.addClassAfter=function(e,t){return n.call(this,"add",e,t)},d.fn.removeClassAfter=function(e,t){return n.call(this,"remove",e,t)};function o(e,t,n,o){var a=e?"-in":"-out";return this.addTransitoryClass(t.replace(/ /g,a+" ")+a,n||1e3)[(e?"add":"remove")+"ClassAfter"](t),o&&setTimeout(o,n),this}d.fn.addTransitionClass=function(e,t,n){return o.call(this,!0,e,t,n)},d.fn.removeTransitionClass=function(e,t,n){return o.call(this,!1,e,t,n)}}()}),FD50.plugin("uri",function(e){e.isUrl=function(e){return/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)};function h(e){"use strict";function s(e){return e=(e=decodeURIComponent(e)).replace("+"," ")}function r(e,t){for(var n,o,a,i=[],r=0;r<c.length;r++)n=c[r],o=s(n[0])===s(e),a=s(n[1])===s(t),(1!==arguments.length||o)&&(2!==arguments.length||o||a)||i.push(n);return c=i,this}function l(e,t,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,c.length),c.splice(n,0,[e,t])):0<arguments.length&&c.push([e,t]),this}var c=function(e){var t,n,o,a,i,r=[];if(null==e||""===e)return r;for(n=(e=0===e.indexOf("?")?e.substring(1):e).toString().split(/[&;]/),t=0;t<n.length;t++)a=(i=(o=n[t]).split("="))[0],i=-1===o.indexOf("=")?null:null===i[1]?"":i[1],r.push([a,i]);return r}(e);return{getParamValue:function(e){for(var t,n=0;n<c.length;n++)if(t=c[n],s(e)===s(t[0]))return t[1]},getParamValues:function(e){for(var t,n=[],o=0;o<c.length;o++)t=c[o],s(e)===s(t[0])&&n.push(t[1]);return n},deleteParam:r,addParam:l,replaceParam:function(e,t,n){var o,a,i=-1;if(3===arguments.length){for(o=0;o<c.length;o++)if(a=c[o],s(a[0])===s(e)&&decodeURIComponent(a[1])===s(n)){i=o;break}r(e,n).addParam(e,t,i)}else{for(o=0;o<c.length;o++)if(a=c[o],s(a[0])===s(e)){i=o;break}r(e),l(e,t,i)}return this},toString:function(){for(var e,t="",n=0;n<c.length;n++)e=c[n],0<t.length&&(t+="&"),null===e[1]?t+=e[0]:t+=e.join("=");return 0<t.length?"?"+t:t}}}function m(n){"use strict";function o(e){return void 0!==e&&(p.protocol=e),p.protocol}function a(e){return null===(f=void 0!==e?e:f)?-1!==p.source.indexOf("//"):f}function i(e){return void 0!==e&&(p.userInfo=e),p.userInfo}function r(e){return void 0!==e&&(p.host=e),p.host}function s(e){return void 0!==e&&(p.port=e),p.port}function l(e){return void 0!==e&&(p.path=e),p.path}function c(e){return t=void 0!==e?new h(e):t}function d(e){return void 0!==e&&(p.anchor=e),p.anchor}function e(){function e(e){return null!==e&&""!==e}var t="";return e(o())?(t+=o(),o().indexOf(":")!==o().length-1&&(t+=":"),t+="//"):a()&&e(r())&&(t+="//"),e(i())&&e(r())&&(t+=i(),i().indexOf("@")!==i().length-1&&(t+="@")),e(r())&&(t+=r(),e(s())&&(t+=":"+s())),e(l())?t+=l():e(r())&&(e(c().toString())||e(d()))&&(t+="/"),e(c().toString())&&(0!==c().toString().indexOf("?")&&(t+="?"),t+=c().toString()),e(d())&&(0!==d().indexOf("#")&&(t+="#"),t+=d()),t}var u=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi,p=function(e){for(var t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],o="queryKey",n=/(?:^|&)([^&=]*)=?([^&]*)/g,a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),i={},r=14;r--;)i[t[r]]=a[r]||"";return i[o]={},i[t[12]].replace(n,function(e,t,n){t&&(i[o][t]=n)}),i}(n||""),t=new h(p.query),f=null;return{protocol:o,hasAuthorityPrefix:a,userInfo:i,host:r,port:s,path:l,query:c,anchor:d,setProtocol:function(e){return o(e),this},setHasAuthorityPrefix:function(e){return a(e),this},setUserInfo:function(e){return i(e),this},setHost:function(e){return r(e),this},setPort:function(e){return s(e),this},setPath:function(e){return l(e),this},setQuery:function(e){return c(e),this},setAnchor:function(e){return d(e),this},getQueryParamValue:function(e){return c().getParamValue(e)},getQueryParamValues:function(e){return c().getParamValues(e)},deleteQueryParam:function(e,t){return 2===arguments.length?c().deleteParam(e,t):c().deleteParam(e),this},addQueryParam:function(e,t,n){return 3===arguments.length?c().addParam(e,t,n):c().addParam(e,t),this},replaceQueryParam:function(e,t,n){return 3===arguments.length?c().replaceParam(e,t,n):c().replaceParam(e,t),this},extract:function(e){var t=n.match(u)||[];return void 0===e?t:t[e]||""},toPath:function(e){if(void 0===e)return p.path;if("/"==e.substring(0,1))return p.path=e;var t,n=p.path.split("/"),o=e.split("/");for(""===n.slice(-1)[0]&&n.pop();t=o.shift();)switch(t){case"..":1<n.length&&n.pop();break;case".":break;default:n.push(t)}return p.path=n.join("/"),this},toString:e,clone:function(){return new m(e())}}}e.uri=function(e){return new m(e)}}),FD50.plugin("mvc",function($){function E5a(e,t,n){return void 0!==e[t]?e[t]:n&&(e[t]={})}function F5a(e){var t=typeof e;return e&&("function"==t||"object"==t)}var G5a,D5a,H5a,sga,tga,uga,vga,Hga,Yga,Zga,$ga,_ga,a6a,b6a,d6a,f6a;function c6a(e,t){return e.concat(Zga(t))}function e6a(e,a,t){for(var n in t=t||e,e)t[n]=$ga(e[n])&&$ga(a[n])&&d6a.test(e[n])?function(n,o){return function(){var e,t=this._super;return this._super=a[n],e=o.apply(this,arguments),this._super=t,e}}(n,e[n]):e[n]}D5a={undHash:/_|-/,colons:/::/,words:/([A-Z]+)([A-Z][a-z])/g,lowUp:/([a-z\d])([A-Z])/g,dash:/([a-z\d])([A-Z])/g,replacer:/\{([^\}]+)\}/g,dot:/\./},H5a=$.String=$.extend($.String||{},{getObject:G5a=function(e,t,n){var o,a,i,r=e?e.split(D5a.dot):[],s=r.length,l=0;if(t=$.isArray(t)?t:[t||window],0==s)return t[0];for(;o=t[l++];){for(i=0;i<s-1&&F5a(o);i++)o=E5a(o,r[i],n);if(F5a(o)&&void 0!==(a=E5a(o,r[i],n)))return!1===n&&delete o[r[i]],a}},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.substr(1)},camelize:function(e){return(e=H5a.classize(e)).charAt(0).toLowerCase()+e.substr(1)},classize:function(e,t){for(var n=e.split(D5a.undHash),o=0;o<n.length;o++)n[o]=H5a.capitalize(n[o]);return n.join(t||"")},niceName:function(e){return H5a.classize(e," ")},underscore:function(e){return e.replace(D5a.colons,"/").replace(D5a.words,"$1_$2").replace(D5a.lowUp,"$1_$2").replace(D5a.dash,"_").toLowerCase()},sub:function(e,n,o){var a=[];return a.push(e.replace(D5a.replacer,function(e,t){e=G5a(e,n,"boolean"==typeof o?!o:o)||G5a(t,n,"boolean"==typeof o?!o:o),t=typeof e;return"object"!=t&&"function"!=t||null===t?""+e:(a.push(e),"")})),a.length<=1?a[0]:a},_regs:D5a}),$.extend($,H5a),$.String.rsplit=function(e,t){for(var n,o=t.exec(e),a=[];null!==o;)n=o.index,t.lastIndex,0!==n&&(a.push(e.substring(0,n)),e=e.slice(n)),a.push(o[0]),e=e.slice(o[0].length),o=t.exec(e);return""!==e&&a.push(e),a},sga=/^\d+$/,tga=/([^\[\]]+)|(\[\])/g,uga=/\+/g,vga=/([^?#]*)(#.*)?$/,$.String=$.extend($.String||{},{deparam:function(e){if(!e||!vga.test(e))return{};for(var t={},n=e.split("&"),o=0;o<n.length;o++){var a=t,i=n[o].split("=");2!=i.length&&(i=[i[0],i.slice(1).join("=")]);for(var r=decodeURIComponent(i[0].replace(uga," ")),i=decodeURIComponent(i[1].replace(uga," ")),s=r.match(tga),l=0;l<s.length-1;l++){var c=s[l];a[c]||(a[c]=sga.test(s[l+1])||"[]"==s[l+1]?[]:{}),a=a[c]}lastPart=s[s.length-1],"[]"==lastPart?a.push(i):a[lastPart]=i}return t}}),Hga=$.cleanData,$.cleanData=function(e){for(var t,n=0;void 0!==(t=e[n]);n++)$(t).triggerHandler("destroyed");Hga(e)},$.cookie=function(e,t,n){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),i=0;i<a.length;i++){var r=jQuery.trim(a[i]);if(r.substring(0,e.length+1)==e+"="){o=decodeURIComponent(r.substring(e.length+1));break}}if(jQuery.evalJSON&&o&&o.match(/^\s*\{/))try{o=jQuery.evalJSON(o)}catch(e){}return o}n=n||{},null===t&&(t="",n.expires=-1),"object"==typeof t&&jQuery.toJSON&&(t=jQuery.toJSON(t));var s="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(c=new Date).setTime(c.getTime()+24*n.expires*60*60*1e3):c=n.expires,s="; expires="+c.toUTCString());var l=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",n=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,l,c,n].join("")},Yga=!1,Zga=$.makeArray,$ga=$.isFunction,_ga=$.isArray,a6a=$.extend,b6a=$.String.getObject,d6a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,f6a="prototype",clss=$.Class=function(){arguments.length&&clss.extend.apply(clss,arguments)},a6a(clss,{proxy:function(i){var r,s=Zga(arguments);return i=s.shift(),_ga(i)||(i=[i]),r=this,function(){for(var e,t,n=c6a(s,arguments),o=i.length,a=0;a<o;a++)(t=i[a])&&((e="string"==typeof t)&&r._set_called&&(r.called=t),n=(e?r[t]:t).apply(r,n||[]),a<o-1&&(n=!_ga(n)||n._use_call?[n]:n));return n}},newInstance:function(){var e,t=this.rawInstance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,_ga(e)?e:arguments),t},setup:function(e,t){return this.defaults=a6a(!0,{},e.defaults,this.defaults),arguments},rawInstance:function(){Yga=!0;var e=new this;return Yga=!1,e},extend:function(e,t,n){function o(){if(!Yga)return this.constructor!==o&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}"string"!=typeof e&&(n=t,t=e,e=null),n||(n=t,t=null),n=n||{};var a,i,r,s=this[f6a];for(a in Yga=!0,i=new this,Yga=!1,e6a(n,s,i),this)this.hasOwnProperty(a)&&(o[a]=this[a]);e6a(t,this,o),e&&(t&&t.root&&(r=t.root,$.isString(r)&&(r=b6a(r,window,!0))),l=(s=e.split(/\./)).pop(),s=b6a(s.join("."),r||window,!0),a6a(!0,o,(r=s)[l]),s[l]=o),a6a(o,{prototype:i,namespace:r,shortName:l,constructor:o,fullName:e});var l=(o[f6a].Class=o[f6a].constructor=o).setup.apply(o,c6a([this],arguments));return o.init&&o.init.apply(o,l||c6a([this],arguments)),o}}),clss.callback=clss[f6a].callback=clss[f6a].proxy=clss.proxy,function(){function s(e,t,n,o,a){return o?function(e,t,n,o,a){0===t.indexOf(">")&&(t=(e.data("directSelector")+" "||"")+t);var i=e.delegate&&e.undelegate?e:$(x(e)?[e]:e);return a?i.delegate(t,n,a,o):i.delegate(t,n,o),function(){i.undelegate(t,n,o),i=e=n=o=t=null}}(e,o,t,n,a):(r=t,s=n,a=a,c=(i=e).bind&&i.unbind?i:$(x(i)?[i]:i),0===r.indexOf(">")&&(r=r.substr(1),l=function(e){e.target===i&&s.apply(this,arguments)}),a?c.bind(r,a,l||s):c.bind(r,l||s),function(){c.unbind(r,l||s),i=r=s=l=null});var i,r,s,l,c}function l(e,t){var n="string"==typeof t?e[t]:t;return C(n)&&x(n[1])&&(n=n[1]),function(){return e.called=t,n.apply(e,[this.nodeName?$(this):this].concat(o.call(arguments,0)))}}function y(e){return c.underscore(e.replace($.globalNamespace+".","").replace(n,"_").replace(a,""))}function k(e,t){return $.data(e,"controllers",t)}var w=$.makeArray,C=$.isArray,x=$.isFunction,B=$.isString,m=$.extend,c=$.String,g=$.each,t=c.getObject,T="prototype",v="constructor",o=Array[T].slice,n=/\./g,a=/_?controllers?/gi,i=/^\S(.*)\s(.*)/,d=/\{([^\}]+)\}/g,u=/\{([^\.]+[\.][^\.]+)\}/g,p=/^(?:(.*?)\s)?([\w\.\:>]+)$/,r=$.globalNamespace+".Controller";$.Controller=function(e){var t=w(arguments),n={root:r},t=2<t.length?(n=$.extend(n,t[1]),t[2]):t[1];return n.namespace&&(e=n.namespace+"."+e),$.Controller.Class(e,n,t)};var I=r+".Class";$.Class(I,{setup:function(e,t){if(this._super.apply(this,arguments),this.shortName&&this.fullName!=I){for(var n=this.elements||[],o=0,a=this.defaults;element=n[o++];){var i=element.indexOf("{"),r=element.indexOf("}"),s=(element.length,element.slice(0,i)),l=element.slice(r+1),c=element.slice(i+1,r).split("|"),d=0,r=s.match(/^\^(\S*)\s(.*)/),u="";for(r&&(u=r[1]+"-",s=r[2]);t=c[d++];){var p="{"+$.camelize(u+t)+"}";$.has(a,p)||(a[p]=s+t+l)}}this._fullName=y(this.fullName),this._shortName=y(this.shortName);var f,h,m=this;B(this.pluginName)&&(h=this._fullName,v=this.pluginName,$.fn[v]||($.fn[v]=function(n){var o=w(arguments);if($.isString(n)&&"controller"===n){var e=k(this[0]);return e&&e[h]}return this.each(function(){var e=k(this),t=e&&e[h];t?$.isString(n)?(e=t[n],$.isFunction(e)&&e.apply(t,o.slice(1))):t.update.apply(t,o):m.newInstance.apply(m,[this].concat(o))})}));var g,v=w(arguments),b=this[T],v=v[3<v.length?3:2];for(f in x(v)&&(this.protoFactory=v,b=this.protoFactory.call(this,null)),this.actions={},b)"constructor"!=f&&this._isAction(f)&&(g=b[f],(x(g)||C(g)&&x(g[1]))&&(this.actions[f]=this._action(f)));$.module("$:/Controllers/"+this.fullName).resolve(this)}},hookup:function(e){return new this(e)},_isAction:function(e){return!!i.test(e)||(-1<$.inArray(e,this.listensTo)||$.event.special[e]||f[e])},_action:function(e,n){if(d.lastIndex=0,!n&&d.test(e))return null;var o,a,t=e=e.replace("{self} ","");n&&(r=!1,u.test(e)&&(a="",t=e.replace(u,function(e,t){t=t.split(".");return o=n["{"+t[0]+"}"]||{},a=$.isControllerInstance(o)?(o[t[1]]||{}).selector:a}).match(p),r=!!a,t=[o.element].concat(t||[])),r||(t=c.sub(e,[n,window])));var i=C(t),r=(i?t[1]:t).match(p),e=r[2];return{processor:f[e]||h,parts:r,delegate:i?t[0]:void 0}},processors:{},listensTo:[],defaults:{},hostname:"parent"},{setup:function(e,t){var n,o=this,a=o[v],i=(o[T],a._fullName);o.instanceId=$.uid(i+"_");var r,s,l,c,d=o.options=m(!0,{},a.defaults,a.defaultOptions,t),u=o.element=$(e);for(r in a.protoFactory&&(n=a.protoFactory.apply(a,[o,d,u]),m(!0,o,n)),(k(e)||k(e,{}))[i]=o,u.data("directSelector")||(p=$.uid("DS"),u.addClass(p).data("directSelector","."+p)),o.selectors={},d)r.match(/^\{.+\}$/)&&(s=r.replace(/^\{|\}$/g,""),l=d[r],B(l)?(c=o[s],o[s]=o.selectors[s]=function(t,o,e){o=/^(\.|\#)$/.test(o)?o+e:o;function a(e){var n=(a.baseElement||t.element).find(o);return $.isString(e)&&(n=n.filter(e)),$.isPlainObject(e)&&$.each(e,function(e,t){n=n.filterBy(e,t)}),n}return a.selector=o,a.css=function(){var t,e,n=a.cssRule;return n||(t=u.data("directSelector"),e=$.map(o.split(","),function(e){return t+" "+e}),(n=a.cssRule=$.cssRule(e)).important=!0),arguments.length?n.css.apply(n,arguments):n},a.inside=function(e){return $(e).find(o)},a.of=function(e){return $(e).parents(o).eq(0)},a.under=function(e){var t=[];return a().each(function(){$(this).parents().filter(e).length&&t.push(this)}),$(t)},$.isPlainObject(c)&&$.extend(a,c),a}(o,l,s)):o[s]=l);var p=d.view,f=o.view;o.view=function(){return f.apply(this,arguments)},g(p||{},function(n,e){o.view[n]=function(e){var t=w(arguments);return $.isBoolean(e)?t=t.slice(1):e=!1,o.view.apply(o,[e,n].concat(t))}}),$.extend(o,d.controller),o.pluginInstances={},o.called="init",o._bind();var h=o.init||$.noop;return o.init=function(){return o.init=h,result=h.apply(o,arguments),o.trigger("init."+a.fullName.toLowerCase(),[o]),result},[u,d].concat(w(arguments).slice(2))},on:function(e){var t=w(arguments),n=this.element,o=t.length;return 2==o?this._binder(n,e,t[1]):3==o&&B(t[1])?this._binder(n,e,t[2],t[1]):this._binder(t[1],e,t[2])},_bind:function(){var o=this,a=o[v],i=a.actions,r=o._bindings=[],s=o.element;g(i||{},function(e,t){var n;i.hasOwnProperty(e)&&(n=a.actions[e]||a._action(e,o.options),$.isControllerInstance(n.delegate)&&(n.delegate=n.delegate.element),r.push(n.processor(n.delegate||s,n.parts[2],n.parts[1],e,o)))});var t=l(this,"destroy");return s.bind("destroyed",t),r.push(function(e){$(e).unbind("destroyed",t)}),r.length},_binder:function(e,t,n,o){return"string"==typeof n&&(n=l(this,n)),this._bindings.push(s(e,t,n,o)),this._bindings.length},_unbind:function(){var n=this.element[0];g(this._bindings,function(e,t){t(n)}),this._bindings=[]},trigger:function(e){var t=this.element;if(t){var n=$.Event(e);return t.trigger.apply(t,[n].concat($.makeArray(arguments).slice(1))),n}},delegate:function(e,t,n,o){return"string"==typeof e&&(o=n,n=t,t=e,e=this.element),this._binder(e,n,o,t)},update:function(e){m(this.options,e),this._unbind(),this._bind()},destroy:function(){if(!this._destroyed){var e=this[v]._fullName;for(pname in this.pluginInstances)this.removePlugin(pname);this._destroyed=!0,this.element.removeClass(e),this._unbind(),delete this._actions,delete this.element.data("controllers")[e],$(this).triggerHandler("destroyed"),this.element=$()}},find:function(e){return this.element.find(e)},view:function(){var e,t=w(arguments),n=t,o=!1,a=this[v].component||$,i=this.options.view||{};return"boolean"==typeof t[0]&&(o=t[0],n=t.slice(1)),null==(n[0]=i[n[0]])?o?"":$(""):(e=a.View.apply(a,n),o?e:$($.parseHTML($.trim(e))))},getPlugin:function(e){return this.pluginInstances[e]},addSubscriber:function(e){var e=$.isArray(e)?e:[e||{}],n=this,o=this.Class.hostname,a={};return a["{"+o+"}"]=n,$.map(e,function(e,t){return!!$.isControllerInstance(e)&&(e.options[o]===this?e:(e[o]=n,e.update(a)))}),e},addPlugin:function(e,t,n){if(e){(t||n)&&!$.isPlainObject(t)||(n=t,t=[this.Class.root,this.Class.fullName,$.String.capitalize(e)].join(".")),$.isString(t)&&(t=$.getController(t));var o=$.isControllerInstance(t);if(x(t)||o){var a=(this.Class.pluginExtendsInstance?this.options:this.options.plugin||{})[e];n=$.extend(!0,{element:this.element},n,a);a=o?"instance":$.isController(t)?"controller":"function";this.trigger("addPlugin",[e,t,n,a]);var i,r=this.Class.hostname;switch(n["{"+r+"}"]=this,a){case"instance":(i=t).update(n),t[r]=this;break;case"controller":i=n.element.addController(t,n);break;case"function":i=t(this,n)}if(i)return this.pluginInstances[e]=i,this.Class.pluginExtendsInstance&&(this[e]=i),"function"!=a&&((o={})["{"+e+"}"]=i,this.update(o)),this.trigger("registerPlugin",[e,i,n,a]),i}}},removePlugin:function(e){var t=this.getPlugin(e);if(t)return this.trigger("removePlugin",[e,t]),delete this.pluginInstances[e],$.isFunction(t.destroy)?t.destroy():null},invokePlugin:function(e,t,n){var o=this.getPlugin(e);if(o&&$.isFunction(o[t]))return this.trigger("invokePlugin",[e,o,n]),o[t].apply(this,n)},getMessageGroup:function(){var e=$.isFunction(this.messageGroup)?this.messageGroup():this.element.find("[data-message-group]");return e=e.length<1?$("<div data-message-group></div>").prependTo(this.element):e},setMessage:function(e,t){var n,o,a={type:"warning",message:"",parent:this.getMessageGroup(),element:$('<div class="alert fade in"><button type="button" class="close" data-bs-dismiss="alert">Ã</button></div>')},i={},r=$.isDeferred(e),i=$.isPlainObject(e)&&!r?e:{message:e,type:t||"warning"},s=$.extend({},a,i),l=s.element;return $.isDeferred(e)?(n=arguments.callee,o=this,e.done(function(e,t){s.message=e,s.type=t||"warning",n.call(o,s),l.show()})):(l.addClass("alert-"+s.type).append(s.message),$("html").has(l).length<1&&l.appendTo(s.parent)),l},clearMessage:function(){this.getMessageGroup().empty()},_set_called:!0});var f=$.Controller.Class.processors,h=function(e,t,n,o,a){var i,r=a[o];return C(r)&&x(r[1])&&(i=r[0]),s(e,t,l(a,o),n,i)};g("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" "),function(e,t){f[t]=h});function b(e){return e.replace("$.Controller",r)}function E(e){if(B(e)&&(e=b(e),e=t(e)||t(r+"."+e)),S(e))return e}function S(e){return x(e)&&e.hasOwnProperty("_fullName")}function _(e){return $.map(e,function(e){return(C(e)?_:E)(e)})}$.getController=E,$.isController=function(e){return!!E(e)},$.isControllerInstance=function(e){return e&&e[v]&&S(e[v])},$.isControllerOf=function(e,t){if(!t)return!1;C(t)||(t=[t]);for(var n=0;n<t.length;n++)if(e instanceof E(t[n]))return!0;return!1},$.fn.extend({controllers:function(){var o=_(w(arguments)),a=[];return this.each(function(){var n=$.data(this,"controllers");g(n||{},function(e,t){n.hasOwnProperty(e)&&(o.length&&!$.isControllerOf(t,o)||a.push(t))})}),a},controller:function(e,t){return void 0===t?this.controllers(e)[0]:(this.addController.apply(this,arguments),this)},hasController:function(e){e=(E(e)||{})._fullName||(B(e)?y(b(e)):"");return!!e&&($(this).data("controllers")||{}).hasOwnProperty(e)},addController:function(t,n,o){var a=E(t);if(a){var i=[];return this.each(function(){var e;1===this.nodeType&&"SCRIPT"!=this.nodeName&&((e=$(this).controller(t))?i.push(e):(e=new a(this,n),x(o)&&o.apply(e,[$(this),e]),i.push(e)))}),1<i.length?i:i[0]}},removeController:function(t){return this.each(function(){for(var e=$(this).controllers(t);e.length;)e.shift().destroy()}),this},addControllerWhenAvailable:function(e){var t=this,n=arguments,o=$.Deferred();return $.isController(e)&&(e=e.fullName),B(e)?($.module("$:/Controllers/"+e).pipe(function(){var e=t.addController.apply(t,n);o.resolveWith(e,[t,e])},o.reject,o.fail),o):o.reject()},implement:function(){return this.addController.apply(this,arguments),this}}),function(){for(var e,t=["is","find"],n={};e=t.shift();)n[e]=$.fn[e],$.fn[e]=function(t){return function(e){return n[t].apply(this,(e||{}).hasOwnProperty("of")?[e.selector]:arguments)}}(e)}()}(),function(){function u(e){return e.replace(/^\/\//,"").replace(/[\/\.]/g,"_")}function p(e,t){if(!e.match(/[^\s]/))throw"$.View ERROR: There is no template or an empty template at "+t}var l=$.makeArray,n=1,f=$.View=function(e,a,i,r){"function"==typeof i&&(r=i,i=void 0);var t=d(a);if(t.length){var s=$.Deferred();return t.push(o(e,!0)),$.when.apply($,t).then(function(e){var t=l(arguments),n=t.pop()[0];if(c(a))a=h(e);else for(var o in a)c(a[o])&&(a[o]=h(t.shift()));n=n(a,i),s.resolve(n),r&&r(n)}),s.promise()}var n,t="function"==typeof r,s=o(e,t);return t?(n=s).done(function(e){r(e(a,i))}):s.done(function(e){n=e(a,i)}),n},o=function(e,t){return $.ajax({url:e,dataType:"view",async:t})},c=function(e){return e&&$.isFunction(e.always)},d=function(e){var t,n=[];if(c(e))return[e];for(t in e)c(e[t])&&n.push(e[t]);return n},h=function(e){return $.isArray(e)&&3===e.length&&"success"===e[1]?e[0]:e};$.ajaxTransport("view",function(e,n){function o(e){return e=c.renderer(i,e),f.cache&&(f.cached[i]=e),{view:e}}var a,i,r,t,s=n.url,l=s.match(/\.[\w\d]+$/);(l=(a=document.getElementById(s))?"."+a.type.match(/\/(x\-)?(.+)/)[2]:l)||(l=f.ext,s+=f.ext),i=u(s),s.match(/^\/\//)&&(t=s.substr(2),s="undefined"==typeof steal?"/"+t:steal.root.mapJoin(t)+"");var c=f.types[l],d=$.template()[n.url];return{send:function(e,t){return d?(c=f.types["."+d.type],t(200,"success",o(d.content))):f.cached[i]?t(200,"success",{view:f.cached[i]}):void(a?t(200,"success",o(a.innerHTML)):r=$.ajax({async:n.async,url:s,dataType:"text",error:function(){p("",s),t(404)},success:function(e){p(e,s),t(200,"success",o(e))}}))},abort:function(){r&&r.abort()}}}),$.extend(f,{hookups:{},hookup:function(e){var t=++n;return f.hookups[t]=e,t},cached:{},cache:!0,register:function(e){this.types["."+e.suffix]=e,window.steal&&steal.type(e.suffix+" view js",function(e,t,n){var o=f.types["."+e.type],a=u(e.rootSrc+"");e.text=o.script(a,e.text),t()})},types:{},ext:".ejs",registerScript:function(e,t,n){return"$.View.preload('"+t+"',"+f.types["."+e].script(t,n)+");"},preload:function(e,n){f.cached[e]=function(e,t){return n.call(e,e,t)}}}),window.steal&&steal.type("view js",function(e,t,n){var o=f.types["."+e.type],a=u(e.rootSrc+"");e.text="steal('"+(o.plugin||"jquery/view/"+e.type)+"').then(function($){$.View.preload('"+a+"',"+e.text+");\n})",t()});var r={val:!0,text:!0},a=function(a){var i=$.fn[a];$.fn[a]=function(){var t,e,n=l(arguments),o=this;if(c(n[0]))return n[0].done(function(e){s.call(o,[e],i)}),this;if(m(n)){if(e=v(n))return t=n[e],n[e]=function(e){s.call(o,[e],i),t.call(o,e)},f.apply(f,n),this;if(e=f.apply(f,n),c(e))return e.done(function(e){s.call(o,[e],i)}),this;n=[e]}return r[a]?i.apply(this,n):s.call(this,n,i)}},s=function(e,t){var n,o;for(o in f.hookups)break;return o&&e[0]&&g(e[0])&&(n=f.hookups,f.hookups={},e[0]=$(e[0])),t=t.apply(this,e),n&&b(e[0],n),t},m=function(e){var t=typeof e[1];return"string"==typeof e[0]&&("object"==t||"function"==t)&&!i(e[1])},i=function(e){return e.nodeType||e.jquery},g=function(e){return!!i(e)||"string"==typeof e&&("<"===(e=$.trim(e)).substr(0,1)&&">"===e.substr(e.length-1,1)&&3<=e.length)},v=function(e){return"function"==typeof e[3]?3:"function"==typeof e[2]&&2},b=function(e,t){for(var n,o,a,i=0,r=(n=(e=e.filter(function(){return 3!=this.nodeType})).add("[data-view-id]",e)).length;i<r;i++)n[i].getAttribute&&(o=n[i].getAttribute("data-view-id"))&&(a=t[o])&&(a(n[i],o),delete t[o],n[i].removeAttribute("data-view-id"));$.extend(f.hookups,t)};$.fn.hookup=function(){var e=f.hookups;return f.hookups={},b(this,e),this},$.each(["prepend","append","after","before","text","html","replaceWith","val"],function(e,t){a(t)})}(),function(){var myEval=function(script){eval(script)},rSplit=$.String.rsplit,extend=$.extend,isArray=$.isArray,returnReg=/\r\n/g,retReg=/\r/g,newReg=/\n/g,nReg=/\n/,slashReg=/\\/g,quoteReg=/"/g,singleQuoteReg=/'/g,tabReg=/\t/g,leftBracket=/\{/g,rightBracket=/\}/g,quickFunc=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,clean=function(e){return e.replace(slashReg,"\\\\").replace(newReg,"\\n").replace(quoteReg,'\\"').replace(tabReg,"\\t")},escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(quoteReg,"&#34;").replace(singleQuoteReg,"&#39;")},$View=$.View,bracketNum=function(e){var t=e.match(leftBracket),e=e.match(rightBracket);return(t?t.length:0)-(e?e.length:0)},EJS=function(e){if(this.constructor!=EJS){var n=new EJS(e);return function(e,t){return n.render(e,t)}}"function"!=typeof e?(extend(this,EJS.options,e),this.template=compile(this.text,this.type,this.name)):this.template={fn:e}};$&&($.EJS=EJS),EJS.prototype.render=function(e,t){e=e||{},this._extra_helpers=t;t=new EJS.Helpers(e,t||{});return this.template.fn.call(e,e,t)},extend(EJS,{text:function(o){if("string"==typeof o)return o;if(null==o)return"";var e=(o.hookup?function(e,t){o.hookup.call(o,e,t)}:"function"==typeof o&&o)||isArray(o)&&function(e,t){for(var n=0;n<o.length;n++)o[n].hookup?o[n].hookup(e,t):o[n](e,t)};return e?"data-view-id='"+$View.hookup(e)+"'":o.toString?o.toString():""},clean:function(e){return"string"==typeof e?escapeHTML(e):"number"==typeof e?e:EJS.text(e)},options:{type:"[",ext:".ejs"}});var scan=function(e,t,n){for(var o=rSplit(t,nReg),a=0;a<o.length;a++)scanline(e,o[a],n)},scanline=function(e,t,n){e.lines++;for(var o,a=rSplit(t,e.splitter),i=0;i<a.length;i++)null!==(o=a[i])&&n(o,e)},makeScanner=function(e,t){var n={};return extend(n,{left:e+"%",right:"%"+t,dLeft:e+"%%",dRight:"%%"+t,eeLeft:e+"%==",eLeft:e+"%=",cmnt:e+"%#",cleanLeft:e+"%~",scan:scan,lines:0}),n.splitter=new RegExp("("+[n.dLeft,n.dRight,n.eeLeft,n.eLeft,n.cmnt,n.left,n.right+"\n",n.right,"\n"].join(")|(").replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")"),n},compile=function(e,t,n){e=e.replace(returnReg,"\n").replace(retReg,"\n"),t=t||"[";function a(e){c.push(o,'"',clean(e),'");')}function i(){d=""}var o="___v1ew.push(",r=o,s="var ___v1ew = [];",l="return ___v1ew.join('')",c=new EJS.Buffer([s],[]),d="",u=null,p=[];scan(makeScanner(t,"["===t?"]":">"),e||"",function(e,t){if(null===u)switch(e){case"\n":a(d+="\n"),c.cr(),i();break;case t.left:case t.eLeft:case t.eeLeft:case t.cmnt:u=e,0<d.length&&a(d),i();break;case t.dLeft:d+=t.left;break;default:d+=e}else switch(e){case t.right:switch(u){case t.left:var n=bracketNum(d),o=p.length&&-1==n?p.pop():";";"));"===o&&c.push(l),c.push(d,o),1===n&&p.push(";");break;case t.eLeft:(n=bracketNum(d))&&p.push("));"),quickFunc.test(d)&&(d="function(__){var "+(o=d.match(quickFunc))[1]+"=$(__);"+o[2]+"}"),c.push(r,$.globalNamespace+".EJS.clean(",d,n?s:"));");break;case t.eeLeft:(n=bracketNum(d))&&p.push("));"),c.push(r,$.globalNamespace+".EJS.text(",d,n?s:"));")}u=null,i();break;case t.dRight:d+=t.right;break;default:d+=e}}),0<d.length&&c.push(o,'"',clean(d)+'");');e={out:"try { with(_VIEW) { with (_CONTEXT) {"+c.close()+" "+l+"}}}catch(e){e.lineNumber=null;throw e;}"};return myEval.call(e,"this.fn = (function(_CONTEXT,_VIEW){ var $ = "+$.globalNamespace+";"+e.out+"});"),e};EJS.Buffer=function(e,t){this.line=[],this.script=[],this.post=t,this.push.apply(this,e)},EJS.Buffer.prototype={push:function(){this.line.push.apply(this.line,arguments)},cr:function(){this.script.push(this.line.join(""),"\n"),this.line=[]},close:function(){return 0<this.line.length&&(this.script.push(this.line.join("")),this.line=[]),this.post.length&&this.push.apply(this,this.post),this.script.push(";"),this.script.join("")}},EJS.Helpers=function(e,t){this._data=e,this._extras=t,extend(this,t)},EJS.Helpers.prototype={plugin:function(e){var t=$.makeArray(arguments),n=t.shift();return function(e){e=$(e);e[n].apply(e,t)}},view:function(e,t,n){return n=n||this._extras,t=t||this._data,$View(e,t,n)}},$View.register({suffix:"ejs",script:function(e,t){return $.globalNamespace+".EJS(function(_CONTEXT,_VIEW) { "+new EJS({text:t,name:e}).template.out+" })"},renderer:function(e,t){return EJS({text:t,name:e})}})}(),function(){function s(e){return"object"==typeof e&&null!==e&&e}function l(o,a,i){return o instanceof $.Observe?r([o],i._namespace):o=new(f(o)?$.Observe.List:$.Observe)(o),o.bind("change"+i._namespace,function(e,t){var n=$.makeArray(arguments),e=n.shift();n[0]="*"===a?i.indexOf(o)+"."+n[0]:a+"."+n[0],$.event.trigger(e,n,i)}),o}function r(e,t){for(var n,o=0;o<e.length;o++)(n=e[o])&&n.unbind&&n.unbind("change"+t)}function c(){if(!a)return a=[],!0}function d(e,t,n){return!e._init&&(a?void a.push({t:e,ev:t,args:n}):$.event.trigger(t,n,e,!0))}function u(){var e,t=a.length,n=a.slice(0);a=null,i++;for(var o=0;o<t;o++)e=n[o],$.event.trigger({type:e.ev,batchNum:i},e.args,e.t)}function p(e,n,o){return e.each(function(e,t){o[e]=s(t)&&"function"==typeof t[n]?t[n]():t}),o}var f=$.isArray,h=$.makeArray,e=$.each,n=0,a=null,i=0;$.Class($.globalNamespace+".Observe",{init:function(e){this._data={},this._namespace=".observe"+ ++n,this._init=!0,this.attrs(e),delete this._init},attr:function(e,t){return void 0===t?this._get(e):(this._set(e,t),this)},each:function(){return e.apply(null,[this.__get()].concat(h(arguments)))},removeAttr:function(e){var t=f(e)?e:e.split("."),n=t.shift(),e=this._data[n];return t.length?e.removeAttr(t):(delete this._data[n],d(this,"change",[n,"remove",void 0,e]),e)},_get:function(e){var t=f(e)?e:(""+e).split("."),e=this.__get(t.shift());return t.length?e?e._get(t):void 0:e},__get:function(e){return e?this._data[e]:this._data},_set:function(e,t){var n=f(e)?e:(""+e).split("."),o=n.shift(),e=this.__get(o);if(s(e)&&n.length)e._set(n,t);else{if(n.length)throw"jQuery.Observe: set a property on an object that does not exist";t!==e&&(n=this.__get().hasOwnProperty(o)?"set":"add",this.__set(o,s(t)?l(t,o,this):t),d(this,"change",[o,n,t,e]),e&&r([e],this._namespace))}},__set:function(e,t){this._data[e]=t,e in this.constructor.prototype||(this[e]=t)},bind:function(e,t){return $.fn.bind.apply($([this]),arguments),this},unbind:function(e,t){return $.fn.unbind.apply($([this]),arguments),this},serialize:function(){return p(this,"serialize",{})},attrs:function(e,t){if(void 0===e)return p(this,"attrs",{});e=$.extend(!0,{},e);var n,o=c();for(n in this._data){var a=this._data[n],i=e[n];void 0!==i?(s(a)&&s(i)?a.attrs(i,t):a!=i&&this._set(n,i),delete e[n]):t&&this.removeAttr(n)}for(n in e)i=e[n],this._set(n,i);o&&u()}});function m(e){return e[0]&&$.isArray(e[0])?e[0]:h(e)}var t=$.Observe($.globalNamespace+".Observe.List",{init:function(e,t){this.length=0,this._namespace=".list"+ ++n,this._init=!0,this.bind("change",this.proxy("_changes")),this.push.apply(this,h(e||[])),$.extend(this,t),this.comparator&&this.sort(),delete this._init},_changes:function(e,t,n,o,a){if(this.comparator&&/^\d+./.test(t)){var i=+/^\d+/.exec(t)[0],r=this[i],s=this.sortedIndex(r);if(s!==i)return[].splice.call(this,i,1),[].splice.call(this,s,0,r),d(this,"move",[r,s,i]),e.stopImmediatePropagation(),void d(this,"change",[t.replace(/^\d+/,s),n,o,a])}-1===t.indexOf(".")&&("add"===n?d(this,n,[o,+t]):"remove"===n&&d(this,n,[a,+t]))},sortedIndex:function(e){for(var t=e.attr(this.comparator),n=0,o=0;o<this.length;o++)if(e!==this[o]){if(t<=this[o].attr(this.comparator))return o+n}else n=-1;return o+n},__get:function(e){return e?this[e]:this},__set:function(e,t){this[e]=t},serialize:function(){return p(this,"serialize",[])},splice:function(e,t){for(var n=h(arguments),o=2;o<n.length;o++){var a=n[o];s(a)&&(n[o]=l(a,"*",this))}void 0===t&&(t=n[1]=this.length-e);var i=[].splice.apply(this,n);return 0<t&&(d(this,"change",[""+e,"remove",void 0,i]),r(i,this._namespace)),2<n.length&&d(this,"change",[""+e,"add",n.slice(2),i]),i},attrs:function(e,t){if(void 0===e)return p(this,"attrs",[]);e=e.slice(0);for(var n=Math.min(e.length,this.length),o=c(),a=0;a<n;a++){var i=this[a],r=e[a];s(i)&&s(r)?i.attrs(r,t):i!=r&&this._set(a,r)}e.length>this.length?this.push(e.slice(this.length)):e.length<this.length&&t&&this.splice(e.length),o&&u()},sort:function(e,t){var n=this.comparator;[].sort.apply(this,n?[function(e,t){return(e=e[n])===(t=t[n])?0:e<t?-1:1}]:[]);t||d(this,"reset")}});e({push:"length",unshift:0},function(i,r){t.prototype[i]=function(){for(var e=m(arguments),t=r?this.length:0,n=0;n<e.length;n++){var o=e[n];s(o)&&(e[n]=l(o,"*",this))}if(1==e.length&&this.comparator){var a=this.sortedIndex(e[0]);return this.splice(a,0,e[0]),this.length}a=[][i].apply(this,e);return this.comparator&&1<e.length?(this.sort(null,!0),d(this,"reset",[e])):d(this,"change",[""+t,"add",e,void 0]),a}}),e({pop:"length",shift:0},function(n,o){t.prototype[n]=function(){var e=m(arguments),t=o&&this.length?this.length-1:0,e=[][n].apply(this,e);return d(this,"change",[""+t,"remove",void 0,[e]]),e&&e.unbind&&e.unbind("change"+this._namespace),e}}),t.prototype.indexOf=[].indexOf||function(e){return $.inArray(e,this)},$.O=function(e,t){return new(f(e)||e instanceof $.Observe.List?$.Observe.List:$.Observe)(e,t)}}()}),FD50.plugin("joomla",function(n){n.Joomla=function(e,t){if(n.isFunction(t))window.Joomla[e]=t;else{e=window.Joomla[e];if(n.isFunction(e))return e.apply(window,t)}}}),FD50.plugin("module",function(a){function t(e){var t=this,n=a.Callbacks("once memory");a.extend(this,a.Deferred(),{name:e,status:"pending",ready:function(e){!0===e&&n.fire.call(t,a),a.isFunction(e)&&n.add(e)}}),t.then(function(){t.exports=this,t.status="resolved"},function(){t.status="rejected"});var o=t.done;t.done=function(){t.required=!0;var e=t.factory;return e&&"ready"===t.status&&e.call(t,a),t.done=o,t.done.apply(this,arguments)}}function o(e,t){var n;if("string"==typeof e){if(n=o.get(e),void 0===t)return n;if(a.isFunction(t))return"resolved"==n.status||(n.factory=t,n.status="ready",n.ready("true"),n.required&&(n.status="executing",t.call(n,a))),n}a.isArray(e)&&(e=a.map(e,function(e){var t=o.get(a.isString(e)?e:e.name);if(t)return"pending"===t.status&&(t.status="ready"),a.isPlainObject(e)?e:void 0}),a.each(e,function(e,t){o(t.name,t.factory)}))}a.module=(a.extend(o,{registry:{},get:function(e){if(e)return a.isModule(e)&&(e=e.replace("module://","")),o.registry[e]||o.create(e)},create:function(e){return o.registry[e]=new t(e)},remove:function(e){delete o.registry[e]}}),o),a.isModule=function(e){return a.isString(e)?!!e.match("module://"):e&&e instanceof t}}),FD50.plugin("script",function(o){o.Script=function(e){var t=document.createElement("script");return t.text=o.isString(e)?e:o.callback(e)+"();",o(t)},o.script=function(){function t(e){(e=o.extend(this,e)).manager=o.Deferred(),o.extend(e,e.manager.promise()),e.load()}var n=document.getElementsByTagName("head")[0];document.getElementsByTagName("base")[0];return o.extend(t.prototype,{timeout:7e3,retry:3,retryCount:1,type:"text/javascript",async:!1,charset:"UTF-8",verbose:!1,head:n,insert:function(){var e=this.node;this.head.appendChild(e)},remove:function(){var e=this.node;setTimeout(function(){e.onload=e.onerror=e.onreadystatechange=null;try{n.removeChild(e)}catch(e){}},1e3)},load:function(){var e,t=this;t.endTime=void 0,t.startTime=new Date,t.node=e=document.createElement("script"),t.insert(),t._ready=o.proxy(t.ready,t),t._error=o.proxy(t.error,t),e.attachEvent&&!o.browser.opera?(e.attachEvent("onreadystatechange",t._ready),e.attachEvent("onerror",t._error)):(e.addEventListener("load",t._ready,!1),e.addEventListener("error",t._error,!1)),o(e).attr({type:t.type,async:t.async,charset:t.charset,src:t.url}),t.monitor()},monitor:function(){var e=this;e.retryCount>e.retry?e._error():setTimeout(function(){"resolved"!==e.state()&&(e.verbose&&console.warn("$.script: Load timeout. [Retry: "+e.retryCount+"]",e),e.remove(),e.retryCount++,e.load())},e.timeout*e.retryCount)},ready:function(e){var t=this.node;"load"!==e.type&&!/loaded|complete/.test(t.readyState)||(this.complete.call(this,e),this.manager.resolve(this))},error:function(e){this.verbose&&console.error("$.script: Unable to load ",this),this.complete.call(this,e),this.remove(),this.manager.reject(this)},complete:function(e){var t=this.node;this.endTime=new Date,t.detachEvent&&!o.browser.opera?(t.detachEvent("onreadystatechange",this._ready),t.detachEvent("onerror",this._error)):(t.removeEventListener("load",this._ready,!1),t.removeEventListener("error",this._error,!1))}}),function(e){if(void 0!==e)return new t(e="string"==typeof e?{url:e}:e)}}()}),FD50.plugin("template",function(o){function a(e,t){return void 0===e?a.templates:"string"==typeof t?(n=o.isPlainObject(t)?t:o.extend({},i,{name:e,content:t}),a.templates[e]=n):(n=a.templates[e]||{}).content||"";var n}var i;o.template=(i={content:"",type:"ejs"},o.extend(a,{templates:{},remove:function(e){delete a.templates[e]}}),a)}),FD50.plugin("require",function(r){function a(){var n=this,e=r.makeArray(arguments),e=r.isPlainObject(e[0])?(o=e[0],e.slice(1)):e,o=r.extend({},a.defaultOptions,n.options,o,{batch:n});r.each(e,function(e,t){t=new a.task(t,o);n.addTask(t),t.start()})}function n(){var e=r.makeArray(arguments),e=r.isPlainObject(e[0])?(t=e[0],e.slice(1)):e,t=r.extend({},n.defaultOptions,this.options,t,{batch:this}),t=new n.task(e,t);this.addTask(t),t.start()}function i(){var o=this,e=r.makeArray(arguments),e=r.isPlainObject(e[0])?(a=e[0],e.slice(1)):e,a=r.extend({},i.defaultOptions,o.options,a,{batch:o});r.each(e,function(e,t){var n=new i.task(t,a),t=i.images[n.url],n=t||n;o.addTask(n),t||(i.images[n.url]=n).start()})}r.require=function(){function o(e){return e=new n(e),o.batches[e.id]=e}var e=function(e){return r.uri(e).setAnchor("").setQuery("").toPath("../").toString()};r.extend(o,{defaultOptions:{path:(e=r.path||r("[require-path]").attr("require-path")||e(r("script:last").attr("src"))||e(window.location.href),e=/^(\/|\.)/.test(e)?r.uri(window.location.href).toPath(e).toString():e),timeout:1e4,retry:3,verbose:"development"==r.environment},setup:function(e){r.extend(o.defaultOptions,e)},batches:{},status:function(i){return r.each(o.batches,function(e,t){var n={pending:0,resolved:0,rejected:0,ready:0,total:0},o=[];r.each(t.tasks,function(e,t){state=t.module&&"ready"==t.module.status?"ready":t.state(),n[state]++,n.total++,o.push({state:state,content:"["+state+"] "+t.name})});var a=t.id+": "+t.state()+" ["+n.resolved+"/"+n.total+"]";i&&n[i]<1||(r.IE?(console.log('$.require.batches["'+t.id+'"]'),r.each(o,function(e,t){console.log(t.content)}),console.log("")):(console.groupCollapsed(a),console.log('$.require.batches["'+t.id+'"]',t),r.each(o,function(e,t){var n=t.state,o=t.content;if(!i||n==i)switch(n){case"pending":console.warn(o);break;case"rejected":console.error(o);break;default:console.info(o)}}),console.groupEnd(a)))}),"$.require.status(pending|resolved|rejected|ready);"},loaders:{},addLoader:function(e,t){o[e]=t,n.prototype[e]=function(){return this.autoFinalize(),t.apply(this,arguments),this},o.loaders[e]=o[e]=t},removeLoader:function(e){delete n.prototype[e],delete o[e]}});var a=0,n=function(e){var t=r.Callbacks("once memory"),n=!1;return r.extend(this,{id:++a,tasks:[],options:r.extend({},o.defaultOptions,e),autoFinalizeDuration:300,finalized:!1,required:function(e){return!0===e&&(n=t.fire()),r.isFunction(e)&&t.add(e),n}})};return r.extend(n.prototype,{addTask:function(e){r.isDeferred(e)&&(this.finalized||(this.tasks.push(e),e.batch=this))},autoFinalize:function(){var e=this,t=e.autoFinalizeDuration;!1!==t&&(clearTimeout(e.autoFinalizeTimer),e.autoFinalizeTimer=setTimeout(function(){e.finalize()},t))},finalize:function(){var e,t,n,o,a=this;a.finalized||(a.finalized=!0,e=a.manager=r.when.apply(null,a.tasks),t=e.promise(),n=r.Callbacks(),r.extend(a,t,{progress:n.add,notify:n.fire,done:function(){return a.required(!0),a.done=t.done,a.done.apply(a,arguments)}}),o=a.options.verbose,e.progress(function(e,t){o&&"rejected"==e&&console.warn("Require: Task "+t.name+" failed to load.",t)}).fail(function(){o&&console.warn("Require: Batch "+a.id+" failed.",a)}),setTimeout(function(){r.each(a.tasks,function(e,t){t.then(function(){a.notify("resolved",t)},function(){a.notify("rejected",t)},function(){a.notify("progress",t)})})},1))},expand:function(e,t){var e=r.makeArray(e),n=t||{},o=[],o=r.isPlainObject(e[0])?(n=r.extend(e[0],t),e.slice(1)):e;return{options:n,names:o}}}),r.each(["done","fail","progress","always","then"],function(e,t){n.prototype[t]=function(){return this.finalize(),this[t].apply(this,arguments)}}),o}(),r.require.addLoader("script",function(){var e=r.uri(r.indexUrl).host();e!==r.uri(document.location.href).host()&&e.match("xn--")&&(r.support.cors=!0);function i(){var n,o=this,e=r.makeArray(arguments),e=r.isPlainObject(e[0])?(a=e[0],e.slice(1)):e,a=r.extend({},i.defaultOptions,o.options,a,{batch:o});r.each(e,function(e,t){t=new i.task(t,a,n);o.addTask(t),a.serial&&void 0!==n?n.always(t.start):t.start(),n=t})}!0===document.createElement("script").async||"MozAppearance"in document.documentElement.style||window.opera;return r.extend(i,{defaultOptions:{path:"",extension:"compressed"==r.mode?"min.js":"js",serial:!1,async:!1,xhr:!1},setup:function(){r.extend(i.defaultOptions,options)},scripts:{},task:function(e,t,n){var o=r.extend(this,r.Deferred());o.name=e,o.options=t,o.taskBefore=n,r.isArray(e)&&(o.name=e[0]+"@"+e[1],o.moduleName=e[0],e[2]||(o.defineModule=!0,r.module.registry[o.moduleName]&&console.warn("$.require.script: "+o.moduleName+" exists! Using existing module instead."),o.options.xhr=!0),e=e[1],o.module=r.module(o.moduleName)),r.isUrl(e)?o.url=e:/^(\/|\.)/.test(e)?o.url=r.uri(o.options.path).toPath(e).toString():(o.url=r.uri(o.options.path).toPath("./"+e+"."+o.options.extension).toString(),o.module=r.module(e))}}),r.extend(i.task.prototype,{start:function(){var e=this.module;e&&"pending"!==e.status?this.waitForModule():this.load()},waitForModule:function(){var e=this,t=e.module;t.then(e.resolve,e.reject,e.notify),e.batch.required(function(){t.done(e.resolve)})},load:function(){var e,n=this,o=n.taskBefore;n.script=i.scripts[n.url]||(e=n.options.xhr?r.ajax({url:n.url,dataType:"text"}):r.script({url:n.url,type:"text/javascript",async:n.options.async,timeout:n.batch.options.timeout,retry:n.batch.options.retry,verbose:n.batch.options.verbose}),i.scripts[n.url]=e),n.script.done(function(e){function t(){n.module?n.waitForModule():n.resolve()}n.options.xhr&&(n.defineModule&&(n.module=r.module(n.moduleName,function(){r.globalEval(e),this.resolveWith(e)})),!n.options.async||o)?o.done(function(){r.globalEval(e),t()}):t()}).fail(function(){n.reject()})}}),i}()),r.require.addLoader("template",(r.extend(a,{defaultOptions:{path:"",extension:"htm"},setup:function(){r.extend(a.defaultOptions,options)},task:function(e,t){var n=r.extend(this,r.Deferred());n.name=e,n.options=t,r.isArray(e)&&(n.name=e[0],e=e[1]),r.isUrl(e)?n.url=e:/^(\/|\.)/.test(e)?n.url=r.uri(n.options.path).toPath(e).toString():n.url=r.uri(n.options.path).toPath("./"+e+"."+n.options.extension).toString()},loaders:{},loader:function(t){return r.isArray(t)?r.map(t,function(e){return a.loader(e)}):r.isPlainObject(t)?r.map(t,function(e,t){return a.loader(t).resolve(e)}):a.loaders[t]||(a.loaders[t]=r.Deferred().done(function(e){r.template(t,e)}))}}),r.extend(a.task.prototype,{start:function(){var e=a.loaders[this.name];return e||((e=a.loader(this.name)).xhr=r.Ajax({url:this.url,dataType:"text"}).then(e.resolve,e.reject).then(this.resolve,this.reject)),this.loader=e,this}}),a)),r.require.addLoader("language",(r.extend(n,{defaultOptions:{path:""},setup:function(){r.extend(n.defaultOptions,options)},loaders:{},task:function(e,t){var n=r.extend(this,r.Deferred());n.name=e.join(","),n.options=t,n.url=t.path,n.names=e},loader:function(t){return r.isArray(t)?r.map(t,function(e){return n.loader(e)}):r.isPlainObject(t)?r.map(t,function(e,t){return n.loader(t).resolve(e)}):n.loaders[t]||(n.loaders[t]=r.Deferred().done(function(e){r.language.add(t,e)}))}}),r.extend(n.task.prototype,{start:function(){var t=this,e=r.map(t.names,function(e){var t=n.loader(e);return t.push(t),/resolved|rejected/.test(t.state())?null:e});return t.fail(function(){r.each(e,function(e,t){n.loader(t).reject()})}),r.when.apply(null,[]).then(t.resolve,t.reject),e.length<1||(t.xhr=r.Ajax({url:t.url,type:"POST",data:{keys:e}}).done(function(e){r.isPlainObject(e)?n.loader(e):t.reject()}).fail(function(){t.reject()})),t}}),n)),r.require.addLoader("library",function(){var e=r.makeArray(arguments),t={},e=r.isPlainObject(e[0])?(t=e[0],e.slice(1)):e;return r.extend(t,{path:r.scriptPath}),this.script.apply(this,[t].concat(e))}),r.require.addLoader("image",(r.extend(i,{defaultOptions:{path:""},setup:function(){r.extend(i.defaultOptions,options)},images:{},task:function(e,t){var n=r.extend(this,r.Deferred());n.name=e,n.options=t,r.isUrl(e)?n.url=e:/^(\/|\.)/.test(e)?n.url=r.uri(n.options.path).toPath(e).toString():n.url=r.uri(n.options.path).toPath("./"+e).toString(),n.options.url=n.url}}),r.extend(i.task.prototype,{start:function(){var e=this;e.image=r(new Image).load(function(){e.resolve()}).error(function(){e.reject()}).attr("src",e.options.url)}}),i))}),FD50.plugin("iframe-transport",function(d){d.ajaxPrefilter(function(e,t,n){if(e.iframe)return"iframe"}),d.ajaxTransport("iframe",function(e,t,n){function r(){l&&c.replaceWith(function(e){return i.get(e)}),o.remove(),a.attr("src","javascript:false;").remove()}var o=null,a=null,s="iframe-"+d.now(),i=d(e.files).filter(":file:enabled"),l=0<i.length,c=null;return e.dataTypes.shift(),o=d("<form enctype='multipart/form-data' method='post'></form>").hide().attr({action:e.url,target:s}),"string"==typeof e.data&&0<e.data.length&&d.error("data must not be serialized"),d.each(e.data||{},function(n,e){d.isPlainObject(e)&&(n=e.name,e=e.value),d.isArray(e)||(e=[e]),d.each(e,function(e,t){d("<input type='hidden' />").attr({name:n,value:t}).appendTo(o)})}),d("<input type='hidden' value='IFrame' name='X-Requested-With' />").appendTo(o),l&&(c=i.after(function(e){return d(this).clone().prop("disabled",!0)}).next(),i.appendTo(o)),{send:function(e,i){(a=d("<iframe src='javascript:false;' name='"+s+"' id='"+s+"' style='display:none'></iframe>")).bind("load",function(){a.unbind("load").bind("load",function(){var e=this.contentWindow?this.contentWindow.document:this.contentDocument||this.document,t=e.documentElement||e.body,n=t.getElementsByTagName("textarea")[0],o=n?n.getAttribute("data-type"):null,a=n?n.getAttribute("data-status"):200,e=n?n.getAttribute("data-statusText"):"OK",t={html:t.innerHTML,text:o?n.value:t?t.textContent||t.innerText:null};r(),i(a,e,t,o?"Content-Type: "+o:null)}),o[0].submit()}),d("body").append(o,a)},abort:function(){null!==a&&(a.unbind("load").attr("src","javascript:false;"),r())}}})}),FD50.plugin("server",function($){var self=$.server=function(o){var a=$.Deferred(),e=$.extend(!0,{},self.defaultOptions,o,{success:function(){}}),e=a.xhr=$.Ajax(e).done(function(e){if("string"==typeof e)try{e=$.parseJSON(e)}catch(e){a.rejectWith(a,["Unable to parse Ajax commands.","error"])}var n;$.isArray(e)?(n=function(e){var t=e.type,t=self.parsers[t]||o[t];if($.isFunction(t))return t.apply(a,e.data)},e=$.map(e,function(e){return"notify"!=e.type?e:void n(e)}),$.each(e,function(e,t){n(t)})):a.rejectWith(a,["Invalid ajax commands.","error"]),"pending"===a.state()&&a.resolveWith(a)}).fail(function(e,t,n){a.rejectWith(a,[n,t])});return a.abort=e.abort,a};self.defaultOptions={type:"POST",data:{tmpl:"component",format:"ajax",no_html:1},cache:!1,contentType:"application/x-www-form-urlencoded",dataType:"json"},self.parsers={script:function(){var data=$.makeArray(arguments);if("string"!=typeof data[0]){var chain=window,chainBroken=!1;$.each(data,function(e,t){"Foundry"===t.property&&(t.property=$.globalNamespace),"Foundry"===t.method&&(t.method=$.globalNamespace);try{switch(t.type){case"get":chain=chain[t.property];break;case"set":chain[t.property]=t.value,chainBroken=!0;break;case"call":chain=chain[t.method].apply(chain,t.args)}}catch(e){chainBroken=!0}})}else try{eval(data[0])}catch(err){}},resolve:function(){this.resolveWith(this,arguments)},reject:function(){this.rejectWith(this,arguments)},notify:function(){this.notifyWith(this,arguments)},redirect:function(e){window.location=e}}}),FD50.plugin("component",function(r){var o=!1,s=r.Component=function(e,t){return arguments.length<1?s.registry:arguments.length<2?s.registry[e]:s.register(e,t)};s.registry={},s.proxy=function(e,t,n){e[t]=n,r.isFunction(n)&&(e[t]=r.proxy(n,e))},s.register=function(e,t){var n;r.isFunction(e)&&(e=(n=e).className,t=n.options);var o=s.registry[e]=window[e]=function(e){return r.isFunction(e)?e(r):component};if(r.each(s.prototype,function(e,t){s.proxy(o,e,t)}),o.$=r,o.options=t,o.className=e,o.identifier="easyblog",o.componentName="com_easyblog",o.prefix=o.identifier+"/",o.version=t.version,o.safeVersion=o.version.replace(/\./g,""),o.scriptVersion=t.scriptVersion,o.environment=t.environment||r.environment,o.mode=t.mode||r.mode,o.debug="development"===o.environment,o.console=s.console(o),o.language=t.language||r.locale.lang||"en",o.ajaxUrl=t.ajaxUrl||r.basePath+"/?option="+o.componentName,o.scriptPath=t.scriptPath||r.rootPath+"/media/"+o.componentName+"/scripts/",o.viewPath=t.viewPath||o.ajaxUrl+"&tmpl=component&no_html=1&controller=themes&task=getAjaxTemplate",o.scriptVersioning=t.scriptVersioning||!1,o.tasks=[],FD50.component(e,o),n)if(o.debug)n.queue.execute();else{for(var a,i=FD50.installer(e);a=i.shift();)o.install.apply(o,a);r.when(o.install("definitions"),o.install("scripts")).done(function(){n.queue.execute()})}},s.extend=function(n,o){s.prototype[n]=o,r.each(s.registry,function(e,t){s.proxy(t,n,o)})},r.template("component/console",'<div id="[%== component.identifier %]-console" class="foundry-console" style="display: none; z-index: 999999;"><div class="console-header"><div class="console-title">[%= component.className %] [%= component.version %]</div><div class="console-remove-button">x</div></div><div class="console-log-item-group"></div><style type="text/css">.foundry-console{position:fixed;width:50%;height:50%;bottom:0;left:0;background:white;box-shadow: 0 0 5px 0;margin-left: 25px;}.console-log-item-group{width: 100%;height: 100%;overflow-y:scroll;}.console-header{position: absolute;background:red;color:white;font-weight:bold;top:-24px;left: 0;line-height:24px;width:100%}.console-remove-button{text-align:center;cursor: pointer;display:block;width: 24px;float:right}.console-remove-button:hover{color: yellow}.console-title{padding: 0 5px;float:left}.console-log-item{padding: 5px}.console-log-item + .console-log-item{border-top: 1px solid #ccc}</style></div>'),s.console=function(e){return a=e,n.selector="#"+a.identifier+"-console",n.init=function(){return(i=r(n.selector)).length<1&&(i=r(r.View("component/console",{component:a})).appendTo("body")).find(".console-remove-button").click(function(){i.hide()}),n.element=i,arguments.callee},n.methods={log:function(e,t,n){t=t||"info";var o=i.find(".console-log-item-group"),e=r(document.createElement("div")).addClass("console-log-item type-"+t).attr("data-code",n).html(e);o.append(e),o[0].scrollTop=o[0].scrollHeight,a.debug&&i.show()},toggle:function(){i.toggle()},reset:function(){i.find(".console-log-item-group").empty()}},r.each(n.methods,function(e,t){n[e]=function(){return n.init(),t.apply(n,arguments)}}),n;function n(e){return arguments.length<1?n.toggle():n[e]&&n[e].apply(n,arguments)}var a,i};var t=r(document),e=s.prototype;r.extend(e,{run:function(e){return r.isFunction(e)?e(r):this},ready:(t.ready(function(){e.ready=e.run}),function(e){r.isFunction(e)&&t.ready(function(){e(r)})}),install:function(e,t){var n=this,o=n.tasks[e]||(n.tasks[e]=r.Deferred());if(!t)return o;function a(){return t(r,n),o.resolve()}if("definitions"==e)return a();r.when(n.install("definitions")).done(a)},token:function(){return window.ezb.csrfToken||Joomla.getOptions("csrf.token",window.ezb.token)},template:function(e){var t=this;return null==e?r.grep(r.template(),function(e){return 0==e.indexOf(t.prefix)}):(arguments[0]=t.prefix+e,r.template.apply(null,arguments))},require:function(e){var a=this,e=e||{},n=r.require(e),i={};return r.each(["library","script","language","template","done"],function(e,t){i[t]=n[t]}),n.library=function(){return i.script.apply(this,arguments),n},n.script=function(){var o=this.expand(arguments,{path:a.scriptPath}),e=r.map(o.names,function(e){if(r.isArray(e)||r.isUrl(e)||/^(\/|\.)/.test(e))return e;var t=o.options.extension||"production"==a.options.environment?"min.js":"js",n=a.scriptVersioning?"?"+a.scriptVersion+"=1":"";return[[a.prefix+e,r.uri(o.options.path).toPath("./"+e+"."+t+n).toString(),!0]]});return i.script.apply(n,[o.options].concat(e)),n},n.template=function(){var e=this.expand(arguments,{path:a.scriptPath});return i.template.apply(n,[e.options].concat(r.map(e.names,function(e){return[[a.prefix+e,e]]}))),n},n.done=function(t){return i.done.call(n,function(){void 0===window.ezb.csrfToken?!1===o?o=EasyBlog.ajax("site/controllers/base/csrf").done(function(e){window.ezb.csrfToken=e,a.ready(t)}):o.done(function(){a.ready(t)}):a.ready(t)})},n},module:function(e,t){if(!r.isArray(e)){e=this.prefix+e;return t?r.module.apply(null,[e,function(){t.call(this,r)}]):r.module(e)}}}),r.Component.extend("ajax",function(e,t,n){var o=this,a=new Date,i={url:o.ajaxUrl+"&_ts="+a.getTime(),data:r.extend(t,{option:o.componentName,namespace:e})};if((i=r.extend(!0,i,o.options.ajax)).data[o.token()]=1,i.data.hasOwnProperty("args")&&(i.data.args=r.toJSON(i.data.args)),r.isPlainObject(n)){if(n.type){switch(n.type){case"jsonp":n.dataType="jsonp",n.crossDomain=!0,i.data.transport="jsonp";break;case"iframe":n.iframe=!0,n.processData=!1,n.files=i.data.files,delete i.data.files,i.data.transport="iframe"}delete n.type}r.extend(i,n)}r.isFunction(n)&&(i.success=n);e=r.server(i);return e.progress(function(e,t,n){o.debug&&"debug"==t&&o.console.log(e,t,n)}),e}),r.Component.extend("Controller",function(){var e,t=r.makeArray(arguments),n=t[0];return 1==t.length?r.String.getObject(n):(t=2<t.length?(e=t[1],t[2]):(e={},t[1]),r.extend(e,{root:this.className+".Controller",component:this}),r.Controller.apply(this,[n,e,t]))}),r.Component.extend("View",function(e){return arguments.length<1?this.template():(arguments[0]=this.prefix+e,r.View.apply(this,arguments))}),FD50.module.execute(),r.each(FD50.component(),function(e,t){t.registered||r.Component.register(t)})}),FD50.plugin("static",function($){$.module(["autosize.input","dialog","image"]),FD50.module("autosize.input",function(a){function e(){function o(e,t){var n=this;n.input=a(e),n.options=a.extend(o.defaultOptions,t),n.mirror=a('<span class="autosize-input" style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),a.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e,t){n.mirror[0].style[t]=n.input.css(t)}),a("body").append(n.mirror),n.input.bind("keydown keyup input",function(e){n.update()}),n.update()}o.defaultOptions={space:30},o.validTypes=["text","password","search","url","tel","email"],o.prototype.update=function(){var e=this.input,t=this.mirror,n=(n=e.val())||e.attr("placeholder");n!==t.text()&&(t.text(n),t=t.width()+this.options.space,e.width(t))},a.fn.autosizeInput=function(t){return this.each(function(){var e;"INPUT"==this.tagName&&-1<a.inArray(this.type,o.validTypes)&&((e=a(this)).data("autosizeInputInstance")||e.data("autosizeInputInstance",new o(this,t)))})},a(function(){a("input[data-autosize-input]").autosizeInput()})}e(),this.resolveWith(e)}),function(){var moduleFactory=function($){var module=this,exports=function(){var dialogHtml='<div id="eb" class="eb-dialog has-footer type-html active"><div class="eb-dialog-modal"><div class="eb-dialog-header"><div class="eb-dialog-header__grid"><div class="eb-dialog-back-button t-hidden"><i class="fdi fa fa-arrow-left"></i></div><div class="eb-dialog-header__cell"><span class="eb-dialog-title"></span></div><div class="eb-dialog-close-button"><span aria-hidden="true"><i class="fdi fa fa-times"></i></span></div></div></div><div class="eb-dialog-body"><div class="eb-dialog-container"><div class="eb-dialog-content"></div><div class="o-loader"></div><div class="o-empty"><div class="o-empty__content"><i class="o-empty__icon fa fa-exclamation-triangle"></i><div class="o-empty__text"><span class="eb-dialog-error-message"></span></div></div></div></div></div><div class="eb-dialog-footer"><div><div class="eb-dialog-footer-content"></div></div></div></div></div>',dialog_=".eb-dialog",dialogModal_=".eb-dialog-modal",dialogContent_=".eb-dialog-content",dialogHeader_=".eb-dialog-header",dialogFooter_=".eb-dialog-footer",dialogFooterContent_=".eb-dialog-footer-content",dialogCloseButton_=".eb-dialog-close-button",dialogBackButton_=".eb-dialog-back-button",dialogTitle_=".eb-dialog-title",dialogErrorMessage_=".eb-dialog-error-message",divider="eb-dialog-header--divider",isFailed="is-failed",isLoading="is-loading",rxBraces=/\{|\}/gi,self=EasyBlog.dialog=function(e){if(void 0===e)return self;$.isString(e)&&(e={content:e});var t=self.open;return(t=window.parentEasyBlogDialog?window.parentEasyBlogDialog.open:t).apply(self,[e]),self};$.extend(self,{defaultOptions:{title:"",content:"",buttons:"",buttonAlignment:"default",classname:"",width:"auto",height:"auto",back:!1,escapeKey:!0},open:function(t){var n=$(dialog_);n.length<1&&(dialogHtml=$(dialogHtml),$("body").addClass("has-eb-dialog"),window.ezb.mobile&&dialogHtml.addClass("is-mobile"),window.ezb.ios&&dialogHtml.addClass("is-iphone"),n=dialogHtml.appendTo("body"));t=$.extend({},self.defaultOptions,t);$(dialogTitle_).html(t.title);var e=$(dialogHeader_);e.removeClass(divider),t.title&&e.addClass(divider);var o=$(dialogFooterContent_);o.html(t.buttons),n.toggleClass("has-footer",!!t.buttons),o.toggleClass("eb-dialog-footer-content--space-evenly","center"==t.buttonAlignment),$(dialogBackButton_).addClass("t-hidden"),t.back&&$(dialogBackButton_).removeClass("t-hidden"),self.setBindings(t);var a=$(dialogContent_).empty(),i=t.content,r=self.getContentType(i);n.switchClass("si-theme--"+window.ezb.appearance),n.switchClass("type-"+r);var s=$(dialogModal_),l=t.width,c=t.height;switch($.isNumeric(c)&&(o=$(dialogFooter_),c+=e.height()+o.height()),s.css({width:l,height:c}),n.addClassAfter("active"),r){case"html":a.html(i),n.trigger("init");break;case"iframe":var d=$("<iframe>"),u=$("<div />").html(i).text();d.appendTo(a).one("load",function(){try{d[0].contentWindow.parentEasyBlogDialog=self}catch(e){}}).attr("src",u);break;case"deferred":return n.switchClass(isLoading),void i.done(function(e){$.isPlainObject(e)?self.reopen($.extend(!0,t,e)):$.isString(e)?(t.content=e,self.reopen(t)):n.switchClass(isFailed)}).fail(function(e){n.switchClass(isFailed);var t=$(dialogErrorMessage_);$.isString(e)&&t.html(e),$.isPlainObject(e)&&e.message&&t.html(e.message)}).always(function(){n.removeClass(isLoading)});case"dialog":u=self.parseXMLOptions(i);return void self.open($.extend(!0,t,u))}},reopen:function(e){self.close(),self.open(e)},close:function(){$("body").removeClass("has-eb-dialog"),self.unsetBindings(),$(dialog_).remove()},getContentType:function(e){return/<dialog>(.*?)/.test(e)?"dialog":$.isUrl(e)?"iframe":$.isDeferred(e)?"deferred":"html"},parseXMLOptions:function(xml){var xmlOptions=$.buildHTML(xml),newOptions={};return $.each(xmlOptions.children(),function(i,node){var node=$(node),key=$.String.camelize(this.nodeName.toLowerCase()),val=node.html(),type=node.attr("type");switch(type){case"json":try{val=$.parseJSON(val)}catch(e){}break;case"javascript":try{val=eval("(function($){ return "+$.trim(val)+" })("+$.globalNamespace+")")}catch(e){}break;case"text":val=node.text()}$.isNumeric(val)&&(val=parseFloat(val)),newOptions.buttonAlignment="default","BUTTONS"==this.nodeName&&(newOptions.buttonAlignment=node.attr("alignment")||"default"),newOptions[key]=val}),newOptions},bindings:{},setBindings:function(e){self.unsetBindings();var a,i,t=e.selectors,n=e.bindings;t&&n&&(a={parent:self},i=$(dialog_),$.each(t,function(e,t){e=e.replace(rxBraces,"");(a[e]=function(){return i.find(t)}).selector=t}),$.each(n,function(e,t){var n=e.split(" "),o=n[0].replace(rxBraces,""),e=n[1]+".eb.dialog",n=a[o];"init"==o&&i.on(o,function(){var e=[this].concat(arguments);t.apply(a,e)}),n&&(n=n.selector,i.on(e,n,function(){t.apply(a,[this].concat(arguments))}),self.bindings[e]=t)})),e.escapeKey&&$(document).on("keydown.eb.dialog",function(e){27==e.keyCode&&self.close()})},unsetBindings:function(){var n=$(dialog_);$.each(self.bindings,function(e,t){n.off(e)}),$(document).off("keydown.eb.dialog")}}),$(document).on("click",dialogCloseButton_,function(){self.close()}).on("click",dialog_,function(e){var t=$(dialog_);e.target==t[0]&&self.close()})};exports(),module.resolveWith(exports)};FD50.module("dialog",moduleFactory)}(),FD50.module("image",function(i){function e(){i.fn.image=function(e){e=i.Image[e];return e&&e.apply(this[0],i.makeArray(arguments).slice(1))},i.Image={get:function(e){var n="IMG"===this.nodeName,o=i(n?this:new Image),a=i.Deferred();return o.on("load",function(){var e;n||o.appendTo("body");var t={width:t=o.width(),height:e=o.height(),aspectRatio:t=t/e,orientation:e=1==t?"square":t<1?"tall":"wide"};o.css({position:"absolute",left:"-99999px"}).data(t).addClass("orientation-"+e).removeAttr("style"),n||o.detach(),a.resolve(o,t)}).on("error",function(){a.reject()}).attr("src",e),a},aspectRatio:function(e,t){return i.isPlainObject(e)&&(t=(e=e.width).height),e/t},orientation:function(e,t){return i.isPlainObject(e)&&(t=(e=e.width).height),e===t?"square":t<e?"wide":"tall"},resizeProportionate:function(e,t,n,o,a){var i=e,r=t,s=n/e,i=e*s,r=t*s;return("outer"==a?r<o:o<r)&&(i=e*(s=o/t),r=t*s),{top:(o-r)/2,left:(n-i)/2,width:i,height:r}},resizeWithin:function(e,t,n,o){return i.Image.resizeProportionate(e,t,n,o,"inner")},resizeToFill:function(e,t,n,o){return i.Image.resizeProportionate(e,t,n,o,"outer")}}}e(),this.resolveWith(e)})}),FD50.installer("EasyBlog","definitions",function(e){e.module(["easyblog/shared/foundry","easyblog/shared/gallery","easyblog/composer/blocks","easyblog/composer/blocks/dimensions","easyblog/composer/blocks/droppable","easyblog/composer/blocks/font","easyblog/composer/blocks/guide","easyblog/composer/blocks/handlers/accordion","easyblog/composer/blocks/handlers/alerts","easyblog/composer/blocks/handlers/apple","easyblog/composer/blocks/handlers/audio","easyblog/composer/blocks/handlers/behance","easyblog/composer/blocks/handlers/buttons","easyblog/composer/blocks/handlers/code","easyblog/composer/blocks/handlers/codepen","easyblog/composer/blocks/handlers/columns","easyblog/composer/blocks/handlers/compare","easyblog/composer/blocks/handlers/comparison","easyblog/composer/blocks/handlers/dailymotion","easyblog/composer/blocks/handlers/easysocial","easyblog/composer/blocks/handlers/facebook","easyblog/composer/blocks/handlers/file","easyblog/composer/blocks/handlers/gallery","easyblog/composer/blocks/handlers/giphy","easyblog/composer/blocks/handlers/gist","easyblog/composer/blocks/handlers/heading","easyblog/composer/blocks/handlers/html","easyblog/composer/blocks/handlers/image","easyblog/composer/blocks/handlers/instagram","easyblog/composer/blocks/handlers/links","easyblog/composer/blocks/handlers/lottie","easyblog/composer/blocks/handlers/metacafe","easyblog/composer/blocks/handlers/module","easyblog/composer/blocks/handlers/notes","easyblog/composer/blocks/handlers/pagebreak","easyblog/composer/blocks/handlers/pdf","easyblog/composer/blocks/handlers/pinterest","easyblog/composer/blocks/handlers/polls","easyblog/composer/blocks/handlers/post","easyblog/composer/blocks/handlers/quotes","easyblog/composer/blocks/handlers/readmore","easyblog/composer/blocks/handlers/rule","easyblog/composer/blocks/handlers/section","easyblog/composer/blocks/handlers/sendy","easyblog/composer/blocks/handlers/slideshare","easyblog/composer/blocks/handlers/soundcloud","easyblog/composer/blocks/handlers/spotify","easyblog/composer/blocks/handlers/table","easyblog/composer/blocks/handlers/tabs","easyblog/composer/blocks/handlers/ted","easyblog/composer/blocks/handlers/text","easyblog/composer/blocks/handlers/thumbnails","easyblog/composer/blocks/handlers/tiktok","easyblog/composer/blocks/handlers/tweet","easyblog/composer/blocks/handlers/twitch","easyblog/composer/blocks/handlers/video","easyblog/composer/blocks/handlers/vimeo","easyblog/composer/blocks/handlers/youtube","easyblog/composer/blocks/mobile","easyblog/composer/blocks/nestable","easyblog/composer/blocks/panel","easyblog/composer/blocks/removal","easyblog/composer/blocks/resizable","easyblog/composer/blocks/scrollable","easyblog/composer/blocks/search","easyblog/composer/blocks/text","easyblog/composer/blocks/toolbar","easyblog/composer/blocks/tree","easyblog/composer/category","easyblog/composer/composer","easyblog/composer/document","easyblog/composer/document/cover","easyblog/composer/document/maps","easyblog/composer/document/osm","easyblog/composer/document/overlay","easyblog/composer/document/permalink","easyblog/composer/document/toolbar","easyblog/composer/googleimport","easyblog/composer/layout/elements","easyblog/composer/media","easyblog/composer/media/editor","easyblog/composer/media/uploader","easyblog/composer/mobile","easyblog/composer/panels","easyblog/composer/panels/association","easyblog/composer/panels/authorship","easyblog/composer/panels/autopost","easyblog/composer/panels/category","easyblog/composer/panels/post","easyblog/composer/panels/seo","easyblog/composer/perfectscrollbar","easyblog/composer/posts","easyblog/composer/revisions","easyblog/composer/shortcuts","easyblog/composer/tags","easyblog/composer/templates","easyblog/composer/vendors/colorpicker","easyblog/composer/vendors/cropper","easyblog/composer/vendors/dragselect","easyblog/composer/vendors/expanding","easyblog/composer/vendors/nearest","easyblog/composer/vendors/nouislider","easyblog/composer/vendors/selectionchange"])}),FD50.installer("EasyBlog","scripts",function(e){EasyBlog.module("shared/foundry",function(a){a(document).on("change.form.toggler","[data-eb-toggler-checkbox]",function(){var e=a(this),t=e.is(":checked"),e=e.parents("[data-eb-toggler]");0<e.length&&e.find("input[type=hidden]").val(t?1:0).trigger("change")}),a(document).on("change.form.toggler.value","[data-eb-toggler-checkbox] ~ input[type=hidden]",function(){var e=a(this),t=1==e.val(),n=e.siblings("[data-eb-toggler-checkbox]"),e=n.is(":checked");!t||e?!t&&e&&n.prop("checked",!1):n.prop("checked",!0)}),jQuery(document).on("fd.easyblog.toggler.disabled",function(e,t,n){EasyBlog.dialog({width:400,height:140,title:t,content:n})}),a(document).on("click","[data-eb-toggler]",function(e){var t=a(this),n=t.data("disabled"),o=t.data("disabledDesc");n&&0<o.length&&(t=t.data("disabledTitle"),fd.trigger("easyblog","toggler.disabled",[t,o]))}),jQuery(document).on("fd.easyblog.article.browse",function(e,t,n,o){window.insertArticle=function(e,t){n.val(t),o.val(e),EasyBlog.dialog().close()},EasyBlog.dialog({content:EasyBlog.ajax("admin/views/articles/browse")})}),jQuery(document).on("fd.easyblog.user.browse",function(e,t,n,o){window.insertUser=function(e,t){n.val(t),o.val(e),EasyBlog.dialog().close()},EasyBlog.dialog({content:EasyBlog.ajax("admin/views/bloggers/browse")})}),jQuery(document).on("fd.easyblog.textcopy.copied",function(e,t){(t=a(t)).attr("data-original-title",t.data("copied")).tooltip("show")}),jQuery(document).on("fd.easyblog.textcopy.mouseout",function(e,t){a(t).attr("data-original-title",a(t).data("copy")).tooltip("show")}),jQuery(document).on("fd.easyblog.ratings.click",function(e,t,n){const o=t.closest("[data-rating-form]");var a=o.data("type"),t=o.data("id");EasyBlog.ajax("site/views/ratings/vote",{value:n,type:a,id:t}).done(function(e,t){o.addClass("voted"),o.find("[data-rating-text]").html(t),o.find("[data-rating-total]").text(e)})}),this.resolve()}),EasyBlog.module("shared/gallery",function(e){var t=this;EasyBlog.require().script("site/vendors/swiper").done(function(s){var l=".eb-gallery-viewport",n=EasyBlog.ImageGallery={setLayout:function(e){e.find(".eb-gallery-item").each(function(e){var t=s(this),n="rtl"==window.ezb.direction?"right":"left";t.css(n,100*e+"%")}),e.data("autoplay")&&this.autoplay.start(e)},autoplay:{start:function(e){var t=1e3*e.data("interval");n.autoplay.stop(e);t=setTimeout(function(){n.next(e),n.autoplay.start(e)},t);e.data("timer",t)},stop:function(e){e=e.data("timer");clearTimeout(e)}},checkAutoplay:function(e){var t=1e3*e.data("interval");this.stopMonitoringAutoplay(e),setTimeout(function(){n.next(e),n.startMonitoringAutoplay(e)},t)},go:function(e,t){},next:function(e){var t=n.getActiveIndex(e);n.go(e,t+1)},prev:function(e){var t=n.getActiveIndex(e);n.go(e,t-1)},setActiveIndex:function(e,t){n.getMenuItems(e).removeClass("active").eq(t).addClass("active")},getActiveIndex:function(e){e=n.getMenuItems(e).filter(".active").index();return e=e<0?0:e},getMenuItems:function(e){return e.find(".eb-gallery-menu-item")}};s(document).ready(function(e){s(".ebd-block[data-type=gallery]:not([data-eb-composer-block-menu]").each(function(){var e=s(this),t=e.data("uid"),n=e.closest(".ebd-block[data-type=gallery][data-uid="+t+"]"),o=e.find("[data-eb-gallery-container]"),a=e.find(".eb-gallery-menu"),i=e.find(".eb-gallery-button.eb-gallery-next-button"),r=e.find(".eb-gallery-button.eb-gallery-prev-button"),t=o.find(l).data("eb-gallery-initial-slide"),e=0;0<t&&(e=t);e=new Swiper(s(o),{pagination:{el:a,clickable:!0},navigation:{nextEl:i,prevEl:r},initialSlide:e});n.data("swiper",e)})}),t.resolve()})}),EasyBlog.module("composer/blocks",function(l){var e=this,a="is-new",i="is-editable",n="is-receiving",r="is-dropping",c="is-releasing",d="is-refocusing",u="is-highlighting",p="is-sorting",f="is-sort-item",h="is-nested",m="is-dragging-block",g="is-dropping-block",v="is-inserting-block",b="is-selected",y="is-highlighting-block";EasyBlog.require().library("ui/draggable","ui/position","image","scrollTo").script("composer/blocks/panel","composer/blocks/guide","composer/blocks/nestable","composer/blocks/droppable","composer/blocks/resizable","composer/blocks/scrollable","composer/blocks/font","composer/blocks/dimensions","composer/blocks/text","composer/blocks/removal","composer/blocks/tree","composer/blocks/search","composer/blocks/mobile","composer/blocks/toolbar").done(function(){EasyBlog.Controller("Composer.Blocks",{hostname:"blocks",pluginExtendsInstance:!0,elements:["[data-eb-composer-{blocks}]","[data-eb-composer-block-{menu|menu-group|meta}]","[data-eb-composer-{editor}]","[data-ebd-block-{viewport|content}]"],defaultOptions:l.extend({"{view}":"[data-eb-composer-blocks]","{editableContent}":EBD.editableContent,"{immediateBlockViewport}":EBD.immediateBlockViewport,"{immediateBlockContent}":EBD.immediateBlockContent,"{blockActions}":EBD.blockActions,"{sidebar}":"[data-eb-composer-blocks]","{mechswitch}":".mechswitch","{toolbarButton}":"[data-toolbar-blocks]","{blockSection}":"[data-eb-composer-block-section]","{blockSectionHeader}":"[data-eb-composer-blocks] [data-eb-composer-block-section-header]","{blockSectionContent}":"[data-eb-composer-block-section-content]","{searchInput}":"[data-eb-blocks-search]"},EBD.selectors)},function(s,e,t,o){return{init:function(){var e=["panel","guide","nestable","droppable","resizable","scrollable","font","dimensions","text","removal","tree","search","mobile","media","toolbar"];"legacy"==(o=s.composer).getDoctype()&&(e=["panel","tree","dimensions","media"]),l.each(e,function(e,t){s.addPlugin(t)});l.each(["post","image","video","file","audio","pdf","gallery"],function(e,t){s.loadBlockHandler(t)})},ps:null,browser:{highlightSearch:function(){s.searchInput().focus()},isOpen:function(){return o.manager().hasClass("is-composer-blocks-open")},isClosed:function(){return!o.browser.isOpen()},open:function(){o.manager().addClass("is-composer-blocks-open"),s.toolbarButton().addClass("is-active"),s.browser.highlightSearch()},close:function(){o.manager().removeClass("is-composer-blocks-open"),s.toolbarButton().removeClass("is-active")},toggle:function(){s.browser.isOpen()?s.browser.close():s.browser.open()}},getAllBlocks:function(){return s.root().find(EBD.block)},getFirstBlock:function(){var e=s.getAllBlocks();return l(e[0])},getCurrentBlock:function(){return s.root().find(EBD.block+".active")},getNextBlock:function(){var e=s.getCurrentBlock().next();return!(e.length<=0)&&e},getPreviousBlock:function(){var e=s.getCurrentBlock().prev();return!(e.length<=0)&&e},getParentBlock:function(e){return e.is(EBD.nestedBlock)?l(e).parents(EBD.block).eq(0):l()},getAllParentBlocks:function(e){return e.parentsUntil(EBD.root).filter(EBD.block)},getBlockTree:function(e){return s.getAllParentBlocks(e).add(s.root())},getRootBlocks:function(){return s.root().find(EBD.childBlock)},getChildBlocks:function(e){return e.is(EBD.root)?e.find(EBD.childBlock):e.find(EBD.nestedBlock+":not(.ebd-block[data-uid="+e.data("uid")+"] "+EBD.nest+" "+EBD.nest+" "+EBD.nestedBlock+")")},getAllChildBlocks:function(e){return e.find(EBD.block)},getBlocksByType:function(e){return s.root().find(EBD.block+"[data-type="+e+"]")},getBlock:function(e){return t.find(EBD.block+"[data-uid="+e+"]")},getBlockUid:function(e){return e.attr("data-uid")||s.setBlockUid(e)},getBlockTemplateId:function(e){return e.attr("data-template-id")},isBlockTemplate:function(e){return!!e.attr("data-template-id")},setBlockUid:function(e){return e.attr("data-uid")||(t=l.uid(),e.attr("data-uid",t),t);var t},updateBlockUid:function(e){e.removeAttr("data-uid"),s.setBlockUid(e)},getBlockType:function(e){return l(e).attr("data-type")},metas:{},getBlockMeta:function(n,e){if(e){e=s.meta().where("id",e).val();if(e)return JSON.parse(e)}return n instanceof l&&(n=s.getBlockType(n)),s.metas[n]||function(){var t=s.meta().where("type",n).val();if(t){try{var e=JSON.parse(t)}catch(e){console.log("exception",n,t)}return s.metas[n]=e}return null}()},getBlockViewport:function(e){return s.immediateBlockViewport.inside(e)},getBlockContent:function(e){return s.immediateBlockContent.inside(e)},getBlockActions:function(e){return s.blockActions.inside(e)},setBlockContent:function(e,t){s.immediateBlockContent.inside(e).html(t.html())},getBlockFragment:function(e){function n(e){var t=s.getBlockType(e),n=s.getBlockHandler(t),t=s.createBlockContainer(t),n=n.toHTML(e);return e.is(EBD.nested)&&e.addClass(h),t.append(n),t}e=n(e);return e.find(EBD.nestedBlock).each(function(){var e=l(this),t=n(e);e.replaceWith(t)}),e},getBlockHTML:function(e){return s.getBlockFragment(e).toHTML()},getBlockText:function(e){},getBlockNest:function(e){return e.closest(EBD.nest)},getBlockNestType:function(e){return s.getBlockNest(e).data("type")},isBlock:function(e){return e.is(EBD.block)},isNestedBlock:function(e){return e.is(EBD.nestedBlock)},isRootBlock:function(e){return!s.isNestedBlock(e)},isStandaloneBlock:function(e){return e.is(EBD.standaloneBlock)},restoreInlineBlockData:function(o){var a=o.next();a.each(function(e){var t,n=l(this);n.is("textarea[data-block]")&&(t=a.val(),t=JSON.parse(t),s.dataset[s.getBlockUid(o)]=t,n.remove())})},initBlock:function(t){var n=arguments,o=s.getBlockType(t);s.setBlockUid(t),s.restoreInlineBlockData(t),s.loadBlockHandler(o).done(function(e){if(t.hasClass(a)){s.trigger("composerBlockBeforeAdd",n);try{e.reset(t),e.reconstruct(t)}catch(e){EasyBlog.debug&&console.error("Error initializing new block of type '%s'.",o,e)}s.trigger("composerBlockAdd",n),s.release(t),t.removeClass(a).addClass(i),s.trigger("composerBlockInit",n)}else if(!t.hasClass(i)){try{e.reconstruct(t)}catch(e){EasyBlog.debug&&console.error("Error initializing existing block of type '%s'.",o,e)}t.addClass(i),s.trigger("composerBlockInit",n)}}),s.getChildBlocks(t).each(function(){var e=l(this);s.initBlock(e)})},createBlockContainer:function(e){s.getBlockMeta(e);var t=l(l("[data-eb-block-template]").clone().html());return t.attr("data-type",e),t},createBlock:function(e,t){e=s.getBlockMeta(e,t);if(e){t=l(e.block);return s.setBlockUid(t),s.trigger("composerBlockCreate",[t,e]),t}},createBlockFromMenu:function(e){var t=e.attr("data-type"),e=e.attr("data-id");return block=s.createBlock(t,e).addClass(a),block},createBlockFromMediaFile:function(e){var t=e.data("type");return s.getBlockHandler(t).constructFromMediaFile(e)},constructBlock:function(e,t){t=s.getBlockHandler(e).construct(t);return s.setBlockUid(t),s.trigger("composerBlockConstruct",[t]),t},constructNestedBlock:function(e,t){t=s.constructBlock(e,t);return t.addClass(h),t},constructIsolatedBlock:function(e,t){t=s.constructBlock(e,t);return t.addClass(h).addClass(isIsolated),t},createBlockNest:function(){return l('<div class="ebd-nest" data-type="block">')},createContentNest:function(e){var t=l('<div class="ebd-nest" data-type="content">');return(e=l.extend({editable:!0},e)).editable&&t.editable(!0),t},exportBlock:function(e,t){var n=void 0===t?s.getBlockUid(e):"",o=s.getBlockType(e),a=s.getBlockHandler(o),o={uid:n,type:o,html:"",data:{},blocks:[],nested:e.is(EBD.nestedBlock),isolated:e.is(EBD.isolatedBlock),style:e.attr("style")};EasyBlog.debug&&s.verifyBlockHandler(a,["toData","toText","toHTML"]),a.toData&&(o.data=a.toData(e)||{}),a.toText&&(o.text=a.toText(e)||""),a.toHTML&&(o.html=a.toHTML(e)||""),a.toEditableHTML?o.editableHtml=a.toEditableHTML(e)||"":(i=blocks.getBlockContent(e),o.editableHtml=i.html());var i=s.getBlockTemplateId(e);return!t&&i&&(o.data.template_id=i),s.trigger("composerBlockExport",[e,o]),o},addBlock:function(e,t){t=t||"append";s.root()[t](e),s.initBlock(e)},addBlockAfter:function(e,t){t.after(e),s.initBlock(e)},removeBlock:function(e,t){t=t||{},s.trigger("composerBlockBeforeRemove",[e,t]),e.find(EBD.nestedBlock).each(function(){var e=l(this);s.removeBlock(e,t)}),e.remove(),s.trigger("composerBlockRemove",[e,t])},scrollIntoView:function(e){o.viewport();o.viewportContent().stop(!0).scrollIntoView(e)},scrollTo:function(e,t){t=t||500;var n=o.viewport();o.viewportContent().stop(!0).scrollTo(e,t,{axis:"y",offset:{top:(n.height()-e.height())/-2,left:0}})},blockHandlers:{},loadBlockHandler:l.memoize(function(n){if(!n)return l.Deferred().reject(l.Exception("Invalid block type given."));var o=s.getBlockMeta(n);if(!o)return l.Deferred().reject(l.Exception("Block of type '"+n+"' is not installed!"));var a=l.Deferred();return EasyBlog.require().script("composer/blocks/handlers/"+n).done(function(){var e="handler/"+n,t="EasyBlog.Controller.Composer.Blocks.Handlers."+l.String.capitalize(n),t=s.addPlugin(e,t,{meta:o});s.blockHandlers[n]=t,EasyBlog.debug&&s.verifyBlockHandler(t),a.resolve(t,o)}).fail(function(){s.loadBlockHandler.reset(n),a.reject(l.Exception("Could not load block handler for "+n+"."))}),a}),getBlockHandler:function(e){return e instanceof l&&(e=s.getBlockType(e)),s.blockHandlers[e]},verifyBlockHandler:function(e,t){for(var n,t=t||["activate","deactivate","construct","reconstruct","deconstruct","refocus","reset","populate","toHTML","toData","toText"],o=[];n=t.shift();)l.isFunction(e[n])||o.push(n);0<o.length&&console.warn("Block handler of type '%s' is missing the following method: %s.",e.options.meta.type,o.join(", "))},activateBlock:function(n){var e;s.workarea().hasClass("is-removing")||(o.manager().hasClass("is-sidebar-open")||window.ezb.mobile||o.document.toolbar.toggleSidebar(),s.deactivateBlock(),s.browser.close(),s.menu().removeClass(b),e=s.getBlockType(n),s.loadBlockHandler(e).done(function(e){var t=[n,e];s.trigger("composerBlockBeforeActivate",t),s.initBlock(n),e.activate&&e.activate(n),e.refocus(n),s.trigger("composerBlockActivate",t)}).fail(function(e){s.trigger("composerBlockActivateError",[e])}))},deactivateBlock:function(e){var t;(e=e||s.getCurrentBlock()).length&&((t=s.getBlockHandler(e))&&t.deactivate&&t.deactivate(e),s.trigger("composerBlockDeactivate",[e,t]))},getBlocksBrowserState:function(){var e=s.blockSection(),o={};return e.each(function(e,t){var n=(t=l(t)).data("id");o[n]=t.hasClass("is-open")?"open":"close"}),o},updateTemplateData:function(e,t){s.updateTemplateId(e,t.id),s.updateBlockTitle(e,t.title)},updateTemplateId:function(e,t){e.attr("data-template-id",t)},getBlockTitle:function(e){return s.isBlockTemplate(e)?e.attr("data-block-title"):s.getBlockMeta(e).title},updateBlockTitle:function(e,t){e.attr("data-block-title",t),s.trigger("composerBlockUpdateTitle",[e,t])},"{blockSectionHeader} click":function(e){e.parent(s.blockSection.selector).toggleClass("is-open");e=s.getBlocksBrowserState();EasyBlog.ajax("site/views/composer/saveUserBlocksParams",{preferences:e})},"{menu} mouseover":function(e){var t,n;e.data("uiDraggable")||((t=e.clone()).find(s.meta.selector).remove(),n=l("html").attr("dir"),e.draggable({helper:function(){return t.css({width:e.outerWidth(),height:e.outerHeight()})},cursorAt:"ltr"==n?{right:165}:{left:165},appendTo:o.document.ghosts(),connectToSortable:EBD.root}))},selectBlock:function(e){s.menu().removeClass(b);var t=o.manager().hasClass(g);o.manager().hasClass(v)?s.addToNextPosition(e):(e.addClass(b),o.manager().addClass(g),s.trigger("composerBlockMenuSelected",[e]),t||o.blocks.droppable.populateDropzones())},addToNextPosition:function(e){var t=s.getCurrentBlock(),e=e;e.is(s.menu)&&(block=s.createBlockFromMenu(e)),t.after(block),s.drop(block),s.release(block),s.out(block),o.manager().removeClass(v),o.blocks.browser.close()},"{menu} touchend":function(e){},"{menu} touchstart":function(e){},"{menu} click":function(e){s.selectBlock(e)},"{menu} dragstart":function(e){s.drag(e),o.manager().addClass(m),s.view().parent().removeClass("open"),o.views.hide("blocks")},"{menu} dragstop":function(e){s.release(e),o.manager().removeClass(m)},"{menu} dblclick":function(e){},drag:function(e){s.workarea().addClass(p),e.is(s.menu)||(e.addClass(f),s.browser.close(),o.editor.selection.remove(),s.trigger("composerBlockDrag",[e]))},drop:function(e){e.is(s.menu)||(s.trigger("composerBlockBeforeDrop",[e]),e.addClass(r),s.trigger("composerBlockDrop",[e]),s.activateBlock(e))},release:function(e){s.workarea().removeClass(p),e.is(s.menu)||(e.removeClass(r).addClass(c).removeClassAfter(c+" "+f),s.trigger("composerBlockBeforeRelease",[e]),setTimeout(function(){s.trigger("composerBlockRelease",[e])},1e3))},over:function(e){e.addClass(n),e.hasClass(h)&&s.nest.of(e).addClass(n),s.block.of(e).addClass(n)},out:function(e){e.removeClass(n),e.hasClass(h)&&s.nest.of(e).removeClass(n),s.block.of(e).removeClass(n)},highlight:function(e){s.root().addClass(y),e.addClass(u)},unhighlight:function(e){s.root().removeClass(y),e.removeClass(u)},dataset:{},"{block} click":function(e,t){t.clickHandled||s.refocusing||s.workarea().hasClass("is-resizing")||(t.clickHandled=!0,e.is(s.menu)||e.hasClass("active")||s.activateBlock(e))},data:function(e,t,n){if(void 0===e)return s.dataset;var o=parseInt(e);isNaN(o)?o=s.getBlockUid(e):e=s.getBlock(o);var a=s.getBlockHandler(s.getBlockType(e)),i=blocks.getBlockMeta(e),r=s.dataset[o];return null==s.getBlockType(e)?s.dataset:(s.dataset[o]=a.normalize?a.normalize(r):l.extend({},i.data,r),0==arguments.length||1==arguments.length||2==arguments.length&&l.isString(t)?s.getData(e,t):s.setData.apply(s,arguments))},getData:function(e,t){var n=s.dataset;if(void 0===e)return n;var o=parseInt(e);isNaN(o)?o=s.getBlockUid(e):e=s.getBlock(e);o=n[o];return void 0===t?o:o[t]},duplicateChildBlocksData:function(o,e){e=s.getChildBlocks(e);e&&l.each(e,function(e,t){var t=l(t),n=s.getBlockUid(t),t=s.data(t),n=o.find("[data-uid="+n+"]");s.updateBlockUid(n);t=l.extend(!0,{},t);s.setBlockData(n,t)})},setBlockData:function(e,t){uid=s.getBlockUid(e),s.dataset[uid]=t},setData:function(e,t,n){if(void 0===e)return s.dataset;var o=parseInt(e);return isNaN(o)?o=s.getBlockUid(e):e=s.getBlock(e),l.isPlainObject(t)&&void 0===n?l.extend(s.dataset[o],t):s.dataset[o][t]=n},getMechanics:function(){return o.settings.get("blocks.mechanics")},setMechanics:function(e){o.settings.set("blocks.mechanics",e),s.trigger("composerBlockMechanicsChange",e)},"{mechswitch} click":function(e){s.mechswitch().removeClass("btn-primary"),e.addClass("btn-primary"),s.setMechanics(e.attr("data-value"))},"{block} mouseover":function(e,t){t.hovered||(t.hovered=!0,s.trigger("composerBlockHoverIn",[e]))},"{block} mouseout":function(e,t){s.trigger("composerBlockHoverOut",[e])},"{self} composerDocumentInit":function(){s.getAllBlocks().each(function(){var e=l(this);s.getBlockType(e);s.initBlock(e)})},"{self} composerDocumentBlur":function(){s.refocusing?s.refocusing=!1:s.deactivateBlock()},"{self} click":function(e,t){s.view().parent().hasClass("open")&&((t=l(t.target)).is("[data-toolbar-blocks]")||0<t.parents("[data-eb-composer-blocks]").length||s.view().parent().removeClass("open"))},"{self} keyup":function(e,t){s.view().parent().hasClass("open")&&27==t.keyCode&&s.view().parent().removeClass("open")},"{self} composerReady":function(){"ebd"===(o=EasyBlog.Composer).getDoctype()&&o.perfectscrollbar.initPs(s.view()[0].querySelector("[data-eb-composer-blocks-group-container]"))},"{self} onPerfectScrollbarAfterInit":function(e,t,n){s.ps||(s.ps=n)},"{self} onBlocksAfterSearch":function(e,t){s.composer.perfectscrollbar.updatePs(s.ps,s.view().find("[data-eb-composer-blocks-group-container]")[0])},"{editableContent} focusin":function(e,t){t.focusHandled||s.refocusing||o.document.isLegacy()||(s.refocusing=!0,t.focusHandled=!0,setTimeout(function(){s.workarea();var e=o.editor.selection.get().focusNode;if(e){e=s.block.of(e);if(e.length){if(!e.hasClass(d)){e.addClass(d);try{e.hasClass("active")?s.getBlockHandler(e).refocus(e):s.activateBlock(e)}catch(e){}e.removeClass(d),setTimeout(function(){s.refocusing=!1},100)}}else s.refocusing=!1}else s.refocusing=!1},1))}}}),e.resolve()})}),EasyBlog.module("composer/blocks/dimensions",function(e){function l(e){return e.toString().match("%")?"%":"px"}var t=this;EasyBlog.require().script("composer/vendors/nouislider").done(function(s){EasyBlog.Controller("Composer.Blocks.Dimensions",{elements:["[data-eb-block-dimensions-{field}]","[data-eb-block-dimensions-field-container] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit}]"],defaultOptions:s.extend({},EBD.selectors)},function(r,e,t,n,o,i){return{init:function(){o=r.blocks,n=o.composer,i=s()},"{self} composerBlockActivate":function(e,t,n){i=n,r.populate(n)},isResizableNestedBlock:function(e){return!!o.isNestedBlock(e)&&"content"==o.getBlockNestType(e)},allowDimensionsFieldset:function(e){return r.isResizableNestedBlock(e)&&r.getDimensionsSettings(e).enabled},getDimensionsSettings:function(e){return o.getBlockMeta(e).dimensions},getDimensionsFieldset:function(){return n.panels.fieldset.get("dimensions")},shouldRespectMinContentSize:function(e){return r.isResizableNestedBlock(e)&&r.getDimensionsSettings(e).respectMinContentSize},isInherited:function(e){return!e||/auto|inherit/.test(e)},hasInheritedSize:function(e,t){t=e[0].style[t];return r.isInherited(t)},hasInheritedWidth:function(e){return r.hasInheritedSize(e,"width")},hasInheritedHeight:function(e){return r.hasInheritedSize(e,"height")},getSize:function(e,t){var n=e[0].style[t];return r.isInherited(n)?e.css(t):n},getWidth:function(e){return r.getSize(e,"width")},getHeight:function(e){return r.getSize(e,"height")},getComputedWidth:function(e){return e.width()},getComputedHeight:function(e){return e.height()},setWidth:function(e,t){e.css("width",t)},setHeight:function(e,t){e.css("height",t)},updateWidth:function(e,t){r.setWidth(e,t),r.populateWidth(e)},updateHeight:function(e,t){r.setHeight(e,t),r.populateHeight(e)},getFluidWidth:function(e){var t=s(o.getBlockNest(e)[0]||e.parent()[0]);return Math.round(e.width()/t.width()*100)+"%"},toFluidWidth:function(e){var t;o.isRootBlock(e)||(t=r.getFluidWidth(e),r.updateWidth(e,t))},toFluidHeight:function(e){r.updateHeight(e,"")},toFixedWidth:function(e,t){r.updateWidth(e,e.width())},toFixedHeight:function(e,t){r.updateHeight(e,e.height())},toAutoWidth:function(e){r.updateWidth(e,"auto")},toAutoHeight:function(e){r.updateHeight(e,"")},setUnit:function(e,t,n){"width"===t&&("%"==(t=r.getUnit(e,t))&&"px"==n&&r.toFixedWidth(e),"px"==t&&"%"==n&&r.toFluidWidth(e))},getUnit:function(e,t){return l(r.getSize(e,t))},updateUnit:function(e,t,n){r.setUnit(e,t,n),"width"==t&&r.populateWidth(e),"height"==t&&r.populateHeight(e)},populate:function(e){var t=r.getDimensionsFieldset(),n=r.allowDimensionsFieldset(e);t.toggle(n),n&&(r.populateWidth(e),r.populateHeight(e))},populateWidth:function(e){var t=r.getWidth(e),e=!r.hasInheritedWidth(e);r.populateField("width",t,e)},populateHeight:function(e){var t=r.getHeight(e),e=!r.hasInheritedHeight(e);r.populateField("height",t,e)},populateField:function(e,t,n){var o,a=r.field().where("name",e),i=parseFloat(t),t=l(t);r.numsliderToggle.inside(a).prop("checked",n),r.numsliderInput.inside(a).data("number",i).val(i),r.numsliderCurrentUnit.inside(a).html(t),r.numsliderUnit.inside(a).where("unit",'"'+t+'"').activateClass("active"),a.data("unit",t),r.resizingFromSlider!==e&&("px"==t&&(o={start:i,step:1,range:{min:0,max:800},pips:{mode:"values",density:4,values:[0,200,400,600,800,1e3]}}),"%"==t&&(o={start:i,step:1,range:{min:0,max:100},pips:{mode:"positions",values:[0,20,40,60,80,100],density:5}}),r.numsliderWidget.inside(a).find(".noUi-pips").remove().end().noUiSlider(o,!0).noUiSlider_pips(o.pips))},handleNumsliderWidget:function(e,t){var n=r.workarea(),o=r.field.of(e),e=o.data("name"),o=o.data("unit"),o=Math.round(t)+o;r.resizingFromSlider=e,clearTimeout(r.resizingTimer),n.addClass("is-resizing"),"width"==e&&r.updateWidth(i,o),"height"==e&&r.updateHeight(i,o),r.resizingTimer=setTimeout(function(){n.removeClass("is-resizing")},15),r.resizingFromSlider=null},"{numsliderWidget} nouislide":function(e,t,n){r.handleNumsliderWidget(e,n)},"{numsliderWidget} set":function(e,t,n){r.handleNumsliderWidget(e,n)},"{numsliderInput} input":function(e){e.off("blur.numslider");var t,n=r.field.of(e),o=n.data("name"),a=s.trim(e.val()),n=a+r.numsliderUnit.inside(n).data("unit");if(0==a||!s.isNumeric(a)){a=e.data("number");return t=a,void e.on("blur.numslider",function(){e.val(t)})}"width"==o&&r.updateWidth(i,n),"height"==o&&r.updateHeight(i,n)},"{numsliderUnit} click":function(e){var t=r.field.of(e).data("name"),e=e.data("unit");r.setUnit(i,t,e)},"{numsliderToggle} change":function(e){var t=r.field.of(e).data("name");e.is(":checked")||("width"==t&&r.toAutoWidth(i),"height"==t&&r.toAutoHeight(i))},"{self} composerBlockResize":function(e,t,n){r.populate(n)},"{self} composerBlockNestOut":function(e,t,n){n.css({width:"",height:""})}}}),t.resolve()})}),EasyBlog.module("composer/blocks/droppable",function(e){var t=this,u="is-nested";EasyBlog.require().library("ui/draggable","ui/droppable").done(function(a){EasyBlog.Controller("Composer.Blocks.Droppable",{defaultOptions:a.extend({"{dropzones}":"[data-ebd-dropzone]","{dropzonePlaceholder}":"[data-ebd-dropzone-placeholder]","{mediaFile}":"[data-eb-mm-file]"},EBD.selectors)},function(l,e,t,c,d,o){return{init:function(){d=l.blocks,c=d.composer,o=a(),l.dropzonePlaceholder=l.dropzonePlaceholder().detach().removeClass("hide")[0]},"{self} composerReady":function(){l.isPostTemplateLocked()||(l.draggableOptions={connectWith:EBD.dropzone,helper:"clone",appendTo:c.document.ghosts(),placeholder:"ebd-block is-placeholder",refreshPositions:!0,handle:EBD.immediateBlockSortHandle},l.droppableOptions={accept:[EBD.block,".eb-mm-file"].join(","),tolerance:"pointer"},l.enable())},enable:function(){d.getAllBlocks().draggable(l.draggableOptions)},disable:function(){l.block(".ui-draggable").draggable("destroy")},selectedBlock:null,"{self} composerBlockMove":function(e,t,n){l.selectedBlock=n},"{self} composerBlockMenuSelected":function(e,t,n){l.selectedBlock=n},isPostTemplateLocked:function(){return!!a("[data-eb-composer-views]").data("post-template-is-locked")},"{self} composerBlockInit":function(e,t,n){var o;l.isPostTemplateLocked()?n.find("[data-ebd-block-toolbar]").css("cursor","auto"):"image"!=d.getBlockType(n)?n.draggable(l.draggableOptions):(o=a.extend(!0,{},l.draggableOptions,{cursorAt:{top:0,left:0}}),n.draggable(o))},"{self} onPerfectScrollbarAfterInit":function(e,t,n){l.ps||(l.ps=n)},populateDropzones:function(){var e=c.viewportContent().scrollTop()/c.viewportContent()[0].scrollHeight*100;l.nest().each(function(){var n=a(this),e=n.data("type");"block"==e&&(n.prepend(l.createNestedDropzone()),n.find(EBD.childBlock).each(function(){a(this).after(l.createNestedDropzone())})),"content"==e&&(e=d.nestable.availablePositions(n),a.each(e,function(e,t){n.prepend(l.createNestedDropzone(t))}))});var t=d.getRootBlocks();t.each(function(e){var t=a(this);0==e&&t.before(l.createDropzone()),t.hasClass("is-sort-item")||t.after(l.createDropzone())}),t.length<1&&l.root().append(l.createDropzone()),l.dropzone().droppable(l.droppableOptions),c.perfectscrollbar.updatePs(l.ps,c.viewportContent);t=c.viewportContent()[0].scrollHeight;newPos=t*e/100,c.viewportContent().scrollTop(newPos)},createDropzone:function(){return a(l.dropzonePlaceholder).clone()},createNestedDropzone:function(e){var t=l.createDropzone().addClass("is-nested");return e&&t.addClass("nest-"+e).data("position",e),t},destroyDropzones:function(){var e=c.viewportContent().scrollTop()/c.viewportContent()[0].scrollHeight*100;l.dropzone().remove(),c.perfectscrollbar.updatePs(l.ps,c.viewportContent);var t=c.viewportContent()[0].scrollHeight;newPos=t*e/100,c.viewportContent().scrollTop(newPos)},"{block} dragstart":function(e,t,n){t.stopPropagation(),n.helper.addClass("is-helper").css({width:e.width(),height:e.height()}),d.drag(e),o=e,l.populateDropzones(),c.manager().addClass("is-resizing")},"{blocks.menu} dragstart":function(e,t,n){c.manager().hasClass("is-dropping-block")||l.populateDropzones(),o=e,c.manager().addClass("is-resizing")},"{mediaFile} dragstart":function(e,t,n){l.populateDropzones(),o=a(),c.manager().addClass("is-resizing")},"{dropzone} click":function(e,t){var n;c.manager().hasClass("is-dragging-block")||(l.isDropping=!0,(n=l.selectedBlock).removeClass("hide").removeClass("is-sort-item"),l.dropBlock(e,n),setTimeout(function(){l.isDropping=!1,l.dropStop(),l.selectedMenu=null,l.selectedBlock=null,c.manager().removeClass("is-dropping-block"),c.manager().removeClass("is-moving-block")},0))},"{dropzone} mouseenter":function(e,t){e.addClass("is-receiving")},"{dropzone} mouseleave":function(e,t){e.removeClass("is-receiving")},"{dropzone} dropover":function(e,t,n){d.over(e);var o=(l.lastDropzone=e).data("position");n.helper.addClass("is-sending"),o&&l.nest.of(e).data("snappedPosition",o)},"{dropzone} dropout":function(e,t,n){l.lastDropzone=null,d.out(e),n.helper.removeClass("is-sending")},isDropping:!1,lastDropzone:null,dropBlock:function(e,t){var n=t,o=t.is(d.menu);o&&(n=d.createBlockFromMenu(t));var a=t.is(l.mediaFile);a&&(n=d.createBlockFromMediaFile(t));var i=c.manager().hasClass("is-moving-block"),r=c.manager().hasClass("is-dropping-block");(i||r)&&(t=d.getBlockNest(e),s=e.data("position"),t.data("snappedPosition",s));var s=e.hasClass(u);return e.replaceWith(n),(o||a||i||r)&&(d.drop(n),d.release(n),d.out(n),s&&n.addClass(u)),c.manager().removeClass("is-dropping-block"),n},dropStop:function(){setTimeout(function(){c.manager().hasClass("is-dropping-block")||l.destroyDropzones()},1),c.manager().removeClass("is-resizing")},"{dropzone} drop":function(e,t,n){var o;l.isDropping||(l.isDropping=!0,n=n.draggable,o=e.hasClass(u),block=l.dropBlock(e,n),setTimeout(function(){l.isDropping=!1,o&&block.addClass(u)},0))},"{block} dragstop":function(e,t,n){e.removeClass("hide"),d.drop(e),d.release(e),d.out(e),l.dropStop()},"{blocks.menu} dragstop":function(e,t,n){if(l.isDropping||!l.lastDropzone)return d.deactivateBlock(),void l.dropStop();n=n.helper;l.dropBlock(l.lastDropzone,n),l.dropStop()},"{mediaFile} dragstop":function(e,t,n){!l.isDropping&&l.lastDropzone&&(n=n.helper,l.dropBlock(l.lastDropzone,n)),l.dropStop()},"{self} composerDocumentScroll":function(e,t){var n=o.data("ui-draggable");a.ui.ddmanager.prepareOffsets(n,t)},"{dropzone} dropdeactivate":function(e,t,n){d.out(e)}}}),t.resolve()})}),EasyBlog.module("composer/blocks/font",function(l){var e=this;EasyBlog.require().script("composer/vendors/colorpicker","composer/vendors/nouislider").done(function(){EasyBlog.Controller("Composer.Blocks.Font",{elements:[".eb-composer-fieldset[data-name=font] [data-eb-{font-color-menu|font-family-menu|font-size-menu|font-color-content|font-color-picker|font-family-content|font-size-content|font-color-caption|font-family-caption|font-size-caption|font-family-option|font-format-option}]",".eb-composer-fieldset[data-name=font] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit}]",".eb-composer-fieldset[data-name=font] [data-eb-{colorpicker|colorpicker-toggle}]"],defaultOptions:l.extend({fontSizeUnits:{px:{start:12,step:2,range:{min:8,max:72},pips:{mode:"values",density:4,values:[8,12,18,24,48,72]}},"%":{start:100,step:10,range:{min:0,max:200},pips:{mode:"positions",values:[0,50,100],density:10}}}},EBD.selectors)},function(r,t,a,s,n,i){return{init:function(){n=r.blocks,s=n.composer,i=l(),r.initFontFormatting(),r.initFontColor()},"{self} composerBlockActivate":function(e,t,n){i=n,r.populate(n)},populate:function(e){var t=n.getBlockMeta(e).properties.fonts;if(s.panels.fieldset.get("font").toggle(t),"buttons"==e.data("type"))return s.panels.fieldset.get("font","alignment").toggle(!0),void r.populateFontFormatting(e);t&&(r.populateFontColor(e),r.populateFontFamily(e),r.populateFontSize(e),r.populateFontFormatting(e))},hideFontFieldset:function(){s.panels.fieldset.get("font").hide()},initFontColor:function(){r.fontColorPicker().colorpicker()},populateFontColor:function(e){e=e.css("color");r.updateFontColorUI(e,!0)},setFontColor:function(e,t){e.css("color",t),r.updateFontColorUI(t)},updateFontColorUI:function(e,t){r.updatingFontColorUI=!0,e=e||(i.css("color")||"#000"),r.fontColorCaption().css("backgroundColor",e),!0===t&&r.fontColorPicker().colorpicker("setColor",e),r.updatingFontColorUI=!1},removeFontColor:function(e){r.setFontColor(e,"")},populateFontFamily:function(e){e=e[0].style.fontFamily;r.updateFontFamilyUI(e)},setFontFamily:function(e,t){r.unpreviewFontFamily(e);var n=l.Event("composerBlockFontFamilyChange");n.fontFamily=t,a.trigger(n,[t,e]),r.updateFontFamilyUI(n.fontFamily),n.isDefaultPrevented()||e.css("fontFamily",n.fontFamily)},updateFontFamilyUI:function(e){e=e.replace(/"/g,"'");var t=r.fontFamilyOption().removeClass("active").where("value",'"'+e+'"').addClass("active"),e=0<t.length?t.html():e.split(",")[0];r.fontFamilyCaption().html(e)},previewFontFamily:function(e,t){var n=e.data("originalFontFamily")||i[0].style.fontFamily,o=l.Event("composerBlockFontFamilyPreview");o.originalFontFamily=n,o.fontFamily=t,a.trigger(o,[t,n,e]),e.data("originalFontFamily",o.originalFontFamily),o.isDefaultPrevented()||e.css("fontFamily",o.fontFamily)},unpreviewFontFamily:function(e){var t=e.data("originalFontFamily"),n=l.Event("composerBlockFontFamilyUnpreview");n.originalFontFamily=t,a.trigger(n,[t,e]),e.removeData("originalFontFamily"),n.isDefaultPrevented()||e.css("fontFamily",n.originalFontFamily)},populateFontSize:function(e){e=e.css("fontSize");r.updateFontSizeUI(e)},setFontSize:function(e,t){l.isNumeric(t)&&(t+=r.getFontSizeUnit()),e.css("fontSize",t),r.updateFontSizeUI(t||e.css("fontSize")),t?r.setLineHeight(e,"120%"):r.removeLineHeight(e)},updateFontSizeUI:function(e){r.updatingFontSizeUI=!0;var t=Math.abs(e.replace(/\%|px/gi,""));unit=e.match("%")?"%":"px",r.getFontSizeUnit()!==unit&&r.setFontSizeUnit(unit),r.fontSizeCaption().html(e),r.numsliderCurrentUnit().html(unit),r.numsliderUnit().removeClass("active").where("unit",'"'+unit+'"').addClass("active"),r.numsliderWidget().val(t),r.numsliderInput().val(t),r.updatingFontSizeUI=!1},removeFontSize:function(e){r.setFontSize(e,"")},getFontSizeUnit:function(){return r.fontSizeContent().data("unit")||"%"},setFontSizeUnit:function(e){r.fontSizeContent().data("unit",e);e=t.fontSizeUnits[e];r.numsliderWidget().find(".noUi-pips").remove().end().noUiSlider(e,!0)},setLineHeight:function(e,t){e.css("lineHeight",t)},removeLineHeight:function(e){r.setLineHeight(e,"")},fontFormatting:{bold:{key:"fontWeight",val:"bold"},italic:{key:"fontStyle",val:"italic"},underline:{key:"textDecoration",val:"underline"},strikethrough:{key:"textDecoration",val:"line-through"},alignleft:{key:"textAlign",val:"left"},alignright:{key:"textAlign",val:"right"},aligncenter:{key:"textAlign",val:"center"},justify:{key:"textAlign",val:"justify"}},initFontFormatting:function(){r.fontFormatOption().on("touchstart click mousedown mouseup",function(e){e.preventDefault()}).on("touchstart click",function(e){var t=l(this),n=t.data("format");r.setFontFormatting(i,n,t.hasClass("active"))})},populateFontFormatting:function(e){var n,o,t,a,i=e[0];i&&(n=i.style,o=r.fontFormatOption().each(function(){var e=l(this),t=e.data("format");/orderedlist|unorderedlist|indent|outdent/.test(t)?e.removeClass("active"):(t=r.fontFormatting[t],t=n[t.key]==t.val,e.toggleClass("active",t))}),(t="text"==e.data("type"))&&(i=s.editor.selection.getCurrent(),a=l(i).parentsUntil(e).filter("ul, ol").eq(0),l.each({orderedlist:"ol",unorderedlist:"ul"},function(e,t){t=a.is(t);o.where("format",e).toggleClass("active",t)})),s.panels.fieldset.get("font").find(".eb-font-formatting.section-list").toggle(t))},setFontFormatting:function(e,t,n){var o=s.editor;switch(t){case"orderedlist":case"unorderedlist":o.list.toggle(t);break;case"indent":o.indent.increase();break;case"outdent":o.indent.decrease();break;default:var a=r.fontFormatting[t];e.css(a.key,n?"":a.val)}r.populateFontFormatting(e)},removeFontFormatting:function(e,t){r.setFontFormatting(e,t,!0)},"{colorpicker} colorpickerChange":function(e,t,n){r.updatingFontColorUI||(r.colorpickerToggle().prop("checked",!0),r.setFontColor(i,n))},"{colorpickerToggle} change":function(e){e.checked()||r.removeFontColor(i)},"{fontFamilyOption} mouseover":function(e){e=e.data("value");r.previewFontFamily(i,e)},"{fontFamilyOption} mouseout":function(){r.unpreviewFontFamily(i)},"{fontFamilyOption} click":function(e){e=e.data("value");r.setFontFamily(i,e)},"{numsliderWidget} nouislide":function(e,t,n){r.numsliderInput().val(Math.abs(n))},"{numsliderWidget} set":function(e,t,n){r.updatingFontSizeUI||r.setFontSize(i,Math.abs(n))},"{numsliderInput} input":function(e){r.updatingFontSizeUI||(e=Math.abs(l.trim(e.val())),r.setFontSize(i,e))},"{numsliderUnit} click":function(e){e=e.data("unit");r.setFontSizeUnit(e)},"{numsliderToggle} click":function(e){r.removeFontSize(i)},"{self} composerBlockRemove":function(e,t,n,o){o.skipFontTrigger||r.hideFontFieldset()},"{self} composerBlockDeactivate":function(e,t,n){r.hideFontFieldset()}}}),e.resolve()})}),EasyBlog.module("composer/blocks/guide",function(e){EasyBlog.Controller("Composer.Blocks.Guide",{defaultOptions:e.extend({},EBD.selectors)},function(i,e,t,n,r,o){return{init:function(){r=i.blocks,i.blocks.composer},"{self} composerBlockHoverIn":function(e,t,n){n.addClass("hover")},"{self} composerBlockHoverOut":function(e,t,n){n.removeClass("hover")},"{self} composerBlockDrop":function(e,t,n){},"{self} composerBlockActivate":function(e,t,n,o){n.addClass("active");var a=n.is(EBD.nestedBlock);a&&(i.nest.of(n).addClass("active"),r.getAllParentBlocks(n).addClass("has-active-child")),i.workarea().toggleClass("has-active-nest",a),n.addClass("is-glowing"),setTimeout(function(){n.removeTransitionClass("is-glowing",2e3)},10)},"{self} composerBlockDeactivate":function(e,t,n){i.block().removeClass("active has-active-child"),i.nest().removeClass("active")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/accordion",function(l){var e=this;EasyBlog.require().library("accordion").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Accordion",{defaultOptions:{"{accordionWrapper}":".eb-accordion","{tabHeader}":".nav-tabs","{tabHeaderListItem}":".nav-tabs > li","{tabHeaderListItemContent}":".nav-tabs > li a","{sectionContent}":".section-content","{sectionAns}":"> .section-content > .section-ans","{sectionHeader}":"[data-section-title]","{titleItem}":"[data-tab-header-item]","{control}":"[data-accordion-control]","{controlItemContent}":"[data-accordion-control] [data-listbox-item-content]"}},function(i,t,e,n,r,o,s){return{accordions:[],init:function(){r=i.blocks,r.composer,t.meta,s=l()},activate:function(e){s=e,i.populate(e)},deactivate:function(e){},construct:function(e){e=l.extend({},t.data,e);return content},reconstruct:function(e){var t;r.data(e);e.hasClass("is-new")&&(t=l.uid("acc-"),r.data(e).id=t,r.getBlockContent(e).find("[data-eb-accordion]").addClass(t)),l.each(e.find("[data-accordion-wrapper]"),function(e,t){(t=l(t)).parent().removeAttr("style")}),setTimeout(function(){i.accordions[r.data(e).id]=new Collapsible({node:document.querySelectorAll("."+r.data(e).id+" .block"),eventNode:".ac-q"})},100)},"{self} composerBlockDuplicate":function(e,t,n,o){var a,i;"accordion"==r.getBlockType(n)&&(r.updateBlockUid(n),a=r.data(o),data=r.data(n),l.extend(data,a),i=l.uid("acc-"),data.id=i,r.duplicateChildBlocksData(n,o),clonedContent=r.getBlockContent(n),(n=clonedContent.find("[data-eb-accordion]")).removeClass(a.id),n.addClass(i))},deconstruct:function(o){return l.each(o.find("[data-accordion-wrapper]"),function(e,t){var n=(t=l(t)).parent();n.removeAttr("contenteditable"),n.removeAttr("style"),t.children().appendTo(n),t.remove(),i.sectionContent.inside(o).eq(e).removeClass("is-active"),i.sectionHeader.inside(o).eq(e).removeAttr("contenteditable")}),o},refocus:function(e){i.sectionAns.inside(e).filter(".active").focus()},reset:function(e){},recover:function(e){},populate:function(e){e=r.data(e);i.control().listbox().listbox("populate",e.tabs,function(e,t){e.listboxitem("content",t)})},revert:function(e){},toHTML:function(e){e=e.clone(),e=i.deconstruct(e);return r.getBlockContent(e).html()},toData:function(e){return r.data(e)},toText:function(e){e=e.clone();return i.deconstruct(e).text()},section:{create:function(e){l.uid("ac-");var t=l('<div class="block ac section-content is-active" data-tabs-content></div>',{class:"ac section-content"}),n=l("<div></div>",{class:"ac-a section-ans"}),o=l("<div></div>",{class:"ebd-nest","data-type":"block","data-accordion-wrapper":""}),a=r.constructNestedBlock("text");r.initBlock(a),o.wrapInner(a),n.wrapInner(o),t.html('<h2 class="block__title ac-q" tabindex="0" contenteditable="true" data-section-title></h2>'),t.append(n),i.accordionWrapper.inside(s).append(t)},remove:function(e){e=i.accordionWrapper.inside(s).filter(":first").children(".section-content").eq(e);e.find(".section-ans").find(EBD.nestedBlock).each(function(){var e=l(this);r.removeBlock(e,{skipPanelTrigger:!0,skipFontTrigger:!0})}),e.remove()},focus:function(e){}},"{control} listboxBeforeAddItem":function(e,t,n){i.section.create();n=n.listboxitem("toData");i.sectionContent.inside(s).filter(":last").find("h2").html(n.content)},"{control} listboxAfterAddItem":function(e,t,n){r.data(s).tabs=i.control().listbox("toData");var o=i.accordionWrapper.inside(s),a=o.html();o.html(a),i.accordions[r.data(s).id]=new Collapsible({node:document.querySelectorAll("."+r.data(s).id+" .block"),eventNode:".ac-q"})},"{control} listboxBeforeRemoveItem":function(e,t,n){n=n.index();i.section.remove(n)},"{control} listboxAfterRemoveItem":function(e,t,n){r.data(s).tabs=i.control().listbox("toData")},"{control} listboxAfterToggleDefault":function(e,t,n){r.data(s).tabs=i.control().listbox("toData")},"{controlItemContent} keypress":function(e,t){"13"==(t.keyCode||t.which)&&t.preventDefault()}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/alerts",function(s){var e=this;EasyBlog.require().done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Alerts",{defaultOptions:{data:{type:"warning",content:"Enter an important note here"},"{note}":".o-alert","{oldNote}":".alert","{fontStyle}":"[data-eb-composer-block-section][data-name=font]","{alertSelection}":"[data-eb-composer-block-alert-type] [data-type]"}},function(o,t,e,n,a,i,r){return{init:function(){a=o.blocks,n=a.composer,i=t.meta,r=s(),t.data.content=s(i.content).html()},activate:function(e){r=e,o.fontStyle().addClass("t-hidden"),o.populate(e)},deactivate:function(e){o.fontStyle().removeClass("t-hidden")},construct:function(e){e=s.extend({},t.data,e),s(i.content).switchClass("o-alert--"+e.type).html(e.content)},reconstruct:function(e){},deconstruct:function(e){var t=a.getBlockContent(e);return o.note.inside(t).editable(!1),e},refocus:function(e){var t=a.getBlockContent(e),t=o.note.inside(t);t.focus(),e.hasClass("is-new")&&n.editor.caret.setEnd(t[0])},toText:function(e){e=a.getBlockContent(e);return o.note.inside(e).text()},toData:function(e){return a.data(e)},toHTML:function(e){e=e.clone(),e=o.deconstruct(e);return a.getBlockContent(e).html()},reset:function(e){a.getBlockContent(e).html(o.construct())},populate:function(e){e=a.data(e);o.alertSelection().where("type",e.type).activateClass("selected")},setAlertType:function(e){var t=a.getBlockContent(r),n=t.find(o.note);(n=n.length<1?t.find(o.oldNote):n).switchClass("o-alert o-alert--"+e)},previewType:function(e){var t=a.getBlockContent(r),n=o.note.inside(t),t=n.attr("class");a.getData(r);r.hasClass("is-preview")||(r.data("originalClass",t),r.addClass("is-preview")),o.setAlertType(e);n=[r,o,n];o.trigger("composerBlockNotePreviewType",n),o.trigger("composerBlockChange",n)},previewTimer:null,"{alertSelection} mouseover":function(e){},"{alertSelection} mouseout":function(e){},"{alertSelection} click":function(e){var t=e.data("type"),n=a.data(r);o.alertSelection().removeClass("selected"),s(e).addClass("selected"),r.removeClass("is-preview"),r.removeData("originalClass"),o.setAlertType(t),n.type=t,o.populate(r)}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/apple",function(c){EasyBlog.Controller("Composer.Blocks.Handlers.Apple",{defaultOptions:{"{wrapper}":"[data-apple-wrapper]","{embedButton}":"[data-apple-embed]","{errorMessage}":"[data-apple-error]","{input}":"[data-apple-input]","{fieldInput}":"[data-apple-field-input]","{update}":"[data-apple-update]"}},function(i,e,t,r,s,a,l){return{init:function(){s=i.blocks,r=s.composer,a=e.meta,l=c()},toData:function(e){return s.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){var t=s.data(e);l=e,i.populate(t)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e),n=e.data("overlay"),o=s.getBlockContent(e);t.src&&!n?(o.empty(),i.createIframe(e,t.src,t.type)):o.html(a.html)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){i.fieldInput().val(""),e.url&&i.fieldInput().val(e.url)},type:null,isValidUrl:function(e){if(!e)return!1;var t=/^https:\/\/music\.apple\.com\/(.*)\/playlist\/(.*)$/;return t.test(e)?(i.type="playlist",!0):(t=/^https:\/\/music\.apple\.com\/(.*)\/album\/(.*)\/(.*)\?i\=(.*)$/).test(e)?(i.type="song",!0):(t=/^https:\/\/music\.apple\.com\/(.*)\/album\/(.*)\/(.*)$/).test(e)?(i.type="album",!0):(t=/^https:\/\/podcasts\.apple\.com\/(.*)\/podcast\/(.*)\/(.*)\?i\=(.*)$/).test(e)?(i.type="podcast",!0):!!(t=/^https:\/\/podcasts\.apple\.com\/(.*)\/podcast\/(.*)\/(.*)$/).test(e)&&(i.type="podcastList",!0)},getHeight:function(e){return"song"==e?"150":"podcast"==e?"175":"450"},embed:function(e){var t,n,o,a;i.errorMessage().addClass("t-hidden"),i.isValidUrl(e)?(t=s.data(l),a=s.getBlockContent(l),n=i.wrapper.inside(a),i.fieldInput().val(e),t.url=e,o=i.type,t.type=o,a=i.getHeight(t.type),t.height=a,e=i.formatSrc(e),t.src=e,i.createIframe(l,e,o),n.addClass("t-hidden")):i.errorMessage().removeClass("t-hidden")},createIframe:function(e,t,n){var o=c.create("iframe");o.attr("src",t),o.attr("frameborder","0"),o.attr("height",i.getHeight(n)),o.attr("allow","autoplay *; encrypted-media *; fullscreen *"),o.attr("sandbox","allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"),o.css({width:"100%","max-width":"660px",overflow:"hidden",background:"transparent"}),i.setOverlay(e,o,n)},formatSrc:function(e){return e="https://embed."+(e=e.replace("https://",""))},setOverlay:function(e,t,n){var o,a=e.data("overlay");a?(a.element().empty(),a.element().append(t)):(a=r.document.overlay.create(e),o=s.getBlockContent(e),a.placeholder().css("height",i.getHeight(n)+"px").appendTo(o),a.element().append(t),a.attach()),e.data("overlay",a)},"{embedButton} click":function(e,t){e=e.closest("[data-apple-form]").find("[data-apple-input]").val();i.embed(e)},"{update} click":function(e,t){var n=i.fieldInput().val();i.embed(n)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/audio",function(e){var t=this;EasyBlog.require().library("audiojs").done(function(u){EasyBlog.Controller("Composer.Blocks.Handlers.Audio",{elements:["[data-eb-{file-error}]"],defaultOptions:{"{browseButton}":".eb-composer-placeholder-audio [data-eb-mm-browse-button]","{audio}":"audio","{placeholder}":"[data-eb-composer-audio-placeholder]","{infoBox}":"[data-audio-infobox]","{artist}":"[data-audio-artist]","{track}":"[data-audio-track]","{trackSeparator}":"[data-audio-track-separator]","{download}":"[data-audio-download]","{displayArtist}":"[data-audio-fieldset-artist]","{displayTrack}":"[data-audio-fieldset-track]","{displayDownload}":"[data-audio-fieldset-download]","{autoplay}":"[data-audio-fieldset-autoplay]","{loop}":"[data-audio-fieldset-loop]"}},function(l,e,t,c,d,n,a,o){return{init:function(){d=l.blocks,c=d.composer,n=e.meta,a=u(),o=EasyBlog.MediaManager},toText:function(e){},toData:function(e){var t=d.data(e),e=d.getBlockContent(e);return t.download=l.download.inside(e).attr("href"),t.artist=l.artist.inside(e).text(),t.track=l.track.inside(e).text(),t},toHTML:function(e){e.clone()},toLegacyShortcode:function(e,t){e={uri:e.uri};return"[embed=audio]"+JSON.stringify(e)+"[/embed]"},activate:function(e){a=e,l.populate(e)},deactivate:function(e){},construct:function(e){var t=d.createBlockContainer("audio"),n=d.data(t);u.extend(n,e);return t},constructFromMediaFile:function(e){var e=e.data("key"),e=o.getUri(e),t=d.createBlockContainer("audio");d.getBlockContent(t),d.data(t);return t.addClass("is-loading"),o.getMedia(e).done(function(e){e=e.meta;l.createPlayer(t,e.url,e.title)}).fail(function(){}).always(function(){t.removeClass("is-loading")}),t},reconstruct:function(e){var t=l.placeholder.inside(e),n=d.data(e);n.url&&l.createPlayer(e,n.url,n.track),0<t.length&&EasyBlog.MediaManager.uploader.register(t)},deconstruct:function(e){},refocus:function(e){},reset:function(e){d.getBlockContent(e)},populate:function(e){d.data(e);l.updateFieldset(e)},updateFieldset:function(e){e=d.data(e);l.autoplay().val(e.autoplay?"1":"0").trigger("change"),l.loop().val(e.loop?"1":"0").trigger("change"),l.displayArtist().val(e.showArtist?"1":"0").trigger("change"),l.displayDownload().val(e.showDownload?"1":"0").trigger("change"),l.displayTrack().val(e.showTrack?"1":"0").trigger("change")},getPlayerTemplate:function(){return u(n.player)},createPlayer:function(e,t,n){var o=d.data(e),a=d.getBlockContent(e),i=l.getPlayerTemplate(),r=o.uid||(o.uid=u.uid("audio-")),t=o.url||t,s=n||"",n=o.artist;o.url=t,o.track=s,o.artist=n,o.uid=r,l.audio.inside(i).attr("id",r).attr("src",t),l.artist.inside(i).html(o.artist).editable(!0),l.track.inside(i).html(o.track).editable(!0),l.download.inside(i).attr("href",t).attr("target","blank").on("click",function(e){e.preventDefault()}),a.html(i),u.audiojs.events.ready(function(){u.audiojs.create(a.find("audio"))}),o.showDownload||l.download.inside(a).addClass("hide"),o.showArtist||l.artist.inside(a).addClass("hide"),o.showTrack||l.track.inside(a).addClass("hide"),l.updateInfoBox(e)},updateInfoBox:function(e){var t=d.data(e),e=d.getBlockContent(e),e=l.infoBox.inside(e);t.showDownload||t.showTrack||t.showArtist?e.removeClass("disabled"):e.addClass("disabled")},"{displayDownload} change":function(e,t){d.getBlockContent(a);e=1==e.val();d.data(a).showDownload=e,l.updateInfoBox(a),e?l.download.inside(a).removeClass("hide"):l.download.inside(a).addClass("hide")},"{displayArtist} change":function(e,t){var n=d.getBlockContent(a),e=1==e.val(),n=l.artist.inside(n);d.data(a).showArtist=e,l.updateInfoBox(a),e?n.removeClass("hide"):n.addClass("hide")},"{displayTrack} change":function(e,t){var n=d.getBlockContent(a),o=1==e.val(),e=l.track.inside(n),n=l.trackSeparator.inside(n);if(d.data(a).showTrack=o,l.updateInfoBox(a),!o)return n.addClass("hide"),void e.addClass("hide");n.removeClass("hide"),e.removeClass("hide")},"{autoplay} change":function(e,t){var n=d.data(a),e=1==e.val();n.autoplay=e},"{loop} change":function(e,t){var n=d.data(a),e=1==e.val();n.loop=e},"{placeholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{placeholder} mediaUploaderFileUploaded":function(e,t,n,o,a){var i=a.response.media.meta,r=d.block.of(e);setTimeout(function(){l.createPlayer(r,i.url,o.name),r.hasClass("active")&&l.populate(r)},600)},"{browseButton} mediaSelect":function(e,t,n){var o,a=d.block.of(e);"audio"==n.meta.type&&(o=n.meta,(e=c.document).isLegacy()?(content=l.toLegacyShortcode(n,a),e.insertContent(content)):l.createPlayer(a,o.url,o.title))},"{placeholder} mediaUploaderFileError":function(e,t,n,o){o.code==u.plupload2.FILE_EXTENSION_ERROR&&l.fileError.inside(a).removeClass("hide")},"{self} mediaInsert":function(e,t,n,o,a,i){var r,s;"audio"==n.meta.type&&(s=(r=c.document).isLegacy(),a=u.extend(a,{url:n.meta.url,track:a.title,autoplay:a.autoplay,loop:a.loop,showDownload:a.showDownload,showArtist:a.showArtist,showTrack:a.showTrack}),s?(content=l.toLegacyShortcode(n,o),r.insertContent(content)):(o=d.constructBlock("audio",a),d.addBlock(o),i||d.activateBlock(o)))}}}),t.resolve()})}),EasyBlog.module("composer/blocks/handlers/behance",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Behance",{defaultOptions:l.extend({"{form}":"> [data-behance-form]","{insert}":"[data-behance-insert]","{source}":"[data-behance-source]","{loader}":"> [data-behance-loader]","{preview}":"> [data-behance-preview]","{errorMessage}":"[data-behance-error]","{fsSource}":"[data-fs-behance-source]","{fsUpdate}":"[data-fs-behance-update]"},EBD.selectors)},function(r,e,t,a,s,i,n){return{init:function(){s=r.blocks,a=s.composer,i=e.meta,n=l()},toData:function(e){return s.data(e)},toText:function(e){return s.data(e).url},toEditableHTML:function(e){return""},toHTML:function(e){return s.data(e).embed},activate:function(e){n=e,r.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e),n=e.data("overlay"),o=s.getBlockContent(e);t.embed&&!n&&(o.empty(),r.setOverlay(e,t.embed)),t.embed||o.html(l(i.html)),e.find(r.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){var t=s.getBlockContent(e);return r.form.inside(t).remove(),r.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=s.data(e);e.url&&r.fsSource().val(e.url)},loading:function(){var e=s.getBlockContent(n);if(!r.isLoading)return r.loader.inside(e).removeClass("hidden"),r.form.inside(e).addClass("hidden"),void(r.isLoading=!0);r.loader.inside(e).addClass("hidden"),r.form.inside(e).removeClass("hidden"),r.isLoading=!1},setOverlay:function(e,t){var n=s.getBlockContent(e),o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):((o=a.document.overlay.create(e)).placeholder().css("height","450px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/www\.behance\.net\/gallery\/(.*)\/(.*)$/.test(e)},getOembedUrl:function(e){return"http://www.behance.net/services/oembed?url="+e},crawl:function(t,n){var o=s.getBlockContent(t),a=s.data(t),i=r.getOembedUrl(n);if(!r.isUrlValid(n))return r.errorMessage().removeClass("hide"),!1;var e=t.data("overlay");e&&e.element().empty(),r.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:i}).done(function(e){r.loading();e=e[i];a.url=n,a.embed=e.oembed.html,r.setOverlay(t,a.embed),r.form.inside(o).addClass("hidden")}).fail(function(e){r.loading(),r.errorMessage().removeClass("hide").html(e)})},"{insert} click":function(e){n.length<1&&(t=r.block.of(e),s.activateBlock(t));var t=s.getBlockContent(n),t=r.source.inside(t).val();r.fsSource().val(t),r.crawl(n,t)},"{fsUpdate} click":function(){s.getBlockContent(n);var e=r.fsSource().val();r.crawl(n,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/buttons",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Buttons",{defaultOptions:{buttonClasses:"btn-default btn-info btn-primary btn-success btn-warning btn-danger","{button}":"> a.btn","{textWrapper}":"> span","{buttonSize}":"[data-eb-composer-block-button-size]","{buttonHyperlink}":"[data-button-link]","{buttonNofollow}":"[data-button-nofollow]","{buttonTarget}":"[data-button-target]","{buttonSwatchItem}":"[data-eb-composer-button-swatch-item]"}},function(o,n,e,t,a,i,r){return{init:function(){a=o.blocks,a.composer,n.meta,r=s()},selectionState:{},toData:function(e){return a.data(e)},toText:function(e){var t=a.getBlockContent(e);o.button.inside(t);return text=a.data(e).link,text},toHTML:function(e){e=e.clone(),e=o.deconstruct(e);return a.getBlockContent(e).html()},activate:function(e){r=e,o.toggleFontSettings(!1),o.populate(e)},deactivate:function(e){o.toggleFontSettings(!0)},construct:function(e){},reconstruct:function(e){e=a.getBlockContent(e);o.button.inside(e).on("click",function(e){e.stopPropagation(),e.preventDefault()})},deconstruct:function(e){var t=a.getBlockContent(e),t=o.button.inside(t);return o.textWrapper.inside(t).removeAttr("contenteditable").editable(!1),e},refocus:function(e){},reset:function(e){},populate:function(e){e=a.data(e);o.buttonSwatchItem().removeClass("active").where("style",e.style).addClass("active"),o.buttonSize().val(e.size),o.buttonHyperlink().val(e.link),o.buttonNofollow().val(e.nofollow).trigger("change"),o.buttonTarget().val(e.target)},toggleFontSettings:function(t){["[data-eb-font]","[data-font-format-group-basic]"].forEach(function(e){!0===t?s(e).show():s(e).hide()})},updateButtonSize:function(e){var t=a.getBlockContent(r);o.button.inside(t).removeClass("btn-sm btn-xs btn-lg btn-xlg").addClass(e),a.data(r).size=e},"{buttonSwatchItem} click":function(e){var t=e.data("style"),e=a.getBlockContent(r);o.buttonSwatchItem().removeClass("active").where("style",t).addClass("active"),o.button.inside(e).removeClass(n.buttonClasses).addClass(t),a.data(r).style=t},"{buttonSize} change":function(e){e=e.val();o.updateButtonSize(e)},"{buttonHyperlink} keyup":s.debounce(function(e){var t=a.getBlockContent(r);a.data(r).link=e.val(),o.button.inside(t).attr("href",e.val())},250),"{buttonNofollow} change":function(e){var t=e.is(":checked"),n=a.getBlockContent(r),e=o.button.inside(n),n=a.data(r);n.nofollow=t?1:0,n.nofollow?e.attr("rel",n.nofollow?"nofollow":""):e.removeAttr("rel")},"{buttonTarget} change":function(e){var t=a.getBlockContent(r);a.data(r).target=e.val(),o.button.inside(t).attr("target",e.val())}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/code",function(p){var e="ace.min.js";"development"===window.ezb.environment&&(e="ace.js");var f=p.rootPath+"/media/com_easyblog/scripts/vendors/"+e;window.FD50_PSEUDO={module:function(e,t){t.call(p.Deferred(),p)}},EasyBlog.Controller("Composer.Blocks.Handlers.Code",{defaultOptions:{"{pre}":"> pre","{readOnly}":"[data-code-readonly]","{showGutter}":"[data-code-gutter]","{fontsize}":"[data-code-fontsize]","{themeSelection}":"[data-code-theme]","{modeSelection}":"[data-code-mode]","{iframeHeight}":"[data-code-height]",theme:"github",mode:"javascript",css:{position:"fixed",width:"100%",height:"100%",top:0,bottom:0,left:0,right:0,margin:0,padding:0}}},function(d,u,e,i,r,t,n){return{init:function(){r=d.blocks,i=r.composer,u.meta,n=p()},toText:function(e){},toData:function(e){var t=r.data(e);e.data("uid");return instance=d.editor.instances[e.data("uid")],contents=instance.editor.getSession().getValue(),t.code=contents,t},toEditableHTML:function(e){e=e.clone(),e=r.getBlockContent(e);return e.find("[data-ebd-overlay-placeholder]").remove(),e.html()},toHTML:function(e){var t=r.data(e);e.data("uid");instance=d.editor.instances[e.data("uid")],contents=instance.editor.getSession().getValue();e=e.clone(),e=d.deconstruct(e),e=r.getBlockContent(e),e=d.pre.inside(e);return e.html(contents),e.attr("data-mode",t.mode),e.html()},activate:function(e){n=e,d.populate(e)},deactivate:function(){},construct:function(e){p.extend({},u.data,e)},reconstruct:function(e){var t,n=r.getBlockContent(e),o=r.data(e);e.data("overlay")||((t=i.document.overlay.create(e)).placeholder().css("height",o.height+"px").prependTo(n),t.attach(),e.data("overlay",t)),d.editor.get(e)},"{self} composerBlockDuplicate":function(e,t,n,o){var a;"code"==r.getBlockType(n)&&(n.removeAttr("data-uid"),r.setBlockUid(n),a=r.data(o),data=r.data(n),p.extend(data,a),instance=d.editor.instances[o.data("uid")],contents=instance.editor.getSession().getValue(),data.code=contents,r.getBlockContent(n).find("[data-ebd-overlay-placeholder]").remove())},deconstruct:function(e){return e},reset:function(e){},refocus:function(){},populate:function(e){e=r.data(e);d.modeSelection().val(e.mode),d.themeSelection().val(e.theme),d.showGutter().val(e.show_gutter?1:0),d.showGutter().trigger("change"),d.iframeHeight().val(e.height)},getEditor:function(e){d.editor.get(n).done(e)},switchMode:function(o){var a=r.data(n);d.getEditor(function(e,t,n){t.setMode("ace/mode/"+o),a.mode=o})},switchTheme:function(o){var a=r.data(n);d.getEditor(function(e,t,n){e.setTheme(o),a.theme=o})},switchInvisible:function(o){var a=r.data(current);d.getEditor(function(e,t,n){e.setShowInvisibles(o),a.show_invisible=o})},toggleGutter:function(o){var a=r.data(n);d.getEditor(function(e,t,n){e.renderer.setShowGutter(o),a.show_gutter=o})},updateFontSize:function(o){var a=r.data(n);d.getEditor(function(e,t,n){e.setFontSize(o),a.fontsize=o})},updateHeight:function(e){data=r.data(n),data.height=e;e=n.data("overlay");e.placeholder().css("height",data.height+"px"),e.element().find("iframe").css("height",data.height+"px")},editor:{instances:{},get:function(e){return d.editor.instances[e.data("uid")]||d.editor.create(e)},create:function(e){var n=e.data("uid"),t=r.getBlockContent(e),s=d.pre.inside(t),l=d.editor.instances[n]=p.Deferred(),c=r.data(e),o=l.overlay=e.data("overlay");o||((o=i.document.overlay.create(e)).placeholder().css("height",c.height+"px").prependTo(t),o.attach(),e.data("overlay",o));var a=p.create("iframe"),e=p.rootPath+"/media/index.html";return a.css("height",c.height+"px").attr("src",e).one("load",function(){var i=a[0].contentWindow,e=i.document,t=e.head,e=e.body,r=s.clone().css(u.css).appendTo(e)[0];i.eval("window.FD50 = window.parent.FD50_PSEUDO;"),p.script({url:f,head:t}).done(function(){var e=i.ace.edit(r),t=c.theme||s.data("theme")||u.theme,n=c.mode||s.data("mode")||u.mode,o=c.fontsize||s.data("fontsize")||u.fontsize,a=c.show_gutter||s.data("gutter")||u.show_gutter;e.setTheme(t),e.setFontSize(o),e.renderer.setShowGutter(a),c.code&&e.setValue(c.code),p(r).css("height","100%"),e.resize();a=e.getSession();a.setMode("ace/mode/"+n),l.editor=e,l.resolve(e,a,s)}).fail(function(){l.reject(p.Exception("ACE Editor could not be loaded.")),delete d.instances[n]})}),o.element().append(a),l}},"{showGutter} change":function(e,t){e=1==e.val();d.toggleGutter(e)},"{fontsize} change":function(e,t){e=parseInt(p(e).val());d.updateFontSize(e)},"{modeSelection} change":function(e,t){e=p(e).val();d.switchMode(e)},"{iframeHeight} keyup":p.debounce(function(e,t){e=e.val();d.updateHeight(e)},250),"{themeSelection} change":function(e,t){e=p(e).val();d.switchTheme(e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/codepen",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Codepen",{defaultOptions:{"{form}":"> [data-codepen-form]","{insert}":"[data-codepen-insert]","{source}":"[data-codepen-source]","{loader}":"> [data-codepen-loader]","{preview}":"> [data-codepen-preview]","{fsSource}":"[data-fs-codepen-source]","{fsUpdate}":"[data-fs-codepen-update]","{errorMessage}":"[data-codepen-error]"}},function(r,e,t,a,s,i,n){return{init:function(){s=r.blocks,a=s.composer,i=e.meta,n=l()},toText:function(e){return s.data(e).url},toData:function(e){return s.data(e)},toEditableHTML:function(e){return""},toHTML:function(e){return s.data(e).embed},activate:function(e){n=e,r.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e),n=e.data("overlay"),o=s.getBlockContent(e);t.embed&&!n&&(o.empty(),r.setOverlay(e,t.embed)),t.embed||o.html(l(i.html))},deconstruct:function(e){var t=s.getBlockContent(e);return r.form.inside(t).remove(),r.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=s.data(e);r.fsSource().val(e.url)},loading:function(){var e=s.getBlockContent(n);r.isLoading?(r.loader.inside(e).addClass("hidden"),r.form.inside(e).removeClass("hidden"),r.isLoading=!1):(r.loader.inside(e).removeClass("hidden"),r.form.inside(e).addClass("hidden"),r.isLoading=!0)},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=a.document.overlay.create(e),n=s.getBlockContent(e),o.placeholder().css("height","300px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},getUrl:function(e){return"https://codepen.io/api/oembed?format=json&url="+e},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/codepen\.io\/(.*)\/pen\/(.*)$/.test(e)},crawl:function(t,n){var o=r.getUrl(n),a=s.data(t),e=s.getBlockContent(t);if(!r.isUrlValid(n))return r.errorMessage().removeClass("hide"),!1;var i=t.data("overlay");i&&i.element().empty(),r.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:o}).done(function(e){e=e[o];a.url=n,a.embed=e.oembed.html,r.setOverlay(t,a.embed)}).fail(function(e){r.errorMessage().removeClass("hide").html(e)}).always(function(){r.loading(),r.form.inside(e).addClass("hidden")})},"{insert} click":function(e){n.length<1&&(t=r.block.of(e),s.activateBlock(t));s.data(n);var t=s.getBlockContent(n),t=r.source.inside(t).val();r.fsSource().val(t),r.crawl(n,t)},"{fsUpdate} click":function(){var e=r.fsSource().val();s.data(n);r.crawl(n,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/columns",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Columns",{defaultOptions:{"{columnsHeader}":".row","{columns}":".row > div","{wrapper}":"> div[data-col-wrapper]","{columnRange}":"[data-eb-composer-block-column-range]","{control}":"[data-columns-control]","{controlWidth}":"[data-select-width]","{dropdown}":".eb-composer-manage-tab-name > select ","{listboxItem}":"[data-listbox-item]"}},function(i,t,e,n,r,o,s){return{init:function(){r=i.blocks,r.composer,t.meta,s=l()},matchWrapperHeight:function(e){var t=0;i.wrapper.inside(e).css("height","").each(function(){t=Math.max(t,l(this).height())}).css("height",t)},removeWrapperHeight:function(e){i.wrapper.inside(e).css("height","")},"{blocks.root} sortactivate":function(){r.getBlocksByType("columns").each(function(){var e=r.getBlockContent(l(this));i.matchWrapperHeight(e)})},"{blocks.root} sortdeactivate":function(){r.getBlocksByType("columns").each(function(){var e=r.getBlockContent(l(this));i.removeWrapperHeight(e)})},"{wrapper} sortchange":function(e,t,n){e=e.closest(EBD.block);i.matchWrapperHeight(e)},"{wrapper} sortout":function(e,t,n){e=e.closest(EBD.block);i.matchWrapperHeight(e)},activate:function(e){s=e,i.populate(e)},deactivate:function(e){},construct:function(e){e=l.extend({},t.data,e);return content},reconstruct:function(e){},deconstruct:function(e){return r.getBlockContent(e).find("> .row > .col > [data-col-wrapper]").each(function(){var e=l(this),t=e.parent();e.children().appendTo(t),t.removeAttr("contenteditable"),e.remove()}),e},refocus:function(e){var t=r.getBlockContent(e);(e.data("lastFocused")||i.columns.inside(t).filter(":first")).focus()},reset:function(e){},populate:function(e){var t=r.data(e),n=e.attr("data-uid");i.control().listbox().listbox("populate",t.columns);r.getBlockContent(e);l('div[data-uid="'+n+'"]').find("div.ebd-block-content:eq(0) > div").children().each(function(e,t){e=i.listboxItem().eq(e),e=i.controlWidth.inside(e),t=l(t).attr("data-size");e.val(t)})},toHTML:function(e){e=e.clone(),e=i.deconstruct(e);return r.getBlockContent(e).html()},toData:function(e){return r.data(e)},toText:function(e){return r.getBlockContent(e).clone().text()},column:{activate:function(e){var t=r.getBlockContent(s);i.columns.inside(t).eq(e).addClass("active-column")},deactivate:function(e){var t=r.getBlockContent(s);i.columns.inside(t).eq(e).removeClass("active-column")},create:function(e){var t=r.getBlockContent(s),n=(i.columns.inside(t),"col-12 col-md-"+e),o=r.createBlockNest();o.attr("data-col-wrapper","").addClass("ui-sortable");var a=r.constructNestedBlock("text");o.append(a);a=l("<div></div>");a.addClass(n).attr("data-size",e).append(o),i.columnsHeader.inside(t).append(a)},remove:function(e){var t=r.getBlockContent(s);i.columns.inside(t).eq(e).remove();var n=i.columns.inside(t).length,o=Math.ceil(12/n),e=!1;5==n&&(o=2,e=!0);o="col-12 col-md-"+o;i.columnsHeader.inside(t).find("div.col").removeClass().addClass(o),e&&(i.columns.inside(t).first().addClass("col-md-offset-1"),i.columns.inside(t).last().addClass("col-md-offset-0"))},change:function(e,t){var n=r.getBlockContent(s),o=r.data(s),a=s.attr("data-uid"),a=l('div[data-uid="'+a+'"]').find("div.ebd-block-content:eq(0) > div").children().length;4<t&&3==a&&i.columns.inside(n).last().addClass("col col-md-2"),4==t&&4==a&&i.columns.inside(n).last().addClass("col col-md-2"),4<t&&(4==a||5==a)||(6!=a?(i.columns.inside(n).first().removeClass("col-md-offset-1"),i.columns.inside(n).last().removeClass("col-md-offset-0"),a="col-12 col-md-"+t,i.columns.inside(n).eq(e),o.columns[e].size=t,i.columns.inside(n).eq(e).attr("data-size",t).removeClass().addClass(a)):i.dropdown().val("2"))}},"{listboxItem} mouseover":function(e,t){e=e.index();i.column.activate(e)},"{listboxItem} mouseout":function(e,t){e=e.index();i.column.deactivate(e)},"{control} listboxBeforeAddItem":function(e,t,n){},"{control} listboxAfterAddItem":function(e,t,n){r.data(s).columns=i.control().listbox("toData"),i.column.create(1)},"{control} listboxBeforeRemoveItem":function(e,t,n){n=n.index();i.column.remove(n)},"{control} listboxAfterRemoveItem":function(e,t,n){r.data(s).columns=i.control().listbox("toData")},"{controlWidth} change":function(e,t){var n=e.parents(i.listboxItem.selector).index(),e=e.val();i.column.change(n,e)},"{self} composerBlockDuplicate":function(e,t,n,o){var a;"columns"==r.getBlockType(n)&&(r.updateBlockUid(n),a=r.data(o),data=r.data(n),l.extend(data,a),r.duplicateChildBlocksData(n,o))}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/compare",function(d){var e=this;EasyBlog.require().library("imgareaselect").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Compare",{defaultOptions:{image:"[data-type=compare] img"}},function(l,e,c,t,n,o,a){return{init:function(){n=l.blocks,n.composer,e.meta,a=d()},toData:function(e){return n.getData(e)},activate:function(e){a=e,l.populate(e),a.find("img").on("click.compare dragstart.compare",function(e){e.preventDefault(),e.stopPropagation()}).on("mousedown.compare",function(e){var t,n,o,a,i,r,s;l.drawing||(e.stopPropagation(),e.preventDefault(),t=d(this),n=t.parents(".ebd-block:first"),images=n.find("img"),console.log(n),l.drawing=!0,c.addClass("active"),o=parseInt(t.css("top")),a=parseInt(t.css("left")),i=t.width()-t.parent().width(),h=t.height()-t.parent().height(),r=e.pageX,s=e.pageY,d(document).on("mousemove.compare mouseup.compare",function(e){var t,n;l.drawing&&(t=-1*(r-e.pageX),n=-1*(s-e.pageY),t=0==i?0:a+(t||0),n=0==h?0:o+(n||0),images.css({top:o=n,left:a=t}),r=e.pageX,s=e.pageY)}).on("mouseup.compare",function(){d(document).off("mousemove.compare mouseup.compare"),n.removeClass("active"),l.drawing=!1}))})},construct:function(e){},reconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){},drawing:!1,"{image} mousedown":function(e){}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/comparison",function(e){var t=this;EasyBlog.require().script("shared/comparison").done(function(a){EasyBlog.Controller("Composer.Blocks.Handlers.Comparison",{defaultOptions:{"{wrapper}":"[data-eb-comparison-wrapper]","{rightButtonPlaceholder}":"[data-right-browse-placeholder]","{rightButtonTemplate}":"[data-eb-comparison-template] > [data-eb-comparison-browse=right]","{leftButtonPlaceholder}":"[data-left-browse-placeholder]","{leftButtonTemplate}":"[data-eb-comparison-template] > [data-eb-comparison-browse=left]","{leftLabel}":"[data-left-label]","{rightLabel}":"[data-right-label]","{leftImage}":"[data-left-image]","{rightImage}":"[data-right-image]","{leftToggler}":"[data-field-left-label]","{leftTextField}":"#left_text","{rightToggler}":"[data-field-right-label]","{rightTextField}":"#right_text","{browseMedia}":"[data-eb-comparison-browse]"}},function(r,e,t,n,s,o,l){return{init:function(){s=r.blocks,s.composer,e.meta,l=a()},activate:function(e){l=e,r.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){s.data(e)},refocus:function(){},deconstruct:function(e){return r.browseMedia.inside(e).remove(),e},reset:function(e){},populate:function(e){e=s.data(e);r.wrapper().comparison(),r.initializeBrowseButtons(),r.leftToggler().val(e.left?1:0).trigger("change"),r.rightToggler().val(e.right?1:0).trigger("change"),r.leftTextField().val(e.left_text).trigger("keyup"),r.rightTextField().val(e.right_text).trigger("keyup")},toHTML:function(e){e=e.clone(),e=r.deconstruct(e);return s.getBlockContent(e).html()},toData:function(e){return s.data(e)},toText:function(e){return s.getBlockContent(e).clone().text()},initializeBrowseButtons:function(){var e,t=s.getBlockContent(l),n=r.rightButtonPlaceholder.inside(t).html(),t=r.leftButtonPlaceholder.inside(t).html();n.length<=0&&(e=r.rightButtonTemplate().clone(),r.rightButtonPlaceholder().html(e[0])),t.length<=0&&(e=r.leftButtonTemplate().clone(),r.leftButtonPlaceholder().html(e[0]))},"{leftToggler} change":function(e,t){var n=s.data(l),o=0!=e.val(),e=s.getBlockContent(l);(n.left=o)?r.leftLabel.inside(e).html(r.leftTextField().val()).removeClass("t-hidden"):r.leftLabel.inside(e).html("").addClass("t-hidden")},"{rightToggler} change":function(e,t){var n=s.data(l),o=0!=e.val(),e=s.getBlockContent(l);(n.right=o)?r.rightLabel.inside(e).html(r.rightTextField().val()).removeClass("t-hidden"):r.rightLabel.inside(e).html("").addClass("t-hidden")},"{leftTextField} keyup":a.debounce(function(e){var t=s.data(l),n=e.val(),e=s.getBlockContent(l);t.left_text=n,r.leftLabel.inside(e).html(n)}),"{rightTextField} keyup":a.debounce(function(e){var t=s.data(l),n=s.getBlockContent(l),e=e.val();t.right_text=e,r.rightLabel.inside(n).html(e)}),"{browseMedia} mediaSelect":function(e,t,n,o){var a,i;"image"==n.meta.type&&(a=s.getBlockContent(l),e=(i=e.data("eb-comparison-browse"))+"Image",(n=n.meta.variations[o.variation]).width<480||n.height<480||("left"==i&&r[e].inside(a).css("background-image","url("+o.url+")"),"right"==i&&r[e].inside(a).attr("src",o.url)))}}}),t.resolve()})}),EasyBlog.module("composer/blocks/handlers/dailymotion",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Dailymotion",{elements:["[data-dailymotion-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url}]"],defaultOptions:n.extend({"{form}":"> [data-dailymotion-form]","{insert}":"[data-dailymotion-insert]","{source}":"[data-dailymotion-source]","{loader}":"> [data-dailymotion-loader]","{player}":"iframe","{wrapper}":"[data-dailymotion-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=i.getOverlay(e);if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){var t=r.data(e),e=i.getOverlay(e);if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t.source},toHTML:function(e){r.data(e);e=e.data("overlay");if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(e)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):0==t.source.length&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change")},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){if(""==e)return!1;return/^(http|https):\/\/www\.dailymotion\.com\/video\/(.*)$/.test(e)},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},crawl:function(t,n){var o=r.data(n),e=r.getBlockContent(n),a=n.data("overlay");a&&a.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:t}).done(function(e){e=e[t];o.url=t,o.author={name:e.oembed.author_name,url:e.oembed.author_url},o.embed=e.oembed.html,o.width=e.oembed.width,o.height=e.oembed.height,i.setOverlay(n),i.updateFieldset(n)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading(),i.form.inside(e).addClass("hidden")})},"{insert} click":function(e){s.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(s),t=i.source.inside(t).val();r.data(s);i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide")},"{fluid} change":function(e,t){var n=1==e.val(),e=r.data(s);e.fluid=n,e.url&&(i.widthFieldset().toggleClass("hide",n),i.heightFieldset().toggleClass("hide",n),i.setWrapperLayout(s),i.getOverlay(s).refresh())},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/easysocial",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Easysocial",{elements:["[data-easysocial-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url|nocookie}]"],defaultOptions:n.extend({"{related}":"[data-easysocial-fieldset-related]","{form}":"> [data-easysocial-form]","{insert}":"[data-easysocial-insert]","{source}":"[data-easysocial-source]","{loader}":"> [data-easysocial-loader]","{errorMessage}":"[data-easysocial-error]","{player}":"iframe","{wrapper}":"[data-easysocial-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=e.data("overlay");if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){return r.data(e).source},toEditableHTML:function(e){return""},toHTML:function(e){r.data(e);e=e.data("overlay");if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(s)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):0==t.source.length&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.data(e);i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change"),i.related().val(e.related?"any":"same").trigger("change"),i.nocookie().val(1==e.nocookie?"1":"0").trigger("change")},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){return""!=e},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},hideForm:function(e){e=r.getBlockContent(e);i.form.inside(e).addClass("hidden"),i.loader.inside(e).removeClass("hidden")},showForm:function(e){e=r.getBlockContent(e);i.form.inside(e).removeClass("hidden"),i.loader.inside(e).addClass("hidden")},crawl:function(n,o){var a=r.data(o),e=(r.getBlockContent(o),o.data("overlay"));e&&e.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).done(function(e,t){e=e[n];if(e.oembed.error)return i.showForm(o),void i.errorMessage().removeClass("hide").html(t);a.url=n,a.author={name:e.oembed.author_name,url:e.oembed.author_url},a.embed=e.oembed.html,a.embed_nocookie=e.oembed.html_nocookie,a.embed_original=e.oembed.html,a.width=e.oembed.width,a.height=e.oembed.height,i.setOverlay(o),i.updateFieldset(o)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading()})},"{insert} click":function(e){var t;s.length<1?(t=i.block.of(e),r.activateBlock(t)):(t=r.getBlockContent(s),t=i.source.inside(t).val(),r.data(s),i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide"))},"{related} change":function(e,t){var n=r.data(s),o="any"==e.val(),a=s.data("overlay");n.related=o,a&&(a=(e=i.player.inside(a.element())).attr("src"),o||(a=a.replace("?feature=oembed","?feature=oembed&rel=0"),e.attr("src",a)),o&&(a=a.replace("&rel=0",""),e.attr("src",a)),n.source=a)},"{fluid} change":function(e,t){var n=1==e.val(),e=r.data(s);e.fluid=n,e.url&&(i.setWrapperLayout(s),i.widthFieldset().toggleClass("hide",n),i.heightFieldset().toggleClass("hide",n),i.getOverlay(s).refresh())},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();n.url&&0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")},"{nocookie} change":function(e,t){var n=r.data(s),e=1==e.val();n.nocookie=e,n.url&&(n.embed=e?n.embed_nocookie:n.embed_original,n.related||(n.embed=n.embed.replace("?feature=oembed","?feature=oembed&rel=0")),i.setOverlay(s))}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/facebook",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Facebook",{defaultOptions:{"{form}":"> [data-fb-form]","{embed}":"[data-fb-embed]","{source}":"[data-fb-source]","{preview}":"[data-fb-preview]","{input}":"[data-fb-source-input]","{update}":"[data-fb-update]","{errorMessage}":"[data-fb-error]"}},function(a,e,t,i,r,s,l){return{init:function(){r=a.blocks,i=r.composer,s=e.meta,l=n()},toData:function(e){return r.data(e)},toText:function(e){return r.data(e).source},toEditableHTML:function(e){return""},toHTML:function(e){r.data(e);e=e.data("overlay");if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);l=e,a.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?(o.empty(),a.createIframe(e,t.source)):o.html(s.html),e.find(a.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);a.populateUrl(e.source)},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=i.document.overlay.create(e),n=r.getBlockContent(e),o.placeholder().css("height","400px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},isUrlValid:function(e){return""!=e&&(!!/^https:\/\/(www|web)\.facebook\.com\/(.*)\/(.*)$/.test(e)||!!/^https:\/\/fb\.watch\/(.*)\/$/.test(e))},createIframe:function(e,t){var n=document.createElement("iframe");r.getBlockContent(e);r.data(e).source=t;var o=e.data("overlay");return o&&o.element().empty(),n.setAttribute("width","auto"),n.setAttribute("height","400"),n.setAttribute("src","https://www.facebook.com/plugins/post.php?href="+encodeURIComponent(t)+"&height=400"),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("allowTransparency","true"),a.setOverlay(e,n),n},"{embed} click":function(e,t){l.length<1&&(o=a.block.of(button),r.activateBlock(o));var n=r.getBlockContent(l),o=a.source.inside(n).val();r.data(l);a.isUrlValid(o)?(a.populateUrl(o),a.createIframe(l,o),a.form.inside(n).addClass("t-hidden")):a.errorMessage().removeClass("t-hidden")},populateUrl:function(e){a.input().val(e)},"{update} click":function(e,t){var n=r.getBlockContent(l),o=a.input().val();r.data(l);a.isUrlValid(o)?(a.createIframe(l,o),a.form.inside(n).addClass("t-hidden")):a.errorMessage.inside(n).removeClass("t-hidden")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/file",function(u){EasyBlog.Controller("Composer.Blocks.Handlers.File",{defaultOptions:{"{browseButton}":".eb-composer-placeholder-file [data-eb-mm-browse-button]","{fileError}":"[data-eb-file-error]","{placeholder}":"[data-eb-composer-file-placeholder]","{player}":"[data-file-preview]","{dropElement}":"[data-plupload-drop-element]","{showIcon}":"[data-file-fieldset-icon]","{showSize}":"[data-file-fieldset-size]","{changeButton}":"[data-panel-file-source-change-button]","{fileSourceIcon}":"[data-panel-file-source-icon]","{fileSourceName}":"[data-panel-file-source-name]","{fileSourceSize}":"[data-panel-file-source-size]","{fileName}":"[data-file-name]","{fileIconWrapper}":"[data-file-icon-wrapper]","{fileIcon}":"[data-file-icon]","{fileSize}":"[data-file-size]","{fileUrl}":"[data-file-url]","{sourceChangeButton}":"[data-eb-file-source-change-button]"}},function(c,e,t,s,d,n,i,o){return{init:function(){d=c.blocks,s=d.composer,n=e.meta,i=u(),o=EasyBlog.MediaManager},toData:function(e){var t=d.data(e),e=d.getBlockContent(e);c.getPreviewTemplate();return t.name=e.find(c.fileName).text(),t},toText:function(e){},toHTML:function(e){if(!d.data(e).url)return"";e=e.clone(),e=c.deconstruct(e);return d.getBlockContent(e).html()},constructFromMediaFile:function(e){var e=e.data("key"),e=o.getUri(e),n=d.createBlockContainer("file");d.getBlockContent(n),d.data(n);return n.addClass("is-loading"),o.getMedia(e).done(function(e){var t=e.meta,e=JSON.parse(t.params);c.createPreview(n,t.url,t.title,t.type,t.size,e.extension)}).fail(function(){}).always(function(){n.removeClass("is-loading")}),n},toLegacyHTML:function(e,t){return u("<a>").attr({href:e.url}).html(e.title).prop("outerHTML")},activate:function(e){i=e,c.populate(e)},deactivate:function(e){},construct:function(e){var t=d.createBlockContainer("file"),e=u.extend(d.data(t),e);return t},reconstruct:function(e){var t=d.data(e),n=c.placeholder.inside(e),o=c.dropElement.inside(n);t.url&&c.createPreview(e,t.url,t.name,t.type,t.size,t.extension),0<o.length&&EasyBlog.MediaManager.uploader.register(n)},deconstruct:function(e){var t=d.getBlockContent(e);return c.fileName.inside(t).editable(!1),e},refocus:function(e){},reset:function(e){},populate:function(e){var t=d.data(e),n=1==t.showicon?1:0,e=1==t.showsize?1:0;c.showIcon().val(n).trigger("change"),c.showSize().val(e).trigger("change"),d.panel.fieldgroup.get("file").toggleClass("is-new",!t.url),c.updateFileSource()},getPreviewTemplate:function(){u(n.preview);return u(n.preview)},getVideoExtensions:function(){return["mp4","swf","flv","mov","f4v","3gp","m4v","webm","ogv"]},getImageExtensions:function(){return["jpg","png","gif","bmp","jpeg","webp","jfif"]},getAudioExtensions:function(){return["mp3","m4a","aac","ogg","wav","wma"]},getCodeExtensions:function(){return["c","cgi","pl","class","cpp","cs","h","java","js","json","php","py","sh","html","css","r","xml","sql"]},getIcon:function(e){var t="pptx"==e?"fdi fas fa-file-powerpoint":"docx"==e?"fdi fas fa-file-word":"csv"==e?"fdi fas fa-file-csv":"zip"==e?"fdi fas fa-file-archive":"pdf"==e?"fdi fas fa-file-pdf":"fdi fa fa-file";return-1!==u.inArray(e,c.getAudioExtensions())&&(t="fdi fas fa-file-audio"),-1!==u.inArray(e,c.getCodeExtensions())&&(t="fdi fas fa-file-code"),-1!==u.inArray(e,c.getImageExtensions())&&(t="fdi fas fa-file-image"),t=-1!==u.inArray(e,c.getVideoExtensions())?"fdi fas fa-file-video":t},updateFileSource:function(){var e=d.data(i),t=c.getIcon(e.extension),n=e.name,e=u.plupload2.formatSize(e.size);c.fileSourceIcon().removeClass().addClass(t),c.fileSourceName().html(n),c.fileSourceSize().html(e)},createPreview:function(e,t,n,o,a,i){var r=d.getBlockContent(e),s=c.getPreviewTemplate(),l=d.data(e);EasyBlog.ajax("site/views/composer/abs2rel",{url:t}).done(function(e){l.url=e,l.name=n,l.type=o,l.size=a,l.extension=i,s.attr("id",l.uid),c.fileName.inside(s).text(l.name);e=u.plupload2.formatSize(l.size);c.fileSize.inside(s).text(e),c.fileUrl.inside(s).attr("href",l.url).on("click",function(e){e.preventDefault()}),c.updateFileSource(),d.panel.fieldgroup.get("file").removeClass("is-new");e=c.getIcon(i);c.fileIcon.inside(s).addClass(e),r.html(s),l.showicon||c.fileIconWrapper.inside(s).addClass("hide"),l.showsize||c.fileSize.inside(s).parent("div").addClass("hide")})},"{showIcon} change":function(e,t){var n=d.getBlockContent(i),o=d.data(i);o.showicon=1==e.val(),o.showicon?c.fileIconWrapper.inside(n).removeClass("hide"):c.fileIconWrapper.inside(n).addClass("hide")},"{showSize} change":function(e,t){var n=d.getBlockContent(i),o=d.data(i);o.showsize=1==e.val(),o.showsize?c.fileSize.inside(n).parent("div").removeClass("hide"):c.fileSize.inside(n).parent("div").addClass("hide")},"{placeholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{placeholder} mediaUploaderFileUploaded":function(e,t,n,o,a){var i=a.response.media.meta,r=d.block.of(e),s=JSON.parse(i.params);setTimeout(function(){c.createPreview(r,i.url,i.title,i.type,i.size,s.extension)},600)},"{placeholder} mediaUploaderFileError":function(e,t,n,o){o.code==u.plupload2.FILE_EXTENSION_ERROR&&c.fileError.inside(i).removeClass("hide")},"{placeholder} mediaUploaderError":function(e,t,n,o){},"{self} mediaInfoDisplay":function(e,t,n,o){"file"==o.meta.type&&u(n).find("[data-file-url]").on("click",function(e){e.preventDefault()})},onMediaSelect:function(e,t){var n,o,a=!1;"pdf"!=t.meta.type&&"file"!=t.meta.type&&"image"!=t.meta.type||(a=!0,"pdf"==t.meta.type&&t.data.previewer&&(a=!1,e=d.constructBlock("pdf",{name:t.data.title,url:t.meta.url,height:t.data.height}),d.addBlockAfter(e,i),d.activateBlock(e),d.removeBlock(i))),a&&(n=t.meta,a=(o=s.document).isLegacy(),t=JSON.parse(n.params),a?(content=c.toLegacyHTML(e),o.insertContent(content)):c.createPreview(e,n.url,n.title,n.type,n.size,t.extension))},"{changeButton} mediaSelect":function(e,t,n){var o=d.getBlockContent(i);d.data(i);o.empty(),c.onMediaSelect(i,n)},"{browseButton} mediaSelect":function(e,t,n){e=d.block.of(e);c.onMediaSelect(e,n)},"{self} mediaInsert":function(e,t,n,o,a,i){var r;"file"==n.meta.type&&((r=s.document).isLegacy()?(content=c.toLegacyHTML(n.meta,o),r.insertContent(content)):(o=d.constructBlock("file",{name:a.title,type:n.meta.extension,size:n.meta.size,url:n.meta.url,showicon:a.showicon,showsize:a.showsize}),d.addBlock(o),i||d.activateBlock(o)))}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/gallery",function(i){function r(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}function h(e){if(i.isNumeric(e))return e;e=e.split(":");return e[0]/e[1]}var e=this,s="view-selectratio",l="view-customratio";EasyBlog.require().script("site/vendors/swiper").done(function(f){EasyBlog.Controller("Composer.Blocks.Handlers.Gallery",{elements:["[data-eb-gallery-{items-fieldset|list|list-item-group|list-item|list-item-icon|list-item-title|list-item-primary-label|list-item-delete-button|list-item-primary-button}]","[data-eb-gallery-{size-fieldset|strategy-field|strategy-menu-item}]","[data-eb-gallery-{ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|ratio-selection|ratio-input}]"],defaultOptions:{"{galleryUploadPlaceholder}":".eb-gallery-upload-placeholder","{galleryContainer}":".eb-gallery","{galleryViewport}":".eb-gallery-viewport","{galleryItem}":".eb-gallery-item:not(.is-placeholder)","{galleryStage}":".eb-gallery-stage","{galleryNextButton}":".eb-gallery-next-button","{galleryPrevButton}":".eb-gallery-prev-button","{galleryMenu}":".eb-gallery-menu","{galleryMenuItem}":".eb-gallery-menu-item","{galleryImage}":".ebd-block[data-type=image]","{galleryItemPlaceholder}":".eb-gallery-item.is-placeholder","{galleryMenuItemPlaceholder}":".eb-gallery-menu-item.is-placeholder","{galleryBrowseButton}":"[data-eb-gallery-browse]","{galleryProgressBar}":"[data-eb-mm-upload-progress-bar]"}},function(c,e,t,a,d,n,u,o,p){return{init:function(){d=c.blocks,a=d.composer,n=e.meta,u=f(),d.dimensions,mediaManager=EasyBlog.MediaManager,mediaUploader=mediaManager.uploader,p=d.getBlockHandler("image")},normalize:function(e){return f.extend({},n.data,e)},activate:function(e){u=e,c.populate(e);e=c.listItemGroup();e.hasClass("ui-sortable")||e.sortable({items:c.listItem.selector,tolerance:"pointer",refreshPositions:!0,update:function(e,t){var n=[],o=[];activeId=0,c.listItem().each(function(){var e=f(this),t=e.attr("data-id");e.hasClass("active")&&(activeId=t);t=c.galleryItem().where("id",t);n.push(t[0]),o.push(t[0])});var a=c.galleryViewport.inside(u),i=c.galleryContainer.inside(u),r=(c.galleryItemPlaceholder.inside(u),c.galleryMenuItemPlaceholder.inside(u));f.each(n.reverse(),function(e,t){a.prepend(t)}),f.each(o,function(e,t){var n=f(t).attr("data-id");c.galleryMenuItem.inside(u).where("id",n).remove();t=c.getGalleryMenuItemTemplate(n);t.attr("data-id",n).insertBefore(r),activeId&&n==activeId&&t.addClass("active")}),EasyBlog.ImageGallery.setLayout(i)}})},deactivate:function(e){},construct:function(e){return d.createBlock("gallery")},constructGallery:function(o,e){var t=c.galleryContainer.inside(o);c.galleryItemPlaceholder.inside(o),c.galleryMenuItemPlaceholder.inside(o),d.data(o);void 0===p&&(p=d.getBlockHandler("image"));var a=0;f.each(e,function(e,t){var n=f.uid("g");c.createGalleryItem(o,t,n),0==a&&c.setPrimary(n),a++}),EasyBlog.ImageGallery.setLayout(t)},createGalleryItem:function(e,t,n){var o=c.galleryContainer.inside(e),a=c.galleryItemPlaceholder.inside(e),i=c.galleryMenuItemPlaceholder.inside(e),r=d.data(e),s=t.meta,l=t.uri;void 0===p&&(p=d.getBlockHandler("image"));t=c.getGalleryItemTemplate();t.attr("data-id",n),t.insertBefore(a),c.getGalleryMenuItemTemplate(n).attr("data-id",n).insertBefore(i),o.removeClass("is-empty");o=c.createGalleryImage(e,s);t.html(o);l=mediaManager.getVariation(l,"icon");r.items[n]={title:s.title,iconUrl:l.url},p.normalizeImageSize(o),e.is(u)&&c.populateList(e)},reconstruct:function(e){e.editable(!1);var t=c.galleryUploadPlaceholder.inside(e);t.find("[data-plupload-browse-button]").attr("style",function(e,t){return t&&t.replace(/z\-index[^;]+;?/g,"")});mediaUploader.register(t);c.populateDataItems(e)},deconstruct:function(e){var t=d.data(e),n=d.getBlockContent(e),o=c.galleryContainer.inside(e);c.galleryItemPlaceholder.inside(o).remove(),c.galleryMenuItemPlaceholder.inside(o).remove();var a=c.galleryItem.inside(o),i=a.where("id",t.primary);a.removeClass("active"),i.addClass("active"),c.galleryMenuItem.inside(o).removeClass("active").where("id",t.primary).addClass("active"),EasyBlog.ImageGallery.setLayout(o);i=c.getGalleryItemIndex(e,i),i=0!=(i=i<0?0:i)?i:0;return c.galleryViewport.inside(o).attr("data-eb-gallery-initial-slide",i),n.html(o),e},refocus:function(e){},reset:function(e){},populate:function(e){c.populateDataItems(e),c.populateRatio(e),c.populateResizeStrategy(e),c.populateList(e)},populateDataItems:function(e){var n=d.data(e);f.each(n.itemsKeyArray,function(e,t){n.items[t]=n.itemsArray[e]}),c.uploadedItems=n.itemsArray.length},toData:function(e){var t,n=d.data(e);for(t in n.itemsArray=[],n.itemsKeyArray=[],n.items)n.items.hasOwnProperty(t)&&(n.itemsArray.push(n.items[t]),n.itemsKeyArray.push(t));return n},toText:function(e){},toHTML:function(e){e=e.clone(),e=c.deconstruct(e);return d.getBlockContent(e).html()},toLegacyHTML:function(e){var o=[];return f.each(e,function(e,t){var n=JSON.parse(t.meta.params),n={namespace:t.uri,caption_text:n.caption_text,alt_text:n.alt_text};o.push(n)}),"[embed=gallery]"+JSON.stringify(o)+"[/embed]"},getGalleryItemTemplate:function(){return f(n.galleryItem)},getGalleryMenuItemTemplate:function(e){var t=f(n.galleryMenuItem);return t.data("id",e),t},createGalleryListItem:function(){return f(n.galleryListItem)},createGalleryPlaceholder:function(){return f(n.galleryPlaceholder)},createGalleryImage:function(e,t){var n=d.data(e),o=JSON.parse(t.params),a=t.uri,i=mediaManager.getVariation(a,n.imageVariation),r=i.width,s=i.height,l=r/s,e=void 0!==o.extension?o.extension:"",n={uri:a,url:i.url,key:i.key,mode:"advanced",mode_lock:!0,fluid:!0,width:"100%",width_lock:!0,height:"100%",height_lock:!0,ratio:h(n.ratio),strategy:n.strategy,element_ratio:l,extension:e,natural_width:r,natural_height:s,natural_ratio:l,caption_enabled:!0,caption_text:o.caption_text,alt_text:o.alt_text,link_enabled:!1,style_enabled:!1,popup_enabled:!1,variation:n.imageVariation};return"webp"==e&&void 0!==t.fallbackItem&&(n.fallbackItem=t.fallbackItem.meta),d.constructNestedBlock("image",n).addClass("is-isolated")},"{galleryUploadPlaceholder} mediaUploaderFilesAdded":function(e,t,n,o){var i=d.block.of(e),r=c.galleryContainer.inside(i),s=c.galleryItemPlaceholder.inside(i),l=c.galleryMenuItemPlaceholder.inside(i);e.addClass("state-uploading"),c.addedItems=o.length,f.each(o,function(e,t){var n=t.id,o=f.uid("g"),a=c.getGalleryItemTemplate();a.attr("data-file-id",n).attr("data-id",o);n=c.createGalleryPlaceholder();a.html(n),a.insertBefore(s),c.galleryMenuItem.inside(i).removeClass("active"),c.getGalleryMenuItemTemplate(o).attr("data-id",o).insertBefore(l).addClass("active"),mediaUploader.addItem(t,n),r.removeClass("is-empty")}),EasyBlog.ImageGallery.setLayout(r)},uploadedItems:0,addedItems:0,"{galleryUploadPlaceholder} mediaUploaderBeforeUpload":function(){a.trigger("composerSubmitLock")},"{galleryUploadPlaceholder} mediaUploaderUploadComplete":function(){a.trigger("composerSubmitUnlock")},"{galleryUploadPlaceholder} mediaUploaderFileUploaded":function(o,e,t,a,i){void 0===p&&(p=d.getBlockHandler("image"));var r=a.id,s=i.response.media.meta,l=d.block.of(o),i=d.data(l);setTimeout(function(){var e=c.galleryItem().where("fileId",r).removeAttr("data-file-id"),t=e.attr("data-id");mediaUploader.removeItem(a,e);var n=c.createGalleryImage(l,s);e.html(n);e=s.uri,e=mediaManager.getVariation(e,"icon");i.items[t]={title:s.title,iconUrl:e.url},p.normalizeImageSize(n),l.is(u)&&c.populateList(l),0==c.uploadedItems&&c.setPrimary(t),c.uploadedItems+=1;t=c.uploadedItems/c.addedItems*100;o.find(c.galleryProgressBar).css("width",t+"%"),100==t&&setTimeout(function(){o.find(c.galleryProgressBar).css("width","0%"),c.uploadedItems=0,c.addedItems=0,o.removeClass("state-uploading")},1e3)},600)},setPrimary:function(e){var t=c.galleryItem().where("id",e),n=c.galleryMenuItem().where("id",e),t=d.block.of(t);d.data(t).primary=e,c.populateList(t),c.galleryMenuItem.inside(t).removeClass("active"),n.addClass("active")},setRatio:function(e,t){var n;d.data(e).ratio=t,c.galleryStage.inside(e).css("padding-top",r(1/h(t)*100,n||3)+"%"),c.galleryImage.inside(e).each(function(){var e=f(this);p.setImageRatio(e,h(t))})},updateRatio:function(e,t){c.setRatio(e,t),c.populateRatio(e)},populateRatio:function(e){e=d.data(e).ratio;c.ratioLabel().html(e)},"{ratioButton} click":function(e){c.sizeFieldset().switchClass(s)},"{ratioCustomizeButton} click":function(e){c.sizeFieldset().switchClass(l)},"{ratioCancelButton} click":function(e){c.sizeFieldset().removeClass(s)},"{ratioCancelCustomButton} click":function(e){c.sizeFieldset().switchClass(s)},"{ratioOkCustomButton} click":function(e){c.sizeFieldset().removeClass(l)},"{ratioUseCustomButton} click":function(e){var t=function(e){if(e=i.trim(e),/\:/.test(e)){var t=e.split(":");return parseInt(t[0])+":"+parseInt(t[1])}return parseFloat(e)||0}(c.ratioInput().val());0!=t&&(c.updateRatio(u,t),c.ratioSelection().removeClass("active"),c.sizeFieldset().removeClass(l))},"{ratioSelection} click":function(e){c.ratioSelection().removeClass("active"),e.addClass("active"),c.sizeFieldset().removeClass(s);e=e.data("value");c.updateRatio(u,e)},setResizeStrategy:function(e,n){d.data(e).strategy=n,c.galleryImage.inside(e).each(function(e){var t=f(this);(p=void 0===p?d.getBlockHandler("image"):p).resizeToViewport(t,n)})},updateResizeStrategy:function(e,t){c.setResizeStrategy(e,t),c.populateResizeStrategy(e)},populateResizeStrategy:function(e){e=d.data(e).strategy;c.strategyMenuItem().removeClass("active").where("strategy",e).addClass("active")},"{strategyMenuItem} click":function(e){e=e.data("strategy");c.updateResizeStrategy(u,e)},listItems:{},populateList:function(e){var a=d.data(e),e=c.galleryItem.inside(e),i=[];e.each(function(){var e,t=f(this),n=t.attr("data-id"),o=a.items[n];o&&c.galleryImage.inside(t).length&&((e=c.listItems[n])||((e=c.createGalleryListItem()).attr("data-id",n),c.listItemTitle.inside(e).text(o.title),c.listItemIcon.inside(e).attr("src",o.iconUrl),c.listItems[n]=e),n=n==a.primary,e.toggleClass("is-primary",n).toggleClass("active",t.hasClass("active")),i.push(e))}),c.itemsFieldset().toggleClass("is-empty",!i.length),c.listItemGroup().empty().append(i),c.swiper.init()},"{listItem} click":function(e){var t=e.data("id");c.listItem().removeClass("active"),e.addClass("active");e=c.galleryItem().where("id",t),t=c.getGalleryItemIndex(u,e),e=c.galleryContainer.of(e);EasyBlog.ImageGallery.go(e,t),c.swiper.init(),c.swiper.slideTo(t)},getGalleryItemIndex:function(e,t){return c.galleryViewport.of(t).find(c.galleryItem.selector).index(t)},swiper:{init:function(){var e=u.attr("data-uid"),t=c.galleryContainer.inside(u).closest(".ebd-block[data-type=gallery][data-uid="+e+"]"),n=t.find("[data-eb-gallery-container]"),o=t.find(".eb-gallery-menu"),a=t.find(".eb-gallery-button.eb-gallery-next-button"),i=t.find(".eb-gallery-button.eb-gallery-prev-button"),r=t.data("swiper"),e=n.find(".eb-gallery-viewport").data("eb-gallery-initial-slide"),e=0<e?e:0;if(r)return r.update(),r;r=new Swiper(f(n),{pagination:{el:o,clickable:!0},navigation:{nextEl:a,prevEl:i},initialSlide:e});t.data("swiper",r)},slideTo:function(e){c.swiper.init().slideTo(e,!1,!1)}},"{listItemDeleteButton} click":function(e){var t,n,o,a=c.listItem(".active");a.length&&(n=a.data("id"),(o=(t=c.galleryItem().where("id",n)).prev()).length&&(o=o.next()),a=d.block.of(t),t.remove(),c.galleryMenuItem().where("id",n).remove(),n=c.galleryContainer.inside(a),o=c.getGalleryItemIndex(o),EasyBlog.ImageGallery.setLayout(n),EasyBlog.ImageGallery.go(n,o),c.populateList(a))},"{listItemPrimaryButton} click":function(e){var t=c.listItem(".active");t.length&&(t=t.data("id"),c.setPrimary(t))},hasThumbnails:function(e){return!1},"{galleryBrowseButton} mediaSelect":function(e,t,n,o){"image"==n.meta.type&&c.constructGallery(u,[n])},"{self} mediaInsertGallery":function(e,t,n){var o;a.document.isLegacy()?(o=c.toLegacyHTML(n),a.document.insertContent(o)):(o=d.constructBlock("gallery",n),d.addBlock(o),c.constructGallery(o,n))},"{self} composerBlockDuplicate":function(e,t,a,n){var i;"gallery"==d.getBlockType(a)&&(a.removeAttr("data-uid"),d.setBlockUid(a),n=d.data(n),n=f.extend(!0,{},n),d.setBlockData(a,n),i=d.data(a),f.each(i.itemsKeyArray,function(e,t){var n=i.items[t],o=f.uid("g");t==i.primary&&(i.primary=o),delete i.items[t],delete i.itemsArray[t],delete i.itemsKeyArray[e],i.items[o]=n,i.itemsArray[o]=n,i.itemsKeyArray[e]=o,a.find("[data-id="+t+"]").attr("data-id",o)}))}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/giphy",function(c){EasyBlog.Controller("Composer.Blocks.Handlers.Giphy",{defaultOptions:{"{browseButton}":"[data-giphy-browse]","{browser}":"[data-giphy-browser]","{item}":"[data-giphy-item]","{gifsTab}":"[data-giphy-gifs-tab]","{stickersTab}":"[data-giphy-stickers-tab]","{container}":"[data-giphy-container]","{search}":"[data-giphy-search]","{trending}":"[data-giphy-trending]","{gifsList}":"[data-gifs-list]","{stickersList}":"[data-stickers-list]","{imgElement}":"[data-giphy-item-preview] img","{aElement}":"[data-giphy-item-preview] a","{alignment}":"[data-giphy-alignment-fieldset]","{alignmentItem}":"[data-alignment-item]"}},function(r,e,t,a,s,l,i){return{init:function(){s=r.blocks,a=s.composer,l=e.meta,i=c()},toData:function(e){return s.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){s.getBlockContent(e);var t=s.data(e);i=e,r.populate(t)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e);t.url&&r.setGiphyItem(t.url,t.alignment,e)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){var t;r.initialized.gifs||(t=r.browser().find("[data-gifs-list]"),r.initialized.gifs=!0,r.loadGiphy("","gifs",t)),r.updateAlignmentFieldset(void 0,e.alignment),r.alignment().addClass("t-d--none"),e.url&&r.alignment().removeClass("t-d--none")},initialized:{gifs:!1,stickers:!1},loadGiphy:function(e,n,o){var a=s.data(i);r.container().addClass("is-loading"),r.container().removeClass("is-empty"),o.html(""),EasyBlog.ajax("site/views/giphy/search",{query:e,type:n}).done(function(e,t){r.container().removeClass("is-loading"),e?(a.currentView==n&&o.removeClass("t-d--none"),o.html(t)):r.container().addClass("is-empty")})},"{gifsTab} click":function(e,t){var n=s.data(i);n.currentView="gifs",r.show(e,"gifs"),r.search().val(n.currentQuery.gifs),r.hide("stickers")},"{stickersTab} click":function(e,t){var n=s.data(i);n.currentView="stickers",r.initialized.stickers||(r.initialized.stickers=!0,r.loadGiphy("","stickers",r.stickersList())),r.show(e,"stickers"),r.search().val(n.currentQuery.stickers),r.hide("gifs")},show:function(e,t){var n=r.browser().find("[data-"+t+"-list]"),t=r.browser().find("[data-"+t+"-panel]");e.addClass("active"),t.addClass("active"),n.removeClass("t-d--none")},hide:function(e){var t=r.browser().find("[data-giphy-"+e+"-tab]"),n=r.browser().find("[data-"+e+"-panel]"),e=r.browser().find("[data-"+e+"-list]");t.removeClass("active"),n.removeClass("active"),e.addClass("t-d--none")},setAlignment:function(e,t){var n=s.data(i);/left|right/.test(t)&&(e.css("float",t),i.css("text-align","")),/center/.test(t)&&(e.css("float",""),i.css("text-align","center")),n.alignment=t},updateAlignmentFieldset:function(e,t){t=t||"center",e=void 0===e?r.alignment().find('[data-alignment-item][data-type="'+t+'"]'):e,r.alignmentItem().removeClass("active"),e.addClass("active")},"{alignmentItem} click":function(e,t){var n=s.getBlockContent(i).find("[data-giphy-item-preview]"),o=e.data("type");r.updateAlignmentFieldset(e,o),r.setAlignment(n,o)},"{item} click":function(e,t){var n=s.data(i),e=e.data("original");n.url=e,r.setGiphyItem(e,"center",i),r.updateAlignmentFieldset(void 0,"center"),r.alignment().removeClass("t-d--none")},"{browseButton} click":function(e,t){var n=a.manager(),o=n.find("[data-eb-composer-toggle-sidebar]");n.addClass("is-sidebar-open"),o.addClass("is-active")},setGiphyItem:function(e,t,n){var o=s.getBlockContent(n),a=c(l.preview),n=r.imgElement.inside(a),i=r.aElement.inside(a);n.attr("src",e),o.empty().append(a),i.addClass("is-loading"),n.off("load").on("load",function(){i.removeClass("is-loading")}),r.setAlignment(a.find("[data-giphy-item-preview]"),t)},"{search} keyup":c.debounce(function(e,t){var n=s.data(i),o=e.val(),a=r.trending(),e=n.currentView;n.currentQuery[e]=o;n=r.browser().find("[data-"+e+"-list]");n.addClass("t-d--none"),a.removeClass("t-d--none"),""!=o&&a.addClass("t-d--none"),r.loadGiphy(o,e,n)},500)}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/gist",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Gist",{defaultOptions:l.extend({"{form}":"> [data-gist-form]","{insert}":"[data-gist-insert]","{source}":"[data-gist-source]","{preview}":"[data-gist-preview]","{fsSource}":"[data-fs-gist-source]","{fsRefreshButton}":"[data-fs-gist-refresh]","{errorMessage}":"[data-gist-error]"},EBD.selectors)},function(a,e,t,i,r,s,n){return{init:function(){r=a.blocks,i=r.composer,s=e.meta,n=l()},toData:function(e){return r.data(e)},toText:function(e){return r.data(e).source},toEditableHTML:function(e){return""},toHTML:function(e){r.data(e);e=e.data("overlay");if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);n=e,a.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?(o.empty(),a.createIframe(e,t.source)):o.html(s.html),e.find(a.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);a.fsSource().val(e.source)},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=i.document.overlay.create(e),n=r.getBlockContent(e),o.placeholder().css("height","400px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/gist\.github\.com\/(.*)\/(.*)$/.test(e)},createIframe:function(e,t){var n=document.createElement("iframe"),o=r.getBlockContent(e);r.data(e).source=t,n.setAttribute("width","100%"),n.id="gistFrame",a.setOverlay(e,n);e='<html><body onload="parent.'+l.callback(function(e){e+="px",o.find("iframe").css("height",e)})+'(document.body.scrollHeight);"><script type="text/javascript" src="'+t+'.js"><\/script></body></html>',t=n.document;return n.contentDocument?t=n.contentDocument:n.contentWindow&&(t=n.contentWindow.document),t.open(),t.writeln(e),t.close(),n},"{insert} click":function(e){n.length<1&&(t=a.block.of(e),r.activateBlock(t));var e=r.getBlockContent(n),t=a.source.inside(e).val();r.data(n);a.isUrlValid(t)?(a.fsSource().val(t),a.createIframe(n,t),a.form.inside(e).addClass("hidden")):a.errorMessage().removeClass("hide")},"{fsRefreshButton} click":function(){var e=r.getBlockContent(n),t=a.fsSource().val();r.data(n);a.isUrlValid(t)?(a.createIframe(n,t),a.form.inside(e).addClass("hidden")):a.errorMessage.inside(e).removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/heading",function(a){EasyBlog.Controller("Composer.Blocks.Handlers.Heading",{defaultOptions:{"{headingElement}":"h1, h2, h3, h4, h5, h6","{levelSelection}":"[data-eb-composer-block-heading-level] [data-level]"}},function(i,e,t,n,r,o,s){return{init:function(){r=i.blocks,r.composer,o=e.meta,s=a()},activate:function(e){var t;s=e,content=i.getContent(e),content=a.trim(content),content==o.data.default&&(t=r.getBlockContent(e),i.headingElement.inside(t).html("<br>").focus()),i.toggleFontSizeMenu(!1),i.populate(e)},deactivate:function(e){content=i.getContent(e),content=a.trim(content),0!=content.length&&" "!=content||(e=r.getBlockContent(e),i.headingElement.inside(e).html(o.data.default)),i.toggleFontSizeMenu(!0)},construct:function(e){return a.create(e.level).html(e.content)},reconstruct:function(e){},deconstruct:function(e,t){return t&&(e=e.clone()),i.headingElement.inside(e).editable(!1),e},refocus:function(e){},reset:function(e){e.html(o.content)},populate:function(e){e=i.level(e);i.levelSelection().where("level",e).activateClass("active")},toggleFontSizeMenu:function(e){var t=a("[data-eb-font-size-menu]");1==e?t.show():t.hide()},toData:function(e){return r.getData(e)},toHTML:function(e){e=r.getBlockContent(e);return i.deconstruct(e,!0).html()},toText:function(e){return e.text()},heading:{inside:function(e){return e.children(":first")}},getHeading:function(e){e=r.getBlockContent(e);return i.headingElement.inside(e)},level:function(e,t){var n=r.getBlockContent(e),o=i.headingElement.inside(n),a=o.tagName();return t&&a!==t&&(n.html(i.construct({level:t,content:o.html()})),i.headingElement.inside(e).editable(!0),a=t),a},getContent:function(e){var t=i.getHeading(e),e=t.text();return e="Â "==e?t.text():e},updateFontFamily:function(e,t){i.getHeading(e).css("fontFamily",t)},setLevel:function(e,t){t=i.level(e,t),t=i.headingElement.inside(e),t=[e,i,t];i.trigger("composerBlockHeadingSetLevel",t),i.trigger("composerBlockChange",t)},previewLevel:function(e,t){clearTimeout(i.previewTimer);var n=i.headingElement.inside(e),o=n.tagName();e.defineData("originalLevel",o).addClass("is-preview"),i.level(e,t);n=[e,i,n];i.trigger("composerBlockHeadingPreviewLevel",n),i.trigger("composerBlockChange",n)},previewTimer:null,"{levelSelection} mouseover":function(e){e.data("level")},"{levelSelection} mouseout":function(e){clearTimeout(i.previewTimer),i.previewTimer=setTimeout(function(){var e=s.data("originalLevel");e&&i.setLevel(s,e)},50)},"{levelSelection} click":function(e){e=e.data("level");i.setLevel(s,e),i.refocus(s)},"{self} composerBlockFontFamilyUnpreview":function(e,t,n,o){s.data("uid")==o.data("uid")&&i.updateFontFamily(s,n)},"{self} composerBlockFontFamilyPreview":function(e,t,n,o,a){s.data("uid")==a.data("uid")&&i.updateFontFamily(s,n)},"{self} composerBlockFontFamilyChange":function(e,t,n,o){s.data("uid")==o.data("uid")&&i.updateFontFamily(s,n)},"{self} composerBlockHeadingSetLevel":function(e,t,n,o,a){clearTimeout(i.previewTimer),n.removeClass("is-preview").removeData("originalLevel"),n.is(s)&&i.populate(n)},"{self} composerBlockDuplicate":function(e,t,n,o){"heading"!=r.getBlockType(n)||(o=o.attr("style"))&&n.attr("style",o)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/html",function(e){var t=this;EasyBlog.require().library("ace").done(function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Html",{defaultOptions:{"{pre}":"[data-eb-composer-blocks-html-pre]","{imageWidth}":"[data-html-width]","{imageWidthTextField}":"#imageWidth","{imageHeight}":"[data-html-height]","{imageHeightTextField}":"#imageHeight"}},function(a,e,t,o,i,r,s){return{init:function(){i=a.blocks,o=i.composer,r=e.meta,s=l(),syncing=!1,sessionSync=!1},activate:function(e){s=e,a.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){},deconstruct:function(e){},refocus:function(e){},reset:function(e){},toText:function(e){i.data(e);e=e.clone();return i.getBlockContent(e).text()},toData:function(e){return i.data(e)},toHTML:function(e){i.data(e);e=e.clone(),e=i.getBlockContent(e);return a.editor().getSession().setValue(e.html()),e.html()},editor:function(){var e=o.find(a.pre)[0];null==e&&(e=l.create("pre")[0]);e=ace.edit(e);e.setTheme("ace/theme/github");var n=e.getSession();return n.setMode("ace/mode/html"),sessionSync||(n.on("change",l.debounce(function(){var e=i.data(s),t=n.getValue();""==(e.original=t)||(t=l("<div>"+t+"</div>")).find(".ebd-block").length&&(t.find(".ebd-block").removeClass("ebd-block"),t=l(t).html(),e.original=t,n.setValue(t)),a.sync(e.original)},500)),sessionSync=!0),e},populate:function(e){var t=a.editor().getSession(),n=i.getBlockContent(e),o=l.trim(n.html());""==o&&(o=r.html);n=i.data(e);n.original?t.setValue(n.original):t.setValue(o),a.populateFieldsetValue(e),s=e},populateFieldsetValue:function(e){e=i.data(e);a.imageWidth().val(e.imageWidth),a.imageHeight().val(e.imageHeight)},"{imageWidthTextField} keyup":l.debounce(function(e){var t=i.data(s),e=e.val();i.getBlockContent(s);t.imageWidth=e}),"{imageHeightTextField} keyup":l.debounce(function(e){var t=i.data(s),e=e.val();i.getBlockContent(s);t.imageHeight=e}),sync:function(e){var t;syncing||(syncing=!0,t=i.getBlockContent(s),0<e.length&&t.html(e),syncing=!1)},reset:function(e){}}}),t.resolve()})}),EasyBlog.module("composer/blocks/handlers/image",function(p){function g(e){return e.toString().match("%")?"%":"px"}function n(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}function v(e){if(p.isNumeric(e))return e;if(null==e)return"1:1";e=e.toString().split(":");return e[0]+":"+e[1]}function b(e,t){return n(1/v(e)*100,t||3)+"%"}function f(e,t){return n(100*e,t||3)+"%"}function y(e,t){return e.css("width",t)}function k(e,t){return e.css("padding-top",t)}function w(e,t){return e.css("height",t)}var e=this,i=/fit|fill/,C="is-fluid",o="is-loading",x=p.Image.resizeWithin,B=p.Image.resizeToFill;EasyBlog.require().library("plupload2","imgareaselect").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Image",{elements:["[data-eb-composer-image-{placeholder|browse-button}]","[data-eb-image-{url-fieldset|url-field|url-field-text|url-field-update-button}]","[data-eb-image-{source-fieldset|source-field|source-thumbnail|source-title|source-size|source-url|source-change-button}]","[data-eb-image-{variation-field|variation-list-container|variation-new-button|variation-create-button|variation-rebuild-button|variation-delete-button|variation-cancel-button|variation-cancel-failed-button}]","[data-eb-image-source-fieldset] [data-eb-mm-{variation-list|variation-list-item-group|variation-item}]","[data-eb-image-{variation-name|variation-width|variation-height}]","[data-eb-image-{ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|ratio-selection|ratio-preview|ratio-input}]","[data-eb-image-{map|map-container|map-figure|map-viewport|map-preview|map-picker}]","[data-eb-image-{strategy-menu-item|strategy-menu-content}]","[data-eb-image-{resize-input-field|resize-ratio-lock|resize-reset-button}]","[data-eb-image-{style-toggle|style-selection}]","[data-eb-image-{caption-toggle|caption-text-field|caption-alignment}]","[data-eb-image-{alt-toggle|alt-text-field}]","[data-eb-image-{popup-toggle|popup-fieldset|popup-field|popup-thumbnail|popup-title|popup-size|popup-url|popup-change-button}]","[data-eb-image-{popup-variation-field|popup-variation-list-container}]","^popup [data-eb-image-popup-fieldset] [data-eb-mm-{variation-list|variation-list-item-group|variation-item}]"],defaultOptions:p.extend({uploader:{runtimes:"html5,flash",url:"/echo/json",max_file_size:"10mb",filters:[{title:"Image files",extensions:"jpg,gif,png"}]},"{browseButton}":".eb-composer-placeholder-image [data-eb-mm-browse-button]","{urlButton}":".eb-composer-placeholder-image [data-eb-insert-url-button]","{imagePlaceholder}":"[data-eb-composer-image-placeholder]","{imageContainer}":".eb-image","{imageFigure}":".eb-image-figure","{imageViewport}":".eb-image-viewport","{imageElement}":".eb-image-figure img","{imagePopupButton}":".eb-image-popup-button","{imageCaption}":".eb-image-caption","{imageCaptionText}":"[data-image-caption-text]","{imageHint}":".eb-image-hint","{pictureElement}":".eb-image-figure picture","{fieldsets}":"[data-eb-image-fieldset]","{imageSizeFieldset}":"[data-eb-image-fieldset-size]","{responsive}":"[data-eb-image-responsive]","{width}":"[data-eb-image-width]","{height}":"[data-eb-image-height]","{lockRatio}":"[data-eb-image-lock-ratio]","{alignmentFieldset}":"[data-eb-image-alignment]","{alignmentItem}":"[data-eb-image-alignment-selection] [data-alignment-item]","{previewImage}":"[data-eb-preview-imageurl]","{link}":"[data-eb-image-link]","{linkUrl}":"[data-eb-image-link-url]","{imageUrlForm}":"[data-eb-image-url-form]","{imageUrlTextbox}":"[data-eb-image-url-textbox]","{imageUrlAdd}":"[data-eb-image-url-add]","{imageUrlCancel}":"[data-eb-image-url-cancel]"},EBD.selectors)},function(h,e,t,l,m,s,c,d,n){function u(e){return"image"==m.getBlockType(e)}return{init:function(){m=h.blocks,l=m.composer,s=e.meta,c=p(),d=EasyBlog.MediaManager,n=l.panels.fieldset},deactivate:function(e){},activate:function(e){(c=e).hasClass("is-new")&&e.css("text-align","center"),h.populate(e)},construct:function(e){var t=m.createBlockContainer("image"),e=p.extend(m.data(t),e),n=m.getBlockContent(t).empty(),e=h.constructImage(e);return n.append(e),t.css("text-align","center"),t},constructFromMediaFile:function(e){var e=e.data("key"),e=d.getUri(e),n=m.createBlockContainer("image"),o=m.getBlockContent(n),a=m.data(n);return n.css("text-align","center"),n.addClass("is-loading"),d.getMedia(e).done(function(e){var t=e.meta,e=d.getVariation(t.uri,"thumbnail");a.uri=t.uri,a.url=e.url,a.simple="simple",a.ratio_lock=!0,a.variation=e.key;e=h.constructImage(a);o.html(e),n.hasClass("active")&&h.populate(n)}).fail(function(){var e=p(s.html);e.addClass("state-failed"),o.html(e)}).always(function(){n.removeClass("is-loading")}),n},constructImage:function(e){var t,n,o,a=p(s.imageContainer),i=h.imageFigure.inside(a),r=h.imageElement.inside(a);return r.attr("src",e.url),e.fluid&&a.addClass(C),a.addClass("style-"+e.style),"webp"==e.extension&&(t=r.closest("a"),n=p("<picture></picture>"),o=p("<source>"),t.append(n),o.attr("srcset",e.url),o.attr("type","image/webp"),r.attr("src",e.fallbackItem.url),n.append(o),o.after(r)),e.alignment&&(/left|right/.test(e.alignment)&&a.css("float",e.alignment),/center/.test(e.alignment)&&a.css("float","")),e.caption_text&&(a.append(s.imageCaption),h.imageCaptionText.inside(a).html(e.caption_text)),e.popup_url&&((r=p(s.imagePopupButton)).attr("href",e.popup_url),i.append(r)),a},toData:function(e){return m.data(e)},toHTML:function(e){if(!h.hasImage(e))return"";e=e.clone(),e=h.deconstruct(e);return m.getBlockContent(e).html()},toLegacyHTML:function(e){var t=h.toData(e),e=p("<img>").attr({src:t.url,width:t.width,height:t.height});return t.caption_text&&e.addClass("easyblog-image-caption").attr("title",t.caption_text),t.alt_text&&e.attr("alt",t.alt_text),t.popup_url&&e.attr("data-popup",t.popup_url),t.style&&e.attr("data-style",t.style),t.alignment&&e.attr("align",t.alignment),(t.link_url?p("<a>").attr({href:t.link_url,title:t.link_title,target:t.link_target}).append(e):e).prop("outerHTML")},toText:function(e){return h.imageCaptionText.inside(e).text()+"\n"+h.imageElement.inside(e).attr("alt")},reconstruct:function(e){e=h.imagePlaceholder.inside(e);0<e.length&&EasyBlog.MediaManager.uploader.register(e)},hasImage:function(e){return 0<h.imageContainer.inside(e).length},"{imagePlaceholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{imagePlaceholder} mediaUploaderFileUploaded":function(e,t,n,o,a){a=a.response.media.meta,e=m.block.of(e);h.updateImageSource(e,a)},"{sourceChangeButton} mediaSelectStart":function(e){var t=c.data("uid");e.data("uid",t)},"{sourceChangeButton} mediaSelect":function(e,t,n){var o,a,i;"image"==n.meta.type&&(o=c.data("uid"),a=e.data("uid"),e=n.meta,(n=l.document).isLegacy()?(content=h.toLegacyHTML(i),n.insertContent(content)):o!=a?(i=m.getBlock(a),h.setImageSource(i,e)):h.updateImageSource(c,e))},"{previewImage} click":function(e){var t=h.sourceUrl().text();window.open(t)},"{browseButton} mediaSelect":function(e,t,n,o){var a=m.block.of(e);"image"==n.meta.type&&(e=m.data(a),e=p.extend(e,o),(e=l.document).isLegacy()?(content=h.toLegacyHTML(a),e.insertContent(content)):(h.setImageSource(a,n),m.activateBlock(a)))},"{self} mediaInsert":function(e,t,n,o,a,i){if("image"==n.meta.type){var r=l.document,s=r.isLegacy();if(h.normalizeImageSize(o),s){s=m.data(o);return a=p.extend(s,a),content=h.toLegacyHTML(o),void r.insertContent(content)}a=h.formatImageData(a,n.meta);o=m.constructBlock("image",a);m.addBlock(o),i||(m.activateBlock(o),a=a.link,h.triggerLinkChange(a))}},deconstruct:function(e){return h.imageCaptionText.inside(e).editable(!1),e},refocus:function(e){},reset:function(e){},populate:function(e){var t=h.hasImage(e);m.panel.fieldgroup.get("image").toggleClass("is-new",!t),t&&(h.populateImageUrl(e),h.populateImageSource(e),h.populateImageSize(e),h.populateImageAlignment(e),h.populateImageCaption(e),h.populateImageAlt(e),h.populateImageLink(e),h.populateImageStyle(e),h.populateImageResponsive(e))},showImageHint:function(e,t){h.imageHint.inside(e).remove();var n=p(s.imageHint);n.find(".eb-hint-text").html(t),h.imageViewport.inside(e).append(n),n.removeClassAfter("is-new",1e3),setTimeout(function(){n.remove()},2500)},setImageSource:function(e,t){var n=m.data(e),n=h.formatImageData(n,t),t=h.constructImage(n);m.getBlockContent(e).empty().append(t),h.setImageAlignment(e,n.alignment)},formatImageData:function(e,t){var n=e.variation,o="";void 0!==t.params&&(n=(void 0!==(a=JSON.parse(t.params)).variation?a:e).variation,o=void 0!==a.extension?a.extension:"");var a=d.getVariation(t.uri,n);return e.variation=a.key,e.url=a.url,e.uri=t.uri,e.natural_width=a.width,e.natural_height=a.height,e.natural_ratio=a.width/a.height,e.extension=o||"","webp"==e.extension&&(e.fallbackItem=t.fallbackItem.meta,e.fallbackItem.variation=d.getVariation(e.fallbackItem.uri,n),e.fallbackItem.url=e.fallbackItem.variation.url),e},updateImageSource:function(e,t){h.setImageSource(e,t),h.populate(e)},getSourceThumbnailImage:function(e){return p("<img>").attr("src",e)[0]},populateImageUrl:function(e){var t=m.data(e),e=h.urlFieldset();e.removeClass("t-hidden"),t.isurl?h.urlFieldText().val(t.url):e.addClass("t-hidden")},populateImageSource:function(n){var e=m.data(n),t=h.sourceFieldset();t.removeClass("hidden"),e.isurl?t.addClass("hidden"):(e=e.uri,(t=h.sourceFieldset()).addClass(o),d.getMedia(e).done(function(e){var t=e.meta;h.sourceThumbnail().css("background-image","url("+t.preview+")"),h.sourceTitle().text(t.title);e=p(e.variations);h.variationListContainer().empty().append(e),h.populateImageVariation(n)}).fail(function(){t.addClass("is-failed")}).always(function(){t.removeClass(o)}))},populateImageVariation:function(t){var n=m.data(t),t=n.uri,n=n.variation;const o=d.getVariation(t,n);if(o){const a=h.variationItem().where("key",'"'+n+'"').activateClass("active");h.sourceSize().text(p.plupload2.formatSize(o.size||""));let e=o.url;!e||o.url.includes("http://")||o.url.includes("https://")||(e=window.ezb.rootUrl+"/"+e),h.sourceUrl().text(e);t=a.hasClass("is-system"),n=a.hasClass("is-missing");h.variationField().toggleClass("can-delete",!t).toggleClass("is-missing",n)}else console.error("Variation could not be retrieved because media meta does not exist in library!")},setImageVariation:function(e,t){var n=m.data(e),o=n.uri,a=d.getVariation(o,t);void 0!==a&&(n.url=a.url,h.imageElement.inside(e).attr("src",a.url),"webp"==n.extension&&(o=h.pictureElement.inside(e),n.fallbackItem.variation=d.getVariation(n.fallbackItem.uri,t),n.fallbackItem.url=a.url,o.find("source").attr("srcset",a.url),h.imageElement.inside(e).attr("src",n.fallbackItem.url)),h.showImageHint(e,p.String.capitalize(a.name)+'<br/><span style="font-weight: normal;">'+a.width+"x"+a.height+"</span>"),n.variation=t,n.ratio_lock,h.isInsideThumbnailBlock(e)||(h.setImageWidth(e,a.width),h.setImageHeight(e,a.height)),h.width().val(a.width),h.height().val(a.height))},isInsideThumbnailBlock:function(e){return 0<e.parent().parent(".eb-thumb").length},updateImageVariation:function(e,t){h.setImageVariation(e,t),h.populateImageVariation(e)},"{variationItem} click":function(e){e=e.data("key");h.updateImageVariation(c,e)},"{variationNewButton} click":function(e){h.variationField().addClass("show-create-form");var t=m.data(c).uri,n=d.getVariation(t,"system/original"),o=n.width,t=n.height,n=o/t;h.variationWidth().val(o).data("value",o).data("ratio",n),h.variationHeight().val(t).data("value",t).data("ratio",n)},"{variationCancelButton} click":function(e){h.variationField().removeClass("show-create-form")},"{variationCreateButton} click":function(e){var t,n,o=h.variationField(),a=p.trim(h.variationName().val()),i=h.variationWidth().val(),r=h.variationHeight().val();""!=p.trim(a)&&(o.addClass("is-creating"),t=c,n=m.data(t).uri,d.createVariation(n,a,i,r).done(function(e){e=p(e.variations);h.variationListContainer().empty().append(e),h.populateImageVariation(t),o.removeClass("show-create-form")}).fail(function(){o.removeClass("is-creating").addClass("is-failed")}).always(function(){o.removeClass("is-creating")}))},"{variationCancelFailedButton} click":function(){h.variationField().removeClass("is-failed")},"{variationRebuildButton} click":function(e){var n=m.data(c).uri,t=h.variationItem(".active").data("key"),o=d.getVariation(n,t).name,t=d.getKey(n);EasyBlog.ajax("site/views/mediamanager/rebuildVariation",{name:o,key:t}).done(function(e){var t=p(e.variations);h.variationListContainer().empty().append(t),h.populateImageVariation(c),d.setMedia(n,e)})},"{variationDeleteButton} click":function(e){var t=m.data(c).uri,n=h.variationItem(".active").data("key"),n=d.getVariation(t,n).name;d.removeVariation(t,n).done(function(e){e=p(e.variations);h.variationListContainer().empty().append(e);e=d.getVariation(t,"thumbnail");h.updateImageVariation(c,e.key)})},"{variationWidth} input":function(e){var t=e.data("ratio"),e=Math.round(parseFloat(e.val()));p.isNumeric(e)&&(t=Math.round(e/t),h.variationHeight().val(t))},"{variationHeight} input":function(e){var t=e.data("ratio"),e=Math.round(parseFloat(e.val()));p.isNumeric(e)&&(t=Math.round(e*t),h.variationWidth().val(t))},"{variationWidth} focus":function(e){e.select()},"{variationHeight} focus":function(e){e.select()},"{variationWidth} blur":function(e){var t,n,o=e.data("ratio"),a=Math.round(parseFloat(e.val()));e.val(a),p.isNumeric(a)||(t=h.variationHeight(),n=Math.round(parseFloat(t.val())),p.isNumeric(n)?(a=Math.round(n*o),e.val(a),t.val(n)):h.resetVariationFields())},"{variationHeight} blur":function(e){var t,n,o=e.data("ratio"),a=Math.round(parseFloat(e.val()));e.val(a),p.isNumeric(a)||(t=h.variationWidth(),n=Math.round(parseFloat(t.val())),p.isNumeric(n)?(a=Math.round(n/o),t.val(n),e.val(a)):h.resetVariationFields())},resetVariationFields:function(){var e=h.variationWidth(),t=h.variationHeight();e.val(e.data("width")),t.val(t.data("height"))},populateImageSize:function(o){function a(){var e=m.data(o),t=parseInt(h.getImageWidth(o)),n=parseInt(h.getImageHeight(o));h.width().val(t),h.height().val(n),e.width_lock&&e.height_lock?h.fieldsets("[data-type=simple]").addClass("t-hidden"):h.fieldsets("[data-type=simple]").removeClass("t-hidden"),h.lockRatio().prop("checked",e.ratio_lock)}var e=h.imageElement.inside(o);e[0].complete?(a(),m.data(o),h.imageSizeFieldset().removeClass("is-loading")):(e=e.attr("src"),h.imageSizeFieldset().addClass("is-loading"),p.Image.get(e).done(function(e,t){var n=m.data(o);n.natural_ratio=n.width/n.height,a()}).always(function(){h.imageSizeFieldset().removeClass("is-loading")}))},setImageSize:function(e,t,n){"width"==t&&h.setImageWidth(e,n),"height"==t&&h.setImageHeight(e,n)},updateImageSize:function(e,t,n){h.setImageSize(e,t,n),h.populateImageSize(e)},isFluidImage:function(e){return h.imageContainer.inside(e).hasClass(C)},isFixedImage:function(e){return!h.isFluidImage(e)},toFixedImage:function(e){var t=m.data(e),n=h.imageElement.inside(e),o=n.width(),n=n.height();h.setImageWidth(e,o),t.ratio_lock||h.setImageHeight(e,n)},toFluidImage:function(e){var t,n=m.data(e),o=h.imageContainer.inside(e),a=h.imageElement.inside(e);m.isRootBlock(e)&&(o=o.width(),t=e.width(),t=Math.round(o/t*100)+"%"),m.isNestedBlock(e)&&(t="100%");a=a.height();h.setImageWidth(e,t),n.ratio_lock||h.setImageHeight(e,a)},normalizeImageSize:function(e){var t,n=m.data(e),o=h.isFluidImage(e);m.isRootBlock(e)&&(t=h.imageFigure.inside(e).width()),m.isNestedBlock(e)&&(t=h.imageFigure.inside(e).width()),h.setImageWidth(e,t),!o&&"advanced"!=n.mode||h.toFluidImage(e)},resetImageSize:function(e){m.data(e).mode="simple";h.imageContainer.inside(e),h.imageFigure.inside(e),h.imageElement.inside(e);m.isNestedBlock(e)&&h.setImageWidth(e,e.css("width"))},getImageWidth:function(e){var t=h.imageFigure.inside(e),n=t[0].style;if(m.isRootBlock(e)){var o=h.imageContainer.inside(e)[0].style.width;if(/%/.test(o))return o}if(m.isNestedBlock(e)){e=e[0].style.width;if(/%/.test(e))return e}return n.width||t.css("width")},getImageHeight:function(e){e=h.imageFigure.inside(e);return e[0].style.height||e.css("height")},setImageWidth:function(e,t){var n=m.getData(e),o=g(t),a=parseFloat(t),i="%"==o,r="px"==o,s="simple"==n.mode,l="advanced"==n.mode,c=h.imageContainer.inside(e),d=h.imageElement.inside(e),u=(h.imageViewport.inside(e),h.imageFigure.inside(e)),p=(d.width(),d.height());i&&(n.fluid=!0,c.addClass(C)),r&&(n.fluid=!1,c.removeClass(C)),l&&h.toFixedElement(e),m.isRootBlock(e)&&(e.css("width",""),i&&(y(c,t),y(u,"100%"),s&&(y(d,"100%"),n.element_width="100%")),r&&(y(c,""),y(u,t),s&&(y(d,t),n.element_width=parseFloat(t)))),m.isNestedBlock(e)&&(i&&(y(e,t),y(u,""),s&&(y(d,"100%"),n.element_width="100%")),r&&(y(e,"auto"),y(u,t),s&&(y(d,t),n.element_width=parseFloat(t)))),n.width=i?t:a;var f=n.ratio,o=n.ratio_lock,c=n.natural_ratio;o?(c=s?c:f,i&&(w(u,""),k(u,b(c)),s&&(w(d,"100%"),n.element_height="100%"),n.height="100%"),r&&(w(u,a=a/v(c)),k(u,""),s&&(w(d,a),n.element_height=a),n.height=a,a=parseInt(n.height),h.height().val(a)),n.ratio=c,s&&(n.element_ratio=c)):(f=d.width()/p,i&&k(u,b(f)),r&&k(u,""),n.ratio=f,s&&(n.element_ratio=f)),l&&(h.toFluidElement(e),n=n.strategy,/fit|fill/.test(n)&&h.resizeToViewport(e,n));e=h.imageCaption.inside(e);i&&y(e,"100%"),r&&y(e,t)},setImageHeight:function(e,t){var n,o,a=m.data(e),t=parseFloat(t),i=a.ratio,r=a.ratio_lock,s=a.natural_ratio,l="simple"==a.mode,c="advanced"==a.mode,d=h.imageElement.inside(e),u=(h.imageViewport.inside(e),h.imageFigure.inside(e));h.isFluidImage(e)&&(r?(o=t*v(n=l?s:i),h.setImageWidth(e,o),h.toFluidImage(e),a.ratio=n,l&&(a.element_ratio=n)):(c&&h.toFixedElement(e),k(u,b(i=d.width()/t)),a.ratio=i,l&&(a.element_ratio=i),c&&(h.toFluidElement(e),c=a.strategy,/fit|fill/.test(c)&&h.resizeToViewport(e,c))),a.height="100%"),h.isFixedImage(e)&&(r?(o=t*v(n=l?s:i),h.setImageWidth(e,o),inputWidth=parseInt(o),h.width().val(inputWidth)):(w(u,t),w(d,t),a.height=t,a.element_width=parseFloat(t)))},"{imageCaptionText} input":function(e,t){e=e.text();h.captionTextField().val(e),m.data(c).caption_text=e},"{responsive} change":function(e,t){e=e.is(":checked");h.setImageResponsive(c,e)},"{self} composerBlockResizeStart":function(e,t,n,o){var a;u(n)&&h.hasImage(n)&&(a={width:(a=h.imageFigure.inside(n)).width(),height:a.outerHeight(),fluid:!1},n.data("initialImageSize",a))},"{self} composerBlockBeforeResize":function(e,t,n,o){function a(){var e=r.width+s;h.setImageWidth(n,e)}function i(){var e=r.height+l;h.setImageHeight(n,e)}var r,s,l;u(n)&&h.hasImage(n)&&(t.preventDefault(),r=n.data("initialImageSize"),t=o.originalSize,o=o.size,s=o.width-t.width,l=o.height-t.height,m.data(n).ratio_lock?(0==s?i:a)():(0!=s&&a(),0!=l&&i()),r.fluid&&h.toFluidImage(n),h.populateImageSize(n))},"{self} composerBlockResizeStop":function(e,t,n,o){u(n)&&h.hasImage(n)&&n.removeData("initialImageSize")},"{self} composerBlockNestIn":function(e,t,n){u(n)&&h.hasImage(n)&&(h.resetImageSize(n),h.populateImageSize(n))},"{self} composerBlockNestOut":function(e,t,n){u(n)&&h.hasImage(n)&&(h.resetImageSize(n),h.populateImageSize(n))},populateImageResponsive:function(e){var t=m.data(e).responsive;h.updateImageResponsive(e,t)},setImageResponsive:function(e,t){m.data(e).responsive=t,h.updateImageResponsive(e,t)},updateImageResponsive:function(e,t){h.imageFigure.inside(e).toggleClass("is-responsive",t)},setImageAlignment:function(e,t){var n=h.imageContainer.inside(e);/left|right/.test(t)&&(n.css("float",t),e.css("text-align","")),/center/.test(t)&&(n.css("float",""),e.css("text-align","center")),m.data(e).alignment=t},updateImageAlignment:function(e,t){h.setImageAlignment(e,t),h.populateImageAlignment(e)},populateImageAlignment:function(e){e=m.data(e).alignment;h.setActiveAlignment(e)},setActiveAlignment:function(e){e=h.alignmentItem().filter("[data-type="+e+"]");h.alignmentItem().removeClass("active"),e.addClass("active")},"{alignmentItem} click":function(e){e=e.data("type");h.setActiveAlignment(e),h.updateImageAlignment(c,e)},populateImageAdvancedFields:function(e){"advanced"===m.data(e).mode&&(h.populateImageResizeStrategy(e),h.populateImageResizeMap(e),h.populateImageResizeFields(e))},populateImageResizeStrategy:function(e){e=m.data(e).strategy;h.strategyMenuItem().where("strategy",e).activateClass("active"),h.strategyMenuContent().where("strategy",e).activateClass("active")},setImageRatio:function(e,t){var n,o,a=m.data(e);a.ratio=t,(a.ratio_lock=0!==t)&&(n="simple"==a.mode,o="advanced"==a.mode,n&&(a.element_ratio=t,h.normalizeImageSize(e)),o&&(a=a.strategy,i.test(a)?(h.normalizeImageSize(e),h.resizeToViewport(e,a)):(h.toFixedElement(e),h.normalizeImageSize(e),h.toFluidElement(e))))},setImageResizeStrategy:function(e,t){m.data(e).strategy=t,i.test(t)&&h.resizeToViewport(e,t)},updateImageResizeStrategy:function(e,t){h.setImageResizeStrategy(e,t),h.populateImageAdvancedFields(e)},resizeToViewport:function(e,t){var n=m.data(e),o=n.natural_width,a=n.natural_height,i=h.imageViewport.inside(e),r=i.width(),i=i.height(),t=("fit"==t?x:B)(o,a,r,i),o=n.element_width=f(t.width/r),a=n.element_height=f(t.height/i),i=n.element_top=f(t.top/i),r=n.element_left=f(t.left/r);h.imageElement.inside(e).css({width:o,height:a,top:i,left:r})},resizeToFillViewport:function(e){h.setImageResizeStrategy(e,"fill")},resizeToFitViewport:function(e){h.setImageResizeStrategy(e,"fit")},"{strategyMenuItem} click":function(e){e=e.data("strategy");h.updateImageResizeStrategy(c,e)},populateImageMode:function(e){var t=m.data(e),n=t.mode,t=t.mode_lock;m.isRootBlock(e)&&(n="simple",t=!0),h.imageSizeFieldset().toggleClass("mode-lock",t);t=h.imageSizePreset().removeClass("active").where("type",n).addClass("active"),t=p.trim(t.text());h.imageSizeCurrentPreset().html(t);n="preset-"+n;h.imageSizeFieldset().switchClass(n)},setImageMode:function(e,t){"simple"==t&&h.toSimpleImageMode(e),"advanced"==t&&h.toAdvancedImageMode(e)},toSimpleImageMode:function(e){var t=m.data(e);t.mode="simple",t.ratio=t.natural_ratio,t.ratio_lock=!0,t.element_width="",t.element_height="",t.element_top="",t.element_left="",h.imageElement.inside(e).css({width:"",height:"",top:"",left:""}),h.normalizeImageSize(e)},toAdvancedImageMode:function(e){var t=m.data(e);t.mode="advanced",t.ratio||(t.ratio=t.natural_ratio),t.element_ratio||(t.element_ratio=t.ratio),h.normalizeImageSize(e),h.resizeToFitViewport(e)},updateImageMode:function(e,t){h.setImageMode(e,t),h.populateImageSize(e)},"{imageSizePreset} click":function(e){e=e.data("type");h.updateImageMode(c,e)},populateImageResizeMap:function(e){var t,n,o,a,i=m.data(e);"custom"===i.strategy&&(o=(t=h.mapFigure()).width(),n=t.height(),e=(a=h.imageViewport()).width(),t=a.height(),a=h.mapViewport(),o=x(e,t,o,n),a.css(o),n=h.mapPreview(),o=h.createResizeHandleElements(a=["n","s","w","e","sw","se","nw","ne"]),a=h.createResizeHandleSelectors(a),n.hasClass("ui-resizable")&&n.resizable("destroy"),n.hasClass("ui-draggable")&&n.draggable("destroy"),n.css({backgroundImage:p.cssUrl(i.url),width:i.element_width,height:i.element_height,top:i.element_top,left:i.element_left}).empty().append(o).resizable({handles:a,aspectRatio:i.element_ratio_lock}).draggable())},createResizeHandleSelectors:function(e){var n=[];return p.each(e,function(e,t){n[t]="> .ui-resizable-"+t}),n},createResizeHandleElements:function(e){var n=[];return p.each(e,function(e,t){t=p('<div class="ui-resizable-handle ui-resizable-'+t+'"><div></div></div>')[0];n.push(t)}),n},getElementSizeFromMap:function(){var e=h.mapViewport(),t=e.width(),n=e.height(),o=h.mapPreview(),a=o.position(),i=a.top,e=a.left,a=o.width(),o=o.height();return{top:f(i/n),left:f(e/t),width:f(a/t),height:f(o/n)}},setElementSizeFromMap:function(e){var t=m.data(e),n=h.getElementSizeFromMap();h.imageElement.inside(e).css(n),h.setElementSizeOnBlockData(n,t)},updateElementSizeFromMap:function(e){h.setElementSizeFromMap(e),h.populateImageResizeFields(e)},setElementSizeOnBlockData:function(e,t){for(var n,o=["top","left","width","height"];n=o.shift();)t["element_"+n]=e[n]},toFixedElement:function(e){var t=h.imageElement.inside(e),n=t.position(),o=n.top,a=n.left,e=t.width(),n=t.height();t.css({width:e,height:n,top:o,left:a})},toFluidElement:function(e){var t=m.data(e),n=h.imageElement.inside(e),o=n.position(),a=o.top,i=o.left,r=n.width(),s=n.height(),o=h.imageViewport.inside(e),e=o.width(),o=o.height(),a=t.element_top=f(a/o),i=t.element_left=f(i/e),e=t.element_width=f(r/e),o=t.element_height=f(s/o);n.css({top:a,left:i,width:e,height:o})},"{mapPreview} resize":function(){h.updateElementSizeFromMap(c)},"{mapPreview} drag":function(){h.updateElementSizeFromMap(c)},populateImageResizeFields:function(e){for(var t,n=m.data(e),o=h.resizeInputField(),a=["width","height","top","left"];t=a.shift();){if(h.resizingFromInput==t)return;o.where("prop",t).val(n["element_"+t])}h.resizeRatioLock().prop("checked",n.element_ratio_lock)},setElementSize:function(e,t,n){return h["setElement"+p.capitalize(t)](e,n)},updateElementSize:function(e,t,n){h.setElementSize(e,t,n),h.populateImageAdvancedFields(e)},setElementWidth:function(e,t){var n,o=m.data(e),a=(parseFloat(t),g(t)),i=o.element_ratio,r=o.element_ratio_lock,s=h.imageViewport.inside(e),e=h.imageElement.inside(e);"%"==a&&(r?(r=o.element_width,n=t,s=f(e.width()*(parseFloat(n)/parseFloat(r))/i/s.height()),o.element_width=n,o.element_height=s,y(e,n),w(e,s)):(n=t,o.element_width=parseFloat(n),y(e,n)))},setElementHeight:function(e,t){var n,o=m.data(e),a=(parseFloat(t),g(t)),i=o.element_ratio,r=o.element_ratio_lock,s=h.imageViewport.inside(e),e=h.imageElement.inside(e);"%"==a&&(r?(r=o.element_height,n=t,s=f(e.height()*(parseFloat(n)/parseFloat(r))*i/s.width()),o.element_width=s,o.element_height=n,y(e,s),w(e,n)):w(e,o.element_height=n=t))},setElementTop:function(e,t){m.data(e).element_top=t,h.imageElement.inside(e).css("top",t)},setElementLeft:function(e,t){m.data(e).element_left=t,h.imageElement.inside(e).css("left",t)},setElementRatio:function(e,t){var n=m.data(e);n.element_ratio=t,h.setElementWidth(e,n.element_width)},updateElementRatio:function(e,t){h.setElementRatio(e,t),h.populateImageAdvancedFields(e)},resetElementSize:function(e){h.setImageResizeStrategy(e,"fit"),h.setImageResizeStrategy(e,"custom"),h.populateImageAdvancedFields(e)},lockElementRatio:function(e){var t=m.data(e);t.element_ratio_lock=!0;t=t.natural_ratio;h.updateElementRatio(e,t)},unlockElementRatio:function(e){m.data(e).element_ratio_lock=!1,h.populateImageAdvancedFields(e)},lockImageRatio:function(e){m.data(e).ratio_lock=!0,h.normalizeImageSize(e)},unlockImageRatio:function(e){m.data(e).ratio_lock=!1},"{lockRatio} change":function(e,t){e.is(":checked")?h.lockImageRatio(c):h.unlockImageRatio(c)},"{width} change":function(e,t){var n=c,n=m.data(n),e=parseInt(e.val());parseInt(n.width);h.setImageWidth(c,e)},"{height} change":function(e,t){var n=c,n=m.data(n),e=parseInt(e.val()),n=parseInt(n.height);h.setImageHeight(c,e=0==e||1==e?n:e)},populateImageAlt:function(e){var t=m.data(e),e=h.imageElement.inside(e).attr("alt");void 0!==e&&e.length;t=t.alt_text;h.altTextField().val(""),t&&h.altTextField().val(t)},populateImageCaption:function(e){var t=m.data(e),e=(h.imageCaption.inside(e).length,t.caption_text),t=t.caption_alignment;h.captionTextField().val(""),e&&h.captionTextField().val(e),t&&h.captionAlignment().val(t)},getImageCaption:function(e){return m.data(e).caption_text},setImageCaption:function(e,t){var n=h.imageCaption.inside(e);n.length||(n=p(s.imageCaption),h.imageContainer.inside(e).append(n)),h.imageCaptionText.inside(e).html(t),m.data(e).caption_text=t},setImageCaptionAlignment:function(e,t){var n=h.imageCaption.inside(e);n.length||(n=p(s.imageCaption),h.imageContainer.inside(e).append(n)),h.imageCaptionText.inside(e).css("text-align",t),m.data(e).caption_alignment=t},removeImageCaption:function(e){var t=h.imageCaption.inside(e);h.setImageCaption(e,""),t.remove()},disableImageCaption:function(e){h.removeImageCaption(e),h.populateImageCaption(e)},"{captionTextField} input":function(e,t){e=e.val();""!=e?h.setImageCaption(c,e):h.disableImageCaption(c)},"{captionAlignment} change":function(e,t){e=e.val();h.setImageCaptionAlignment(c,e)},setImageAlt:function(e,t){h.imageElement.inside(e).prop("alt",t),m.data(e).alt_text=t},removeImageAlt:function(e){h.imageElement.inside(e).removeAttr("alt")},"{altTextField} input":function(e,t){e=p.trim(e.val());""!=e?h.setImageAlt(c,e):h.removeImageAlt(c)},populateImageStyle:function(e){var t=m.data(e),e=t.style_enabled;n.toggle("image-style",e),h.styleSelection().where("value",t.style).activateClass("active")},setImageStyle:function(e,t){h.imageContainer.inside(e).switchClass("style-"+t),m.data(e).style=t},updateImageStyle:function(e,t){h.setImageStyle(e,t),h.populateImageStyle(e)},"{styleSelection} click":function(e,t){e=e.data("value");h.updateImageStyle(c,e)},populateImageLink:function(e){e=m.data(e);h.link().val(e.link),"none"!=e.link?("custom"!=e.link&&h.linkUrl().addClass("t-hidden"),"custom"!=e.link&&"custom_new"!=e.link||(h.linkUrl().removeClass("t-hidden"),h.linkUrl().val(e.link_url),h.linkUrl().trigger("input"))):h.linkUrl().addClass("t-hidden")},setImageLinkUrl:function(e,t){var n=m.data(e);n.link_url=t=p.trim(t);e=h.imageViewport.inside(e);t?(e.attr("href",t),"custom_new"==n.link&&e.attr("target","_blank")):e.removeAttr("href")},removeImageLink:function(e){m.data(e).link_url="";var t=h.imageViewport.inside(e);t.removeAttr("href"),t.removeAttr("target"),h.populateImageLink(e)},addImageLinkTarget:function(e){h.imageViewport.inside(e).attr("target","_blank")},removeImageLinkTarget:function(e){h.imageViewport.inside(e).removeAttr("target")},setImagePopup:function(t,n,e){var o=m.data(t);h.imagePopupButton.inside(t).remove();n=o.popup_uri=n||o.popup_uri||o.uri,e=o.popup_variation=e||o.popup_variation;if(!o.isurl)return d.getMedia(n).done(function(e){e.meta;e=d.getVariation(n,["system/original"]);o.popup_url=e.url,o.popup_variation=e.key,h.imagePopupButton.inside(t).attr("href",o.popup_url)});o.popup_url=n},removeImagePopup:function(e){var t=m.data(e);t.popup_url="",t.popup_uri="",t.popup_variation="",h.imagePopupButton.inside(e).remove()},triggerLinkChange:function(e){"custom"!=e&&"custom_new"!=e||h.linkUrl().removeClass("t-hidden"),"lightbox"==e&&h.setImagePopup(c),"custom"!=e&&"custom_new"!=e&&h.removeImageLink(c),"lightbox"!=e&&("custom"==e&&h.removeImageLinkTarget(c),"custom_new"==e&&h.addImageLinkTarget(c),h.removeImagePopup(c))},"{link} change":function(e,t){var n=m.data(c),e=e.val();n.link=e,h.triggerLinkChange(e),n.link_url&&"lightbox"!=e&&h.setImageLinkUrl(c,n.link_url)},"{linkUrl} input":function(e,t){e=e.val();h.setImageLinkUrl(c,e)},"{imageViewport} click":function(e,t){t.preventDefault()},"{imageUrlAdd} click":function(e,t){var n,o=h.imageUrlTextbox().val();o&&(m.getBlockContent(c),n=m.data(c),c.css("text-align","center"),n.uri=o,n.url=o,n.simple="simple",n.ratio_lock=!0,n.isurl=!0,n=h.constructImage(n),m.getBlockContent(c).empty().append(n),c.hasClass("active")&&h.populate(c))},"{urlButton} click":function(e,t){e.parents(h.imagePlaceholder()).addClass("inserting-url")},"{imageUrlCancel} click":function(e,t){e.parents(h.imagePlaceholder()).removeClass("inserting-url")},"{urlFieldUpdateButton} click":function(e,t){var n,o=h.urlFieldText().val();o&&((n=m.data(c)).uri=o,n.url=o,n=h.constructImage(n),m.getBlockContent(c).empty().append(n))},"{self} composerPaste":function(e,t,n){n=n.find("img");l.document.isLegacy()||p.each(n,function(e,t){t={uri:(t=p(t)).attr("src"),url:t.attr("src"),simple:"simple",ratio_lock:!0,isurl:!0},t=m.constructBlock("image",t);m.addBlock(t)})}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/instagram",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Instagram",{defaultOptions:l.extend({"{form}":"> [data-instagram-form]","{insert}":"[data-instagram-insert]","{source}":"[data-instagram-source]","{preview}":"[data-instagram-preview]","{fsSource}":"[data-fs-instagram-source]","{fsRefreshButton}":"[data-fs-instagram-refresh]","{errorMessage}":"[data-instagram-error]"},EBD.selectors)},function(a,e,t,i,r,s,o){return{init:function(){r=a.blocks,i=r.composer,s=e.meta,o=l()},toData:function(e){return r.data(e)},toText:function(e){return r.data(e).source},toEditableHTML:function(e){return""},toHTML:function(e){e=e.data("overlay");if(e)return e.element().html()},activate:function(e){o=e,a.populate(e)},deactivate:function(e){},construct:function(e){},deconstruct:function(e){var t=r.getBlockContent(e);return a.form.inside(t).remove(),e},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?(o.empty(),a.createIframe(e,t.source)):o.html(s.html),e.find(a.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);a.fsSource().val(e.source)},createIframe:function(e,t){var n=l.create("iframe"),o=r.data(e);t=a.sanitizeUrl(t),o.source=t,n.attr("src",t),a.setOverlay(e,n)},sanitizeUrl:function(e){return(e=(e=e.replace("?modal=true","")).replace(/\/$/,"")).match(/\/embed/)||(e+="/embed/"),e},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=i.document.overlay.create(e),n=r.getBlockContent(e),o.placeholder().css("height","400px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},isUrlValid:function(e){return""!=e&&(!!/^(?:http(?:s)?:\/\/)?www\.instagram\.com\/(tv|p)\/(.*)(?:\/)?$/.test(e)||(!!/^(?:http(?:s)?:\/\/)?www\.instagram\.com\/(.*)\/guide\/(.*)(?:\/)?$/.test(e)||/^(?:http(?:s)?:\/\/)?www\.instagram\.com\/reel\/(.*)(?:\/)?$/.test(e)))},"{insert} click":function(e,t){o.length<1&&(n=a.block.of(e),r.activateBlock(n));var e=r.getBlockContent(o),n=(n=a.source.inside(e).val()).replace("?utm_source=ig_web_copy_link","");a.isUrlValid(n)?(a.fsSource().val(n),a.createIframe(o,n),a.form.inside(e).addClass("hidden")):a.errorMessage().removeClass("hide")},"{fsRefreshButton} click":function(){var e=r.getBlockContent(o),t=a.fsSource().val();a.isUrlValid(t)?(a.createIframe(o,t),a.form.inside(e).addClass("hidden")):a.errorMessage().removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/links",function(c){EasyBlog.Controller("Composer.Blocks.Handlers.Links",{defaultOptions:{"{loader}":"> [data-link-loader]","{form}":"> [data-link-form]","{addLink}":"[data-link-add]","{linkInput}":"[data-link-input]","{errorMessage}":"[data-link-error]","{preview}":"> [data-link-preview]","{previewTitle}":"> [data-link-preview] [data-preview-title]","{previewContent}":"> [data-link-preview] [data-preview-content]","{previewLink}":"> [data-link-preview] [data-preview-link]","{previewImage}":"> [data-link-preview] [data-preview-image]","{imageWrapper}":"> [data-link-preview] [data-preview-image-wrapper]","{settings}":"[data-eb-composer-block-links-image]","{imageList}":"[data-eb-composer-block-links-image] [data-images]","{imagePlaceholder}":"[data-eb-composer-block-links-image] [data-image-placeholder]","{currentIndex}":"[data-eb-composer-block-links-image] [data-image-current-index]","{totalImages}":"[data-eb-composer-block-links-image] [data-images-total]","{previousImage}":"[data-eb-composer-block-links-image] [data-images-previous]","{nextImage}":"[data-eb-composer-block-links-image] [data-images-next]","{showImage}":"[data-links-image]","{noFollow}":"[data-links-nofollow]","{newWindow}":"[data-links-newwindow]"}},function(r,e,t,n,s,o,l){return{init:function(){s=r.blocks,s.composer,o=e.meta,l=c()},activate:function(e){l=e,r.populate(e)},deactivate:function(e){},construct:function(e){},toText:function(e){e=s.getBlockContent(e);return r.previewLink.inside(e).html()},toData:function(e){return s.data(e)},toHTML:function(e){if(!s.data(e).url)return"";e=e.clone(),e=r.deconstruct(e);return s.getBlockContent(e).html()},makeEditable:function(e){e=s.getBlockContent(e);r.previewTitle.inside(e).editable(!0).on("click",function(e){e.preventDefault()}),r.previewContent.inside(e).editable(!0),r.previewLink.inside(e).on("click",function(e){e.stopPropagation(),e.preventDefault()}),r.imageWrapper.inside(e).on("click",function(e){e.preventDefault()})},reconstruct:function(e){var t=s.data(e),n=s.getBlockContent(e);t.url||t.title||n.html(o.html),r.makeEditable(e)},deconstruct:function(e){var t=s.getBlockContent(e),n=s.data(e),o=r.preview.inside(t);return n.showImage||r.imageWrapper.inside(t).remove(),r.previewTitle.inside(t).editable(!1),r.previewContent.inside(t).editable(!1),r.loader.inside(t).remove(),r.form.inside(t).remove(),r.preview.inside(t).removeAttr("data-link-preview"),r.previewImage.inside(t).removeAttr("data-preview-image"),r.previewTitle.inside(t).removeAttr("data-preview-title"),r.previewContent.inside(t).removeAttr("data-preview-content"),t.html(o.html()),o.remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=s.data(e);e.images&&0<e.images.length?r.populateImages(e.images,e.image):r.populateImages("",""),r.settings().removeClass("hide"),r.showImage().val(e.showImage?1:0),r.showImage().trigger("change"),r.noFollow().val(e.noFollow?1:0),r.noFollow().trigger("change"),r.newWindow().val(e.newWindow?1:0),r.newWindow().trigger("change")},populateImages:function(o,a){var e=c.inArray(a,o);if(r.currentIndex().html(e+1),r.totalImages().html(o.length),r.imageList().children("img").remove(),!o)return!1;c.each(o,function(e,t){var n=c(new Image);n.attr("src",t),r.imagePlaceholder().addClass("hidden"),n.addClass("hidden"),e==c.inArray(a,o)&&n.removeClass("hidden"),r.imageList().append(n)})},updatePreview:function(){var e=s.getBlockContent(l),t=s.data(l);r.previewTitle.inside(e).html(t.title).attr("href",t.url),r.previewContent.inside(e).html(t.content);var n=r.previewLink.inside(e);n.html(t.url),n.attr("href",t.url),t.noFollow&&n.attr("rel","nofollow"),t.newWindow?n.attr("target","_blank"):n.removeAttr("target"),r.previewImage.inside(e).attr("src",t.image),r.imageWrapper.inside(e).attr("href",t.url)},getSuggestions:function(e,t,n){EasyBlog.ajax("site/views/crawler/crawl",{url:e}).done(n).fail(function(e){r.showForm(t),r.errorMessage().html(e).removeClass("hide")})},hideForm:function(e){e=s.getBlockContent(e);r.form.inside(e).addClass("hidden"),r.loader.inside(e).removeClass("hidden")},showForm:function(e){e=s.getBlockContent(e);r.form.inside(e).removeClass("hidden"),r.loader.inside(e).addClass("hidden")},"{showImage} change":function(e,t){var n=s.getBlockContent(l),o=s.data(l);0==e.val()?(o.showImage=!1,r.imageWrapper.inside(n).addClass("hide")):(o.showImage=!0,r.imageWrapper.inside(n).removeClass("hide"))},"{newWindow} change":function(e,t){var n=s.getBlockContent(l),o=s.data(l);o.newWindow=1==e.val();var a=r.previewLink.inside(n),e=r.previewTitle.inside(n),n=r.imageWrapper.inside(n);if(o.newWindow)return a.attr("target","_blank"),e.attr("target","_blank"),void n.attr("target","_blank");a.removeAttr("target"),e.removeAttr("target"),n.removeAttr("target")},"{noFollow} change":function(e,t){var n=s.getBlockContent(l),o=s.data(l);o.noFollow=0!=e.val();var a=r.previewLink.inside(n),e=r.previewTitle.inside(n),n=r.imageWrapper.inside(n);if(o.noFollow)return a.attr("rel","nofollow"),e.attr("rel","nofollow"),void n.attr("rel","nofollow");a.removeAttr("rel"),e.removeAttr("rel"),n.removeAttr("rel")},"{previousImage} click":function(e,t){var n=r.imageList().children("img"),o=r.imageList().children("img:not(.hidden)"),a=c(o).prev("img"),i=parseInt(r.currentIndex().html()),o=s.data(l);0<a.length&&(o.image=a.attr("src"),r.updatePreview(),c(n).addClass("hidden"),c(a).removeClass("hidden"),a=i-1,r.currentIndex().html(a)),r.nextImage().disabled(!1),i-1==1?c(e).disabled(!0):c(e).disabled(!1)},"{nextImage} click":function(e,t){var n=r.imageList().children("img"),o=r.imageList().children("img:not(.hidden)"),a=c(o).next("img"),i=parseInt(r.currentIndex().html()),o=s.data(l);0<a.length&&(o.image=a.attr("src"),r.updatePreview(),c(n).addClass("hidden"),c(a).removeClass("hidden"),r.currentIndex().html(i+1)),r.previousImage().disabled(!1),i+1==n.length?c(e).disabled(!0):c(e).disabled(!1)},"{linkInput} keydown":function(e,t){13==t.keyCode&&r.addLink().click()},"{addLink} click":function(e){var t=s.getBlockContent(l),n=r.linkInput.inside(t).val(),o=s.data(l);n?(r.hideForm(l),r.getSuggestions(n,l,function(e){e=e[n];o.title=e.title,o.content=e.description,o.url=n,o.images=e.images,o.image=e.images[0],o.showImage=!0,0===o.images.length&&(o.showImage=!1),r.updatePreview(),r.loader.inside(t).addClass("hidden"),r.preview.inside(t).removeClass("hidden"),r.makeEditable(),r.populate(l)})):r.errorMessage().removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/lottie",function(c){EasyBlog.Controller("Composer.Blocks.Handlers.Lottie",{defaultOptions:{"{wrapper}":"[data-lottie-wrapper]","{form}":"[data-lottie-form]","{filename}":"[data-lottie-filename]","{errorMessage}":"[data-lottie-error]","{input}":"[data-lottie-input]","{fileInput}":"[data-lottie-file-input]","{fieldInput}":"[data-lottie-field-input]","{loopFieldset}":"[data-lottie-loop]","{autoplayFieldset}":"[data-lottie-autoplay]","{hoverFieldset}":"[data-lottie-hover]","{embedButton}":"[data-lottie-embed]","{updateButton}":"[data-lottie-update]","{player}":"lottie-player","{preview}":"[data-lottie-responsive]","{settingsSection}":"[data-lottie-settings-section]","{urlSection}":"[data-lottie-url-section]"}},function(r,e,t,n,s,o,l){return{init:function(){s=r.blocks,s.composer,o=e.meta,l=c()},toData:function(e){return s.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){var t=s.data(e);l=e,r.populate(t)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){if(!s.data(e).url){const t=s.getBlockContent(e);t.html(o.html)}},deconstruct:function(e){},refocus:function(e){},reset:function(e){},updateCheckbox:function(e,t,n){e.closest("[data-eb-toggler]").find("[data-eb-toggler-checkbox]").prop("checked",!!(void 0===t?n:t))},populate:function(e){r.fieldInput().val(""),r.urlSection().addClass("t-hidden"),r.settingsSection().addClass("t-hidden");var t=e.url;t&&(r.isValidUrl(t)&&r.fieldInput().val(t),r.urlSection().removeClass("t-hidden"),r.settingsSection().removeClass("t-hidden"),r.updateCheckbox(r.loopFieldset(),e.loop,!0),r.updateCheckbox(r.autoplayFieldset(),e.autoplay,!0),r.updateCheckbox(r.hoverFieldset(),e.hover,!1))},isValidUrl:function(e){if(!e)return!1;return/^https:\/\/(.*)\.lottiefiles\.com\/(packages|private_files)\/(.*)\.json$/.test(e)},"{embedButton} click":function(e,t){var n=r.input().val();r.validate(n)&&r.embed(n)},"{updateButton} click":function(e,t){var n=r.fieldInput().val();r.validate(n)&&r.embed(n)},validate:function(e){return!!r.isValidUrl(e)||(r.errorMessage().removeClass("t-hidden"),!1)},embed:function(e){r.errorMessage().addClass("t-hidden"),r.fieldInput().val(e);var t=s.getBlockContent(l);const n=r.wrapper.inside(t);n.addClass("t-hidden");let o=s.data(l);o.url=e,r.setLottiePlayer(o)},removeLottiePlayer:function(){var e=s.getBlockContent(l);r.preview.inside(e).remove()},setLottiePlayer:function(e){r.removeLottiePlayer();var t=c(o.preview),n=r.player.inside(t);s.getBlockContent(l).addClass("is-loading"),r.setPlayerAttribute(n,"src",e.url),r.setPlayerAttribute(n,"loop",e.loop),r.setPlayerAttribute(n,"autoplay",e.autoplay),r.setPlayerAttribute(n,"hover",e.hover),r.appendPlayer(t)},appendPlayer:function(e){var t=r.player.inside(e),n=s.getBlockContent(l);t.addClass("t-hidden"),n.append(e),r.urlSection().removeClass("t-hidden"),r.settingsSection().removeClass("t-hidden"),t.off("load").on("load",function(){n.removeClass("is-loading"),t.removeClass("t-hidden")})},setPlayerAttribute:function(e,t,n){n?"src"!==t?e.attr(t,""):e.attr(t,n):e.removeAttr(t)},"{fileInput} change":function(e,t){var n,o,a,i;c.isEmpty(e.val())||"application/json"===e[0].files[0].type&&(r.errorMessage().addClass("t-hidden"),n=s.data(l),o=s.getBlockContent(l),r.form.inside(o),a=r.wrapper.inside(o),i=e.closest("[data-composer-frame]").data("post-id"),a.addClass("t-hidden"),o.addClass("is-loading"),EasyBlog.ajax("site/views/lottie/getPlayer",{files:e,postId:i,loop:n.loop,autoplay:n.autoplay,hover:n.hover},{type:"iframe"}).done(function(e){n.url=e.url,r.appendPlayer(c(e.html));var t=c("<input>"),e="lottie_files["+e.name+"]";t.prop("type","hidden"),t.prop("name",e),t.prop("value","1"),r.preview.inside(o).append(t)}).fail(function(){r.errorMessage().removeClass("t-hidden")}))},"{loopFieldset} change":function(e,t){e=parseInt(e.val());let n=s.data(l);n.loop=e,r.setLottiePlayer(n)},"{autoplayFieldset} change":function(e,t){e=parseInt(e.val());let n=s.data(l);n.autoplay=e,r.setLottiePlayer(n)},"{hoverFieldset} change":function(e,t){e=parseInt(e.val());let n=s.data(l);n.hover=e,r.setLottiePlayer(n)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/metacafe",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Metacafe",{elements:["[data-metacafe-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url}]"],defaultOptions:n.extend({"{form}":"> [data-metacafe-form]","{insert}":"[data-metacafe-insert]","{source}":"[data-metacafe-source]","{loader}":"> [data-metacafe-loader]","{errorMessage}":"[data-metacafe-error]","{player}":"iframe","{wrapper}":"[data-metacafe-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=e.data("overlay");if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){return r.data(e).source},toHTML:function(e){var t=e.clone(),e=(r.data(t),e.data("overlay"));if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(e)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},getPlayer:function(e){var t=n(a.player);return t.attr("src",e),t},reconstruct:function(e){var t=r.data(e);console.log(t);var n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):!t.source&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.data(e);i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);e.url&&(i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change"))},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){if(!e)return!1;return/^https:\/\/www\.metacafe\.com\/watch\/(.*)\/(.*)$/.test(e)},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},crawl:function(n,o){var a=r.data(o),e=r.getBlockContent(o),t=o.data("overlay");t&&t.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).done(function(e){var t=e[n],e=a.url=n;a.source=e.replace("/watch/","/embed/"),a.width=t.video.width,a.height=t.video.height,a.title=t.opengraph.title,a.description=t.opengraph.desc,a.embed=i.getPlayer(a.source).prop("outerHTML"),a.permalink=t.opengraph.url,i.setOverlay(o),i.updateFieldset(o)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading(),i.form.inside(e).addClass("hidden")})},"{insert} click":function(e){s.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(s),t=i.source.inside(t).val();r.data(s);i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide")},"{fluid} change":function(e,t){e=1==e.val();r.data(s).fluid=e,i.setWrapperLayout(s),i.widthFieldset().toggleClass("hide",e),i.heightFieldset().toggleClass("hide",e),i.getOverlay(s).refresh()},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")}}}),this.resolve()}),EasyBlog.require().script("admin/vendors/select2").done(function(e){EasyBlog.module("composer/blocks/handlers/module",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Module",{defaultOptions:s.extend({"{form}":"> [data-module-form]","{errorMessage}":"[data-module-error]","{moduleSelection}":"[data-module-selection]","{loader}":"> [data-module-loader]","{moduleSelectionContent}":"[data-module-selection-content]","{moduleItem}":"[data-module-item]","{moduleList}":"[data-module-list]","{placeholder}":"[data-module-placeholder]","{placeholderContent}":"[data-module-placeholder-content]","{placeholderTitle}":"[data-module-placeholder-title]","{placeholderPreviewError}":"[data-module-preview-error]","{placeholderInfo}":"[data-module-placeholder-info]","{placeholderNotice}":"[data-module-placeholder-notice]"},EBD.selectors)},function(i,e,t,n,r,o,a){return{init:function(){r=i.blocks,r.composer,o=e.meta,a=s()},toData:function(e){return r.data(e)},toText:function(e){return r.data(e).embed},toEditableHTML:function(e){return""},toHTML:function(e){return r.data(e).embed},activate:function(e){a=e,i.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=r.getBlockContent(e);t.html&&(n.empty(),i.loadPlaceholder(e,t)),t.html||n.html(s(o.html));t=i.moduleSelection.inside(n),n=s(t).data("select2");null==n&&s(t).select2({theme:"si"})},deconstruct:function(e){var t=r.getBlockContent(e);return i.form.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);i.updateFieldset(e.id)},showForm:function(e){e=r.getBlockContent(e);i.placeholderInfo.inside(e).removeClass("hidden"),i.moduleSelectionContent.inside(e).removeClass("hidden")},hideForm:function(e){e=r.getBlockContent(e);i.placeholderInfo.inside(e).addClass("hidden"),i.placeholderNotice.inside(e).removeClass("hidden")},loadPlaceholder:function(e,t){var n,o=r.getBlockContent(e),t=r.data(e);i.updateFieldset(t.id),t.html?(o.html(t.html),n=i.placeholderTitle.inside(o),e=i.moduleSelection.inside(o),n.html(t.name),e.data("flag")?e.val(t.module+"-"+t.id):e.val(t.module)):((n=i.placeholderTitle.inside(o)).html(t.name),a=i.moduleSelection.inside(o),null!=s(a).data("select2")&&s(a).select2("destroy"),t.html=o.html());var a=i.moduleSelection.inside(o);null==s(a).data("select2")&&s(a).select2({theme:"si"})},processModule:function(e,t){r.getBlockContent(e);var n=r.data(e);i.loading(),EasyBlog.ajax("site/views/composer/checkModuleContent",{module:t.module}).done(function(){n.moduleObj=t,n.id=t.id,n.name=t.name,n.module=t.module,i.updateFieldset(n.id),i.loading(),i.hideForm(e),i.loadPlaceholder(e,n),i.removeError(e)}).fail(function(){i.loading(),i.showError(e)})},showError:function(e){e=r.getBlockContent(e);i.errorMessage.inside(e).removeClass("hidden"),i.placeholderNotice.inside(e).addClass("hidden"),i.placeholderTitle.inside(e).addClass("hidden"),i.placeholderInfo.inside(e).addClass("hidden")},removeError:function(e){e=r.getBlockContent(e);i.errorMessage.inside(e).addClass("hidden"),i.placeholderNotice.inside(e).removeClass("hidden"),i.placeholderTitle.inside(e).removeClass("hidden")},updateFieldset:function(e){i.moduleItem().removeClass("active"),i.moduleList().find("[data-id='"+e+"']").addClass("active")},loading:function(){var e=r.getBlockContent(a),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},"{moduleItem} click":function(e){var t=s(e).data("id"),n=s(e).data("title"),e=s(e).data("module");i.processModule(a,{id:t,name:n,module:e})},"{moduleSelection} change":function(e,t){var n=s(e).val().split("-")[0],o=s(e).find(":selected").data("id"),e=s(e).find(":selected").html();i.processModule(a,{id:o,name:e,module:n})}}}),this.resolve()})}),EasyBlog.module("composer/blocks/handlers/notes",function(c){var e=this;EasyBlog.require().done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Notes",{defaultOptions:{data:{type:"paragraph"},"{noteContent}":"[data-eb-block-notes-content]","{noteTypeSelection}":"[data-eb-composer-block-notes-type] [data-type]"}},function(r,e,t,o,s,n,l){return{init:function(){s=r.blocks,o=s.composer,n=e.meta,l=c(),e.data.content=c(n.content).html()},activate:function(e){l=e,r.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){},deconstruct:function(e){var t=s.getBlockContent(e);return r.noteContent.inside(t).editable(!1),e},refocus:function(e){var t=s.getBlockContent(e);const n=r.noteContent.inside(t);n.focus(),e.hasClass("is-new")&&o.editor.caret.setEnd(n[0])},toText:function(e){},toData:function(e){return s.data(e)},toHTML:function(e){e=e.clone(),e=r.deconstruct(e);const t=s.getBlockContent(e);return t.html()},reset:function(e){},currentType:null,populate:function(e){e=s.data(e);r.noteTypeSelection().where("type",e.type).activateClass("selected"),r.currentType=e.type,r.setContentType(r.currentType)},setContentType:function(e){e="list"===e?"html":"text";r.noteContent().attr("data-content-type",e)},setNoteType:function(e){const t=s.getBlockContent(l),o=t.find(r.noteContent);if(r.setContentType(e),"paragraph"===e){let n="";const a=o.find("li");a.each(function(e,t){t=c(t),0!==e&&(n+=" "),n+=t.html()}),o.empty(),o.html(n)}if("list"===e){var n=o.html().trim();o.empty();const i=c("<ul>");e=c("<li>");i.append(e),o.append(i),o.find("ul").find("li").first().html(n)}},"{noteTypeSelection} click":function(e){var t=e.data("type");if(r.currentType!==t){const n=s.data(l);r.noteTypeSelection().removeClass("selected"),c(e).addClass("selected"),r.setNoteType(t),n.type=t,r.currentType=t}}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/pagebreak",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Pagebreak",{elements:["[data-pagebreak-fieldset-{title|alt}]"],defaultOptions:{"{spanTitle}":"[data-pagebreak-title]","{spanAlt}":"[data-pagebreak-alt]"}},function(a,e,t,n,i,o,r){return{init:function(){i=a.blocks,i.composer,o=e.meta,r=s()},toData:function(e){return i.data(e)},toText:function(e){return""},toHTML:function(e){var t=i.data(e),e=s.create("hr");return t.alt&&e.attr("alt",t.alt),t.title&&e.attr("title",t.title),e.attr("class","system-pagebreak"),e.toHTML()},deactivate:function(e){},activate:function(e){r=e,a.populate(e)},deconstruct:function(e){},construct:function(e){},reconstruct:function(e){i.data(e);i.getBlockContent(e).html(o.html),a.updateFieldset(e)},refocus:function(e){},reset:function(e){},populate:function(e){a.updateFieldset(e)},updateFieldset:function(e){var t=i.data(e),n=i.getBlockContent(e);a.title().val(t.title),a.alt().val(t.alt);e=0<t.title.length?" - "+t.title:"";a.spanTitle.inside(n).text(e);e=0<t.alt.length?" - "+t.alt:"";a.spanAlt.inside(n).text(e)},"{title} keyup":s.debounce(function(e,t){var n=i.data(r),o=i.getBlockContent(r),e=e.val(),e=0<(n.title=e).length?" - "+e:"";a.spanTitle.inside(o).text(e)},250),"{alt} keyup":s.debounce(function(e,t){var n=i.data(r),o=i.getBlockContent(r),e=e.val(),e=0<(n.alt=e).length?" - "+e:"";a.spanAlt.inside(o).text(e)},250)}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/pdf",function(u){var e=this;EasyBlog.require().script("composer/vendors/redactor10","composer/document/overlay","composer/vendors/selectionchange").done(function(){EasyBlog.Controller("Composer.Blocks.Handlers.Pdf",{defaultOptions:{"{browseButton}":".eb-composer-placeholder-pdf [data-eb-mm-browse-button]","{fileError}":"[data-eb-file-error]","{placeholder}":"[data-eb-composer-pdf-placeholder]","{player}":"[data-file-preview]","{dropElement}":"[data-plupload-drop-element]","{height}":"[data-pdf-height]","{wrapper}":"> [data-pdf-previewer]","{object}":"object","{iframe}":"iframe",width:"100%",height:"450px"}},function(l,c,e,s,d,a,i,t){return{init:function(){d=l.blocks,s=d.composer,a=c.meta,i=u(),EasyBlog.MediaManager},toData:function(e){return d.data(e)},toText:function(e){return d.data(e).url},toHTML:function(e){d.data(e);e=e.data("overlay");if(e)return e.element().html()},toLegacyShortcode:function(e,t){t={uri:e.uri,height:t.height};return"[pdf]"+JSON.stringify(t)+"[/pdf]"},toLegacyHTMLPermalink:function(e){var n=[];return u.each(e,function(e,t){t=t.meta;if("pdf"!=t.type)return!0;t=u("<a>").attr({href:t.url,target:"_blank"}).append(t.title);n.push(t.prop("outerHTML"))}),n.join("<br>")},toEditableHTML:function(e){return""},activate:function(e){i=e,l.populate(e)},deactivate:function(e){},construct:function(e){var t=d.createBlockContainer("pdf"),e=u.extend(d.data(t),e);return t},reconstruct:function(e){var t=d.data(e),n=e.data("overlay"),o=d.getBlockContent(e);t.url&&!n?(o.html(a.html),l.createEmbedObject(e)):o.html(a.html);e=l.placeholder.inside(e);0<l.dropElement.inside(e).length&&EasyBlog.MediaManager.uploader.register(e)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){d.data(e);l.populateHeight(e)},getHeight:function(e){e=d.data(e);return e.height||c.height},updateHeight:function(e,t){var n,o=e.data("overlay");o&&(d.getBlockContent(e),e=(n=o.element()).find("iframe"),n=n.find("object"),o.placeholder().css("height",t),n.attr("height",t),e.attr("height",t))},setOverlay:function(o,a){var e=o.data("overlay");e?(e.element().empty(),e.element().append(a)):setTimeout(function(){var e=s.document.overlay.create(o),t=d.getBlockContent(o),n=l.getHeight(o);e.placeholder().css("height",n).appendTo(t),e.element().append(a),e.attach()},300),o.data("overlay",e)},createEmbedObject:function(e){l.placeholder.inside(e).remove();var t=u(document.createElement("object")),n=document.createElement("iframe"),o=(d.getBlockContent(e),d.data(e)),a=window.origin,i=window.eb.rootUrl,r=o.url,s=a.replace(/^http(s?):/i,""),i=(i=i.replace(/^http(s?):/i,"").replace(s,"")).replace("/",""),r=r.replace(s,"");i&&(r="/"+i+r),o.pdfjs&&(o.pdfjs=o.pdfjs.replace(a,""),r=o.pdfjs+r);o=e.data("overlay");o&&o.element().empty();o=l.getHeight(e);return t.attr("data",r),t.attr("type","application/pdf"),t.attr("width",c.width),t.attr("height",o),n.setAttribute("width",c.width),n.setAttribute("height",o),n.setAttribute("src",r),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("allowTransparency","true"),t.html(n),l.setOverlay(e,t),n},populateHeight:function(e){e=d.data(e);l.height().val(e.height)},"{height} change":function(e,t){var n=d.data(i);n.height=e.val(),l.updateHeight(i,n.height)},"{placeholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{placeholder} mediaUploaderFileUploaded":function(e,t,n,o,a){var i=a.response.media.meta,r=d.block.of(e),a=d.data(r);a=u.extend(a,i),setTimeout(function(){l.createEmbedObject(r)},600)},"{placeholder} mediaUploaderFileError":function(e,t,n,o){o.code==u.plupload2.FILE_EXTENSION_ERROR&&l.fileError.inside(i).removeClass("hide")},"{placeholder} mediaUploaderError":function(e,t,n,o){},"{browseButton} mediaSelect":function(e,t,n){var o=d.block.of(e);if("pdf"==n.meta.type){if(!n.data.previewer){o=d.constructBlock("file",{name:n.data.title,type:n.meta.extension,size:n.meta.size,url:n.meta.url,showicon:!0,showsize:!0});return d.addBlock(o),d.activateBlock(o),void d.removeBlock(i)}var a=n.meta,e=s.document;e.isLegacy()?(content=l.toLegacyShortcode(o),content=l.toLegacyHTML(o),e.insertContent(content)):((e=d.data(o)).url=a.url,e.height=n.data.height,l.createEmbedObject(o))}},"{self} mediaInsertPermalink":function(e,t,n){var o=s.document.isLegacy(),a=s.document;o&&(content=l.toLegacyHTMLPermalink(n),a.insertContent(content))},"{self} mediaInsert":function(e,t,n,o,a,i){var r;"pdf"==n.meta.type&&((r=s.document).isLegacy()?(content=l.toLegacyShortcode(n.meta,a),r.insertContent(content)):(o=a.previewer?d.constructBlock("pdf",{name:a.title,url:n.meta.url,height:a.height}):d.constructBlock("file",{name:a.title,type:n.meta.extension,size:n.meta.size,url:n.meta.url,showicon:!0,showsize:!0}),d.addBlock(o),i||d.activateBlock(o)))}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/pinterest",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Pinterest",{defaultOptions:l.extend({"{form}":"> [data-pinterest-form]","{insert}":"[data-pinterest-insert]","{source}":"[data-pinterest-source]","{loader}":"> [data-pinterest-loader]","{preview}":"> [data-pinterest-preview]","{errorMessage}":"[data-pinterest-error]","{fsSource}":"[data-fs-pinterest-source]","{fsUpdate}":"[data-fs-pinterest-update]"},EBD.selectors)},function(r,e,t,n,s,o,a){return{init:function(){s=r.blocks,s.composer,o=e.meta,a=l()},toData:function(e){return s.data(e)},toText:function(e){return s.data(e).url},toEditableHTML:function(e){return""},toHTML:function(e){return s.data(e).embed},activate:function(e){a=e,r.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e),n=s.getBlockContent(e);t.embed&&(r.loadScript(),n.html(t.embed)),t.embed||n.html(l(o.html)),e.find(r.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){var t=s.getBlockContent(e);return r.form.inside(t).remove(),r.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=s.data(e);e.url&&r.fsSource().val(e.url)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/.+\.pinterest\.com\/pin\/(.*)$/.test(e)},insertEmbed:function(e,t){var n=s.getBlockContent(e),o=s.data(e),e=l("<a>");if(e.attr("data-pin-do","embedPin").attr("href",t),o.url=t,o.embed=e.toHTML(),!r.isUrlValid(t))return r.errorMessage().removeClass("hide"),!1;n.html(e.toHTML()),r.form.inside(n).addClass("hidden")},scriptLoaded:!1,scriptLoadedFromAjax:!1,scriptMainLoadedFromAjax:!1,loadScriptFromAjax:function(){r.scriptLoadedFromAjax?(l("<script>").attr("type","text/javascript").attr("src","//assets.pinterest.com/js/pinit_main.js").appendTo("head"),r.scriptMainLoadedFromAjax=!0):(l("<script>").attr("type","text/javascript").attr("src","//assets.pinterest.com/js/pinit.js").appendTo("head"),r.scriptLoadedFromAjax=!0)},loadScript:function(){r.scriptLoaded||(l("<script>").attr("type","text/javascript").attr("src","//assets.pinterest.com/js/pinit.js").appendTo("head"),r.scriptLoaded=!0,r.scriptLoadedFromAjax=!0)},"{insert} click":function(e){a.length<1&&(t=r.block.of(e),s.activateBlock(t));var t=s.getBlockContent(a),t=r.source.inside(t).val();r.fsSource().val(t),r.hideForm(a),r.crawl(a,t)},crawl:function(a,i){EasyBlog.ajax("site/views/crawler/crawl",{url:i}).done(function(e){r.loadScriptFromAjax();var t=e[i],n=s.getBlockContent(a),o=s.data(a),e=l("<a>");if(o.url=t.opengraph.url,e.attr("data-pin-do","embedPin").attr("href",o.url),o.embed=e.toHTML(),!r.isUrlValid(o.url))return r.showForm(a),r.errorMessage().removeClass("hide"),!1;n.html(e.toHTML()),r.form.inside(n).addClass("hidden")}).fail(function(e){r.showForm(a),r.errorMessage().html(e).removeClass("hide")})},showForm:function(e){e=s.getBlockContent(e);r.form.inside(e).removeClass("hidden"),r.loader.inside(e).addClass("hidden")},hideForm:function(e){e=s.getBlockContent(e);r.form.inside(e).addClass("hidden"),r.loader.inside(e).removeClass("hidden")},"{fsUpdate} click":function(){s.getBlockContent(a);var e=r.fsSource().val();r.hideForm(a),r.crawl(a,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/polls",function(g){EasyBlog.Controller("Composer.Blocks.Handlers.Polls",{defaultOptions:{"{composeButton}":"[data-poll-compose-button]","{updateButton}":"[data-poll-update-button]"}},function(h,e,t,n,m,o,a){return{init:function(){m=h.blocks,m.composer,o=e.meta,a=g()},toData:function(e){return m.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){m.getBlockContent(e),m.data(e);a=e,h.updateButton.inside(a).removeClass("t-hidden")},deactivate:function(e){h.updateButton.inside(a).addClass("t-hidden")},construct:function(e){},populate:function(){},reconstruct:function(e){var t=m.data(e);if(!t.pollId){if(t.toRemove)return void m.removeBlock(e);m.getBlockContent(e).html(o.html)}e=Date.now();t.identifier=e,h.isSaving.push(t.identifier,!1)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},isBlockActive:function(){return!!a.hasClass("active")},"{composeButton} click":function(){h.isBlockActive()&&h.displayPopUpForm()},"{updateButton} click":function(){var e;h.isBlockActive()&&(e=m.data(a),h.displayPopUpForm(e.pollId))},isSaving:[],displayPopUpForm:function(u){var p=m.getBlockContent(a),f=m.data(a);u=void 0===u?0:u,EasyBlog.dialog({content:EasyBlog.ajax("site/views/polls/form",{pollId:u,isComposer:1}),bindings:{"{saveButton} click":function(e,t){var n,o,a,i,r,s,l,c,d;h.isSaving[f.identifier]||(h.isSaving[f.identifier]=!0,c=(i=(e=g(e)).closest(".eb-dialog-footer").closest(".eb-dialog-modal").find(".eb-dialog-content")).find("[data-eb-poll-form]"),n=i.find("[data-poll-error]"),r=c.find("[data-eb-poll-form-select]"),l=c.find("[data-eb-poll-form-create]"),o={},a="savePoll",r.is(":checked")&&(s=c.find("[data-unassociated-post-polls-list]").val(),a="selectPoll",o.selectedPollId=s),"savePoll"!=a&&!l.is(":checked")||(i=c.find("[data-eb-poll-form-title]").val(),r=c.find("[data-eb-poll-form-multiple]").find('input[type="hidden"]').val(),s=c.find("[data-eb-poll-form-unvote]").find('input[type="hidden"]').val(),l=c.find("[data-eb-poll-form-expiration]").find("[data-datetime]").val(),c=c.find("[data-eb-poll-form-item]"),d=[],g.each(c,function(e,t){var n=g(t),t=n.data("id"),n=n.find("input").val();d.push({id:t||0,content:n})}),a="savePoll",o.title=i,o.items=d,o.multiple=parseInt(r),o.unvote=parseInt(s),o.expiry_date=l),n.addClass("t-hidden"),e.addClass("is-loading"),EasyBlog.ajax("site/views/polls/save",{formOption:a,pollId:u,postData:JSON.stringify(o)}).done(function(e){p.empty(),"savePoll"==a&&u&&m.getAllBlocks().find('[data-poll-form][data-id="'+e.id+'"]').html(e.html),p.html(e.html),f.pollId=e.id,EasyBlog.dialog().close()}).fail(function(e){n.find("[data-fd-alert-message]").html(e),n.removeClass("t-hidden")}).always(function(){e.removeClass("is-loading"),h.isSaving[f.identifier]=!1}))}}})}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/post",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Post",{defaultOptions:{"{block}":".ebd-block[data-type=text]","{wrapper}":"> div[data-text-wrapper]","{lastParagraph}":"> div > p:last","{mediaPreview}":"[data-post-media]","{introPreview}":"[data-post-intro]","{linkPreview}":"[data-post-link-preview]","{titlePreview}":"[data-preview-title]","{showImage}":"[data-post-option-image]","{showIntro}":"[data-post-option-intro]","{showHyperlink}":"[data-post-option-link]"}},function(o,e,t,n,a,i,r){return{init:function(){a=o.blocks,n=a.composer,i=e.meta,r=s()},activate:function(e){var t=a.data(e);r=e,o.showImage().val(0==t.show_image?0:1).trigger("change"),o.showIntro().val(0==t.show_intro?0:1).trigger("change"),o.showHyperlink().val(0==t.show_link?0:1).trigger("change"),o.populate()},deactivate:function(){},construct:function(e){var t=a.createBlockContainer("post"),e=s.extend({},i.data,e),n=s(e.content);return n.find("[data-post-title]").html(e.title),n.find("[data-post-link]").attr("href",e.url),n.on("click",function(e){e.preventDefault()}),n.find("[data-post-link-preview]").html(e.url),n.find("[data-post-intro]").html(e.intro),e.image?n.find("[data-post-image]").attr("src",e.image):n.find("[data-post-image]").remove(),a.content.inside(t).append(n),s.extend(a.data(t),e),t},reconstruct:function(e){var t=a.getBlockContent(e);a.data(e);t.find("[data-post-link]").on("click",function(e){e.preventDefault()})},deconstruct:function(e){var t=o.wrapper.inside(e),n=t.parent();return t.children().appendTo(n),t.remove(),e},refocus:function(e){var t=o.wrapper.inside(e),e=o.lastParagraph.inside(e);t.focus(),n.editor.caret.setEnd(e)},reset:function(e){(e=a.getBlockContent(e)).html(i.content)},populate:function(e){},recover:function(e){},revert:function(e){},toText:function(e){return(e=a.getBlockContent(e)).text()},toHTML:function(e){e=(e=a.getBlockContent(e)).clone(),o.deconstruct(e).html();return o.deconstruct(e).html()},toData:function(e){var t=a.data(e);return t.content=o.toHTML(e),t},"{showImage} change":function(e,t){var n=a.getBlockContent(r),e=1==e.val();(a.data(r).show_image=e)?o.mediaPreview.inside(n).show():o.mediaPreview.inside(n).hide()},"{showIntro} change":function(e,t){var n=a.getBlockContent(r),e=1==e.val();(a.data(r).show_intro=e)?o.introPreview.inside(n).show():o.introPreview.inside(n).hide()},"{showHyperlink} change":function(e,t){var n=a.getBlockContent(r),e=1==e.val();(a.data(r).show_link=e)?o.linkPreview.inside(n).show():o.linkPreview.inside(n).hide()}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/quotes",function(i){EasyBlog.Controller("Composer.Blocks.Handlers.Quotes",{defaultOptions:{"{styleSelection}":"[data-eb-composer-block-quotes-style] [data-style]","{citation}":"[data-quotes-citation]","{blockquote}":"> blockquote","{cite}":"> blockquote > cite","{text}":"> blockquote > p"}},function(r,t,e,n,s,o,l){return{init:function(){s=r.blocks,s.composer,t.meta,l=i()},reconstruct:function(e){},deconstruct:function(e){var t=s.getBlockContent(e);return r.text.inside(t).editable(!1),r.cite.inside(t).editable(!1),e},toData:function(e){return s.data(e)},toText:function(e){},toHTML:function(e){e=e.clone(),e=r.deconstruct(e);return s.getBlockContent(e).html()},activate:function(e){l=e,r.populate(e)},deactivate:function(e){},construct:function(e){e=i.extend({},t.data,e);return content},refocus:function(e){var t=s.data(e);t.style&&r.setStyle(e,t.style)},reset:function(e){e.hasClass("is-new")||s.getBlockContent(e).html(r.construct())},populate:function(e){e=s.data(e);r.styleSelection("[data-style="+e.style+"]").activateClass("active"),r.citation().val(e.citation).trigger("change")},setStyle:function(e,t){s.data(e,"current",t),r.styleSelection().removeClass("selected"),r.styleSelection().where("style",t).addClass("selected");t=[e,r,t];r.trigger("composerBlockQuotesSetStyle",t),r.trigger("composerBlockChange",t)},"{styleSelection} click":function(e){e=e.data("style");s.data(l).style=e,r.setStyle(l,e)},"{self} composerBlockQuotesSetStyle":function(e,t,n,o,a){clearTimeout(r.previewTimer);var i=s.getBlockContent(l);r.blockquote.inside(i).switchClass(a),r.populate(n)},"{citation} change":function(e,t){var n=s.data(l),o=1==i(e).val()?1:0,a=!o,e=s.getBlockContent(l);n.citation=o,r.cite.inside(e).toggleClass("hidden",a)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/readmore",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Readmore",{defaultOptions:{}},function(o,e,t,n,a,i,r){return{init:function(){a=o.blocks,a.composer,i=e.meta,r=s()},toData:function(e){return a.data(e)},toText:function(e){},toHTML:function(e){var t=s.create("hr");return t.attr("id","system-readmore"),t.toHTML()},deactivate:function(e){},activate:function(e){r=e,blockActions=a.getBlockActions(r),blockActions.find("[data-blocks-duplicate]").remove(),o.populate(e)},deconstruct:function(e){},construct:function(e){},reconstruct:function(e){a.data(e);e=a.getBlockContent(e);o.hideMenu(),e.html(i.html)},refocus:function(e){},reset:function(e){},populate:function(e){},showMenu:function(){a.menu().where("type","readmore").removeClass("hide")},hideMenu:function(){a.menu().where("type","readmore").addClass("hide")},"{self} composerBlockAdd":function(e,t,n){"readmore"==a.getBlockType(n)&&o.hideMenu()},"{self} composerBlockRemove":function(e,t,n){"readmore"==a.getBlockType(n)&&o.showMenu()}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/rule",function(i){EasyBlog.Controller("Composer.Blocks.Handlers.Rule",{defaultOptions:{"{rule}":"> hr","{styleSelection}":"[data-eb-composer-rule-style] [data-style]"}},function(r,t,e,n,s,o,a){return{init:function(){s=r.blocks,s.composer,t.meta,a=i()},activate:function(e){a=e,r.populate(e)},construct:function(e){e=i.extend({},t.data,e);return i("<hr/>")},toText:function(e){},toData:function(e){return s.data(e)},toHTML:function(e){s.data(e);return s.getBlockContent(e).html()},reconstruct:function(e){s.data(e)},refocus:function(e){var t=s.data(e);t.style&&r.setStyle(e,t.style)},reset:function(e){s.getBlockContent(e).html(r.construct())},populate:function(e){e=s.data(e);r.styleSelection("[data-style="+e.style+"]").activateClass("active")},setStyle:function(e,t){s.data(e,"current",t),r.styleSelection().removeClass("selected"),r.styleSelection().where("style",t).addClass("selected");t=[e,r,t];r.trigger("composerBlockRuleSetStyle",t),r.trigger("composerBlockChange",t)},"{styleSelection} click":function(e){e=e.data("style");s.data(a).style=e,r.setStyle(a,e),r.refocus(a)},"{self} composerBlockRuleSetStyle":function(e,t,n,o,a){var i=s.getBlockContent(n);r.rule.inside(i).switchClass(a),r.populate(n)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/section",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Section",{defaultOptions:{"{columnsHeader}":".row","{columns}":".row > div","{wrapper}":"> div[data-col-wrapper]","{columnRange}":"[data-eb-composer-block-column-range]","{control}":"[data-columns-control]","{controlWidth}":"[data-select-width]","{dropdown}":".eb-composer-manage-tab-name > select ","{listboxItem}":"[data-listbox-item]"}},function(t,n,e,o,i,a,r){return{init:function(){i=t.blocks,i.composer,n.meta,s()},activate:function(e){t.populate(e)},deactivate:function(e){},construct:function(e){e=s.extend({},n.data,e);return content},reconstruct:function(e){},refocus:function(){},deconstruct:function(e){return e},reset:function(e){},populate:function(e){},toHTML:function(e){e=e.clone(),e=t.deconstruct(e);return i.getBlockContent(e).html()},toData:function(e){return i.data(e)},toText:function(e){return i.getBlockContent(e).clone().text()},"{self} composerBlockDuplicate":function(e,t,n,o){var a;"section"==i.getBlockType(n)&&(i.updateBlockUid(n),a=i.data(o),data=i.data(n),s.extend(data,a),i.duplicateChildBlocksData(n,o))}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/sendy",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Sendy",{defaultOptions:{"{wrapper}":"[data-eb-sendy-wrapper]","{placeholder}":"[data-sendy-placeholder]","{form}":"[data-sendy-form]","{formTitle}":"[data-sendy-title]","{formId}":"[data-sendy-id]","{formInfo}":"[data-sendy-info]","{formEmail}":"[data-sendy-email]","{formName}":"[data-sendy-name]","{formButton}":"[data-sendy-button]","{fieldUrl}":"[data-field-sendy-link]","{fieldId}":"[data-field-sendy-id]","{fieldTitleToggle}":"[data-field-sendy-title-toggle]","{fieldTitle}":"[data-field-sendy-title]","{fieldInfoToggle}":"[data-field-sendy-info-toggle]","{fieldInfo}":"[data-field-sendy-info]","{fieldEmailPlaceholder}":"[data-field-sendy-email-placeholder]","{fieldNameToggle}":"[data-field-sendy-name-toggle]","{fieldNamePlaceholder}":"[data-field-sendy-name-placeholder]","{fieldButton}":"[data-field-sendy-button]"}},function(o,e,t,n,a,i,r){return{init:function(){a=o.blocks,a.composer,e.meta,r=s()},activate:function(e){r=e,o.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){a.data(e)},refocus:function(){},deconstruct:function(e){return e},reset:function(e){},populate:function(e){e=a.data(e);o.fieldUrl().val(e.url).trigger("keyup"),o.fieldId().val(e.list_id).trigger("keyup"),o.fieldTitleToggle().val(e.title?1:0).trigger("change"),o.fieldTitle().val(e.title_text).trigger("keyup"),o.fieldInfoToggle().val(e.info?1:0).trigger("change"),o.fieldInfo().val(e.info_text).trigger("keyup"),o.fieldNameToggle().val(e.name?1:0).trigger("change"),o.fieldEmailPlaceholder().val(e.email_placeholder),o.fieldNamePlaceholder().val(e.name_placeholder),o.fieldButton().val(e.button)},toHTML:function(e){e=e.clone(),e=o.deconstruct(e);return a.getBlockContent(e).html()},toData:function(e){return a.data(e)},toText:function(e){return a.getBlockContent(e).clone().text()},getForm:function(){return o.getWrapper().find(o.form.selector)},getPlaceHolder:function(){var e=a.getBlockContent(r);return o.placeholder.inside(e)},getWrapper:function(){var e=a.getBlockContent(r);return o.wrapper.inside(e)},updateForm:function(){var e=a.data(r),t=o.getWrapper(),n=o.getPlaceHolder();if(!e.url||!e.list_id)return t.addClass("t-hidden"),void n.removeClass("t-hidden");t.hasClass("t-hidden")&&(t.removeClass("t-hidden"),n.addClass("t-hidden"),o.updateFormTitle(),o.updateFormId(),o.updateFormButton(),o.updateFormInfo(),o.updateFormEmail(),o.updateFormName(),o.updateFormButton())},updateFormId:function(){var e=o.getForm(),t=a.data(r);e.find(o.formId.selector).val(t.id)},updateFormInfo:function(){var e=o.getForm(),t=a.data(r),e=e.find(o.formInfo.selector);t.info?e.removeClass("t-hidden"):e.addClass("t-hidden"),e.html(t.info_text)},updateFormTitle:function(){var e=o.getForm(),t=a.data(r),e=e.find(o.formTitle.selector);t.title?e.removeClass("t-hidden"):e.addClass("t-hidden"),e.html(t.title_text)},updateFormButton:function(){var e=o.getForm(),t=a.data(r);e.find(o.formButton.selector).text(t.button)},updateFormEmail:function(){var e=o.getForm(),t=a.data(r);e.find(o.formEmail.selector).attr("placeholder",t.email_placeholder)},updateFormName:function(){var e=o.getForm(),t=a.data(r),e=e.find(o.formName.selector);t.name?e.parent().removeClass("t-hidden"):e.parent().addClass("t-hidden"),e.attr("placeholder",t.name_placeholder)},"{fieldUrl} keyup":s.debounce(function(e){a.data(r).url=e.val(),o.updateForm()},300),"{fieldId} keyup":s.debounce(function(e){a.data(r).list_id=e.val(),o.updateForm()},300),"{fieldTitleToggle} change":function(e,t){var n=a.data(r),e=0!=e.val();a.getBlockContent(r);n.title=e,o.updateFormTitle()},"{fieldTitle} keyup":s.debounce(function(e){var t=a.data(r),e=e.val();t.title_text=e,o.updateFormTitle()}),"{fieldInfoToggle} change":function(e,t){var n=a.data(r),e=0!=e.val();a.getBlockContent(r);n.info=e,o.updateFormInfo()},"{fieldInfo} keyup":s.debounce(function(e){var t=a.data(r),e=e.val();t.info_text=e,o.updateFormInfo()}),"{fieldEmailPlaceholder} keyup":s.debounce(function(e){var t=a.data(r),e=e.val();t.email_placeholder=e,o.updateFormEmail()}),"{fieldNameToggle} change":function(e,t){var n=a.data(r),e=0!=e.val();a.getBlockContent(r);n.name=e,o.updateFormName()},"{fieldNamePlaceholder} keyup":s.debounce(function(e){var t=a.data(r),e=e.val();t.name_placeholder=e,o.updateFormName()}),"{fieldButton} keyup":s.debounce(function(e){var t=a.data(r),e=e.val();t.button=e,o.updateFormButton()})}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/slideshare",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Slideshare",{defaultOptions:l.extend({"{form}":"> [data-slideshare-form]","{insert}":"[data-slideshare-insert]","{source}":"[data-slideshare-source]","{loader}":"> [data-slideshare-loader]","{preview}":"> [data-slideshare-preview]","{fsSource}":"[data-fs-slideshare-source]","{fsUpdate}":"[data-fs-slideshare-update]","{errorMessage}":"[data-slideshare-error]"},EBD.selectors)},function(i,e,t,a,r,s,n){return{init:function(){r=i.blocks,a=r.composer,s=e.meta,n=l()},toText:function(e){return r.data(e).url},toData:function(e){return r.data(e)},toEditableHTML:function(e){return""},toHTML:function(e){return r.data(e).embed},activate:function(e){n=e,i.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.embed&&!n&&(o.empty(),i.setOverlay(e,t.embed)),t.embed||o.html(l(s.html)),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){var t=r.getBlockContent(e);return i.form.inside(t).remove(),i.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);i.fsSource().val(e.url)},loading:function(){var e=r.getBlockContent(n);i.isLoading?(i.loader.inside(e).addClass("hidden"),i.form.inside(e).removeClass("hidden"),i.isLoading=!1):(i.loader.inside(e).removeClass("hidden"),i.form.inside(e).addClass("hidden"),i.isLoading=!0)},setOverlay:function(e,t){if(!(n=e.data("overlay"))){var n=a.document.overlay.create(e),o=r.getBlockContent(e);return n.placeholder().css("height","600px").appendTo(o),n.element().append(t),n.attach(),void e.data("overlay",n)}n.element().empty(),n.element().append(t)},isUrlValid:function(e){if(""==e)return!1;return/^(http|https):\/\/www\.slideshare\.net\/(.*)$/.test(e)},crawl:function(t,n){var o=r.getBlockContent(t),a=r.data(t);if(!i.isUrlValid(n))return i.errorMessage().removeClass("hide"),!1;var e=t.data("overlay");e&&e.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).then(function(e){e=e[n];return null===e.oembed?l.Deferred().reject():l.Deferred().resolve(e)}).done(function(e){a.url=n,a.embed=e.oembed.html,i.setOverlay(t,a.embed),i.loading(),i.form.inside(o).addClass("hidden")}).fail(function(e){i.errorMessage().removeClass("hide").html(e)})},"{insert} click":function(e){n.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(n),t=i.source.inside(t).val();r.data(n);i.crawl(n,t),i.fsSource().val(t)},"{fsUpdate} click":function(){var e=i.fsSource().val();r.data(n);i.crawl(n,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/soundcloud",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Soundcloud",{defaultOptions:l.extend({"{form}":"> [data-soundcloud-form]","{insert}":"[data-soundcloud-insert]","{source}":"[data-soundcloud-source]","{loader}":"> [data-soundcloud-loader]","{preview}":"> [data-soundcloud-preview]","{fsSource}":"[data-fs-soundcloud-source]","{fsUpdate}":"[data-fs-soundcloud-update]","{errorMessage}":"[data-soundcloud-error]"},EBD.selectors)},function(i,e,t,a,r,s,n){return{init:function(){r=i.blocks,a=r.composer,s=e.meta,n=l()},toText:function(e){return r.data(e).url},toData:function(e){return r.data(e)},toEditableHTML:function(e){return""},toHTML:function(e){return r.data(e).embed},normalize:function(e){return l.extend({},s.data,e)},activate:function(e){n=e,i.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.embed&&!n&&(o.empty(),i.setOverlay(e,t.embed)),t.embed||o.html(l(s.html)),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){var t=r.getBlockContent(e);return i.form.inside(t).remove(),i.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);i.fsSource().val(e.url)},isLoading:!1,loading:function(){var e=r.getBlockContent(n);i.isLoading?(i.loader.inside(e).addClass("hidden"),i.form.inside(e).removeClass("hidden"),i.isLoading=!1):(i.loader.inside(e).removeClass("hidden"),i.form.inside(e).addClass("hidden"),i.isLoading=!0)},setOverlay:function(e,t){var n=e.data("overlay"),o=r.getBlockContent(e);n?(n.element().empty(),n.element().append(t)):((n=a.document.overlay.create(e)).placeholder().css("height","350px").appendTo(o),n.element().append(t),n.attach()),e.data("overlay",n)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/soundcloud\.com\/(.*)$/.test(e)},crawl:function(t,n){var o=r.data(t),e=r.getBlockContent(t);if(!i.isUrlValid(n))return i.errorMessage().removeClass("hide"),!1;var a=t.data("overlay");a&&a.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).done(function(e){e=e[n];o.url=n,o.embed=e.oembed.html,i.setOverlay(t,o.embed)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading(),i.form.inside(e).addClass("hidden")})},"{insert} click":function(e){n.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(n),t=i.source.inside(t).val();i.fsSource().val(t),i.crawl(n,t)},"{fsUpdate} click":function(){var e=i.fsSource().val();i.crawl(n,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/spotify",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Spotify",{defaultOptions:l.extend({"{form}":"> [data-spotify-form]","{insert}":"[data-spotify-insert]","{source}":"[data-spotify-source]","{loader}":"> [data-spotify-loader]","{errorMessage}":"[data-spotify-error]","{preview}":"> [data-spotify-preview]","{fsSource}":"[data-fs-spotify-source]","{fsRefreshButton}":"[data-fs-spotify-refresh]"},EBD.selectors)},function(a,e,t,i,r,s,n){return{init:function(){r=a.blocks,i=r.composer,s=e.meta,n=l()},toData:function(e){return r.data(e)},toText:function(e){return r.data(e).url},toEditableHTML:function(e){return""},toHTML:function(e){return r.data(e).embed},activate:function(e){n=e,a.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.embed&&!n&&(o.empty(),a.setOverlay(e,t.embed)),t.embed||o.html(l(s.html)),e.find(a.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){var t=r.getBlockContent(e);return a.form.inside(t).remove(),a.loader.inside(t).remove(),e},refocus:function(e){},reset:function(e){},populate:function(e){e=r.data(e);a.fsSource().val(e.url)},isLoading:!1,loading:function(){var e=r.getBlockContent(n);a.isLoading?(a.loader.inside(e).addClass("hidden"),a.form.inside(e).removeClass("hidden"),a.isLoading=!1):(a.loader.inside(e).removeClass("hidden"),a.form.inside(e).addClass("hidden"),a.isLoading=!0)},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=i.document.overlay.create(e),n=r.getBlockContent(e),o.placeholder().css("height","400px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},showForm:function(e){e=r.getBlockContent(e);a.form.inside(e).removeClass("hidden")},hideForm:function(e){e=r.getBlockContent(e);a.form.inside(e).addClass("hidden")},crawl:function(t,n){r.getBlockContent(t);var o=r.data(t);if(!a.isUrlValid(n))return a.errorMessage().removeClass("hide"),!1;var e=t.data("overlay");e&&e.element().empty(),a.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).then(function(e){e=e[n];return null===e.oembed?l.Deferred().reject():l.Deferred().resolve(e)}).done(function(e){a.loading(),o.url=n,o.embed=e.oembed.html,a.hideForm(t),a.setOverlay(t,o.embed)}).fail(function(e){a.loading(),a.errorMessage().html(e).removeClass("hide")})},isUrlValid:function(e){if(""==e)return!1;return/^http(s):\/\/open\.spotify\.com\/(track|artist|album|episode)\/(.*)$/.test(e)},"{insert} click":function(e){n.length<1&&(t=a.block.of(e),r.activateBlock(t));var t=r.getBlockContent(n),t=a.source.inside(t).val();a.fsSource().val(t),a.crawl(n,t)},"{fsRefreshButton} click":function(){var e=a.fsSource().val();a.crawl(n,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/table",function(d){EasyBlog.Controller("Composer.Blocks.Handlers.Table",{defaultOptions:{"{tableContainer}":"> .table-container","{table}":"table","{row}":"tr","{cell}":"td","{cellContent}":"td div[contenteditable]","{loading}":"[data-table-loading]","{tableStriped}":"[data-table-striped]","{tableBordered}":"[data-table-bordered]","{tableHover}":"[data-table-hover]","{tableCondensed}":"[data-table-condensed]","{tableRowFieldset}":"[data-table-rows]","{addRow}":"[data-table-rows-add]","{removeRow}":"[data-table-rows-remove]","{tableColumns}":"[data-table-columns]","{tableColumnsAdd}":"[data-table-columns-add]","{tableColumnsRemove}":"[data-table-columns-remove]"}},function(s,e,t,o,l,n,c){return{init:function(){l=s.blocks,o=l.composer,e.meta,c=d()},activate:function(e){c=e,s.populate(e),e.on("keydown.tab",s.cellContent.selector,function(e){var t,n;9==e.which&&(t=d(e.target).parent(),n=(n=s.cell.inside(c)).eq(Math.min(n.index(t)+1,n.length-1)).find("> div[contenteditable]"),o.editor.caret.setAfter(n[0].lastChild),e.stopPropagation())})},deactivate:function(e){e.off("keydown.tab")},construct:function(e){return content},deconstruct:function(e){},reconstruct:function(e){},refocus:function(e){var t=l.getBlockContent(e);(e.data("lastFocused")||s.cell.inside(t).filter(":first")).focus()},reset:function(e){},populate:function(e){e=l.data(e);s.tableStriped().val(e.striped).trigger("change"),s.tableBordered().val(e.bordered).trigger("change"),s.tableHover().val(e.hover).trigger("change"),s.tableCondensed().val(e.condensed).trigger("change"),s.tableRowFieldset().val(e.rows),s.tableColumns().val(e.columns)},toHTML:function(e){s.loader(!1);e=l.getBlockContent(e),e=s.table.inside(e).clone();return d.each(e.find("td"),function(e,t){(t=d(t)).html(t.find("div[contenteditable]").html())}),e[0].outerHTML},toData:function(e){return l.data(e)},toText:function(e){e=l.getBlockContent(e);return s.table.inside(e).text()},"{tableStriped} change":function(e,t){var n=l.getBlockContent(c),e=e.val();s.table.inside(n).toggleClass("table-striped",1==e),l.data(c,"striped",1==e?1:0)},"{tableBordered} change":function(e,t){var n=l.getBlockContent(c),e=e.val();s.table.inside(n).toggleClass("table-bordered",1==e),l.data(c,"bordered",1==e?1:0)},"{tableHover} change":function(e,t){var n=l.getBlockContent(c),e=e.val();s.table.inside(n).toggleClass("table-hover",1==e),l.data(c,"hover",1==e?1:0)},"{tableCondensed} change":function(e,t){var n=l.getBlockContent(c),e=e.val();s.table.inside(n).toggleClass("table-condensed",1==e),l.data(c,"condensed",1==e?1:0)},loader:function(e){var t=l.getBlockContent(c),n=s.tableContainer.inside(t);!1!==e?0<s.loading.inside(t).length||(s.table.inside(n),e=d.create("div").attr("data-table-loading","").css({top:0,left:0,width:"100%",height:"50px",position:"absolute",background:"rgba(0,0,0,0.5)"}).html(d.create("div").css({textAlign:"center",position:"relative",top:"50%",lineHeight:"20px",marginTop:"-10px"}).html('<i class="fdi fa fa-circle-o-notch fa-spin"></i>')),n.append(e)):s.loading.inside(t).remove()},"{tableRowFieldset} change":function(e,t){var n=l.getBlockContent(c),o=e.val(),a=l.data(c);(isNaN(o)||parseInt(o)<1||d.isEmpty(o))&&e.val(o=1);var i,r=(o=parseInt(o))-s.row.inside(n).length;0!=r&&(a.rows=o,i=s.table.inside(n),setTimeout(function(){var e;r<0&&s.row.inside(i).slice(r).remove(),0<r&&(e=parseInt(s.tableColumns().val()),e=Array(1+r).join("<tr>"+Array(e+1).join('<td><div contenteditable="true">&#8203;</div></td>')+"</tr>"),i.append(e)),i.appendTo(n)},50))},"{tableColumns} change":function(e,t){var n=l.getBlockContent(c),o=e.val(),a=l.data(c);(isNaN(o)||parseInt(o)<1||d.isEmpty(o))&&e.val(o=1);var i,o=parseInt(o),e=s.row.inside(n).filter(":first-child"),r=o-s.cell.inside(e).length;0!=r&&(a.columns=o,i=s.table.inside(n),setTimeout(function(){var e,t=s.row.inside(i);r<0&&d.each(t,function(e,t){s.cell.inside(t).slice(r).remove()}),0<r&&(e=Array(1+r).join('<td><div contenteditable="true">&#8203;</div></td>'),t.append(e)),i.appendTo(n)},50))},"{addRow} click":function(e,t){l.getBlockContent(c);var n=parseInt(s.tableRowFieldset().val())+1;s.tableRowFieldset().val(n).trigger("change")},"{removeRow} click":function(e,t){l.getBlockContent(c);var n=Math.max(parseInt(s.tableRowFieldset().val())-1,1);s.tableRowFieldset().val(n).trigger("change")},"{tableColumnsAdd} click":function(e,t){var n=parseInt(s.tableColumns().val())+1;s.tableColumns().val(n).trigger("change")},"{tableColumnsRemove} click":function(e,t){s.tableColumns().val(Math.max(parseInt(s.tableColumns().val())-1,1)).trigger("change")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/tabs",function(c){EasyBlog.Controller("Composer.Blocks.Handlers.Tabs",{defaultOptions:{"{tabHeader}":".nav-tabs","{tabHeaderListItem}":".nav-tabs > li","{tabHeaderListItemContent}":".nav-tabs > li a","{tabContent}":".tab-content","{tabPane}":"> .tab-content > .tab-pane","{titleItem}":"[data-tab-header-item]","{control}":"[data-tabs-control]","{controlItemContent}":"[data-tabs-control] [data-listbox-item-content]"}},function(r,t,e,i,s,n,l){return{init:function(){s=r.blocks,i=s.composer,t.meta,l=c()},activate:function(e){l=e,r.populate(e)},deactivate:function(e){},construct:function(e){e=c.extend({},t.data,e);return content},reconstruct:function(e){var t;e.hasClass("is-new")&&(s.data(e),t=s.getBlockContent(e),e=c.uid("firsttab"),newcontent=t.html().replace(/firsttab/g,e),t.html(newcontent))},"{self} composerBlockDuplicate":function(e,t,n,o){var a,i;"tabs"==s.getBlockType(n)&&(s.updateBlockUid(n),a=s.data(o),data=s.data(n),c.extend(data,a),s.duplicateChildBlocksData(n,o),clonedContent=s.getBlockContent(n),i=r.tabHeaderListItem.inside(n).find("a"),c.each(i,function(e,t){var n=c(i[e]).attr("href"),o=c.uid("tab-");c(i[e]).attr("href","#"+o),clonedContent.find("div"+n).attr("id",o)}))},deconstruct:function(o){return c.each(o.find("[data-tab-wrapper]"),function(e,t){var n=(t=c(t)).parent();n.removeAttr("contenteditable"),t.children().appendTo(n),t.remove(),r.tabHeaderListItemContent.inside(o).eq(e).removeAttr("contenteditable")}),o},refocus:function(e){r.tabPane.inside(e).filter(".active").focus()},reset:function(e){},recover:function(e){},populate:function(e){e=s.data(e);r.control().listbox().listbox("populate",e.tabs,function(e,t){e.listboxitem("content",t)})},revert:function(e){},toHTML:function(e){e=e.clone(),e=r.deconstruct(e);return s.getBlockContent(e).html()},toData:function(e){return s.data(e)},toText:function(e){e=e.clone();return r.deconstruct(e).text()},tab:{create:function(e){var t=c.uid("tab-"),n='<li><a href="#'+t+'" role="tab" data-bp-toggle="tab" data-tab-title contenteditable="true"></a></li>',o=c("<div></div>",{class:"tab-pane",id:t}),a=c("<div></div>",{class:"ebd-nest","data-type":"block","data-tab-wrapper":""}),t=s.constructNestedBlock("text");a.wrapInner(t),o.wrapInner(a),r.tabContent.inside(l).filter(":first").append(o),r.tabHeader.inside(l).filter(":first").append(n),i.blocks.tree.populate()},remove:function(e){var t=r.tabContent.inside(l).filter(":first").children(".tab-pane").eq(e);t.find(EBD.nestedBlock).each(function(){var e=c(this);s.removeBlock(e,{skipPanelTrigger:!0,skipFontTrigger:!0})}),t.remove(),r.tabHeaderListItem.inside(l).eq(e).remove()},focus:function(e){r.tabHeaderListItem.inside(l).eq(e).find("a").tab("show")}},"{tabHeaderListItem} click":function(e){e.find("a").tab("show")},"{tabHeaderListItemContent} keyup":c.debounce(function(e,t){"13"!=(t.keyCode||t.which)&&(t=e.parents(".nav-tabs > li").index(),e=e.html().replace(/(<br>\s*)+$/,""),r.control().listbox("getItems").eq(t).listboxitem("content",e),s.data(l).tabs[t].content=e)},250),"{tabHeaderListItemContent} click":function(e,t){t.preventDefault()},"{tabHeaderListItemContent} keydown":function(e,t){"13"==(t.keyCode||t.which)&&t.preventDefault()},"{control} listboxBeforeAddItem":function(e,t,n){r.tab.create();n=n.listboxitem("toData");r.tabHeader.inside(l).filter(":first").find("li").filter(":last").find("a").html(n.content)},"{control} listboxAfterAddItem":function(e,t,n){s.data(l).tabs=r.control().listbox("toData"),1==r.tabContent.inside(l).length&&r.tabHeaderListItem.inside(l).filter(":first").find("a").tab("show")},"{control} listboxBeforeRemoveItem":function(e,t,n){n=n.index();r.tab.remove(n)},"{control} listboxAfterRemoveItem":function(e,t,n){s.data(l).tabs=r.control().listbox("toData"),1==r.tabContent.inside(l).length&&r.tabHeaderListItem.inside(l).filter(":first").find("a").tab("show")},"{control} listboxAfterToggleDefault":function(e,t,n){s.data(l).tabs=r.control().listbox("toData")},"{controlItemContent} keyup":c.debounce(function(e,t){"13"!=(t.keyCode||t.which)&&(t=e.parents("[data-listbox-item]").index(),e=e.html().replace(/(<br>\s*)+$/,""),r.tabHeaderListItem.inside(l).eq(t).find("a").html(e),s.data(l).tabs[t].content=e)},250),"{controlItemContent} keypress":function(e,t){"13"==(t.keyCode||t.which)&&t.preventDefault()}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/ted",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Ted",{elements:["[data-ted-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url}]"],defaultOptions:n.extend({"{form}":"> [data-ted-form]","{insert}":"[data-ted-insert]","{source}":"[data-ted-source]","{loader}":"> [data-ted-loader]","{errorMessage}":"[data-ted-error]","{player}":"iframe","{wrapper}":"[data-ted-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=e.data("overlay");if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){return r.data(e).source},toHTML:function(e){var t=e.clone(),e=(r.data(t),e.data("overlay"));if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(e)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):!t.source&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.data(e);i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change")},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){if(""==e)return!1;return/^(http|https):\/\/www\.ted\.com\/talks\/(.*)$/.test(e)},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},crawl:function(t,n){var o=r.data(n),e=r.getBlockContent(n),a=n.data("overlay");a&&a.element().empty();t="http://www.ted.com/services/v1/oembed.json?url="+encodeURIComponent(t);i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:t}).done(function(e){e=e[t];o.url=t,o.title=e.oembed.title,o.author={name:e.oembed.author_name,url:e.oembed.author_url},o.embed=e.oembed.html,o.permalink=e.oembed.url,i.setOverlay(n),i.updateFieldset(n)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading(),i.form.inside(e).addClass("hidden")})},"{insert} click":function(e){s.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(s),t=i.source.inside(t).val();r.data(s);i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide")},"{fluid} change":function(e,t){var n=1==e.val(),e=r.data(s);e.fluid=n,e.url&&(i.setWrapperLayout(s),i.widthFieldset().toggleClass("hide",n),i.heightFieldset().toggleClass("hide",n),i.getOverlay(s).refresh())},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/text",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Text",{defaultOptions:{"{block}":".ebd-block[data-type=text]","{blockWrapper}":"> [data-eb-text-block-wrapper]","{contentWrapper}":"> [data-eb-text-block-wrapper] > [data-eb-text-content-wrapper]","{allContentWrapper}":"[data-eb-text-content-wrapper]","{lastParagraph}":"> p:last"}},function(a,e,t,n,i,o,r){return{init:function(){i=a.blocks,i.composer,o=e.meta,s()},activateKeys:function(){s(document).off("keydown.blocks.text")},deactivateKeys:function(){s(document).on("keydown.blocks.text",function(e){var t=e.which;return 33!=t&&34!=t||(e.preventDefault(),!1)})},getContent:function(e){e=i.getBlockContent(e);return a.contentWrapper.inside(e).find("p").text()},activate:function(e){a.deactivateKeys(),content=a.getContent(e),content=s.trim(content);e=i.getBlockContent(e),e=a.contentWrapper.inside(e);(content==o.data.default?e.find("> p").html("&nbsp;"):e).focus(),a.populate()},deactivate:function(e){a.activateKeys();var t=a.getContent(e);0!=(t=s.trim(t)).length&&" "!=t||(e=i.getBlockContent(e),1===(e=a.contentWrapper.inside(e).find("> p")).length&&e.html(o.data.default))},construct:function(e){var t=i.createBlock("text");return i.getBlockContent(t).html(o.data.content),t},reconstruct:function(e){var t=i.getBlockContent(e),e=a.blockWrapper.inside(t);e.length||(e=s(o.blockWrapper).append(t[0].childNodes).appendTo(t));var n,t=a.contentWrapper.inside(t);t.length||(n=[],s.each(e[0].childNodes,function(){s(this).is(EBD.block)||n.push(this)}),s(o.contentWrapper).append(n).appendTo(e))},"{self} composerBlockDuplicate":function(e,t,n,o){"text"==i.getBlockType(n)&&(i.updateBlockUid(n),i.duplicateChildBlocksData(n,o))},"{block} keydown":function(e,t){var n=t.keyCode;t.metaKey&&13==n&&(n=i.createBlock("text"),i.addBlock(n),i.activateBlock(n))},deconstruct:function(e){var t=i.getBlockContent(e),n=a.contentWrapper.inside(t);if(0==n.length)return e;var o=n[0].childNodes,n=t.find(EBD.immediateNestedBlock).filter(":not(.is-isolated)");return t.empty().append(n).append(o),e},refocus:function(e){e=i.getBlockContent(e);a.contentWrapper.inside(e).focus()},reset:function(e){},populate:function(e){},recover:function(e){},revert:function(e){},toText:function(e){e=e.clone(),e=a.deconstruct(e);return i.getBlockContent(e).text()},toHTML:function(e){e=e.clone(),e=a.deconstruct(e);return i.getBlockContent(e).html()},toData:function(e){},"{self} composerListFormat":function(e,t,n){"text"==i.getBlockType(n)&&(a.reconstruct(n),n.find(".redactor-selection-marker").each(function(){var e=s(this);e.find("ul, ol").length&&e.children().insertBefore(e)}))},"{allContentWrapper} mouseup":function(e){e=i.block.of(e);i.font.populateFontFormatting(e)},"{allContentWrapper} keyup":s.debounce(function(e){e=i.block.of(e);i.font.populateFontFormatting(e)},100)}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/thumbnails",function(b){var a="view-selectratio",i="view-customratio";EasyBlog.Controller("Composer.Blocks.Handlers.Thumbnails",{elements:["[data-eb-thumbnails-{layout-fieldset|layout-selection|size-fieldset|strategy-field|strategy-menu-item}]","[data-eb-thumbnails-columns-field] [data-eb-{"+["numslider","numslider-toggle","numslider-widget","numslider-value","numslider-input"].join("|")+"}]","[data-eb-thumbnails-{ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|alignment-selection|size-field|ratio-selection|ratio-input}]"],defaultOptions:{"{thumbUploadPlaceholder}":".eb-thumbs-upload-placeholder","{thumbContainer}":".eb-thumbs","{thumbColumn}":".eb-thumbs-col","{thumbItem}":".eb-thumb","{thumbViewport}":"> div","{thumbPlaceholder}":".eb-thumb-placeholder","{thumbImage}":".ebd-block[data-type=image]","{browseButton}":"[data-eb-thumbnails-browse]","{sourceChangeButton}":"[data-eb-image-source-change-button]"}},function(m,e,t,n,g,s,c,o,v){return{init:function(){g=m.blocks,g.composer,s=e.meta,c=b(),g.dimensions,mediaManager=EasyBlog.MediaManager,mediaUploader=mediaManager.uploader,m.initImageBlockHandler(),m.initIndexing(c)},initIndexing:function(e){e=m.thumbItem.inside(e);indexing=b(e).length},normalize:function(e){return b.extend({},s.data,e)},activate:function(e){c=e,m.initIndexing(e),m.populate(e),m.initSortable(e)},deactivate:function(e){m.destroySortable(e)},initSortable:function(e){var t;window.ezb.mobile||(t=m.thumbColumn.inside(e),e=m.thumbContainer.inside(e),b(t).data("ui-sortable")||b(t).sortable({connectWith:".eb-thumbs-col",placeholder:"eb-thumb",containment:e}).disableSelection())},destroySortable:function(e){if(!window.ezb.mobile){e=m.thumbColumn.inside(e);if(b(e).data("ui-sortable"))try{b(e).sortable("destroy")}catch(e){}}},construct:function(e){},initImageBlockHandler:function(){null==v&&(g=m.blocks,v=g.getBlockHandler("image"))},constructImage:function(n,o,e){m.initImageBlockHandler();var t=m.addThumbItem(n),a=g.data(n);const i=a.strategy,r=a.layout,s=a.column_count;t.removeClass("is-uploading"),t.find(".eb-loader-o").remove();var l=m.thumbViewport.inside(t);t.append(l),b.each(e,function(e,t){t=m.createThumbImage(n,o,t);l.html(t),"stack"===r&&1===s&&(v.toAdvancedImageMode(t),v.resizeToViewport(t,i))}),m.thumbContainer.inside(n).removeClass("is-empty"),m.activate(c)},reconstruct:function(e){e.editable(!1);e=m.thumbUploadPlaceholder.inside(e);EasyBlog.MediaManager.uploader.register(e)},deconstruct:function(e){return m.destroySortable(e),m.thumbUploadPlaceholder.inside(e).remove(),e},refocus:function(e){},reset:function(e){},toData:function(e){return g.data(e)},toText:function(e){},toHTML:function(e){e=e.clone(),e=m.deconstruct(e);return g.getBlockContent(e).html()},createThumbItem:function(){return b(s.thumbItem)},addThumbItem:function(e){var t=m.createThumbItem();return t.attr("data-position",indexing),indexing++,m.getNextColumn(e).append(t),t},getNextColumnIndex:function(e){var t=g.data(e),e=m.thumbItem.inside(e).length,t=t.column_count;return m.getColumnIndex(e,t)},getColumnIndex:function(e,t){return e-Math.floor(e/t)*t},getNextColumn:function(e){var t=m.getNextColumnIndex(e);return m.thumbColumn.inside(e).eq(t)},createThumbPlaceholder:function(){return b(s.thumbPlaceholder)},createThumbImage:function(e,t,n){var o=g.data(e),a=t.uri,i=mediaManager.getVariation(a,"small"),r=mediaManager.getVariation(a,"large"),s=i.width,l=i.height,c=s/l,d=!1,u=!1,p="",e="";null!=n.meta.params&&(d=(t=JSON.parse(n.meta.params)).caption_text,u=t.alt_text,p=void 0!==t.extension?t.extension:""),"webp"==p&&(e=n.meta.fallbackItem.meta);a={uri:a,url:i.url,variation:i.key,extension:p,fallbackItem:e,mode_lock:!0,width_lock:!0,height_lock:!0,element_ratio:c,natural_width:s,natural_height:l,natural_ratio:c,caption_enabled:!0,caption_text:d,alt_text:u,link_enabled:!1,style_enabled:!1,size_enabled:!1,popup_uri:a,popup_url:r.url,popup_variation:r.key},r=o.layout;const f=o.strategy;"stack"===r&&b.extend(a,{mode:"simple",fluid:!1,width:"100%"}),"grid"===r&&b.extend(a,{mode:"advanced",fluid:!0,width:"100%",height:"100%",ratio:o.ratio,strategy:o.strategy});var h=g.constructNestedBlock("image",a).addClass("is-isolated");return m.initImageBlockHandler(),"grid"===r&&setTimeout(function(){v.toAdvancedImageMode(h),v.setImageRatio(h,o.ratio),v.resizeToViewport(h,f)},150),h},"{thumbUploadPlaceholder} mediaUploaderFilesAdded":function(e,t,n,o){var i=g.block.of(e);b.each(o,function(e,t){var n=t.id,o=m.addThumbItem(i);o.addClass("is-uploading").attr("data-file-id",n);var a=m.thumbViewport.inside(o),n=m.createThumbPlaceholder();o.append(a),mediaUploader.addItem(t,n),m.thumbContainer.inside(i).removeClass("is-empty")})},"{thumbUploadPlaceholder} mediaUploaderFileUploaded":function(i,e,t,r,n){var s=r.id,l=n.response.media,c=l.meta;setTimeout(function(){var e=g.block.of(i),t=g.data(e),n=t.layout,o=t.column_count,a=t.strategy,t=m.thumbItem().where("fileId",s);t.removeClass("is-uploading").removeAttr("data-file-id").find(".eb-loader-o").remove(),mediaUploader.removeItem(r,t);t=m.thumbViewport.inside(t),e=m.createThumbImage(e,c,l);t.html(e),"stack"===n&&1===o&&(v.toAdvancedImageMode(e),v.resizeToViewport(e,a))},600)},populate:function(e){var t=m.hasThumbnails(e);g.panel.fieldgroup.get("thumbnails").toggleClass("is-new",!t),t&&(m.populateLayout(e),m.populateColumnCount(e),m.populateResizeStrategy(e),m.populateRatio(e))},fixedViewport:!1,setLayout:function(e,a){m.initImageBlockHandler();var i=g.data(e);i.layout=a;var r=m.thumbImage.inside(e);r.each(function(e){var t=b(this),n=i.strategy,o=i.ratio;"grid"==a&&r.each(function(e){v.toAdvancedImageMode(t),v.setImageRatio(t,o),v.resizeToViewport(t,n)}),"stack"==a&&(!1===m.fixedViewport?(v.toAdvancedImageMode(t),v.resizeToViewport(t,n)):v.toSimpleImageMode(t))}),m.fixedViewport=!0},updateLayout:function(e,t){m.setLayout(e,t),m.populateLayout(e)},populateLayout:function(e){e=g.data(e).layout;m.layoutSelection().removeClass("active").where("value",e).addClass("active"),m.sizeFieldset().switchClass("preset-"+e)},"{layoutSelection} click":function(e){e=e.data("value");m.updateLayout(c,e)},setColumnCount:function(e,n){g.data(e).column_count=n;var t=m.thumbItem.inside(e);t.detach();for(var o=[],a=0;a++<n;)o.push(b(s.thumbColumn));var i=[];t.each(function(e){var t=b(this),n=t.data("position");i[n]=t});for(var r=new Array,a=0;a<i.length;a++)i[a]&&r.push(i[a]);(t=b(r)).each(function(e){var t=b(this),e=m.getColumnIndex(e,n);o[e].append(t)}),m.thumbColumn.inside(e).remove(),m.thumbContainer.inside(e).append(o),e.hasClass("active")&&m.initSortable(e)},updateColumnCount:function(e,t){m.setColumnCount(e,t),m.populateColumnCount(e)},populateColumnCount:function(e){e=g.data(e).column_count;m.resizingFromSlider||(e={start:e,step:1,range:{min:1,max:8},pips:{mode:"values",values:[1,2,3,4,5,6,7,8],density:16}},m.numsliderWidget().find(".noUi-pips").remove().end().noUiSlider(e,!0).noUiSlider_pips(e.pips))},"{numsliderWidget} set":function(e,t,n){m.resizingFromSlider=!0;n=Math.round(n);m.updateColumnCount(c,n);n=g.data(c).layout;m.updateLayout(c,n),m.resizingFromSlider=null},setRatio:function(e,n){m.initImageBlockHandler(),g.data(e).ratio=n,m.thumbImage.inside(e).each(function(e){var t=b(this);v.setImageRatio(t,n)})},updateRatio:function(e,t){m.setRatio(e,t),m.populateRatio(e)},populateRatio:function(e){e=g.data(e).ratio;m.ratioLabel().html(e)},"{ratioButton} click":function(e){m.sizeFieldset().switchClass(a)},"{ratioCustomizeButton} click":function(e){m.sizeFieldset().switchClass(i)},"{ratioCancelButton} click":function(e){m.sizeFieldset().removeClass(a)},"{ratioCancelCustomButton} click":function(e){m.sizeFieldset().switchClass(a)},"{ratioOkCustomButton} click":function(e){m.sizeFieldset().removeClass(i)},"{ratioUseCustomButton} click":function(e){var t=function(e){if(e=b.trim(e),/\:/.test(e)){var t=e.split(":");return parseInt(t[0])+":"+parseInt(t[1])}return parseFloat(e)||0}(m.ratioInput().val());0!=t&&(m.updateRatio(c,t),m.ratioSelection().removeClass("active"),m.sizeFieldset().removeClass(i))},"{ratioSelection} click":function(e){m.ratioSelection().removeClass("active"),e.addClass("active"),m.sizeFieldset().removeClass(a);e=e.data("value");m.updateRatio(c,e)},setResizeStrategy:function(e,n){m.initImageBlockHandler(),g.data(e).strategy=n,m.thumbImage.inside(e).each(function(e){var t=b(this);v.resizeToViewport(t,n)})},updateResizeStrategy:function(e,t){m.setResizeStrategy(e,t),m.populateResizeStrategy(e)},populateResizeStrategy:function(e){e=g.data(e).strategy;m.strategyMenuItem().removeClass("active").where("strategy",e).addClass("active")},"{strategyMenuItem} click":function(e){e=e.data("strategy");m.updateResizeStrategy(c,e)},hasThumbnails:function(e){return!!m.thumbItem.inside(e).length},"{self} composerBlockBeforeRemove":function(e,t,n){var o;"image"==g.getBlockType(n)&&(o=m.thumbItem.of(n),setTimeout(function(){var e=g.block.of(o);o.remove();var t=m.thumbContainer.inside(e),e=m.hasThumbnails(e);t.toggleClass("is-empty",!e)},1))},"{self} composerBlockDuplicate":function(e,t,n,o){"thumbnails"==g.getBlockType(n)&&(g.updateBlockUid(n),g.duplicateChildBlocksData(n,o))},"{browseButton} mediaSelect":function(e,t,n,o){"image"==n.meta.type&&m.constructImage(c,o,[n])},"{sourceChangeButton} mediaSelect":function(e,t,n,o){"image"==n.meta.type&&(n=g.data(c).layout,m.updateLayout(c,n))}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/tiktok",function(d){EasyBlog.Controller("Composer.Blocks.Handlers.Tiktok",{defaultOptions:{"{wrapper}":"[data-tiktok-wrapper]","{form}":"[data-tiktok-form]","{embed}":"[data-tiktok-embed]","{itemPreview}":"[data-tiktok-preview]","{errorMessage}":"[data-tiktok-error]","{input}":"[data-tiktok-input]","{fieldInput}":"[data-tiktok-field-input]","{update}":"[data-tiktok-update]"}},function(r,e,t,a,s,l,c){return{init:function(){s=r.blocks,a=s.composer,l=e.meta,c=d()},toData:function(e){return s.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){var t=s.data(e);c=e,r.populate(t)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=s.data(e),n=e.data("overlay"),o=s.getBlockContent(e);t.html&&!n?(o.empty(),r.setOverlay(e,t.html)):o.html(l.html)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.fieldInput().val(""),e.url&&r.fieldInput().val(e.url)},isValidUrl:function(e){if(!e)return!1;return/^https:\/\/www\.tiktok\.com\/(.*)\/video\/(.*)$/.test(e)},crawl:function(t){var n=s.data(c),e=d(l.preview),o=(r.itemPreview.inside(e),s.getBlockContent(c)),a=r.form.inside(o),i=r.wrapper.inside(o);r.errorMessage().addClass("t-hidden"),r.isValidUrl(t)?(a.addClass("t-hidden"),i.addClass("is-loading"),EasyBlog.ajax("site/views/crawler/crawl",{url:t}).done(function(e){e=e[t].oembed.html;n.url=t,n.html=e,r.fieldInput().val(t),o.empty(),r.setOverlay(c,e)}).fail(function(e){a.removeClass("t-hidden"),i.removeClass("is-loading"),r.errorMessage().html(e).removeClass("t-hidden")}).always(function(){o.removeClass("is-loading")})):r.errorMessage().removeClass("t-hidden")},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=a.document.overlay.create(e),n=s.getBlockContent(e),o.placeholder().css("height","750px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},"{embed} click":function(e,t){var n=r.input().val();r.crawl(n)},"{update} click":function(e,t){var n=r.fieldInput().val();r.crawl(n)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/tweet",function(s){EasyBlog.Controller("Composer.Blocks.Handlers.Tweet",{defaultOptions:s.extend({"{form}":"> [data-tweet-form]","{insert}":"[data-tweet-insert]","{source}":"[data-tweet-source]","{loader}":"> [data-codepen-loader]","{preview}":"> [data-tweet-preview]","{fsSource}":"[data-fs-tweet-source]","{fsUpdate}":"[data-fs-tweet-update]","{errorMessage}":"[data-tweet-error]"},EBD.selectors)},function(a,e,t,n,i,r,o){return{init:function(){i=a.blocks,i.composer,r=e.meta,o=s()},toData:function(e){return i.data(e)},toText:function(e){return i.data(e).source},toHTML:function(e){e=e.clone(),e=a.deconstruct(e);return i.getBlockContent(e).html()},activate:function(e){o=e,a.populate(e)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=i.data(e),n=i.getBlockContent(e),o=e.data("overlay");t.embed&&!o&&a.preview.inside(n).removeClass("hidden").html(t.embed),t.source||n.html(s(r.html)),e.find(a.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){i.data(e)},loading:function(){var e=i.getBlockContent(o);a.isLoading?(a.loader.inside(e).addClass("hidden"),a.form.inside(e).removeClass("hidden"),a.isLoading=!1):(a.loader.inside(e).removeClass("hidden"),a.form.inside(e).addClass("hidden"),a.isLoading=!0)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/twitter\.com\/(.*)\/status\/(.*)$/.test(e)},crawl:function(e,t){var n=i.getBlockContent(e),o=i.data(e);if(!a.isUrlValid(t))return a.errorMessage().removeClass("hide"),!1;a.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:t}).done(function(e){a.loading();e=e[t];o.url=t,o.embed=e.oembed.html,o.source=t,a.form.inside(n).addClass("hidden"),a.preview.inside(n).html(o.embed).removeClass("hidden")}).fail(function(e){a.loading(),a.errorMessage().html(e).removeClass("hide")})},"{insert} click":function(e){o.length<1&&(t=a.block.of(e),i.activateBlock(t));var t=i.getBlockContent(o),t=a.source.inside(t).val();a.fsSource().val(t),a.crawl(o,t)},"{fsUpdate} click":function(){var e=a.fsSource().val();i.data(o);a.crawl(o,e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/twitch",function(l){EasyBlog.Controller("Composer.Blocks.Handlers.Twitch",{defaultOptions:{"{wrapper}":"[data-twitch-wrapper]","{embedButton}":"[data-twitch-embed]","{errorMessage}":"[data-twitch-error]","{input}":"[data-twitch-input]","{fieldInput}":"[data-twitch-field-input]","{update}":"[data-twitch-update]"}},function(a,e,t,i,r,s,o){return{init:function(){r=a.blocks,i=r.composer,s=e.meta,o=l()},toData:function(e){return r.data(e)},toText:function(e){},toEditableHTML:function(e){return""},toHTML:function(e){},activate:function(e){var t=r.data(e);o=e,a.populate(t)},deactivate:function(e){},construct:function(e){},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.src&&!n?(o.empty(),a.createIframe(e,t.src)):o.html(s.html)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){a.fieldInput().val(""),e.url&&a.fieldInput().val(e.url)},type:null,match:null,isValidUrl:function(e){if(!e)return!1;var t=(e=(e=e.trim()).replace(/\/+$/,"")).match(/^https:\/\/www\.twitch\.tv\/(.*)\/video\/(.*)$/);return t?(a.type="video",a.match=t,!0):(t=e.match(/^https:\/\/www\.twitch\.tv\/(.*)\/clip\/(.*)$/))?(a.type="clip",a.match=t,!0):(t=e.match(/^https:\/\/www\.twitch\.tv\/popout\/(.*)\/chat\?popout\=$/))?(a.type="chat",a.match=t,!0):!!(t=e.match(/^https:\/\/www\.twitch\.tv\/([^?\/]+)$/))&&(a.type="live",a.match=t,!0)},embed:function(e){var t,n;a.errorMessage().addClass("t-hidden"),a.isValidUrl(e)?(t=r.data(o),n=r.getBlockContent(o),n=a.wrapper.inside(n),a.fieldInput().val(e),t.url=e,e=a.formatSrc(e),t.src=e,a.createIframe(o,e),n.addClass("t-hidden")):a.errorMessage().removeClass("t-hidden")},createIframe:function(e,t){var n=l.create("iframe");n.attr("src",t),n.attr("frameborder","0"),n.attr("allowfullscreen","1"),n.attr("width","100%"),n.attr("height","400"),a.setOverlay(e,n)},formatSrc:function(){var e="",t=a.type,n=a.match,o=(o=window.eb.rootUrl).replace("https://","");return"video"!=t&&"live"!=t||(e="https://player.twitch.tv/","video"==t&&(e+="?video=v"+n[2]),"live"==t&&(e+="?channel="+n[1]),e+="&"),"clip"==t&&(e="https://clips.twitch.tv/embed?clip="+n[2]+"&"),"chat"==t&&(e="https://www.twitch.tv/embed/"+n[1]+"/chat?"),e+="parent="+o+"&autoplay=false"},setOverlay:function(e,t){var n,o=e.data("overlay");o?(o.element().empty(),o.element().append(t)):(o=i.document.overlay.create(e),n=r.getBlockContent(e),o.placeholder().css("height","400px").appendTo(n),o.element().append(t),o.attach()),e.data("overlay",o)},"{embedButton} click":function(e,t){e=e.closest("[data-twitch-form]").find("[data-twitch-input]").val();a.embed(e)},"{update} click":function(e,t){var n=a.fieldInput().val();a.embed(n)}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/video",function(n){function s(e){return e.toString().match("%")?"%":"px"}function o(e,t){return t=Math.pow(10,t),Math.round(e*t)/t}var e=this,a="view-selectratio",i="view-customratio",t=["video-width","video-height"],m=["numslider","numslider-toggle","numslider-widget","numslider-value","numslider-input","numslider-units","numslider-unit","numslider-current-unit"],g=ratioDecimal=function(e){if(n.isNumeric(e))return e;e=e.split(":");return e[0]/e[1]};ratioPercent=function(e,t){return o(100*g(e),2)+(t?"%":0)},ratioPadding=function(e){return o(1/g(e)*100,2)+"%"};EasyBlog.require().library("plupload2","videojs").done(function(h){EasyBlog.Controller("Composer.Blocks.Handlers.Video",{elements:["[data-eb-{file-error}]","[data-eb-video-size-field] [data-eb-{"+m.join("|")+"}]","^videoSizeField .eb-composer-field[data-name={"+t.join("|")+"}]","[data-eb-video-{ratio-button|ratio-label|ratio-customize-button|ratio-cancel-button|ratio-use-custom-button|ratio-cancel-custom-button|alignment-selection|size-field|ratio-selection|ratio-input}]"],defaultOptions:{"{browseButton}":".eb-composer-placeholder-video [data-eb-mm-browse-button]","{placeholder}":"[data-eb-composer-video-placeholder]","{player}":"[data-video-player]","{dropElement}":"[data-plupload-drop-element]","{autoplay}":"[data-video-fieldset-autoplay]","{loop}":"[data-video-fieldset-loop]","{muted}":"[data-video-fieldset-muted]","{controls}":"[data-video-controls]","{width}":"[data-video-width]","{height}":"[data-video-height]","{videoContainer}":".eb-video","{videoViewport}":".eb-video-viewport","{videoPlayer}":"video","{videoSource}":"source"}},function(d,e,t,l,u,c,r,p,f,o){return{init:function(){u=d.blocks,l=u.composer,c=e.meta,r=h(),f=u.dimensions,o=EasyBlog.MediaManager,h.each(m,function(e,t){var n=h.camelize(t);d[n].of=h.memoize(function(e){e=d.getVideoSizeField(e);return d[n].under(e)})});var t={};p=function(e){return h(t[e.data("uid")]||(t[e.data("uid")]=d.videoContainer.inside(e)[0]))},getVideoViewport=h.memoize(function(e){return d.videoViewport.inside(e)},function(e){return e.data("uid")})},normalize:function(e){return h.extend({},c.data,e)},activate:function(e){r=e,d.populate(e)},deactivate:function(e){},construct:function(e){var t=u.createBlockContainer("video"),n=u.data(t);h.extend(n,e);return t},constructFromMediaFile:function(e){var e=e.data("key"),e=o.getUri(e),n=u.createBlockContainer("video");u.getBlockContent(n),u.data(n);return n.addClass("is-loading"),o.getMedia(e).done(function(t){setTimeout(function(){var e=t.meta.url;d.createPlayer(n,e)},250)}).fail(function(){}).always(function(){n.removeClass("is-loading")}),n},reconstruct:function(e){e.editable(!1);var t=u.data(e);d.hasVideo(e)?(t=u.data(e),d.createPlayer(e,t.url)):0<(e=d.placeholder.inside(e)).length&&EasyBlog.MediaManager.uploader.register(e)},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){var t=d.hasVideoContainer(e);u.panel.fieldgroup.get("video").toggleClass("is-new",!t),data=u.data(e),t&&(d.populateVideoSize(e),d.populateVideoControls(e))},toData:function(e){var t=u.data(e),e=p(e);return 0<e.length&&(e=e[0].style,t.width=e.width,t.height=e.height),t},toText:function(e){},toHTML:function(e){},toLegacyShortcode:function(e,t){t=u.data(t),t={width:t.width+"px",height:t.height+"px",uri:e.uri,autoplay:t.autoplay?"1":"0",muted:t.muted?"1":"0",loop:t.loop?"1":"0"};return"[embed=video]"+JSON.stringify(t)+"[/embed]"},toEditableHTML:function(e){},"{placeholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{placeholder} mediaUploaderFileUploaded":function(e,t,n,o,a){var i=a.response.media.meta,r=u.block.of(e);setTimeout(function(){d.createPlayer(r,i.url),r.hasClass("active")&&d.populate(r)},600)},"{placeholder} mediaUploaderFileError":function(e,t,n,o){o.code==h.plupload2.FILE_EXTENSION_ERROR&&d.fileError.inside(r).removeClass("hide")},"{self} composerBlockDuplicate":function(e,t,n,o){"video"==u.getBlockType(n)&&(n.removeAttr("data-uid"),u.setBlockUid(n),o=u.data(o),data=u.data(n),h.extend(data,o),data.uid=h.uid("video-"),u.getBlockContent(n).empty())},createPlayer:function(e,t){var n=u.data(e),o=t.substr(t.lastIndexOf(".")+1),a="video/x-flv";"mp4"!=o&&"MP4"!=o&&"3gp"!=o&&"3GP"!=o&&"MOV"!=o&&"mov"!=o&&"webm"!=o||(a="video/mp4");var i=n.uid||(n.uid=h.uid("video-")),r=h(c.player).clone(),s=d.videoPlayer.inside(r),o=d.videoSource.inside(r);s.attr("id",i),o.attr("src",t),o.attr("type",a),n.url=t,n.width&&r.css("width",n.width),n.height&&r.css("height",n.height),f.toFluidWidth(e),f.toFluidHeight(e);e=u.getBlockContent(e);e.empty(),e.append(r),videojs(i,{controls:!0,autoplay:!1},function(){this.muted(n.muted)})},populateVideoControls:function(e){var t=u.data(e),n=1==t.autoplay?1:0,e=1==t.loop?1:0,t=1==t.muted?1:0;d.autoplay().val(n).trigger("change"),d.loop().val(e).trigger("change"),d.muted().val(t).trigger("change")},"{muted} change":function(e,t){u.data(r).muted=e.val()},"{autoplay} change":function(e,t){u.data(r).autoplay=e.val()},"{loop} change":function(e,t){u.data(r).loop=e.val()},populateVideoSize:function(e,t){for(var n,t=t||["width","height"];n=t.shift();){var o,a="width"==n?d.getVideoWidth(e):d.getVideoHeight(e),i=parseFloat(a),a=s(a);d.resizingFromSlider!==n&&("px"==a&&(o={start:i,step:1,range:{min:1,max:1600},pips:{mode:"values",values:[64,320,640,960,1280,1600],density:4}}),"%"==a&&(o={start:i,step:1,range:{min:1,max:100},pips:{mode:"values",values:[0,20,40,60,80,100],density:5}}),d.numsliderWidget.of(n).find(".noUi-pips").remove().end().noUiSlider(o,!0).noUiSlider_pips(o.pips));i=Math.round(i);"width"==n&&d.width().val(i),"height"==n&&d.height().val(i)}d.populateVideoRatio(e),d.populateVideoAlignment(e)},getVideoWidth:function(e){var t=p(e),n=t[0].style;if(u.isNestedBlock(e)){e=e[0].style.width;if(/%/.test(e))return e}return n.width||t.css("width")},getVideoHeight:function(e){e=p(e);return e[0].style.height||e.css("height")},getVideoSize:function(e,t){return"width"==t?d.getVideoWidth(e):"height"==t?d.getVideoHeight(e):void 0},getVideoComputedWidth:function(e){return p(e).width()},getVideoComputedHeight:function(e){return p(e).outerHeight()},setVideoWidth:function(e,t){var n=p(e),o=(getVideoViewport(e),d.getVideoRatio(e)),a=s(t);d.getVideoComputedHeight(e);n.toggleClass("is-responsive","%"==a),u.isNestedBlock(e)?("%"==a&&(e.css("width",t),n.css("width","")),"px"==a&&(e.css("width","auto"),n.css("width",t))):n.css("width",t),d.adjustVideoRatio(e,o=0==o&&"%"==a?null:o)},setVideoFluidWidth:function(e,t){var n=p(e);u.isNestedBlock(e)?(f.toAutoWidth(e),n.css("width",t),f.toFluidWidth(e),n.css("width","")):(t=t/u.getBlockContent(e).width()*100+"%",n.css("width",t))},setVideoSize:function(e,t,n){"width"==t&&d.setVideoWidth(e,n),"height"==t&&d.setVideoHeight(e,n)},updateVideoSize:function(e,t,n){d.setVideoSize(e,t,n),d.populateVideoSize(e)},setVideoHeight:function(e,t){var n,o=p(e),a=getVideoViewport(e),i=d.getVideoRatio(e);d.isFluidVideo(e)?(0==i?i=(n=d.getVideoComputedWidth(e))/(t=parseFloat(t)):(n=parseFloat(t)*i,d.setVideoFluidWidth(e,n)),o.css("height",""),a.css("padding-top",ratioPadding(i))):(o.css("height",t),0!==i&&(n=parseFloat(t)*ratioDecimal(i),o.css("width",n),a.css("padding-top","")))},setVideoUnit:function(e,t,n){var o;"width"===t&&(p(e),o=d.getVideoWidth(e),t=d.getVideoComputedWidth(e),d.getVideoComputedHeight(e),"px"==n&&/%/.test(o)&&d.setVideoWidth(e,t),"%"==n&&/px/.test(o)&&d.setVideoFluidWidth(e,t))},getVideoUnit:function(e,t){t=d.getVideoSize(e,t);return s(t)},updateVideoUnit:function(e,t,n){d.setVideoUnit(e,t,n),d.populateVideoSize(e)},handleNumsliderWidget:function(e,t){var n=d.getVideoSizeProp(e),e=d.getVideoSizeUnit(n),t=Math.round(t)+e;d.resizingFromSlider=n,d.updateVideoSize(r,n,t),d.resizingFromSlider=null},"{width} change":function(e,t){e=e.val();(e=100<e?100:e)<0&&(e=0),d.updateVideoSize(r,"width",e+="%")},"{height} change":function(e,t){e=e.val()+"px";d.updateVideoSize(r,"height",e)},"{numsliderWidget} nouislide":function(e,t,n){d.handleNumsliderWidget(e,n)},"{numsliderWidget} set":function(e,t,n){d.handleNumsliderWidget(e,n)},"{numsliderInput} input":function(e){e.off("blur.numslider");var t,n=d.getVideoSizeProp(e),o=d.getVideoSize(r,n),a=parseFloat(o),i=e.val(),o=i+s(o);if(!h.isNumeric(i))return t=a,void e.on("blur.numslider",function(){e.val(t)});d.updateVideoSize(r,n,o)},"{numsliderUnit} click":function(e){var t=d.getVideoSizeProp(e),e=e.data("unit");d.updateVideoUnit(r,t,e)},"{self} composerBlockResizeStart":function(e,t,n,o){var a,i;"video"===u.getBlockType(n)&&(a=d.getVideoComputedWidth(n),i=d.getVideoComputedHeight(n),n.data("initialWidth",a),n.data("initialHeight",i))},"{self} composerBlockBeforeResize":function(e,t,n,o){function a(){d.isFluidVideo(n)?d.setVideoFluidWidth(n,l):d.setVideoWidth(n,l)}function i(){d.setVideoHeight(n,c)}var r,s,l,c;"video"===u.getBlockType(n)&&d.hasVideoContainer(n)&&(t.preventDefault(),n.data("initialImageSize"),s=o.originalSize,t=(r=o.size).width-s.width,o=r.height-s.height,r=n.data("initialWidth"),s=n.data("initialHeight"),l=r+t,c=s+o,0==d.getVideoRatio(n)?(0!=t&&a(),0!=o&&i()):0==t?0!=o&&i():a(),d.populateVideoSize(n))},setVideoRatio:function(e,t){u.data(e).ratio=t,d.adjustVideoRatio(e,t)},adjustVideoRatio:function(e,t){var n=p(e),o=getVideoViewport(e),a=d.getVideoComputedWidth(e),i=d.getVideoComputedHeight(e),r="",s="";null==t&&(t=a/i),d.isFluidVideo(e)?s=ratioPadding(t):r=0==t?i:a/ratioDecimal(t),n.css("height",r),o.css("padding-top",s)},populateVideoRatio:function(e){e=u.data(e).ratio;d.ratioButton().toggleClass("ratio-unlocked",0==e),d.ratioLabel().html(e)},updateVideoRatio:function(e,t){d.setVideoRatio(e,t),d.populateVideoRatio(e)},getVideoRatio:function(e){var t,n=u.data(e);p(e);return void 0===n.ratio&&(t=d.getVideoComputedWidth(e),e=d.getVideoComputedHeight(e),n.ratio=t/e),g(n.ratio)},"{browseButton} mediaSelect":function(e,t,n,o){var a=u.block.of(e);"video"==n.meta.type&&(e=n.meta,(n=l.document).isLegacy()?(content=d.toLegacyHTML(a),n.insertContent(content)):d.createPlayer(a,e.url))},"{self} mediaInsert":function(e,t,n,o,a,i){var r,s;"video"==n.meta.type&&((r=l.document).isLegacy()?(s=u.data(o),a=h.extend(s,a),content=d.toLegacyShortcode(n.meta,o),r.insertContent(content)):(o=u.constructBlock("video",{url:n.meta.url,autoplay:a.autoplay,loop:a.loop,muted:a.muted}),u.addBlock(o),i||u.activateBlock(o)))},"{self} mediaInfoDestroy":function(e,t,n,o){o&&"video"!=o.meta.type||(n=d.videoPlayer.inside(n).attr("id"),videojs(n).dispose())},"{ratioButton} click":function(e){d.sizeField().switchClass(a)},"{ratioCustomizeButton} click":function(e){d.sizeField().switchClass(i)},"{ratioCancelButton} click":function(e){d.sizeField().removeClass(a)},"{ratioCancelCustomButton} click":function(e){d.sizeField().switchClass(a)},"{ratioOkCustomButton} click":function(e){d.sizeField().removeClass(i)},"{ratioUseCustomButton} click":function(e){var t=function(e){if(e=n.trim(e),/\:/.test(e)){var t=e.split(":");return parseInt(t[0])+":"+parseInt(t[1])}return parseFloat(e)||0}(d.ratioInput().val());0!=t&&(d.updateVideoRatio(r,t),d.ratioSelection().removeClass("active"),d.sizeField().removeClass(i))},"{ratioSelection} click":function(e){d.ratioSelection().removeClass("active"),e.addClass("active"),d.sizeField().removeClass(a);e=e.data("value");d.updateVideoRatio(r,e)},"{alignmentSelection} change":function(e){e=e.val();u.font.setFontFormatting(r,"align"+e)},populateVideoAlignment:function(e){var t;u.isNestedBlock(e)?d.sizeField().addClass("no-alignment"):(t=u.getBlockContent(e),t=d.getVideoComputedWidth(e)<t.width(),d.sizeField().toggleClass("no-alignment",!t),e=e.css("text-align"),d.alignmentSelection().val(e))},getVideoSizeField:function(e){return d["videoSizeFieldVideo"+h.capitalize(e)]()},getVideoSizeProp:function(e){return e.closest(d.numslider.selector).data("name").replace(/video-/,"")},getVideoSizeUnit:function(e){e=d.getVideoSizeField(e);return h.trim(d.numsliderCurrentUnit.under(e).text())},isFluidVideo:function(e){return p(e).hasClass("is-responsive")},hasVideo:function(e){return!!u.data(e).url},hasVideoContainer:function(e){return 0<d.videoContainer.inside(e).length}}}),e.resolve()})}),EasyBlog.module("composer/blocks/handlers/vimeo",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Vimeo",{elements:["[data-vimeo-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url}]"],defaultOptions:n.extend({"{form}":"> [data-vimeo-form]","{insert}":"[data-vimeo-insert]","{source}":"[data-vimeo-source]","{loader}":"> [data-vimeo-loader]","{player}":"iframe","{wrapper}":"[data-vimeo-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=e.data("overlay");if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){return r.data(e).source},toHTML:function(e){var t=e.clone(),e=(r.data(t),e.data("overlay"));if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(e)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):0==t.source.length&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.data(e);i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);e.url&&(i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change"))},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){if(""==e)return!1;return/^https:\/\/vimeo\.com\/(.*)$/.test(e)},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},crawl:function(t,n){var o=r.data(n),e=r.getBlockContent(n),a=n.data("overlay");a&&a.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:t}).done(function(e){e=e[t];o.url=t,o.author={name:e.oembed.author_name,url:e.oembed.author_url},o.description=e.oembed.description,o.embed=e.oembed.html,o.duration=e.oembed.duration,o.width=e.oembed.width,o.height=e.oembed.height,i.setOverlay(n),i.updateFieldset(n)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading(),i.form.inside(e).addClass("hidden")})},"{insert} click":function(e){s.length<1&&(t=i.block.of(e),r.activateBlock(t));var t=r.getBlockContent(s),t=i.source.inside(t).val();r.data(s);i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide")},"{fluid} change":function(e,t){e=1==e.val();r.data(s).fluid=e,i.setWrapperLayout(s),i.widthFieldset().toggleClass("hide",e),i.heightFieldset().toggleClass("hide",e),i.getOverlay(s).refresh()},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/blocks/handlers/youtube",function(n){EasyBlog.Controller("Composer.Blocks.Handlers.Youtube",{elements:["[data-youtube-fieldset-{url|fluid|width-fieldset|height-fieldset|width|height|update-url|nocookie}]"],defaultOptions:n.extend({"{related}":"[data-youtube-fieldset-related]","{form}":"> [data-youtube-form]","{insert}":"[data-youtube-insert]","{source}":"[data-youtube-source]","{loader}":"> [data-youtube-loader]","{errorMessage}":"[data-youtube-error]","{player}":"iframe","{wrapper}":"[data-youtube-wrapper]"},EBD.selectors)},function(i,e,t,o,r,a,s){return{init:function(){r=i.blocks,o=r.composer,a=e.meta,s=n()},toData:function(e){var t=r.data(e),e=e.data("overlay");if(!e)return t;e=i.player.inside(e.element());return t.source=e.attr("src"),t},toText:function(e){return r.data(e).source},toEditableHTML:function(e){return""},toHTML:function(e){r.data(e);e=e.data("overlay");if(e)return e.element().html()},activate:function(e){r.getBlockContent(e),r.data(e);s=e,i.populate(s)},deactivate:function(e){},construct:function(e){},getWrapper:function(e){return n(a.wrapper)},reconstruct:function(e){var t=r.data(e),n=e.data("overlay"),o=r.getBlockContent(e);t.source&&!n?i.setOverlay(e):0==t.source.length&&t.url?(o.html(a.html),i.crawl(t.url,e)):o.html(a.html),e.find(i.source.selector).off("paste").on("paste",function(e){e.stopPropagation()})},deconstruct:function(e){},refocus:function(e){},reset:function(e){},populate:function(e){r.data(e);i.updateFieldset(e)},updateFieldset:function(e){e=r.data(e);i.url().val(e.url),i.width().val(e.width),i.height().val(e.height),i.fluid().val(e.fluid?"1":"0").trigger("change"),i.related().val(e.related?"any":"same").trigger("change"),i.nocookie().val(1==e.nocookie?"1":"0").trigger("change")},getOverlay:function(e){var t=e.data("overlay"),n=(r.data(e),r.getBlockContent(e));return t||(t=o.document.overlay.create(e),e=i.getWrapper(),t.placeholder().appendTo(e),n.empty().append(e),t.attach()),t},setWrapperLayout:function(e){var t=i.wrapper.inside(e),e=r.data(e);e.fluid?t.addClass("is-responsive").css({width:"",height:""}):(t.hasClass("is-responsive")&&(e.width=t.width(),e.height=t.outerHeight()),i.width().val(e.width),i.height().val(e.height),t.css({width:e.width,height:e.height}).removeClass("is-responsive"))},setOverlay:function(e){var t=r.data(e),n=i.getOverlay(e);0<n.element().length&&n.element().empty(),i.setWrapperLayout(e),n.element().append(t.embed),n.refresh(),e.data("overlay",n)},isUrlValid:function(e){if(""==e)return!1;var t=/^(http|https):\/\/www\.youtube\.com\/watch\?v=(.*)$/.test(e);return t=(t=t||/^(http|https):\/\/youtu\.be\/(.*)$/.test(e))||/^(http|https):\/\/www\.youtube\.com\/shorts\/(.*)$/.test(e)},loading:function(){var e=r.getBlockContent(s),t=i.loader.inside(e),e=i.form.inside(e);i.isLoading?(t.addClass("hidden"),e.removeClass("hidden"),i.isLoading=!1):(t.removeClass("hidden"),e.addClass("hidden"),i.isLoading=!0)},hideForm:function(e){e=r.getBlockContent(e);i.form.inside(e).addClass("hidden"),i.loader.inside(e).removeClass("hidden")},showForm:function(e){e=r.getBlockContent(e);i.form.inside(e).removeClass("hidden"),i.loader.inside(e).addClass("hidden")},crawl:function(n,o){var a=r.data(o),e=(r.getBlockContent(o),o.data("overlay"));e&&e.element().empty(),i.loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).done(function(e,t){e=e[n];if(e.oembed.error)return i.showForm(o),void i.errorMessage().removeClass("hide").html(t);a.url=n,a.author={name:e.oembed.author_name,url:e.oembed.author_url},a.embed=e.oembed.html,a.embed_nocookie=e.oembed.html_nocookie,a.embed_original=e.oembed.html,a.width=e.oembed.width,a.height=e.oembed.height,i.setOverlay(o),i.updateFieldset(o)}).fail(function(e){i.errorMessage().removeClass("hide").html(e)}).always(function(){i.loading()})},"{insert} click":function(e){var t;s.length<1?(t=i.block.of(e),r.activateBlock(t)):(t=r.getBlockContent(s),t=i.source.inside(t).val(),r.data(s),i.isUrlValid(t)?i.crawl(t,s):i.errorMessage().removeClass("hide"))},"{related} change":function(e,t){var n=r.data(s),o="any"==e.val(),a=s.data("overlay");n.related=o,a&&(a=(e=i.player.inside(a.element())).attr("src"),o||(a=a.replace("?feature=oembed","?feature=oembed&rel=0"),e.attr("src",a)),o&&(a=a.replace("&rel=0",""),e.attr("src",a)),n.source=a)},"{fluid} change":function(e,t){var n=1==e.val(),e=r.data(s);e.fluid=n,e.url&&(i.setWrapperLayout(s),i.widthFieldset().toggleClass("hide",n),i.heightFieldset().toggleClass("hide",n),i.getOverlay(s).refresh())},"{width} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();n.url&&0!=e&&(n.width=e,i.getOverlay(s),i.wrapper.inside(s).css("width",e),i.getOverlay(s).refresh())},250),"{height} keyup":n.debounce(function(e,t){var n=r.data(s),e=e.val();0!=e&&(n.height=e,i.wrapper.inside(s).css("height",e),i.getOverlay(s).refresh())},250),"{updateUrl} click":function(e,t){var n=i.url().val(),o=(r.data(s),r.getBlockContent(s));i.isUrlValid(n)?i.crawl(n,s):i.errorMessage.inside(o).removeClass("hide")},"{nocookie} change":function(e,t){var n=r.data(s),e=1==e.val();n.nocookie=e,n.url&&(n.embed=e?n.embed_nocookie:n.embed_original,n.related||(n.embed=n.embed.replace("?feature=oembed","?feature=oembed&rel=0")),i.setOverlay(s))}}}),this.resolve()}),EasyBlog.module("composer/blocks/mobile",function(c){EasyBlog.Controller("Composer.Blocks.Mobile",{defaultOptions:c.extend({"{blipp}":"[data-eb-blipp]","{viewport}":".eb-composer-viewport","{actionBar}":"[data-eb-composer-actions]"},EBD.selectors)},function(l,e,t,n,o,a){return{init:function(){o=l.blocks,n=o.composer},"{blipp} mousedown":function(r,e){var s;e.stopPropagation(),e.preventDefault(),c(document).off("mousemove.blip mouseup.blip").on("mousemove.blip",function(e){var t=c.getPointerPosition(e),n=l.viewport(),o=n.offset(),a=n.width()-10,i=n.height()-30,e=o.left+30,n=t.x-o.left,o=t.y-o.top;r.css("left",n),r.css("top",o),s=null,t.y<30&&(s="addBlock"),t.y>i&&(s="removeBlock"),t.x<e&&(s="viewBlockTree"),t.x>a&&(s="moveBlock")}).on("mouseup.blip",function(){return c(document).off("mousemove.blip"),l.actionBar().show(),n.blocks.droppable.destroyDropzones(),n.sidebar.deactivate("blocks"),n.sidebar.deactivate("explorer"),"addBlock"==s?(n.sidebar.activate("blocks"),n.blocks.droppable.populateDropzones(),void l.trigger("ComposerMobileAddBlock")):"moveBlock"==s?(n.blocks.droppable.populateDropzones(),void o.getAllBlocks().on("click.tapremove",function(e){e.stopPropagation(),c(this).addClass("hide")})):"removeBlock"==s?(l.actionBar().hide(),o.getAllBlocks().on("click.tapremove",function(e){e.stopPropagation();e=c(this);o.removeBlock(e)}),void l.trigger("ComposerMobileRemoveBlock")):void("viewBlockTree"==s&&(EasyBlog.Composer.sidebar.activate("explorer"),l.trigger("ComposerMobileViewTree")))})}}}),this.resolve()}),EasyBlog.module("composer/blocks/nestable",function(e){var t=this,l="is-nested";EasyBlog.require().library("ui/sortable").done(function(s){EasyBlog.Controller("Composer.Blocks.Nestable",{defaultOptions:s.extend({},EBD.selectors)},function(r,e,t,n,i,o){return{init:function(){i=r.blocks,n=r.blocks.composer,currentNest=s()},enable:function(){r.nest().each(function(){var e=s(this);r.initNestable(e)})},disable:function(){r.nest().each(function(){var e=s(this);r.destroyNestable(e)})},initNestable:function(e){e.hasClass("ui-sortable")||e.sortable({items:EBD.childBlock,connectWith:EBD.root+", "+EBD.nest,helper:"clone",appendTo:n.document.ghosts(),placeholder:"ebd-block is-placeholder is-nested",tolerance:"pointer",refreshPositions:!0,handle:EBD.immediateBlockSortHandle})},destroyNestable:function(e){e.hasClass("ui-sortable")&&e.sortable("destroy")},"{self} composerBlockMechanicsChange":function(e,t,n){"sortable"==n?r.enable():r.disable()},isBlockNest:function(e){return"block"==e.data("type")},isContentNest:function(e){return"content"==e.data("type")},"{self} composerBlockCreate":function(e,t,n,o){},"{self} composerBlockInit":function(e,t,n,o){n.is(EBD.nestableBlock)&&"sortable"!=!i.getMechanics()&&n.find(EBD.nest).each(function(){var e=s(this);r.initNestable(e)})},disableEditableNest:function(e){e.editable()&&(e.editable(!1),e.data("editable-nest",!0))},enableEditableNest:function(e){e.data("editable-nest")&&(e.editable(!0),e.removeData("editable-nest"))},"{block} mouseover":function(e,t){if(!t.nestHandled){if(e.is(EBD.nestedBlock)){var n=r.nest.of(EBD.nestedBlock);r.disableEditableNest(n)}else{if((n=r.nest.inside(e)).length<1)return;r.enableEditableNest(n)}t.nestHandled=!0}},"{block} mouseout":function(e,t){e.is(EBD.nestedBlock)&&(e=r.nest.of(EBD.nestedBlock),r.enableEditableNest(e))},snap:function(e,t,n,o){var a,i;r.isBlockNest(n)?o.addClass(l):(a=n.offset(),i=n.width(),i=a.left+i/2,i=r.position(n,e<i?"left":"right"),o.addClass(l).switchClass("nest-"+i),n.data("snappedPosition",i))},unsnap:function(e){e.removeClass(l).removeClass(function(e,t){return(t.match(/(^|\s)nest-\S+/g)||[]).join(" ")})},positions:function(e){return(e.data("positions")||"left,right").split(",")},availablePositions:function(e){var t=r.positions(e);return e.find(EBD.childBlock+":not(.is-sort-item)").each(function(){var e=r.extractPosition(s(this).attr("class"));e&&s.pull(t,e)}),t},extractPosition:function(e){return(((e=e instanceof s?e.attr("class"):e).match(/nest-\w+/g)||[])[0]||"").split("nest-")[1]},position:function(e,t){e=r.availablePositions(e);return-1<s.indexOf(e,t)?t:e[0]},setTargetNest:function(e){r.clearTargetNest(),i.over(e)},unsetTargetNest:function(e){i.out(e)},clearTargetNest:function(){r.nest().each(function(){var e=s(this);i.out(e)})},trackNest:function(t,n){s(document).off("mousemove.nestable").on("mousemove.nestable",function(e){r.snap(e.pageX,e.pageY,t,n)})},untrackNest:function(){s(document).off("mousemove.nestable")},"{self} composerBlockBeforeDrop":function(e,t,n){var o=n.closest(EBD.nest),a=r.extractPosition(n);n.toggleClass(l,0<o.length),r.isContentNest(o)?(o=r.position(o,o.data("snappedPosition")),n.switchClass("nest-"+o),n.hasClass("is-new")&&i.dimensions.toFluidWidth(n),a&&o!==a?r.trigger("composerBlockNestChange",[n,o,a]):r.trigger("composerBlockNestIn",[n,o])):a&&(r.unsnap(n),r.trigger("composerBlockNestOut",[n]))},replaceWithCommentPlaceholder:function(o,a){var e=s("<div>").html(o[a]),t=e.find(EBD.immediateNestedBlock);t.length<=0||(t.each(function(){var e=s(this),t=i.getBlockUid(e),n=document.createComment("block"+t);e.replaceWith(n);n=i.getBlock(t),t=i.exportBlock(n),n=r.extractPosition(n.attr("class"));n&&(t.position=n),"html"==a&&o.blocks.push(t)}),e=e.html(),o[a]=e)},"{self} composerBlockExport":function(e,t,n,o){o.blocks=[],r.replaceWithCommentPlaceholder(o,"editableHtml"),r.replaceWithCommentPlaceholder(o,"html")}}}),t.resolve()})}),EasyBlog.module("composer/blocks/panel",function(r){EasyBlog.Controller("Composer.Blocks.Panel",{elements:["[data-eb-composer-blocks-{props}]","[data-eb-composer-blocks-{prop-group|prop-action}]","[data-eb-composer-{panel}][data-id=blocks]","[data-eb-composer-blocks-{block-subpanel|removal-subpanel}]","[data-eb-composer-block-{fieldgroup}]","[data-eb-composer-blocks-props-{block-menu|text-menu|block-content|text-content}]","[data-eb-composer-blocks-{subpanel|subpanel-button}]"],defaultOptions:{"{blockTitle}":"[data-block-property-title]","{blockIcon}":"[data-block-property-icon]"}},function(a,e,t,o,i,n){return{init:function(){i=a.blocks,o=i.composer,r()},"{self} composerBlockBeforeActivate":function(e,t,n){o.panels.activate("blocks"),a.panel().switchClass("show-block-subpanel"),a.fieldgroup.display(n)},fieldgroup:{get:r.memoize(function(e){var t=o.find(a.fieldgroup).where("type",e);return t.length<1&&(e=i.getBlockMeta(e),t=r(e.fieldgroup)),t}),hide:function(){a.panel().addClass("is-empty").find(a.fieldgroup).detach()},display:function(e){var t=e.attr("data-type"),n=a.panel();n.removeClass("is-empty").find(a.fieldgroup).detach();n=n.find(a.propGroup).where("type","specific");a.fieldgroup.get(t).toggleClass("is-standalone",i.isStandaloneBlock(e)).appendTo(n)}},openPanel:function(e){"block"!=e&&"text"!=e||(a.panel().switchClass("show-"+e+"-subpanel"),a.subpanelButton().where("name",e).activateClass("active")),"removal"==e&&a.panel().switchClass("show-removal")},activatePanel:function(e){clearTimeout(a.revertToPostPanel);var t=i.getBlockMeta(e);i.getAllParentBlocks(e),i.getChildBlocks(e);a.subpanelButton().show(),t.properties.textpanel||a.subpanelButton().hide(),a.blockIcon().attr("class",t.icon),a.blockTitle().html(i.getBlockTitle(e))},deactivatePanel:function(){a.revertToPostPanel=setTimeout(function(){o.document.workarea().hasClass("is-sorting")||o.panels.activate("post-options")},1),a.fieldgroup.hide()},"{self} composerBlockUpdateTitle":function(e,t,n,o){a.blockTitle().html(o)},"{self} composerBlockActivate":function(e,t,n){a.activatePanel(n)},"{self} composerBlockDeactivate":function(e,t,n){a.deactivatePanel(n)},"{self} composerBlockRemove":function(e,t,n,o){o.skipPanelTrigger||a.fieldgroup.hide(n)},"{subpanelButton} click":function(e){e=e.data("name");a.openPanel(e)}}}),this.resolve()}),EasyBlog.module("composer/blocks/removal",function(e){var t=this,s="is-removing";EasyBlog.require().library("ui/droppable").done(function(e){EasyBlog.Controller("Composer.Blocks.Removal",{defaultOptions:{"{workarea}":EBD.workarea,"{dropzone}":"[data-eb-composer-blocks-removal-subpanel]"}},function(i,e,t,o,r,n){return{init:function(){r=i.blocks,o=r.composer},"{self} composerBlockDrag":function(e,t,n){o.panels.activate("blocks"),r.panel.openPanel("removal");n=i.dropzone();n.data("inited")||(n.droppable({accept:EBD.block,tolerance:"pointer"}),n.data("inited",!0))},"{self} composerBlockDrop":function(e,t,n){i.workarea().hasClass(s)||r.panel.openPanel("block")},"{dropzone} drop":function(e,t,n){var o=n.draggable,a=i.workarea();a.addClass(s),o.addClass(s),e.addClass(s),setTimeout(function(){r.removeBlock(o),setTimeout(function(){r.panel.openPanel("block"),a.removeClass("is-removing"),setTimeout(function(){e.removeClass("is-removing active")},250)},250)},100)},"{dropzone} dropout":function(e,t,n){e.removeClass("active")},"{dropzone} dropover":function(e,t,n){e.addClass("active")}}}),t.resolve()})}),EasyBlog.module("composer/blocks/resizable",function(e){var t=this;EasyBlog.require().library("ui/resizable").done(function(r){EasyBlog.Controller("Composer.Blocks.Resizable",{defaultOptions:r.extend({"{resizeHandle}":".ui-resizable-handle"},EBD.selectors)},function(a,e,t,n,i,o){return{init:function(){i=a.blocks,a.blocks.composer},initResizable:function(e){var t,n;a.hasResizable(e)||(n=a.determineResizeHandles(e))&&(t=a.createResizeHandleElements(n),n=a.createResizeHandleSelectors(n),i.getBlockViewport(e).append(t).resizable({handles:n}),r(t).hide(),e.addClass("is-resizable"))},destroyResizable:function(e){e.hasClass("ui-resizable")&&i.getBlockViewport(e).resizable("destroy"),e.removeClass("is-resizable")},hasResizable:function(e){return i.getBlockViewport(e).hasClass("ui-resizable")},handles:{right:{w:"dimension",sw:"dimension",s:"dimension"},left:{e:"dimension",se:"dimension",s:"dimension"}},determineResizeHandles:function(e){e=i.nestable.extractPosition(e);return a.handles[e]},createResizeHandleElements:function(e){var n=[];return r.each(e,function(e,t){t=r('<div class="ui-resizable-handle"><div></div></div>').addClass("ui-resizable-"+e).attr({"data-direction":e,"data-role":t});n.push(t[0])}),n},createResizeHandleSelectors:function(e){var n=[];return r.each(e,function(e,t){n[e]="> .ui-resizable-"+e}),n},getResizeHandles:function(e){return i.getBlockViewport(e).children(a.resizeHandle.selector)},"{self} composerBlockActivate":function(e,t,n){a.initResizable(n),a.getResizeHandles(n).show()},"{self} composerBlockDeactivate":function(e,t,n){a.getResizeHandles(n).hide()},"{self} composerBlockNestIn":function(e,t,n){a.initResizable(n)},"{self} composerBlockNestOut":function(e,t,n){a.destroyResizable(n)},"{self} composerBlockNestChange":function(e,t,n){a.destroyResizable(n),a.initResizable(n)},"{blocks.viewport} resizestart":function(e,t,n){a.workarea().addClass("is-resizing");e=a.block.of(e);parentBlocks=i.getAllParentBlocks(e),parentBlocks.addClass("has-resizing-child"),a.trigger("composerBlockResizeStart",[e,n])},"{blocks.viewport} resize":function(e,t,n){e.css({top:"",left:"",width:"",height:""}),t.stopPropagation();var o=a.block.of(e);i.isNestedBlock(o)&&"content"===i.getBlockNestType(o)&&(a.trigger("composerBlockBeforeResize",[o,n]).isDefaultPrevented()||(t=n.originalSize,e=n.size,t.width!==e.width&&(n=i.getBlockNest(o),1<(n=(n=e.width/n.width())<0?0:n)&&(n=1),n=Math.floor(100*n)+"%",o.css("width",n)),t.height!==e.height&&(o.css("height",""),t=o.height(),e=e.height,o.css("height",e=e<t?"":e))),a.trigger("composerBlockResize",[o]))},"{blocks.viewport} resizestop":function(e,t,n){a.workarea().removeClassAfter("is-resizing");e=a.block.of(e);parentBlocks=i.getAllParentBlocks(e),parentBlocks.removeClass("has-resizing-child"),a.trigger("composerBlockResizeStop",[e,n])}}}),t.resolve()})}),EasyBlog.module("composer/blocks/scrollable",function(l){EasyBlog.Controller("Composer.Blocks.Scrollable",{defaultOptions:l.extend({},EBD.selectors)},function(r,e,t,s,n,o){return{init:function(){n=r.blocks,s=n.composer},"{block} dragstart":function(){r.scrollstart()},"{blocks.menu} dragstart":function(){r.scrollstart()},"{block} dragstop":function(){r.scrollstop()},"{blocks.menu} dragstop":function(){r.scrollstop()},"{self} composerBlockDrop":function(){r.scrollstop()},stop:!1,scrollTimer:null,scrollstart:function(){function t(){r.stop=!1,(n.y>i||n.y<50)&&(r.stop=!0,n.y>i&&(o.scrollTop+=a/2),n.y<50&&(o.scrollTop-=a/2),clearTimeout(r.scrollTimer),r.scrollTimer=setTimeout(t,1e3),r.trigger("composerDocumentScroll"))}var n,e=s.viewport(),o=s.document.viewportContent()[0],a=e.height(),i=a-50;l(document).on(l.ns("mousemove touchmove",".scrollable"),function(e){n=l.getPointerPosition(e),r.stop&&50<n.y&&n.y<i&&(r.stop=!1),r.stop||t()})},scrollstop:function(){clearTimeout(r.scrollTimer),l(document).off(l.ns("mousemove touchmove",".scrollable"))}}}),this.resolve()}),EasyBlog.module("composer/blocks/search",function(r){EasyBlog.Controller("Composer.Blocks.Search",{defaultOptions:{"{searchInput}":"[data-eb-blocks-search]","{blockSectionContent}":"[data-eb-composer-block-section-content]"}},function(a,e,t,n,i){return{init:function(){i=a.blocks,i.composer},search:function(e){var e=r.trim(e.toLowerCase()),t=i.menu(),n=t.filter("[data-keywords*='"+e+"']"),o=""==e,e=!o&&n.length<1;if(o?t.show():t.hide(),o)return r("[data-eb-composer-block-section]").show(),r('[data-eb-composer-block-menu][data-type="post"]').hide(),void a.trigger("onBlocksAfterSearch");n.show(),n.each(function(e,t){r(t).parents(a.blockSectionContent.selector).removeClass("t-hidden")}),i.view().toggleClass("is-empty",e),i.menuGroup().each(function(){var e=r(this),t=e.parents(".eb-composer-fieldset").show();e.height()<1&&t.hide()}),a.trigger("onBlocksAfterSearch")},"{searchInput} input":r.debounce(function(e,t){a.search(e.val())},150)}}),this.resolve()}),EasyBlog.module("composer/blocks/text",function(e){var t=this;EasyBlog.require().script("composer/vendors/colorpicker","composer/vendors/nouislider","composer/layout/elements").done(function(d){EasyBlog.Controller("Composer.Blocks.Text",{elements:[".eb-composer-fieldset[data-name=text] [data-eb-{font-color-menu|font-family-menu|font-size-menu|font-color-content|font-color-picker|font-family-content|font-size-content|font-color-caption|font-family-caption|font-size-caption|font-family-option}]",".eb-composer-fieldset[data-name=text] [data-eb-{numslider-toggle|numslider-widget|numslider-value|numslider-input|numslider-units|numslider-unit|numslider-current-unit|numslider-unit-toggle}]",".eb-composer-fieldset[data-name=text] [data-eb-{colorpicker|colorpicker-toggle}]","[data-eb-{links|link-item-group|link|link-item|link-preview|link-preview-caption|link-url-field|link-title-field}]"],defaultOptions:d.extend({fontSizeUnits:{px:{start:12,step:2,range:{min:8,max:72},pips:{mode:"values",density:4,values:[8,12,18,24,48,72]}},"%":{start:100,step:10,range:{min:0,max:200},pips:{mode:"positions",values:[0,50,100],density:10}}},"{textFieldset}":"[data-composer-selection][data-type=text]","{fontFormatOption}":"[data-composer-selection][data-type=text] [data-eb-font-format-option]","{fontFormatGroupDropdown}":"[data-composer-selection][data-type=text] [data-font-format-group-dropdown]","{fontSizeCheckbox}":"[data-eb-font-size-content] .eb-numslider-toggle input","{fontSizeToggle}":"[data-eb-font-size-content] .eb-numslider-toggle label","{linksFieldset}":".eb-composer-fieldset[data-name=links]","{linkBlankOption}":"[data-eb-link-blank-option]","{linkFollowOption}":"[data-eb-link-follow-option]","{linkNofollowOption}":"[data-eb-link-nofollow-option]","{linkRemoveButton}":"[data-eb-link-remove-button]","{fontSizeInputBox}":"[data-eb-numslider-input]","{colorInputBox}":"[data-eb-colorhex-field]","{colorHexContainer}":"[data-eb-colorhex-container]","{colorHexInput}":"[data-eb-colorhex-field]"},EBD.selectors)},function(r,t,e,n,s,i,o,a,l,c){return{init:function(){s=r.blocks,n=s.composer,textSelected=!1,hasTextSelection=!1,hasHexIframe=!1,r.textFieldset().on("touchstart click mousedown mouseup",function(e){e.preventDefault()}),r.linksFieldset().on("touchstart click mousedown mouseup",function(e){e.preventDefault()})},"{self} composerDocumentReady":function(){i=n.editor,r.initFontColor(),r.initLinks(),d(document).on("selectionchange",function(){r.stopEditingSelection()})},"{self} composerBlockActivate":function(e,t,n){s.getBlockMeta(n).properties.fonts||r.textFieldset().hide()},"{self} composerTextSelect":function(e,t,n,o,a){var i=s.getBlockMeta(o);if(!i.properties.fonts||"buttons"==i.type)return r.textFieldset().hide(),void r.linksFieldset().hide();c||("alerts"===i.type&&(r.textFieldset().find("[data-font-format-group-basic]").removeClass("eb-pill-group"),r.textFieldset().find("[data-font-format-group-list]").hide(),r.textFieldset().find("[data-font-format-group-dropdown]").hide()),s.panel.blockSubpanel().addClass("has-text-selection"),r.textFieldset().show(),i.data.tabs||r.linksFieldset().show(),r.fontSizeInputBox().disabled(!0),r.textFieldset().find(".eb-font-formatting.section-list").toggle("text"==o.data("type")),r.populateFont(),hasTextSelection=!0,r.startEditingSelection(),r.populateColorHexItem())},"{self} composerTextDeselect":function(e,t,n){c||r.workarea().hasClass("is-sorting")||(r.textFieldset().find("[data-font-format-group-basic]").addClass("eb-pill-group"),r.textFieldset().find("[data-font-format-group-list]").show(),r.textFieldset().find("[data-font-format-group-dropdown]").show(),s.panel.blockSubpanel().removeClass("has-text-selection"),r.textFieldset().hide(),r.linksFieldset().hide(),r.removeTextMarkers(),hasTextSelection=!1,r.linkItemGroup().empty(),r.detroyColorHexItem())},populateFont:function(){r.populateFontColor(),r.populateFontFamily(),r.populateFontSize(),r.populateFontFormatting()},initFontColor:function(){r.fontColorPicker().colorpicker()},"{self} colorpickerChange":function(e,t,n){var o;r.colorHexInput().val(n),!hasTextSelection||0<(o=r.colorHexContainer().find("iframe[data-colorhex-iframe]")).length&&o.contents().find("[data-eb-colorhex-field]").val(n)},detroyColorHexItem:function(){r.colorHexInput().removeClass("t-hidden"),r.colorHexContainer().find("iframe[data-colorhex-iframe]").remove(),r.hasHexIframe=!1},populateColorHexItem:function(){if(hasTextSelection){var e=i.selection.getParent(),e=d(e).css("color").match(/\d+/g);rgb={r:e[0]||0,g:e[1]||0,b:e[2]||0};e="#"+(e=d.hsbToHex(d.rgbToHsb(rgb)));if(1!=r.hasHexIframe){r.hasHexIframe=!0;var t=d(r.colorHexInput()[0]).clone();t.css({padding:"0px 12px",display:"block",fontSize:"13px",lineHeight:"16px",paddingBottom:"0px",color:"#555555",width:"100%",height:"31px",position:"absolute",zIndex:2,backgroundColor:"#ffffff",backgroundImage:"none",border:"1px solid #e1e1e1",borderRadius:"3px",textTransform:"uppercase"}),t.val(e),t.on("keyup",function(e){e=e.keyCode||e.charCode;0<=d.inArray(e,[13,38,40,39,37,27,32,17,18,16,8,46])||(e=d(this).val(),r.colorHexInput().val(e),7==e.length&&r.setFontColor(e))});try{(n=d("<iframe data-colorhex-iframe>")).css({margin:0,padding:"0px",height:"31px",width:"100px",border:"none",display:"block",float:"left"}),n.on("load",function(){d(this.contentWindow.document.body).css({margin:0,overflow:"hidden",width:"100px"}).append(t)}),r.colorHexInput().addClass("t-hidden"),r.colorHexContainer().prepend(n)}catch(e){console.error("There may a cross-iframe security issue. Unable to create text link item properly",e)}}else{var n;(n=r.colorHexContainer().find("iframe[data-colorhex-iframe]")).contents().find("[data-eb-colorhex-field]")}}},populateFontColor:function(){var e,t;r.lastUpdatedViaFontColorUI?r.lastUpdatedViaFontColorUI=!1:(e=i.selection.getParent(),t=d(e).css("color"),r.colorpickerToggle().prop("checked",e.style.color),r.updateFontColorUI(t,!0))},setFontColor:function(e){r.lastUpdatedViaFontColorUI=!0;i.inline.toggleStyle("color: "+e,!0),r.updateFontColorUI(e)},updateFontColorUI:function(e,t){r.updatingFontColorUI=!0,e=e||"#000",r.fontColorCaption().css("backgroundColor",e),!0===t&&r.fontColorPicker().colorpicker("setColor",e),r.updatingFontColorUI=!1},removeFontColor:function(){i.inline.removeStyleRule("color")},populateFontFamily:function(){var e;r.lastUpdatedViaFontFamilyUI?r.lastUpdatedViaFontFamilyUI=!1:(e=i.selection.getParent().style.fontFamily.replace(/\'\"/g,""),r.updateFontFamilyUI(e))},setFontFamily:function(e){r.lastUpdatedViaFontFamilyUI=!0,i.inline.format("span","style","font-family: "+e),r.updateFontFamilyUI(e)},updateFontFamilyUI:function(e){e=e||"";var t=r.fontFamilyOption().removeClass("active").where("value",'"'+e+'"').addClass("active"),e=0<t.length?t.html():e.split(",")[0];r.fontFamilyCaption().html(e)},removeFontFamily:function(){r.lastUpdatedViaFontFamilyUI=!0,i.inline.removeStyleRule("font-family")},populateFontSize:function(){var e,t;r.lastUpdatedViaFontSizeUI?r.lastUpdatedViaFontSizeUI=!1:(t=i.selection.getParent(),e=d(t).css("fontSize"),t=!!t.style.fontSize,r.updateFontSizeUI(e),r.numsliderToggle().prop("checked",!!t))},setFontSize:function(e){d.isNumeric(e)&&(e+=r.getFontSizeUnit()),r.lastUpdatedViaFontSizeUI=!0,i.inline.format("span","style","font-size: "+e);var t=i.selection.getParent(),t=d(t).css("fontSize");r.updateFontSizeUI(e||t),r.numsliderToggle().prop("checked",!!e)},updateFontSizeUI:function(e){r.updatingFontSizeUI=!0;var t=Math.abs(e.replace(/\%|px/gi,""));unit=e.match("%")?"%":"px",r.getFontSizeUnit()!==unit&&r.setFontSizeUnit(unit),r.fontSizeCaption().html(e),r.numsliderCurrentUnit().html(unit),r.numsliderUnit().removeClass("active").where("unit",'"'+unit+'"').addClass("active"),r.numsliderWidget().val(t),r.numsliderInput().val(t),r.updatingFontSizeUI=!1},removeFontSize:function(){i.inline.removeStyleRule("font-size")},getFontSizeUnit:function(){return r.fontSizeContent().data("unit")||"%"},setFontSizeUnit:function(e){r.fontSizeContent().data("unit",e);e=t.fontSizeUnits[e];r.numsliderWidget().find(".noUi-pips").remove().end().noUiSlider(d.extend({document:a},e),!0)},formattingTags:{bold:"strong",italic:"em",underline:"u",hyperlink:"a",strikethrough:"del",code:"code",superscript:"sup",subscript:"sub",orderedlist:"ol",unorderedlist:"ul"},populateFontFormatting:function(){r.lastUpdatedViaFontFormattingUI?r.lastUpdatedViaFontFormattingUI=!1:r.removeTextMarkers();var o=i.selection.getCurrent(),a=d(o).parentsUntil(EBD.block).filter("ul, ol").eq(0);r.fontFormatOption().each(function(){var e=d(this),t=e.data("format"),n=r.formattingTags[t];hasFormatting=/unorderedlist|orderedlist/.test(t)?a.is(n):0!==d(o).closest(n).length,e.toggleClass("active",hasFormatting)})},toggleFontFormatting:function(e){switch(e){case"orderedlist":case"unorderedlist":i.list.toggle(e);break;case"indent":i.indent.increase();break;case"outdent":i.indent.decrease();break;case"clear":r.selectWithinTextMarkers(),i.inline.removeFormat(),r.removeTextMarkers();break;case"hyperlink":r.populateLinks();break;default:r.hasTextMarkers()||r.createTextMarkers(),i.inline.format(e),r.lastUpdatedViaFontFormattingUI=!0}},hasTextMarkers:function(){return 0<r.workarea().find(".composer-text-marker").length},createTextMarkers:function(){i.selection.removeMarkers(),i.selection.createMarkers();var e=d.makeArray(r.workarea().find(".redactor-selection-marker").each(function(){d(this).removeClass("redactor-selection-marker").addClass("composer-text-marker").attr("id",this.id.replace("selection-","text-"))}));return r.selectWithinTextMarkers(e),e},getTextMarkers:function(){var e=d.makeArray(r.workarea().find("span#text-marker-1, span#text-marker-2"));if(e[0]&&e[1])return e},selectWithinTextMarkers:function(e){(e=e||r.getTextMarkers())&&i.caret.set(e[0].nextSibling,0,e[1],0)},removeTextMarkers:function(){r.workarea().find(".composer-text-marker").remove()},startEditingSelection:function(){c=!0,r.removeTextMarkers(),r.workarea().off("mousedown.stopEditingSelection").one("mousedown.stopEditingSelection",function(){r.stopEditingSelection()})},stopEditingSelection:function(){r.fontSizeInputBox().disabled(!1),c=!1},initLinks:function(){r.linkItem.template=r.linkItem(".is-blank").detach().removeClass("is-blank")[0],d("[data-eb-links]").on("click touchstart",function(e){d(e.target).is(r.linkRemoveButton.selector)||e.stopPropagation()})},populateLinks:function(){var e=i.selection.getNodesInRange(),t=d(e).filter("a").first(),o=r.linkItemGroup().empty();d.each(t,function(e,t){var n=r.createLinkItem().appendTo(o);r.processLinkItem(n),r.updateLinkItem(n,t)}),r.linkItemGroup().toggleClass("has-existing-links",0<t.length);e=r.createLinkItem().addClass("is-new").appendTo(o);r.processLinkItem(e);t=i.selection.getText();r.linkPreviewCaption.inside(e).html(t)},createLinkItem:function(){return d(r.linkItem.template).clone()},processLinkItem:function(e){var t=r.linkUrlField.inside(e),n=r.linkTitleField.inside(e);e.data("linkUrlField",t[0]),e.data("linkTitleField",n[0]),t.data("linkItem",e).on("input",r.linkUrlFieldInputHandler).on("mousedown",function(){d.IE&&(e.data("anchorNode")||i.selection.save())}),n.data("linkItem",e).on("input",r.linkTitleFieldInputHandler).on("mousedown",function(){d.IE&&(e.data("anchorNode")||i.selection.save())});var o=e.find(".eb-link-input");t.css({padding:0,display:"block",fontSize:"13px",lineHeight:"24px",fontWeight:"bold",color:"#ffffff",backgroundColor:"transparent",width:"100%",border:"none",outline:"none",position:"relative",zIndex:2}),d.IE&&t.css({height:"28px"}),n.css({border:"none",resize:"none",fontSize:"12px",padding:"0px",paddingTop:"0px",overflow:"hidden",overflowY:"auto",outline:"none",position:"relative",width:"100%",height:"100%",color:"#ffffff",backgroundColor:"transparent",fontFamily:"Arial, Helvetica, sans-serif",top:0,left:0,zIndex:1});try{var a=d("<iframe></iframe>");a.on("load",function(){d(a[0].contentWindow.document.body).css({margin:0,overflow:"hidden",display:"flex",flexDirection:"column",height:"100%"}).append(t).append(n)}),o.append(a)}catch(e){console.error("There may a cross-iframe security issue. Unable to create text link item properly",e)}},updateLinkItem:function(e,t){r.linkPreviewCaption.inside(e).html(d(t).text()),d(e.data("linkUrlField")).val(t.getAttribute("href")),d(e.data("linkTitleField")).val(t.title);var n="_blank"==t.target;r.linkBlankOption.inside(e).prop("checked",n),r.linkNofollowOption.inside(e).prop("checked",0<=t.rel.toLowerCase().indexOf("nofollow")),r.linkFollowOption.inside(e).prop("checked",0<=t.rel.toLowerCase().indexOf("follow")),e.data("anchorNode",t)},removeLinkItem:function(e){r.removeAnchorNode(e),e.hasClass("is-new")?r.resetLinkItem(e):(e.remove(),r.linkItem(":not(.is-new)").length<1&&r.linkItemGroup().removeClass("has-existing-links"))},resetLinkItem:function(e){r.linkUrlField.inside(e).val(""),r.linkTitleField.inside(e).val(""),r.linkBlankOption.inside(e).prop("checked",!1)},createAnchorNode:function(e){var t=i.selection.getHtml(),n=d.uid("link-"),t=d("<a />").attr("id",n).html(t)[0];return i.insert.node(t),t=d("#"+n).removeAttr("id")[0],i.selection.selectElement(t),e.data("anchorNode",t),t},updateAnchorNode:function(e){var t,n,o,a,i=e.data("anchorNode");i&&(t=d(e.data("linkUrlField")),a=d(e.data("linkTitleField")),n=r.linkBlankOption.inside(e),o=r.linkNofollowOption.inside(e),e=r.linkFollowOption.inside(e),i.href=d.trim(t.val()),i.title=a.val(),n.is(":checked")||o.is(":checked")||e.is(":checked")?(a="",n.is(":checked")&&(i.target="_blank",a+="noopener noreferrer"),o.is(":checked")&&(a+=" nofollow"),e.is(":checked")&&(a+=" follow"),a=d.trim(a),i.rel=a):(i.removeAttribute("target"),i.removeAttribute("rel")))},removeAnchorNode:function(e){var t=e.data("anchorNode");t&&(i.selection.save(),$anchorNode=d(t),$anchorNode.contents().insertAfter($anchorNode),$anchorNode.remove(),i.selection.restore(),e.removeData("anchorNode"))},activateFontFormatting:function(e){var t=e.data("format");"clear"!=t&&e.toggleClass("active"),r.toggleFontFormatting(t)},"{fontFormatOption} click":function(e){r.activateFontFormatting(e)},"{fontFormatOption} touchstart":function(e){r.activateFontFormatting(e),0<e.find("[data-bp-toggle=dropdown]").length&&e.find("[data-bp-toggle=dropdown]").trigger("click.bs.dropdown.data-api")},"{fontFormatGroupDropdown} touchstart":function(e){0<e.find("[data-bp-toggle=dropdown]").length&&e.find("[data-bp-toggle=dropdown]").trigger("click.bs.dropdown.data-api")},"{fontFamilyOption} click":function(e){e=e.data("value");r.setFontFamily(e)},"{colorpicker} colorpickerChange":function(e,t,n){r.updatingFontColorUI||(r.colorpickerToggle().prop("checked",!0),r.setFontColor(n))},"{colorpickerToggle} change":function(e){e.checked()||r.removeFontColor()},"{fontSizeToggle} click":function(e){var t=r.fontSizeCheckbox();t.is(":checked")?(t.prop("checked",!1),r.removeFontSize()):t.prop("checked",!0)},"{numsliderWidget} nouislide":function(e,t,n){r.numsliderInput().val(Math.abs(n))},"{numsliderWidget} set":function(e,t,n){r.updatingFontSizeUI||r.setFontSize(Math.abs(n))},"{numsliderInput} input":function(e){r.updatingFontSizeUI||(e=Math.abs(d.trim(e.val())),r.setFontSize(e))},"{numsliderUnit} click":function(e){e=e.data("unit");r.setFontSizeUnit(e),r.numsliderUnits().removeClass("open")},"{numsliderUnitToggle} click":function(e){r.numsliderUnits().toggleClass("open")},linkUrlFieldInputHandler:function(e){var t=d(this);r.startEditingSelection();var n=d(t.data("linkItem")),o=d.trim(t.val()),a=n.data("anchorNode");""===o||a||(d.IE&&i.selection.restore(),a=r.createAnchorNode(n),setTimeout(function(){t.focus().val(t.val())},10)),""==o&&a?r.removeAnchorNode(n):r.updateAnchorNode(n)},linkTitleFieldInputHandler:function(e){var t=d(this);r.startEditingSelection();t=d(t).data("linkItem");r.updateAnchorNode(t)},updateAnchorItem:function(e){r.startEditingSelection();e=r.linkItem.of(e);r.updateAnchorNode(e)},"{linkBlankOption} change":function(e,t){r.updateAnchorItem(e)},"{linkFollowOption} change":function(e,t){r.updateAnchorItem(e)},"{linkNofollowOption} change":function(e,t){r.updateAnchorItem(e)},"{linkRemoveButton} click":function(e,t){r.startEditingSelection();e=r.linkItem.of(e);r.removeLinkItem(e)}}}),t.resolve()})}),EasyBlog.module("composer/blocks/toolbar",function(d){var a="is-editing-block",o="is-moving-block",r="is-inserting-block";EasyBlog.Controller("Composer.Blocks.Toolbar",{elements:["[data-eb-blocks-{close-button|parent-button|cancel-move-button}]","[data-ebd-block-{toolbar|sort-handle}]"],defaultOptions:d.extend({"{cancelDropButton}":"[data-blocks-cancel-drop-button]","{cancelMoveButton}":"[data-blocks-cancel-move]","{closeBlocks}":"[data-toolbar-blocks-close]","{toolbarWrapper}":"[data-toolbar-blocks-wrapper]","{label}":"[data-ebd-block-label]","{done}":"[data-blocks-done]","{insert}":"[data-blocks-insert]","{move}":"[data-blocks-move]","{duplicate}":"[data-blocks-duplicate]","{remove}":"[data-blocks-remove]","{saveTemplate}":"[data-blocks-save-template]","{blockTemplateMenu}":"[data-eb-composer-block-template-menu]"},EBD.selectors)},function(i,e,t,l,c,n){return{init:function(){c=i.blocks,l=i.blocks.composer},dropping:!1,cancelDrop:function(){l.blocks.droppable.selectedMenu=null,l.blocks.droppable.selectedBlock=null,l.blocks.droppable.dropStop(),l.blocks.menu().removeClass("is-selected"),l.manager().removeClass("is-dropping-block")},deleteCurrentBlock:function(){var e=l.manager(),t=c.getCurrentBlock(),n=c.getNextBlock(),o=c.getPreviousBlock();c.removeBlock(t),!1!==n&&c.activateBlock(n),!1===n&&o&&c.activateBlock(o),n||o||e.removeClass("is-editing-block"),e.removeClass("is-inserting-block")},duplicateBlock:function(){var e=c.getCurrentBlock(),t=c.getBlockContent(e),n=c.getBlockType(e),o=c.getData(e),a=c.isBlockTemplate(e),n=c.createBlock(n);c.data(n,o),c.setBlockContent(n,t),a&&(c.updateTemplateId(n,c.getBlockTemplateId(e)),c.updateBlockTitle(n,c.getBlockTitle(e))),e.after(n),c.drop(n),c.release(n),c.out(n);a=c.getChildBlocks(n);0<a.length&&d.each(a,function(e,t){"image"==c.getBlockType(t)&&d(t).removeClass("is-editable")}),c.activateBlock(n),c.getCurrentBlock().click(),i.trigger("composerBlockDuplicate",[n,e])},getLabel:function(e){return e.find("[data-ebd-block-label]")},insertBlock:function(){l.manager().toggleClass("is-inserting-block"),l.blocks.browser.toggle()},moveBlock:function(){var e;l.manager().hasClass(o)||(l.blocks.droppable.populateDropzones(),l.manager().addClass(o),(e=c.getCurrentBlock()).addClass("is-sort-item"),i.workarea().addClass("is-sorting"),i.trigger("composerBlockMove",[e]))},saveBlockAsTemplate:function(){var r=c.getCurrentBlock(),s=c.getBlockTemplateId(r);EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/saveBlockAsTemplate",{id:s}),bindings:{"{saveButton} click":function(e,t){var n=c.exportBlock(r,!0),o=[],a=n.style;null!=a&&""!=a&&(a=(a=a.replace(/font-family: \"Comic Sans MS\";/,"font-family: Comic Sans MS;")).replace(/font-family: \"Trebuchet MS\";/,"font-family: Trebuchet MS;"),n.style=a),o.push(n);var i=this.form(),a=(i.find("[data-alert-placeholder]"),this.errorMessage(),i.find("[data-template-title]")),n=i.find("[data-template-description]"),i=i.find("[data-template-global]"),i={block:JSON.stringify(o),title:a.val(),description:n.val(),global:i.is(":checked")?1:0};"update"==d(e).data("save-type")&&s&&(i.id=s),EasyBlog.ajax("site/controllers/blocks/saveTemplate",i).done(function(e,t,n,o){l.setMessage({type:"success",message:e});t=d(t),e=d("[data-eb-composer-block-template-menu]");!o||0<(o=e.find('[data-eb-composer-block-menu][data-id="'+s+'"]')).length&&o.remove(),(t=d.buildHTML(t)).appendTo(e),e.parents("[data-eb-composer-block-section]").removeClass("hide"),c.updateTemplateData(r,n)}).fail(function(e,t){l.setMessage({type:"error",message:e})}),this.parent.close()}}})},"{self} composerBlockUpdateTitle":function(e,t,n,o){i.getLabel(n).html(o)},"{closeBlocks} click":function(){i.cancelDrop(),l.manager().removeClass(r),l.blocks.browser.close()},"{self} composerBlockDrop":function(e,t){i.dropping=!1},"{self} composerBlockMenuSelected":function(e,t){i.dropping=!0},"{self} composerBlockActivate":function(e,t,n){var o;n.hasClass("is-standalone")||(i.getLabel(n).html(c.getBlockTitle(n)),l.manager().addClass(a),o=c.isNestedBlock(n),blockActions=c.getBlockActions(n),o&&(blockActions.find("[data-blocks-duplicate]").remove(),blockActions.find("[data-blocks-insert]").remove()),n.hasClass("is-isolated")&&blockActions.find("[data-blocks-move]").remove())},"{self} composerBlockDeactivate":function(){l.manager().removeClass(a).removeClass(r)},"{cancelMoveButton} click":function(e){l.manager().removeClass(o),l.blocks.droppable.dropStop(),c.getCurrentBlock().removeClass("hide").removeClass("is-sort-item"),i.workarea().removeClass("is-sorting")},"{parentButton} click":function(e){var t=c.getCurrentBlock();t.length&&((t=c.getParentBlock(t)).length?c.activateBlock(t):c.deactivateBlock())},"{cancelDropButton} click":function(e,t){i.cancelDrop()},"{closeButton} click":function(e){l.views.hide("blocks")},"{duplicate} click":function(e,t){t.stopPropagation(),i.duplicateBlock()},"{saveTemplate} click":function(e,t){t.stopPropagation(),i.saveBlockAsTemplate()},"{move} click":function(e,t){d(e).mouseleave(),i.moveBlock()},"{remove} click":function(e,t){d(e).mouseleave(),i.deleteCurrentBlock()},"{insert} click":function(){i.insertBlock()}}}),this.resolve()}),EasyBlog.module("composer/blocks/tree",function(u){EasyBlog.Controller("Composer.Blocks.Tree",{elements:["[data-eb-{block|block-icon|block-title|block-level-count|block-child-count}]","[data-eb-blocks-{tree-field|tree|tree-item|tree-item-template|tree-item-icon|tree-item-title|tree-item-group|tree-toggle-button}]"]},function(l,e,t,n,c,d){return{init:function(){c=l.blocks,c.composer,d=l.createTreeItem,l.treeItemTemplate=l.treeItemTemplate().detach().html()},setCurrentBlock:function(e){var t=c.getBlockType(e),t=c.getBlockMeta(t);l.blockTitle().text(c.getBlockTitle(e)),l.blockIcon().attr("class",t.icon);t=c.getAllParentBlocks(e),e=c.getChildBlocks(e).length,t=t.length+1;l.blockChildCount().text(e),l.blockLevelCount().text(t),l.block().toggleClass("has-child",e)},populate:function(t){var e,n,o,a,i,r,s;(t=t||c.getCurrentBlock()).length&&(e=l.treeField(),n=!!(r=c.getParentBlock(t)).length,i=!!(o=c.getChildBlocks(t)).length,e.toggleClass("has-parent",n).toggleClass("has-children",i),a=[],"minimal"==(i=l.getTreeDisplayMode())?n?(a.push(d(r,1)),c.getChildBlocks(r).each(function(){var e=u(this);a.push(d(e,2)),e.is(t)&&o.each(function(){var e=u(this);a.push(d(e,3))})})):(a.push(d(t,1)),o.each(function(){var e=u(this);a.push(d(e,2))})):(r=c.getRootBlocks(),s=function(e,t){var n=t;a.push(d(e,n)),c.getChildBlocks(e).each(function(){var e=u(this);s(e,n+1)})},r.each(function(){s(u(this),1)})),l.tree().toggle("full"==i||1<a.length),l.treeItemGroup().empty().append(a))},createTreeItem:function(e,t){var n=e.data("treeItem");return n||(n=l.renderTreeItem(e),e.data("treeItem",n)),n.toggleClass("active",e.hasClass("active")).toggleClass("is-nested",e.hasClass("is-nested")).switchClass("level-"+t),n},renderTreeItem:function(e){var t=c.getBlockUid(e),n=c.getBlockType(e),e=c.getBlockMeta(n),n=u(l.treeItemTemplate);return n.attr({"data-type":e.type,"data-uid":t}).find(l.treeItemIcon).addClass(e.icon).end().find(l.treeItemTitle).text(e.title),n},getTreeDisplayMode:function(){return l.treeField().hasClass("tree-minimal")?"minimal":"full"},setTreeDisplayMode:function(e){l.treeField().switchClass("tree-"+e),l.populate()},"{self} composerBlockUpdateTitle":function(e,t,n,o){l.blockTitle().text(o)},"{self} composerBlockAdd":function(e,t,n,o){l.populate()},"{self} composerBlockActivate":function(e,t,n,o){l.setCurrentBlock(n),l.populate(n)},"{self} composerBlockRemove":function(e,t,n){l.populate()},"{treeItem} click":function(e){e=e.data("uid"),e=c.getBlock(e);c.scrollTo(e),c.unhighlight(e),c.activateBlock(e)},"{treeToggleButton} click":function(){l.treeField();var e=l.getTreeDisplayMode();l.setTreeDisplayMode("minimal"==e?"full":"minimal")}}}),this.resolve()}),EasyBlog.module("composer/category",function(f){EasyBlog.Controller("Composer.Category",{defaultOptions:{"{itemGroupTemplate}":"[data-category-item-group-template]","{itemTemplate}":"[data-category-item-template]","{viewport}":"[data-eb-composer-category-viewport]","{loader}":"[data-eb-composer-category-loader]","{tree}":"[data-eb-composer-category-tree]","{itemGroup}":"[data-eb-composer-category-item-group]","{itemGroupHeader}":"[data-eb-composer-category-item-group-header]","{item}":"[data-eb-composer-category-item]","{itemCount}":"[data-eb-composer-category-item-count]","{itemCheckbox}":"[data-eb-composer-category-item-checkbox]","{count}":"[data-eb-composer-category-count]","{searchTextfield}":"[data-eb-composer-category-search-textfield]","{jsondata}":"[data-eb-composer-category-jsondata]"}},function(p,o,e,t){return{init:function(){p.composer,p.multipleCategories=p.viewport().data("multiple-categories"),p.initializeTemplates(),p.viewport().on("mousewheel",function(e){e.stopPropagation()});var e=0,t=JSON.parse(p.jsondata().val());for(p.build(t);category=t[e++];)category.selected&&p.selectCategory(category.id);p.go(0),p.jsondata().remove()},initializeTemplates:function(){o.templates={},o.templates.itemGroup=p.itemGroupTemplate().detach().html(),o.templates.item=p.itemTemplate().detach().html()},categories:{0:{id:0,title:"",parent_id:null},search:{id:"search",title:"",parent_id:null}},children:{search:[]},childLoaded:{},keys:{},clones:{},selected:{},build:function(e){for(var t,n=0;t=e[n++];){var o=parseInt(t.id),a=parseInt(t.parent_id);null==p.categories[o]&&(p.categories[o]=t,(p.children[a]||(p.children[a]=[])).push(t),0<t.childs&&(p.childLoaded[o]=!1),o=t.key=t.title.toLowerCase()+" [#"+o+"]",p.keys[o]=t)}},childrens:f.memoize(function(e,t){var n=p.children[e];if(!n)return[];var o,a=t?[].concat(p.childrens(e)):f.flatten(n,"id"),i=a.length;if(t)for(o=0;o<i;o++)a=a.concat(p.childrens(a[o],t));return a},function(e,t){return e+(t?"_deep":"")}),parents:f.memoize(function(e){var t=p.categories[e];if(t){if(0==e)return[0];for(var n=[];t=p.categories[t.parent_id];)n.unshift(t.id);return n}}),itemGroup:{get:f.memoize(function(e){var t=p.children[e];if(t){for(var n,e=p.categories[e],e=p.getItemGroupTemplate(e),o=[],a=0;n=t[a++];)o.push(p.item.get(n.id));return f(e).locate("viewport").append(o),e}})},item:{get:f.memoize(function(e){var t=p.categories[e];if(t){e=p.children[e];return p.getItemTemplate(t,e||null)}})},getItemGroupTemplate:function(e){var t=f(o.templates.itemGroup);return t.attr("data-id",e.id),t.find("[data-item-title]").html(e.title),t.find("[data-category-primary-item]").attr("data-id",e.id).attr("data-title",e.title),t[0]},getItemTemplate:function(e,t){var n=f(o.templates.item);return n.attr("data-id",e.id),n.find("[data-item-title]").html(e.title),n.find("[data-category-primary-item]").attr("data-id",e.id).attr("data-title",e.title),(t||0<e.childs)&&n.addClass("has-children"),n[0]},itemCount:{get:f.memoize(function(e){return f(p.item.get(e)).find(p.itemCount.selector)[0]}),set:function(e,t){f(p.itemCount.get(e)).find("span").html(t)}},populate:function(e){var t=p.children[e];if(t){f(p.itemGroup.get(e)).locate("header").removeClass("active");for(var n=0,o=p.selected,a=f.values(o);d=t[n++];){var i,r,s=d.id,l=[],c=[];p.childLoaded[s]&&(i=[],r=[],allChildIds=p.childrens(s,!0),f.each(allChildIds,function(e,t){i.push(t.id)}),l=f.intersection(a,i),immediateChildIds=p.childrens(s,!1),f.each(immediateChildIds,function(e,t){r.push(t.id)}),c=f.intersection(l,r),u=p.categories[d.parent_id||d.id],0<l.length?u.hadChildSelectedCount=1:u.hadChildSelectedCount=d.hadChildSelectedCount);var d,u=0<l.length||0<d.hadChildSelectedCount,l=f("[data-category-primary-input]").val();f(p.item.get(s)).toggleClass("selected",f.has(o,s)).toggleClass("is-primary",s==l).toggleClass("has-selected-children",u).removeClass("active"),0<d.childs&&(d=(c.length||d.hadChildSelectedCount)+"/"+d.childs,p.itemCount.set(s,d))}}},query:f.memoize(function(e){var t,n,o=p.keys,a={},i=new RegExp("^"+f.regExpEscape(e),"i");for(key in o)key.match(i)&&(a[n=(t=o[key]).parent_id]||(a[n]=[])).push(t);return a}),search:function(l){var e;l.length<3||(e=p.composer.getPostId(),p.loader().removeClass("hide"),EasyBlog.ajax("site/views/categories/search",{keyword:l,postId:e}).done(function(e){if(e){var t=0,n=e;for(p.build(n);category=n[t++];)category.selected&&p.selectCategory(category.id),0!=category.parent_id&&(p.childLoaded[category.parent_id]=!0)}}).always(function(){p.loader().addClass("hide");var e=p.query(l),t=p.clones,n=[],o=[];for(parentId in e){for(var a=p.categories[parentId],a=p.getItemGroupTemplate(a),i=e[parentId],o=[],r=0;s=i[r++];){var s=s.id,s=t[s]||(t[s]=f(p.item.get(s)).clone()[0]);o.push(s)}f(a).locate("viewport").append(o),n[0==parentId?"unshift":"push"](a)}p.itemGroup().detach(),f(p.itemGroup.get("search")).empty().append(n).appendTo(p.tree().switchClass("level-0").data("level",0))}))},currentTree:[],go:function(e){var t,n,o,a;p.categories[e]&&(t=p.tree(),o=(n=p.parents(e)).length-1,a=f.map(n,function(e){return p.itemGroup.get(e)}),o<(e=t.data("level")||0)&&a.push(p.itemGroup().eq(e)),p.itemGroup().detach(),p.populate(f.last(n)),t.append(a).switchClass("level-"+o).data("level",o),p.searchTextfield().val(""))},open:function(e){var t=p.children[e];t&&(f(p.item.get(e)).addClass("active"),p.go(t[0].id))},selectCategory:function(e){p.toggle(e,!0)},deselect:function(e,t){p.toggle(e,!1,t)},toggle:function(e,t,n){var o=f.extend({},p.selected),a=f(p.item.get(e)),i=f(p.clones[e]),r=p.selected;(t=void 0===t?!a.hasClass("selected"):t)?r[e]=parseInt(e):delete r[e];var s=(t?"add":"remove")+"Class";if(a[s]("selected"),i[s]("selected"),0==f.keys(p.selected).length&&!n)return a[s=(t?"remove":"add")+"Class"]("selected"),i[s]("selected"),EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/errorDefaultCategoryWarning")}),void(t?delete r[e]:r[e]=parseInt(e));p.trigger("category"+(t?"select":"deselect"),[p.categories[e],p.toArray()]),n||p.multipleCategories||f.each(o,function(e,t){p.deselect(t,!0)}),p.count().html(f.keys(p.selected).length)},"{self} categorydeselect":function(e,t,n){!n.parent_id||0<(n=p.categories[n.parent_id]).hadChildSelectedCount&&n.hadChildSelectedCount--},enableKeyboardNavigation:function(){f(document).off("keydown.composer.category").on("keydown.composer.category",function(e){var t=e.keyCode;switch(t){case 38:case 40:case 37:case 39:p.navigate({38:"up",40:"down",37:"left",39:"right"}[t])}})},disableKeyboardNavigation:function(){f(document).off("keydown.composer.category")},navigate:function(e){var t=p.currentClickedItem;switch(e){case"up":t.prev().click();break;case"down":t.next().click();break;case"left":p.go(t.data("id"))}},toArray:function(){if(!p.selected)return[];var e=[];for(id in p.selected){var t=p.categories[id];e.push(t)}return e},lastClickedItem:f(),currentClickedItem:f(),"{item} click":function(e){p.lastClickedItem=p.currentClickedItem,p.currentClickedItem=e},"{self} composerSave":function(e,t,n){n.data.categories=f.values(p.selected)},"{self} categorysetprimary":function(e,t,n){p.item().removeClass("is-primary"),f(p.item.get(n.id)).addClass("is-primary")},"{itemGroup} click":function(e,t){var n=e.find(p.item.selector),o=p.lastClickedItem,e=p.currentClickedItem;t.metaKey||t.ctrlKey||n.removeClass("active"),e.toggleClass("active"),t.shiftKey&&0<o.length&&(o=n.index(o),e=n.index(e),n.slice.apply(n,o<e?[o,e]:[e,o]).addClass("active")),0<n.filter(".active").length?p.enableKeyboardNavigation():p.disableKeyboardNavigation()},"{item} dblclick":function(e){e=e.data("id");p.open(e)},"{itemCount} click":function(e){var o=p.item.of(e).data("id");null==p.childLoaded[o]||p.childLoaded[o]?p.open(o):(e=p.composer.getPostId(),p.loader().removeClass("hide"),EasyBlog.ajax("site/views/categories/getChildCategories",{id:o,postId:e}).done(function(e){if(e){var t=0,n=e;for(p.build(n);category=n[t++];)category.selected;p.open(o)}p.childLoaded[o]=!0}).always(function(){p.loader().addClass("hide")}))},"{itemCheckbox} click":function(e,t){e=p.item.of(e).data("id");p.toggle(e),t.stopPropagation()},"{itemGroupHeader} click":function(e){var t=p.itemGroup.of(e).data("id");e.addClass("active"),p.go(t)},"{searchTextfield} keyup":f.debounce(function(e){e=f.trim(e.val());""==e?p.go(0):p.search(e)},250),"{self} composerValidate":function(e,t,n){}}}),this.resolve()}),EasyBlog.module("composer/composer",function(e){var t=this,n=window.EBD={};n.root=".ebd",n.block=".ebd-block:not(is-helper):not(.is-placeholder):not(.is-dropzone)",n.childBlock="> "+n.block,n.nest=".ebd-nest",n.nestedBlock=n.block+".is-nested",n.immediateNestedBlock=n.nestedBlock+":not("+n.nest+" "+n.nest+" "+n.nestedBlock+")",n.standaloneBlock=n.block+".is-standalone",n.isolatedBlock=n.block+".is-isolated",n.workarea="[data-ebd-workarea]",n.dropzone="[data-ebd-dropzone]",n.blockToolbar="[data-ebd-block-toolbar]",n.blockSortHandle="[data-ebd-block-sort-handle]",n.blockViewport="[data-ebd-block-viewport]",n.blockContent="[data-ebd-block-content]",n.blockActions="[data-ebd-block-actions]",n.immediateBlockSortHandle="> "+n.blockToolbar+" > "+n.blockSortHandle,n.immediateBlockViewport="> "+n.blockViewport,n.immediateBlockContent=n.immediateBlockViewport+"> "+n.blockContent,n.editableContent=n.block+".is-editable [contenteditable=true]",n.selectors={"{workarea}":n.workarea,"{root}":n.workarea+" "+n.root,"{nest}":n.workarea+" "+n.root+" "+n.nest,"{block}":n.workarea+" "+n.root+" "+n.block,"{dropzone}":n.workarea+" "+n.root+" "+n.dropzone};e.fn.caret=function(n,o){var e;if(0!=this.length)return"number"==typeof n?(o="number"==typeof o?o:n,this.each(function(){if(this.setSelectionRange){var e=this;window.setTimeout(function(){e.setSelectionRange(n,o)},0)}else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",o),t.moveStart("character",n);try{t.select()}catch(e){}}})):(this[0].setSelectionRange?(n=this[0].selectionStart,o=this[0].selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),n=0-e.duplicate().moveStart("character",-1e5),o=n+e.text.length),{start:n,end:o})},EasyBlog.require().script("composer/perfectscrollbar","composer/document","composer/blocks","composer/category","composer/tags","composer/revisions","composer/shortcuts","composer/mobile","composer/media","composer/posts","composer/templates","composer/googleimport","composer/panels","composer/panels/post","composer/panels/authorship","composer/panels/category","composer/panels/seo","composer/panels/autopost","shared/gallery","shared/foundry").library("dialog").done(function(u){EasyBlog.Controller("Composer",{hostname:"composer",pluginExtendsInstance:!0,elements:["[data-eb-composer-{manager|actions|form|ghosts|alerts}]","[data-eb-composer-{views|view|viewport|viewport-content}]","[data-eb-{alert-template}]"],defaultOptions:{templates:{},isTemplateEditor:null,postUid:null,authorId:null,"{frame}":"[data-composer-frame]","{manager}":"[data-composer-manager]","{alert}":"[data-composer-alert]","{alertMessage}":"[data-composer-alert-message]","{alertPlaceholder}":"[data-eb-alert-placeholder]","{alertCloseButton}":"[data-eb-composer-alert-close]","{retryButton}":"[data-eb-composer-instance-entry-button]","{toolbarViews}":"[data-toolbar-view]","{form}":"[data-composer-form]","{viewport}":"[data-eb-composer-viewport]","{viewportContent}":"[data-eb-composer-viewport-content]","{exit}":"[data-composer-exit]","{publish}":"[data-composer-publish]","{preview}":"[data-composer-preview]","{permalinkPreview}":"[data-permalink-preview]","{saveTemplate}":"[data-composer-save-template]","{deleteTemplate}":"[data-composer-delete-template]","{saveDraft}":"[data-composer-save-draft]","{approvePost}":"[data-composer-approve]","{trashPost}":"[data-composer-trash]","{rejectPost}":"[data-composer-reject]","{submitApproval}":"[data-composer-submit-approval]","{updatePost}":"[data-composer-update]","{autosaveMessage}":"[data-composer-autosave-message]","{publishedField}":"[data-composer-field-published]","{previewField}":"[data-composer-field-preview]","{rejectMessage}":"[data-composer-reject-message]","{postTemplateId}":"[data-eb-composer-post-template-id]","{publishTips}":"[data-publish-tips]","{undoTips}":"[data-undo-tips]","{publishProgressBar}":"[data-publishing-progress]","{undoActionWrapper}":"[data-undo-action-wrapper]","{cancelPublishing}":"[data-cancel-publish]","{publishNow}":"[data-publish-now]","{draftWarning}":"[data-draft-warning]","{draftDiscard}":"[data-draft-discard]","{draftContinue}":"[data-draft-continue]","{draftItems}":"[data-eb-composer-revisions-item].is-draft","{jceFullWindowBtn}":"[data-eb-composer-page-body].eb-editor--jce #content_fullscreen"}},function(c,d,n,o,a){return{saveOptions:{autosave:!1,showSaveMessage:!0,updateRevisionStatus:!0,updateAddressBar:!0},init:function(){EasyBlog.debug||u(window).on("beforeunload",function(e){return e.preventDefault(),!1}),d.templates.alert=c.alertTemplate().detach().html(),o=c.frame(),a=c.manager(),d.authorId=o.data("author-id"),d.permalink=o.data("permalink"),d.exitAlert=o.data("exit-alert"),d.mapIntegration=o.data("map-integration"),d.isTemplateEditor=o.data("is-template-editor"),d.isWebview=o.data("is-webview"),n.noscroll(),EasyBlog.Composer=c,u.extend(d,o.htmlData("composer")),d.mobile=1==d.mobile,c.installPlugins(["media","templates","blocks","posts","panels","document","tags","category","revisions","googleimport","perfectscrollbar"]);c.perfectscrollbar.initPs("[data-eb-composer-viewport-content]");c.installPlugins(["shortcuts"]),d.mobile&&c.installPlugins(["mobile"]),c.keepalive.start(),a.hasClass("show-templates")||c.autosave.start(),u("input, textarea").each(function(){u(this).on("focus",function(e){a.addClass("input-focused")}),u(this).on("blur",function(e){a.removeClass("input-focused")})}),c.trigger("composerReady")},isPublished:function(){return 1==c.publishedField().val()},isDraft:function(){return 3==c.publishedField().val()},publishPost:function(){c.publishNow().addClass("t-hidden"),c.cancelPublishing().addClass("t-hidden"),c.previewField().val(0),c.publishedField().val(1),c.disableLeavePrompt(),c.save({autosave:0,isapply:0})},"{self} composerDocumentReady":function(){o.removeClass("is-loading")},"{self} composerSubmitLock":function(){o.addClass("is-submit-lock")},"{self} composerSubmitUnlock":function(){setTimeout(function(){o.removeClass("is-submit-lock")},2e3)},installPlugins:function(e){u.each(e,function(e,t){c.addPlugin(t)})},settings:{get:function(e){return n.find("input[name='"+e+"']").val()},set:function(e,t){return n.find("input[name='"+e+"']").val(t),c.trigger("composerSettingsChange",[e,t]),t}},getPreviewNamespace:function(){return"post-preview-"+d.authorId+"-"+c.getPostUid()},getPostId:function(){return o.attr("data-post-id")},getPostUid:function(){return o.attr("data-post-uid")},getRevisionId:function(){return c.getPostUid().split(".")[1]},getDoctype:function(){return o.attr("data-post-doctype")},getPostTemplateId:function(){return c.postTemplateId().val()},views:{show:function(e){c.trigger("composerViewShow",[e])},hide:function(e){c.trigger("composerViewHide",[e]);e=c.toolbarViews("[data-type="+e+"]");e.length&&e.removeClass("open"),c.views.show("document")},hideAll:function(){c.toolbarViews("[data-toolbar-view]").length<=0||(c.trigger("composerViewHideAll"),c.views.show("document"))}},keepalive:{timer:null,start:function(e){var t=c.keepalive,e=e||d.keepalive.interval;t.stop(),e<1||(t.timer=setTimeout(function(){t.run(e)},e))},run:function(e){EasyBlog.ajax("site/views/composer/keepAlive").always(function(){c.keepalive.start(e)})},stop:function(){clearTimeout(c.keepalive.timer)}},autosave:{timer:null,counter:0,start:function(e){e=e||d.autosave.interval;c.autosave.stop(),e<1||!e||(c.autosave.timer=setTimeout(function(){c.autosave.run(e)},e))},run:function(e){c.autosave.save(),c.autosave.start(e)},stop:function(){clearTimeout(c.autosave.timer)},save:function(){var e,t,n;c.saving||0<u("div.ebd-block[data-ebd-dropzone]").length||(e=blocks.getCurrentBlock(),t=c.publishedField().val(),0==c.autosave.counter&&4!=t&&c.publishedField().val(3),c.autosave.counter++,o.addClass("is-autosaving"),c.saving=!0,n=u.Task(),c.trigger("composerSave",[n,c]),0<e.length&&blocks.activateBlock(e),n.process().done(function(){u("[data-composer-field-document]").val(n.data.document);var e=c.form().serializeObject();"legacy"==c.getDoctype()&&(e.content=n.data.content),e.template_id=c.getPostTemplateId(),EasyBlog.ajax("site/controllers/posts/autosave",e).done(function(e,t,n){null!=t&&(c.autosaveMessage().removeClass("t-hidden").html(e),history.pushState({state:1},"",n),u("[data-eb-composer-post-uid]").val(t.uid),u("[data-eb-composer-revision-id]").val(t.revision_id))})}).always(function(){c.saving=!1}))}},saving:!1,getSaveData:function(t){c.form().each(function(){var e=u(this).serializeObject();u.extend(t,e)})},save:function(e){var t;o.hasClass("is-submit-lock")||c.saving||(c.saving=!0,(e=u.extend(c.saveOptions,e)).target&&!d.isWebview?c.form().attr("target",c.getPreviewNamespace()):c.form().attr("target","_self"),e.preview?c.previewField().val(1):c.previewField().val(0),t=u.Task(),e.autosave?t.data.autosave=e.autosave:t.data.autosave=0,c.trigger("composerSave",[t,c]),t.process().done(function(){u("[data-composer-field-document]").val(t.data.document),c.form().submit()}).fail(function(){c.saving=!1,c.trigger("composerSaveError")}).always(function(){e.target&&(e.target=void 0),e.preview&&(c.saving=!1,e.preview=!1)}))},trash:function(){c.disableLeavePrompt(),EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/confirmTrash",{uid:c.getPostId()}),bindings:{"{deleteButton} click":function(){EasyBlog.ajax("site/views/composer/delete",{uid:c.getPostUid()}).done(function(){})}}})},setMessage:function(e,t){var n=(e=!u.isArray(e)?[e]:e)[0],e="success";/error|danger/.test(n.type)&&(e="danger"),t&&void 0!==t||(t=c.alertPlaceholder()),c.alert().length<=0&&u(d.templates.alert).appendTo(t),c.alert().removeClass("t-hidden"),c.alert().removeClass("o-alert--success o-alert--danger").addClass("o-alert--"+e),c.alert().find(c.alertMessage).html(n.message)},"{preview} click":function(){4!=c.publishedField().val()&&c.publishedField().val(3),c.save({preview:!0,target:c.getPreviewNamespace()})},"{saveTemplate} click":function(e,t){c.saving||EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/saveAsPostTemplateDialog",{template_id:c.getPostTemplateId()}),bindings:{"{saveButton} click":function(){c.disableLeavePrompt(),c.saving=!0;var e=u.Task();c.trigger("composerSave",[e,c]);var t=this.form(),n=t.find("[data-alert-placeholder]"),o=this.errorMessage(),a=t.find("[data-template-title]"),i=t.find("[data-template-id]"),r=t.find("[data-template-global]"),s=t.find("[data-template-lock]"),l=this.parent;a.removeClass("t-border--danger"),o.html(""),0==a.val().length&&a.addClass("t-border--danger"),e.process().done(function(){u("[data-composer-field-document]").val(e.data.document);var o=c.form().serializeObject();"legacy"==c.getDoctype()&&(o.content=e.data.content),o.template_id=i.val(),o.template_title=a.val(),o.system=r.is(":checked")?1:0,o.lock=s.is(":checked")?1:0,EasyBlog.ajax("site/controllers/templates/save",o).done(function(e,t,n){null!=o&&(c.setMessage({type:"success",message:e}),c.postTemplateId().val(t),c.saveTemplate().find("[data-template-button-save]").addClass("t-hidden"),c.saveTemplate().find("[data-template-button-update]").removeClass("t-hidden"),d.isTemplateEditor&&history.pushState({state:1},"",n),l.close())}).fail(function(e){c.setMessage({type:"error",message:e},n)})}).fail(function(){c.trigger("composerSaveError")}).always(function(){c.saving=!1})},"{deleteButton} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/templates/confirmDeleteTemplates",{from:d.isTemplateEditor?"":"composer",ids:[c.getPostTemplateId()]}),bindings:{"{deleteButtonComposer} click":function(){var t=this.parent;EasyBlog.ajax("site/controllers/templates/delete",{ids:[c.getPostTemplateId()]}).done(function(e){c.setMessage({type:"success",message:e}),c.postTemplateId().val(0),c.saveTemplate().find("[data-template-button-save]").removeClass("t-hidden"),c.saveTemplate().find("[data-template-button-update]").addClass("t-hidden"),t.close()}).fail(function(e){c.setMessage({type:"error",message:e})})}}})}}})},"{exit} click":function(e,t){d.exitAlert||c.disableLeavePrompt(),window.location=e.data("url")},"{saveDraft} click":function(e,t){o.hasClass("is-submit-lock")||(c.disableLeavePrompt(),e.find("[data-eb-icon]").loading(),4!=c.publishedField().val()&&c.publishedField().val(3),c.save({preview:!1,target:!1,autosave:!1,isapply:!1}))},"{submitApproval} click":function(e){c.disableLeavePrompt(),e.find("[data-eb-icon]").loading(),c.publishedField().val(4),c.save({autosave:0,isapply:0})},"{approvePost} click":function(e){c.publishedField().val(1),e.find("[data-eb-icon]").loading(),c.disableLeavePrompt(),c.save({autosave:0,isapply:0})},"{rejectPost} click":function(t){EasyBlog.dialog({content:EasyBlog.ajax("admin/views/dialogs/render",{file:"site/composer/dialogs/reject"}),bindings:{"{submitButton} click":function(){var e=this.reason().val();t.find("[data-eb-icon]").loading(),c.rejectMessage().val(e),c.publishedField().val(3),c.disableLeavePrompt(),c.save({autosave:0,isapply:0})}}})},"{cancelPublishing} click":function(e,t){t.stopPropagation(),t.preventDefault(),clearTimeout(c.countingDown),c.publishTips().removeClass("t-hidden"),c.undoTips().addClass("t-hidden"),c.undoTips().find("span").html(10),c.publishProgressBar().css("width","0%"),c.undoActionWrapper().addClass("t-hidden")},"{publishNow} click":function(e,t){t.preventDefault(),t.stopPropagation(),c.publish().find("[data-eb-icon]").loading(),c.publishProgressBar().addClass("t-hidden"),c.publishTips().removeClass("t-hidden"),c.undoTips().addClass("t-hidden"),c.publishPost()},countingDown:null,countdownPublishing:function(e){var t=9,n=20;c.publishTips().addClass("t-hidden"),c.undoTips().removeClass("t-hidden"),c.undoActionWrapper().removeClass("t-hidden"),c.countingDown=setInterval(function(){c.undoTips().find("span").html(t),t--,c.publishProgressBar().css("width",n+"%"),n+=10,t<1&&(clearTimeout(c.countingDown),setTimeout(function(){e.find("[data-eb-icon]").loading(),c.publishTips().removeClass("t-hidden"),c.undoTips().addClass("t-hidden"),c.publishPost()},1e3))},1e3)},validatePost:function(t){var e=blocks.getCurrentBlock(),n=u.Task();c.trigger("composerSave",[n,c]),0<e.length&&blocks.activateBlock(e),n.process().done(function(){u("[data-composer-field-document]").val(n.data.document);var e=c.form().serializeObject();"legacy"==c.getDoctype()&&(e.content=n.data.content),EasyBlog.ajax("site/controllers/posts/validateContent",e).done(function(){u("[data-show-undo]").addClass("is-undo-on"),c.countdownPublishing(t)}).fail(function(e){c.setMessage(e)})})},"{publish} click":function(e,t){if(!o.hasClass("is-submit-lock")){if(!(1==e.data("undo-enabled")))return e.find("[data-eb-icon]").loading(),void c.publishPost();c.validatePost(e)}},"{updatePost} click":function(e){o.hasClass("is-submit-lock")||(3==c.publishedField().val()&&(c.previewField().val(0),c.publishedField().val(1)),c.disableLeavePrompt(),e.find("[data-eb-icon]").loading(),c.save())},"{unpublishPostButton} click":function(){c.publishedField().val(0),c.save({autosave:0,isapply:0})},"{trashPost} click":function(){c.trash()},"{draftContinue} click":function(){c.disableLeavePrompt()},"{draftDiscard} click":function(){EasyBlog.ajax("site/views/composer/discardDraft",{id:c.getPostId()}).done(function(e){c.setMessage({type:"success",message:e}),a.removeClass("warning-draft"),c.draftItems().remove()}).fail(function(e){c.setMessage(e)})},"{self} composerSelectTemplate":function(e,t,n,o){a.removeClass("show-templates"),o&&(c.saveTemplate().find("[data-template-button-save]").addClass("t-hidden"),c.saveTemplate().find("[data-template-button-update]").removeClass("t-hidden")),setTimeout(function(){c.autosave.start()},6e3)},"{permalinkPreview} click":function(e,t){c.isDraft()?c.preview().click():c.isPublished()&&window.open(d.permalink,c.getPreviewNamespace())},"{jceFullWindowBtn} click":function(e,t){u("[data-eb-composer-page-body].eb-editor--jce").toggleClass("eb-editor--fullscreen")},"{alertCloseButton} click":function(e,t){t.preventDefault(),t.stopPropagation(),c.alertPlaceholder().empty()},disableLeavePrompt:function(){u(window).off("beforeunload"),u(window).unbind("beforeunload"),window.onbeforeunload=function(){}}}}),u("body").addController("EasyBlog.Controller.Composer"),t.resolve()})}),EasyBlog.module("composer/document",function(e){var t=this;EasyBlog.require().script("composer/document/toolbar","composer/document/permalink","composer/document/maps","composer/document/osm","composer/document/cover","composer/vendors/expanding").done(function(c){EasyBlog.Controller("Composer.Document",{hostname:"document",pluginExtendsInstance:!0,elements:["[data-eb-composer-document] .eb-composer-{viewport|viewport-content}","[data-eb-composer-{page|page-viewport|page-header|page-body}]","[data-ebd-{workarea|textarea}]","[data-ebd-workarea-{ghosts}]","[data-ebd-workarea-{legacy}]"],defaultOptions:{"{root}":"[data-ebd-workarea] "+EBD.root,"{block}":EBD.block,"{nest}":EBD.nest,"{titleField}":"[data-post-title]",plugins:["toolbar","permalink","cover"],mapIntegration:"maps"}},function(s,e,t,i,r,l){return{init:function(){l=s.composer,e.mapIntegration="osm"==s.composer.options.mapIntegration?"osm":"maps",s.initPlugins(),s.initTitlebar(),s.isLegacy()?s.initLegacyDocument():s.initEasyBlogDocument()},initPlugins:function(){c.each(e.plugins,function(e,t){s.addPlugin(t)}),s.addPlugin(e.mapIntegration)},initTitlebar:function(){s.titleField().expandingTextarea()},initLegacyDocument:function(){s.trigger("composerDocumentReady")},initEasyBlogDocument:function(){EasyBlog.require().script("composer/vendors/redactor10","composer/document/overlay","composer/vendors/selectionchange").done(function(){i=s.composer.editor=s.workarea().composer({replaceDivs:!1,toolbar:!1}).data("redactor"),r=s.composer.blocks,s.initDocument(),s.setLayout(),s.addPlugin("overlay"),s.initSelectionChange(),s.trigger("composerDocumentReady")})},isLegacy:function(){return"legacy"==l.getDoctype()},initDocument:function(){s.trigger("composerDocumentInit"),s.workarea().removeClass("is-loading")},loadDocument:function(e){s.trigger("composerDocumentLoad"),s.root().html(e),s.initDocument()},"{window} resize":c.throttle(function(){s.setLayout()},250),setLayout:function(){s.updateEditorHeight(),s.trigger("composerDocumentRefresh")},updateEditorHeight:function(){s.page().css("height","auto");var e,t,n=s.viewport().height(),o=s.pageViewport().height(),a=s.pageHeader().height(),i=o-a,r=48,o=60,n=n-50-(o=l.options.mobile?r=0:o)-r-a;window.tinyMCE?tinyMCE.activeEditor&&(o=tinyMCE.activeEditor.editorContainer,c.isString(o)?(r=s.pageBody(),(o=c("#"+o)).find("#content_tbl").css("height","auto"),e=c(tinyMCE.activeEditor.contentAreaContainer).find("iframe"),t=i-(r.height()-e.height()),e.css("height",t),a=c(tinyMCE.activeEditor.getElement()),r=i-r.find(".toggle-editor").height(),a.css("height",r)):(o=c(o).parent(),e=c(o).find("iframe"),t=i-(o.height()-e.height()),e.css("height",t))):s.root().css({minHeight:n})},setTitle:function(e){s.titleField().val(e)},insertContent:function(e){s.isLegacy()?EasyBlog.LegacyEditor.insert(e):(e=c(e)).is(EBD.block)&&r.addBlock(e)},setContent:function(e){if(s.isLegacy())return EasyBlog.LegacyEditor.setContent(e)},getContent:function(){if(s.isLegacy())return EasyBlog.LegacyEditor.getContent();var t="";return r.getRootBlocks().each(function(){var e=c(this);t+=r.getBlockHTML(e)}),t},getText:function(){if(s.isLegacy())return c(s.getContent()).text();var n=[];return r.getRootBlocks().each(function(){var e=c(this),t=r.getBlockType(e);blockHandler=r.getBlockHandler(t),blockHandler.toText&&n.push(c.trim(blockHandler.toText(e)))}),n.join("\n")},initSelectionChange:function(){var a;c.selectionchange.start();var e=c.debounce(function(){if(i){var e=i.selection.get(),t=!1;if(""!=e.toString()){var n=e.focusNode,o=s.block.of(n);if(o.closest(".is-standalone").length)return;if(o.hasClass("active"))for(;n!=o[0];){if(c(n).editable()){t=!0;break}n=n.parentNode}}t?(s.trigger("composerTextSelect",[e,o,i]),a=!1):a||s.trigger("composerTextDeselect",[i])}},300);c(document).on("selectionchange",e)},saveLegacyDocument:function(e){var t=e.data,e=EasyBlog.LegacyEditor.getContent(),e=c.sanitizeHTML(e);c.IE<9&&(e=c.toXHTML(e)),t.intro="",t.content=e},saveEasyBlogDocument:function(e){var t=r.getRootBlocks(),n=[],o=e.add("Saving document"),a={title:e.data.title,permalink:e.data.permalink,type:l.getDoctype(),version:"1.0"};c.when.apply(null,[]).always(function(){t.each(function(){var e=c(this),t=r.exportBlock(e),e=t.style;null!=e&&""!=e&&(e=(e=e.replace(/font-family: \"Comic Sans MS\";/,"font-family: Comic Sans MS;")).replace(/font-family: \"Trebuchet MS\";/,"font-family: Trebuchet MS;"),t.style=e),n.push(t)}),a.blocks=n,e.data.document=JSON.stringify(a)}).done(function(){o.resolve()}).fail(function(){o.reject(c.Exception("Error saving document."))})},"{self} composerSave":function(e,t,n){var o;"legacy"!=l.getDoctype()?(0<(o=r.getCurrentBlock()).length&&r.deactivateBlock(o),s.saveEasyBlogDocument(n)):s.saveLegacyDocument(n)},"{titleField} keydown":function(e,t){if(13==t.keyCode)return t.preventDefault(),s.isLegacy()||0<(t=r.getFirstBlock()).length&&(s.titleField().blur(),r.activateBlock(t)),!1},"{titleField} keyup":function(e,t){s.trigger("composerTitleEditing",[e,e.val()])},"{titleField} change":function(e,t){s.trigger("composerTitleChanged",[e,e.val()])},"{viewport} click":function(e,t){s.isLegacy()||s.workarea().hasClass("is-resizing")||c(t.target).parentsUntil(e).addBack().filter(EBD.block).length||s.trigger("composerDocumentBlur")},"{self} composerValidate":function(e,t,n){}}}),t.resolve()})}),EasyBlog.module("composer/document/cover",function(e){var t=this;EasyBlog.require().library("image","plupload2").done(function(e){EasyBlog.Controller("Composer.Document.Cover",{elements:["[data-eb-composer-blogimage-{browse-button}]",".eb-composer-{field}-blogimage"],defaultOptions:{"{container}":"[data-cover-container]","{placeholder}":"[data-cover-placeholder]","{workarea}":"[data-cover-workarea]","{preview}":"[data-cover-preview]","{previewImage}":"[data-cover-preview-image]","{previewVideo}":"[data-cover-preview-video]","{previewEmpty}":"[data-cover-preview-empty]","{urlForm}":"[data-cover-url-form]","{buttonsWrapper}":"[data-cover-buttons]","{coverMessageArea}":"[data-cover-message-area]","{coverError}":"[data-cover-error]","{coverErrorEmbed}":"[data-cover-error-embed]","{url}":"[data-cover-url]","{urlCancel}":"[data-cover-url-cancel]","{urlAdd}":"[data-cover-url-add]","{browse}":"[data-cover-browse]","{upload}":"[data-cover-upload]","{coverUrlTextbox}":"[data-cover-url-textbox]","{removeButton}":"[data-cover-remove]","{progress}":"[data-eb-mm-upload-progress]","{addCoverButton}":".eb-document-add-cover-button","{title}":"[data-cover-title]","{altText}":"[data-cover-alt]","{caption}":"[data-cover-caption]","{data}":"[data-cover-value]"}},function(r,e,t){return{defaultUri:null,init:function(){var e=r.placeholder();0<e.length&&EasyBlog.MediaManager.uploader.register(e);e=r.data().val();r.defaultUri=e},setImage:function(e,t,n,o,a){var i=EasyBlog.ajax("site/views/composer/setImageCover",{url:e});r.preview().append(i),0<=(t=0<=t.indexOf("flickr:")?"flickr:/"+e:t).indexOf("unsplash:")&&(t="unsplash:/"+e),r.data().val(t),n&&r.title().val(n),a&&r.caption().val(a),o&&r.altText().val(o),r.setHasCover()},setVideoEmbed:function(e,t){var n=EasyBlog.ajax("site/views/composer/setVideoCover",{html:e.html});r.preview().append(n),r.data().val(t),void 0!==e.title&&r.title().val(e.title),r.setHasCover()},setHasCover:function(){r.placeholder().addClass("has-image has-art state-done"),r.coverMessageArea().addClass("t-hidden"),r.coverError().addClass("t-hidden"),r.coverErrorEmbed().addClass("t-hidden"),r.removeButton().removeClass("t-hidden")},setVideo:function(e,t,n){e=EasyBlog.ajax("site/views/composer/setVideoCover",{url:e});r.preview().append(e),r.data().val(t),n&&r.title().val(n),r.setHasCover()},"{container} click":function(e,t){t.stopPropagation()},"{url} click":function(e,t){r.urlForm().removeClass("t-hidden"),r.buttonsWrapper().addClass("t-hidden")},"{urlCancel} click":function(e,t){r.urlForm().addClass("t-hidden"),r.buttonsWrapper().removeClass("t-hidden")},"{urlAdd} click":function(e,t){var n=r.coverUrlTextbox().val();n&&r.crawl(n)},isValidUrl:function(e){return 0<=e.indexOf("youtube.com")||0<=e.indexOf("youtu.be")?"youtube:/"+e:0<=e.indexOf("vimeo.com")?"vimeo:/"+e:0<=e.indexOf("twitch.tv")&&"twitch:/"+e},crawl:function(n){r.remove();var e,o=r.isValidUrl(n);o?((e=r.urlAdd().find("[data-eb-icon]")).loading(),EasyBlog.ajax("site/views/crawler/crawl",{url:n}).done(function(e,t){e=e[n];e.oembed.error?r.coverErrorEmbed().removeClass("t-hidden").html(t):r.setVideoEmbed(e.oembed,o)}).fail(function(e){r.coverErrorEmbed().removeClass("t-hidden").html(e)}).always(function(){e.doneLoading()})):r.coverErrorEmbed().removeClass("t-hidden")},"{browse} mediaSelect":function(e,t,n){r.remove(),"video"==n.meta.type?r.setVideo(n.meta.url,n.meta.uri,n.meta.title):r.setImage(n.meta.url,n.meta.uri,n.meta.title,n.data.alt_text,n.data.caption_text),setTimeout(function(){r.container().parent().addClass("open")},5)},"{placeholder} mediaUploaderFilesAdded":function(e,t,n,o){EasyBlog.MediaManager.uploader.addItem(o[0],e)},"{placeholder} mediaUploaderFileUploaded":function(e,t,n,o,a){r.remove();a=a.response.media.meta;"video"==a.type?r.setVideo(a.url,a.uri,a.title):r.setImage(a.url,a.uri,a.title)},"{placeholder} mediaUploaderFileError":function(e,t,n,o){},"{placeholder} mediaUploaderError":function(e,t,n,o){o=JSON.parse(o.response);e.addClass("is-failed"),r.coverError().removeClass("t-hidden");e=e.find("[data-eb-mm-failed-message]");e.attr("data-original-title",o.message),e.attr("data-eb-provide","tooltip")},"{removeButton} click":function(){r.remove(),EasyBlog.MediaManager.uploader.progressBar().addClass("t-hidden")},"{preview} onUpdateCategoryDefaultCover":function(e,t,n){r.placeholder().hasClass("has-image")||EasyBlog.ajax("site/views/composer/getDefaultPostCover",{catId:n.id}).done(function(e){return e?(r.preview().append(e),void r.coverMessageArea().addClass("t-hidden")):void r.remove()})},remove:function(){r.placeholder().removeClass("has-image is-uploading has-art is-failed"),r.coverMessageArea().removeClass("t-hidden"),r.removeButton().addClass("t-hidden");r.data().val();r.title().val(""),r.data().val(""),r.altText().val(""),r.caption().val(""),r.preview().empty(),r.coverUrlTextbox().val("")}}}),t.resolve()})}),EasyBlog.module("composer/document/maps",function(l){EasyBlog.Controller("Composer.Document.Maps",{elements:["[data-eb-composer-location-{places|autocomplete|form|form-message}]"],defaultOptions:{"{container}":"[data-location-container]",geomode:"native",searchmode:"detect","{detect}":"[data-location-detect]","{remove}":"[data-location-remove]","{preview}":"[data-location-preview]","{map}":"[data-location-map]","{inputContainer}":"[data-location-input-container]","{input}":"[data-location-input]","{address}":"[data-location-address]","{latitude}":"[data-location-latitude]","{longitude}":"[data-location-longitude]","{place}":"[data-eb-composer-location-places] li"}},function(a,i,r,s,t,e){return{init:function(){a.composer=a.document.composer,r=a.container(),i.apikey=a.container().data("google-apikey"),navigator.geolocation||(i.geomode="external"),a.setupAutocomplete()},setupAutocomplete:function(){s=a.autocomplete().detach(),t=s.find(a.places),textfield=a.input(),l(document).on("click",function(e){l(e.target).parents().addBack().filter(textfield).length<1&&s.detach()})},searching:function(e){a.container().toggleClass("is-searching",e);var t=a.input();t.attr("placeholder",e?t.data("placeholder-searching"):t.data("placeholder"))},userCoords:null,getUserCoords:function(){var t=l.Deferred(),e=a.userCoords;return e?(t.resolve(e),t):("native"==i.geomode?navigator.geolocation.getCurrentPosition(function(e){e=e.coords;t.resolve({latitude:e.latitude,longitude:e.longitude})},function(){a.getUserCoordsByIP().done(t.resolve).fail(t.reject)}):t=a.getUserCoordsByIP(),t.done(function(e){a.userCoords=e}))},getUserCoordsByIP:function(){l.getJSON("//www.telize.com/geoip?callback=?").then(function(e){return{latitude:e.latitude,longitude:e.longitude}})},search:function(t){return a.searching(!0),a.getUserCoords().then(function(e){return EasyBlog.ajax("site/views/composer/getLocations",{latitude:e.latitude,longitude:e.longitude,query:t||""})}).fail(function(e){a.container().addClass("has-errors"),a.formMessage().html(e),console.log(e)}).always(function(){a.searching(!1)})},searchManual:l.memoize(function(e){var t=l.Deferred();return a.searching(!0),EasyBlog.ajax("site/views/composer/getLocations",{query:e}).done(function(){t.resolve()}).always(function(){a.searching(!1)})}),populate:function(){var e=a.input(),e=l.trim(e.val());"detect"==a.searchmode?a.search(e).done(l.debounce(function(e){var n=[];l.each(e,function(e,t){t=l.create("li").html("<strong>"+t.name+"</strong><small>"+t.address+"</small>").data("venue",t)[0];n.push(t)}),t.empty().append(n),a.reposition()},50)).fail(function(e){}):""!=e&&a.searchManual(e).done(l.debounce(function(e){var n=[];l.each(e,function(e,t){t=l.create("li").html("<strong>"+t.name+"</strong><small>"+t.address+"</small>").data("venue",t)[0];n.push(t)}),t.empty().append(n),a.reposition()},100)).fail(function(e){})},_populate:l.debounce(function(){a.populate()},350),reposition:function(){var e=a.input();s.appendTo(a.inputContainer()).css({width:e.outerWidth()}).position({my:"left top",at:"left bottom",of:e})},currentLocation:null,setLocation:function(e){a.currentLocation=e,s.detach(),a.preview().addClass("has-location"),a.input().val(e.name),a.latitude().val(e.latitude),a.longitude().val(e.longitude);var t=a.map(),n=e.latitude+","+e.longitude,e=l.param({size:"520x240",sensor:!0,scale:2,zoom:16}),o="//maps.googleapis.com/maps/api/staticmap?"+e+"&center="+n+"&markers="+n;l.isEmpty(i.apikey)||(o="//maps.googleapis.com/maps/api/staticmap?"+e+"&center="+n+"&markers="+n+"&key="+i.apikey),l.Image.get(o).done(function(){t.css("backgroundImage",l.cssUrl(o)),setTimeout(function(){t.addClass("is-ready")},1)}).always(function(){r.removeClass("is-loading")})},removeLocation:function(){a.preview().removeClass("has-location"),a.input().val(""),a.latitude().val(""),a.longitude().val("")},"{window} resize":function(){s.parent().length<1||a.reposition()},"{label} click":function(e){a[a.field().hasClass("active")?"hide":"show"]()},"{input} input":function(){a.searchmode="manual",s.detach(),a._populate()},"{detect} click":function(){a.input().val(""),a.searchmode="detect",s.detach(),a.populate()},"{place} click":function(e){e=e.data("venue");a.setLocation(e)},"{remove} click":function(){a.removeLocation()},"{container} click":function(e,t){t.stopPropagation()}}}),this.resolve()}),EasyBlog.module("composer/document/osm",function(e){EasyBlog.require().library("leaflet").done(function(r){EasyBlog.Controller("Composer.Document.Osm",{elements:["[data-eb-composer-location-{places|autocomplete|form|form-message}]"],defaultOptions:{"{container}":"[data-location-container]",geomode:"native",searchmode:"detect","{detect}":"[data-location-detect]","{remove}":"[data-location-remove]","{preview}":"[data-location-preview]","{map}":"[data-location-map]","{inputContainer}":"[data-location-input-container]","{input}":"[data-location-input]","{address}":"[data-location-address]","{latitude}":"[data-location-latitude]","{longitude}":"[data-location-longitude]","{place}":"[data-eb-composer-location-places] li"}},function(o,n,e,t,a,i){return{init:function(){o.composer=o.document.composer,o.container(),n.apikey=o.container().data("google-apikey"),navigator.geolocation||(n.geomode="external"),o.setupAutocomplete()},initMap:function(){o.osm=L.map("map",{zoom:12}),o.osm.fitWorld(),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(o.osm),o.preview().addClass("has-location")},setupAutocomplete:function(){t=o.autocomplete().detach(),a=t.find(o.places),textfield=o.input(),r(document).on("click",function(e){r(e.target).parents().andSelf().filter(textfield).length<1&&t.detach()})},searching:function(e){o.container().toggleClass("is-searching",e);var t=o.input();t.attr("placeholder",e?t.data("placeholder-searching"):t.data("placeholder"))},userCoords:null,getUserCoords:function(){var t=r.Deferred(),e=o.userCoords;return e?(t.resolve(e),t):("native"==n.geomode?navigator.geolocation.getCurrentPosition(function(e){e=e.coords;t.resolve({latitude:e.latitude,longitude:e.longitude})},function(){o.getUserCoordsByIP().done(t.resolve).fail(t.reject)}):t=o.getUserCoordsByIP(),t.done(function(e){o.userCoords=e}))},getUserCoordsByIP:function(){r.getJSON("//www.telize.com/geoip?callback=?").then(function(e){return{latitude:e.latitude,longitude:e.longitude}})},search:function(t){return o.searching(!0),o.getUserCoords().then(function(e){return EasyBlog.ajax("site/views/composer/getLocations",{latitude:e.latitude,longitude:e.longitude,query:t||""})}).fail(function(e){o.container().addClass("has-errors"),o.formMessage().html(e),console.log(e)}).always(function(){o.searching(!1)})},navigate:function(e,t){t={lat:parseFloat(e),lng:parseFloat(t)};void 0!==o.marker&&o.osm.removeLayer(o.marker),o.osm.flyTo(t,10,{duration:3}),o.marker=L.marker(t).addTo(o.osm)},"{self} composerViewShow":function(e,t,n){"location"==n&&void 0===o.osm&&(o.preview().addClass("has-location"),setTimeout(function(){o.initMap(),latitude=o.latitude().val(),longitude=o.longitude().val(),latitude&&longitude&&o.navigate(latitude,longitude)},250))},"{self} mobileLocationShow":function(e,t){o.preview().addClass("has-location"),setTimeout(function(){o.initMap(),latitude=o.latitude().val(),longitude=o.longitude().val(),latitude&&longitude&&o.navigate(latitude,longitude)},250)},searchManual:r.memoize(function(e){var t=r.Deferred();return o.searching(!0),EasyBlog.ajax("site/views/composer/getLocations",{query:e}).done(function(){t.resolve()}).always(function(){o.searching(!1)})}),populate:function(){var e=o.input(),e=r.trim(e.val());"detect"==o.searchmode?o.search(e).done(r.debounce(function(e){var n=[];r.each(e,function(e,t){t=r.create("li").html("<strong>"+t.name+"</strong><small></small>").data("venue",t)[0];n.push(t)}),a.empty().append(n),o.reposition()},50)).fail(function(e){}):""!=e&&o.searchManual(e).done(r.debounce(function(e){var n=[];r.each(e,function(e,t){t=r.create("li").html("<strong>"+t.name+"</strong><small></small>").data("venue",t)[0];n.push(t)}),a.empty().append(n),o.reposition()},100)).fail(function(e){})},_populate:r.debounce(function(){o.populate()},350),reposition:function(){var e=o.input();t.appendTo(o.inputContainer()).css({width:e.outerWidth()}).position({my:"left top",at:"left bottom",of:e})},currentLocation:null,setLocation:function(e){o.currentLocation=e,t.detach(),o.input().val(e.name),o.latitude().val(e.latitude),o.longitude().val(e.longitude),o.navigate(e.latitude,e.longitude)},removeLocation:function(){o.input().val(""),o.latitude().val(""),o.longitude().val(""),o.osm.removeLayer(o.marker),o.osm.fitWorld()},"{window} resize":function(){t.parent().length<1||o.reposition()},"{label} click":function(e){o[o.field().hasClass("active")?"hide":"show"]()},"{input} input":function(){o.searchmode="manual",t.detach(),o._populate()},"{detect} click":function(){o.input().val(""),o.searchmode="detect",t.detach(),o.populate()},"{place} click":function(e){void 0===o.osm&&o.initMap();e=e.data("venue");o.setLocation(e)},"{remove} click":function(){void 0!==o.marker&&o.removeLocation()},"{container} click":function(e,t){t.stopPropagation()}}})}),this.resolve()}),EasyBlog.module("composer/document/overlay",function(i){EasyBlog.Controller("Composer.Document.Overlay",{defaultOptions:i.extend({"{overlay}":"[data-ebd-overlay]","{placeholder}":"[data-ebd-overlay-placeholder]","{sortable}":".ui-sortable","{placeholderInsideSortHelper}":".ebd-block.is-helper .ebd-overlay-placeholder"},EBD.selectors)},function(o,e,t,a){return{id:1,init:function(){composer=o.document.composer,a=composer.blocks,o.DocumentOverlay=function(e){this.id=o.id++,this.uid=e.data("uid"),this.type=e.data("type"),this._element=i("<div>",{class:"ebd-overlay","data-id":this.id,"data-type":this.type,"data-ebd-overlay":""})[0],this._placeholder=i("<div>",{class:"ebd-overlay-placeholder","data-id":this.id,"data-ebd-overlay-placeholder":""})[0]},i.extend(o.DocumentOverlay.prototype,{block:function(){return a.getBlock(this.uid)},element:function(){return i(this._element)},placeholder:function(){return i(this._placeholder)},attach:function(){this.element().appendTo(o.document.workarea()),this.reposition()},refresh:function(){this.element().hasClass("is-animating")||this.reposition()},reposition:function(){var e=this.element(),t=e.hasClass("is-sorting")?i(o.placeholderInsideSortHelper().where("id",this.id)[0]||this._placeholder):this.placeholder();e.css({width:t.width(),height:t.height()}).position({my:"left top",at:"left top",of:t})},emerge:function(){this.element().addClass("hover"),this.block().addClass("hover")},submerge:function(){this.element().removeClass("hover"),this.block().removeClass("hover")},remove:function(){o.remove(this.id)}});var e=i.throttle(function(){o.refresh()},25,{leading:!0,trailing:!0}),t=i.ns("keydown keypress keyup input mousedown click mousemove mouseup touchstart touchmove touchend",".overlay"),n=i.ns("sortactivate sortchange sortover sortout sortdeactivate sortstop",".overlay");composer.document.root().on(t,e),composer.views().on("scrolly.overlay",e),o.element.on(n,o.sortable.selector,e)},blocks:{},instances:[],keys:{},get:function(e){return o.keys[e]},getInstancesByBlock:function(e){e=a.getBlockUid(e);return o.blocks[e]||[]},create:function(e){var t=new o.DocumentOverlay(e);o.instances.push(t),o.keys[t.id]=t;e=o.blocks;return(e[t.uid]||(e[t.uid]=[])).push(t),t},remove:function(e){var t=o.get(e);t.element().remove(),t.placeholder().remove(),i.pull(o.blocks[e],t),delete o.keys[e],i.pull(o.instances,t)},of:function(e){return o.blocks[e.data("uid")]||[]},refresh:function(e){e=e?o.of(e):o.instances;i.each(e,function(e,t){t.refresh()})},"{self} composerBlockDrag":function(e,t,n){setTimeout(function(){o.refresh()},1),i.each(o.of(n),function(e,t){t.element().addClass("is-sorting")})},"{dropzone} dropover":function(e,t,n){setTimeout(function(){o.refresh()},1)},"{block} drag":function(e,t,n){o.refresh(e)},drop:function(e){i.each(o.of(e),function(e,t){t.element().removeClass("is-sorting").addClass("is-dropping")}),o.refresh()},"{self} composerBlockDrop":function(e,t,n){o.drop(n)},"{self} composerBlockAdd":function(e,t,n){o.drop(n)},"{self} composerBlockBeforeRelease":function(e,t,n){i.each(o.of(n),function(e,t){t.element().removeClass("is-dropping").addClass("is-releasing is-animating").removeClassAfter("is-releasing")}),o.refresh(),setTimeout(function(){o.refresh()},50)},"{self} composerBlockRelease":function(e,t,n){i.each(o.of(n),function(e,t){t.element().removeClass("is-animating")}),o.refresh()},"{self} composerDocumentRefresh":function(){o.refresh()},"{self} composerBlockRemove":function(e,t,n){n=o.getInstancesByBlock(n);i.each(n,function(e,t){t.remove()})},"{placeholder} click":function(e){e=e.data("id");o.get(e).emerge()},"{placeholder} mouseover":function(e){e=e.data("id"),e=o.get(e);e.block().hasClass("active")&&e.emerge()},"{overlay} mouseout":function(e){e=e.data("id");o.get(e).submerge()}}}),this.resolve()}),EasyBlog.module("composer/document/permalink",function(e){EasyBlog.Controller("Composer.Document.Permalink",{defaultOptions:{"{wrapper}":"[data-eb-editor-permalink]","{preview}":"[data-permalink-preview]","{input}":"[data-permalink-input]","{emptyView}":"[data-permalink-empty]","{formView}":"[data-permalink-form]","{edit}":"[data-permalink-edit]","{cancel}":"[data-permalink-cancel]","{update}":"[data-permalink-update]"}},function(a,i,e,t){return{init:function(){t=a.document.composer,i.permalink=a.input().val()},form:{show:function(){a.wrapper().addClass("is-editing")},hide:function(){a.wrapper().removeClass("is-editing")}},normalize:function(){var e=a.input().val();EasyBlog.ajax("site/views/composer/normalizePermalink",{permalink:e,postId:t.getPostId()}).done(function(e,t){a.input().val(e),a.preview().html(t),i.permalink=e})},"{input} keyup":function(e,t){var n=t.keyCode||t.which;return 27==n?(a.cancel().click(),!1):13==n?(t.stopPropagation(),t.preventDefault(),a.update().click(),!1):void 0},"{edit} click":function(e,t){a.form.show()},"{cancel} click":function(e,t){a.input().val(i.permalink),a.form.hide()},"{update} click":function(e,t){a.normalize(),a.wrapper().removeClass("is-editing")},"{self} composerTitleChanged":function(e,t,n,o){if(""!=i.permalink)return!1;a.input().val(o),a.normalize(),a.wrapper().removeClass("is-empty")}}}),this.resolve()}),EasyBlog.module("composer/document/toolbar",function(a){EasyBlog.Controller("Composer.Document.Toolbar",{defaultOptions:{"{media}":"[data-eb-composer-media]","{embedVideo}":"[data-eb-composer-embed-video]","{button}":"[data-toolbar-view]","{closeDropdown}":"[data-toolbar-dropdown-close]","{actionsWrapper}":"[data-composer-toolbar-actions]","{actionButton}":"[data-composer-action-button]","{postsButton}":"[data-eb-composer-insert-post]","{revisionsButton}":"[data-composer-toolbar-revisions]","{coverButton}":"[data-composer-toolbar-cover]","{locationButton}":"[data-composer-toolbar-location]","{googleimportButton}":"[data-composer-toolbar-googleimport]","{toggleSidebarButton}":"[data-eb-composer-toggle-sidebar]","{appearanceWrapper}":"[data-composer-appearance]","{appearanceInput}":"[data-composer-appearance-input]","{blocks}":"[data-toolbar-blocks]"}},function(o,e,t,n){return{init:function(){n=o.document.composer},actions:{hide:function(){o.actionsWrapper().removeClass("open")},show:function(){o.actionsWrapper().addClass("open")},toggle:function(){o.actionsWrapper().toggleClass("open")}},appearance:{change:function(e){window.ezb.appearance=e,o.appearance.save(e),o.appearanceWrapper().switchClass("is-"+e),n.frame().switchClass("si-theme--"+e),a(document.documentElement).switchClass("si-theme--"+e)},save:function(e){EasyBlog.ajax("site/views/composer/saveComposerAppearance",{appearance:e})}},posts:{getParent:function(){return o.postsButton().parent("[data-type=posts]")},hide:function(){o.posts.getParent().removeClass("open"),o.postsButton().removeClass("is-active")},show:function(){n.views.hideAll(),n.views.show("posts"),o.posts.getParent().addClass("open"),o.postsButton().addClass("is-active")},toggle:function(){if(!0!==o.giDialog)return o.posts.getParent().hasClass("open")?o.posts.hide():o.posts.show()}},revisions:{getParent:function(){return o.revisionsButton().parent("[data-type=revisions]")},hide:function(){o.revisions.getParent().removeClass("open")},show:function(){n.views.hideAll(),o.revisions.getParent().addClass("open")},toggle:function(){if(!0!==o.giDialog)return o.revisions.getParent().hasClass("open")?o.revisions.hide():o.revisions.show()}},location:{getParent:function(){return o.locationButton().parent("[data-type=location]")},hide:function(){o.location.getParent().removeClass("open"),o.locationButton().removeClass("is-active")},show:function(){n.views.hideAll(),o.location.getParent().addClass("open"),o.locationButton().addClass("is-active")},toggle:function(){if(!0!==o.giDialog)return o.location.getParent().hasClass("open")?o.location.hide():o.location.show()}},googleimport:{getParent:function(){return o.googleimportButton().parent("[data-type=googleimport]")},hide:function(){var e;o.giDialog=!1,o.googleimportButton().length<=0||(o.googleimportButton().removeClass("is-active"),void 0!==(e=n.googleimport)&&e.closePopup())},show:function(){var e;n.views.hideAll(),o.googleimportButton().length<=0||(o.googleimportButton().addClass("is-active"),void 0!==(e=n.googleimport)&&(o.giDialog=!0,n.autosave.stop(),e.initGimport(),e.initOauthPopUp()))},toggle:function(){return o.googleimportButton().hasClass("is-active")?o.googleimport.hide():o.googleimport.show()}},cover:{getParent:function(){return o.coverButton().parent("[data-type=cover]")},hide:function(){o.cover.getParent().removeClass("open"),o.coverButton().removeClass("is-active")},show:function(){n.views.hideAll(),o.cover.getParent().addClass("open"),o.coverButton().addClass("is-active")},toggle:function(){if(!0!==o.giDialog)return o.cover.getParent().hasClass("open")?o.cover.hide():o.cover.show()}},activate:function(){},deactivate:function(){},isActive:function(){},hideBlocks:function(){o.blocks().parent().removeClass("open")},toggleSidebar:function(){var e=n.manager(),t=o.toggleSidebarButton();e.toggleClass("is-sidebar-open"),e.hasClass("is-sidebar-open")?t.addClass("is-active"):t.removeClass("is-active")},"{revisionsButton} click":function(){o.revisions.toggle()},"{locationButton} click":function(){o.location.toggle()},"{googleimportButton} click":function(){o.googleimport.toggle()},"{postsButton} click":function(e,t){o.posts.toggle()},"{coverButton} click":function(){o.cover.toggle()},"{actionButton} click":function(){o.actions.toggle()},"{self} composerSave":function(e,t,n){o.googleimportButton().remove()},"{self} composerViewHideAll":function(){o.cover.hide(),o.location.hide(),o.revisions.hide(),o.posts.hide(),o.actions.hide()},"{self} click":function(e,t){0<a(t.target).parents("[data-toolbar-view]").length||n.views.hideAll()},"{toggleSidebarButton} click":function(){o.toggleSidebar()},"{media} click":function(e,t){o.hideBlocks(),EasyBlog.MediaManager.open(e.data("uri"))},"{closeDropdown} click":function(e,t){t.stopPropagation();t=e.parents(o.button.selector),e=t.data("type");t.removeClass("open"),n.views.hide(e)},"{blocks} click":function(e,t){n.blocks.browser.isOpen()?e.removeClass("is-active"):e.addClass("is-active"),n.blocks.browser.toggle()},"{button} click":function(e,t){o.hideBlocks(),o.deactivate();e=e.data("type");n.views.show(e)},"{embedVideo} click":function(){EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/embedVideoDialog"),bindings:{"{insertButton} click":function(){var e,t,n,o=this.videoUrl().val();o&&(e=this.videoWidth().val(),t=this.videoHeight().val(),n=this.noCookie().val(),"same"==this.relatedSource().val()&&(o+="?rel=0"),EasyBlog.LegacyEditor.insert('[embed=videolink]{"video":"'+o+'","width":"'+e+'","height":"'+t+'","nocookie":"'+n+'"}[/embed]'),EasyBlog.dialog().close(),this.videoUrl().val(""))}}})},"{showDrawerButton} click":function(){a("[data-eb-composer-frame]").toggleClass("show-drawer")},"{appearanceInput} change":function(e){e=e.is(":checked")?"dark":"light";o.appearance.change(e)}}}),this.resolve()}),EasyBlog.module("composer/googleimport",function(s){EasyBlog.Controller("Composer.Googleimport",{defaultOptions:{retrieveMsg:"",importingMsg:"",selectfileMsg:"",authenMsg:"","{container}":"[data-eb-googleimport]","{gIframe}":"[data-eb-googleimport-iframe]","{content}":"[data-eb-googleimport-content]","{contentContainer}":"[data-eb-googleimport-container]","{mainMessage}":"[data-eb-googleimport-message]","{userInfoWrapper}":"[data-eb-googleimport-userinfo-wrapper]","{userInfoLoader}":"[data-eb-googleimport-userinfo-loader]","{userInfo}":"[data-eb-googleimport-userinfo]","{revokeBtn}":"[data-eb-googleimport-revoke]","{closeBtn}":"[data-eb-googleimport-close-popup]"}},function(i,r,e,n){return{init:function(){n=i.composer;var e=i.container().data("islegacy"),t=i.container().hasClass("t-hidden"),a=i.container().data("postid");0<i.container().length&&(r.retrieveMsg=i.container().data("retrieve-msg"),r.importingMsg=i.container().data("importing-msg"),r.selectfileMsg=i.container().data("selectfile-msg"),r.authenMsg=i.container().data("authentication-msg"),e||t||i.initOauthPopUp()),window.doneLogin=function(){i.mainMessage().html(r.retrieveMsg),i.initUserInfo(),i.initFileList()},window.selectGoogleFile=function(e,t,n,o){!0!==i.importing&&(i.importing=!0,i.mainMessage().html(r.importingMsg),EasyBlog.ajax("site/controllers/googleimport/import",{id:e,title:t,postId:a,importStyle:n}).done(function(e){window.location=e}).fail(function(e){o.trigger("composerGoogleImportFail"),EasyBlog.dialog({width:450,content:e})}).always(function(){i.importing=!1}))}},initGimport:function(){s("[data-eb-googleimport]").removeClass("t-hidden"),n.manager().addClass("show-googleimport")},initOauthPopUp:function(){i.mainMessage().html(r.authenMsg),i.contentContainer().addClass("is-loading");var e=i.container().data("url"),t=screen.width/2-300,n=screen.height/2-250;window.open(e,"","width=600,height=500,left="+t+",top="+n)},initUserInfo:function(){EasyBlog.ajax("site/controllers/googleimport/getUserInfo",{}).done(function(e){i.userInfo().html(e)}).fail(function(){i.userInfo().html("")}).always(function(){i.userInfoLoader().addClass("t-hidden")})},initFileList:function(){i.contentContainer().addClass("is-loading");var e=i.container().data("return");i.gIframe().removeClass("t-hidden"),i.gIframe().bind("load",function(){i.contentContainer().removeClass("is-loading"),i.mainMessage().html(r.selectfileMsg)}),i.gIframe().attr("src",e)},closePopup:function(){i.gIframe().attr("src","about:blank"),i.userInfo().html(""),i.userInfoLoader().removeClass("t-hidden"),n.manager().removeClass("show-googleimport"),s("[data-eb-googleimport]").addClass("t-hidden"),1<=s("div.eb-composer-templates.eb-composer-templates--template").length&&n.manager().addClass("show-templates")},"{closeBtn} click":function(e){!0!==i.importing&&(0<s('[data-toolbar-view][data-type="googleimport"]').length&&i.composer.document.toolbar.googleimport.toggle(),i.closePopup())},"{revokeBtn} click":function(e){!0!==i.importing&&EasyBlog.dialog({content:EasyBlog.ajax("site/controllers/googleimport/confirmRevoke",{}),bindings:{"{closeButton} click":function(){this.parent.close()},"{submitButton} click":function(){this.parent.close(),EasyBlog.ajax("site/controllers/googleimport/revoke",{}).done(function(e){1==e&&(i.gIframe().attr("src","about:blank"),i.contentContainer().removeClass("is-loading"),i.userInfo().html(""),i.userInfoLoader().removeClass("t-hidden"),i.initOauthPopUp())}).fail(function(e){EasyBlog.dialog({content:e})}).always(function(){})}}})}}}),EasyBlog.Controller("Composer.Googleimport.List",{defaultOptions:{"{searchContainer}":"[data-eb-googleimport-list-search]","{contentContainer}":"[data-eb-googleimport-list-contents]","{itemsContainer}":"[data-eb-googleimport-list-items]","{msgBar}":"[data-eb-googleimport-sub-message]","{listEmptyMsg}":"[data-eb-googleimport-list-emptymsg]","{item}":"[data-eb-googleimport-list-item]","{searchBtn}":"[data-eb-googleimport-search-button]","{searchInput}":"[data-eb-googleimport-search-input]","{pagination}":"[data-eb-googleimport-pagination]","{loadmoreBtn}":"[data-eb-googleimport-loadmore]","{pageTokenInput}":"[data-eb-googleimport-token-input]","{searchForm}":"[data-eb-googleimport-search-form]"}},function(a,e,t){return{init:function(){a.element.closest("body").css({overflow:"hidden",padding:"0px"}),a.element.closest("html").addClass("is-eb-content")},"{self} composerGoogleImportFail":function(e,t){a.toggleImportProcess(!1)},toggleSearch:function(e){!0===e&&a.searchContainer().removeClass("t-hidden"),!1===e&&a.searchContainer().addClass("t-hidden")},toggleListing:function(e){!0===e&&(a.itemsContainer().removeClass("t-hidden"),a.pagination().removeClass("t-hidden")),!1===e&&(a.itemsContainer().addClass("t-hidden"),a.pagination().addClass("t-hidden"))},toggleContents:function(e){!0===e&&a.contentContainer().removeClass("t-hidden"),!1===e&&a.contentContainer().addClass("t-hidden")},toggleImportProcess:function(e){e?(a.element.addClass("is-loading"),a.msgBar().removeClass("t-hidden"),a.toggleListing(!1),a.toggleContents(!1),a.toggleSearch(!1)):(a.element.removeClass("is-loading"),a.msgBar().addClass("t-hidden"),a.toggleListing(!0),a.toggleContents(!0),a.toggleSearch(!0))},"{loadmoreBtn} click":function(e,t){var n=s(e),e=n.data("token");!0!==a.loadmore&&(a.loadmore=!0,e&&(n.addClass("is-loading"),EasyBlog.ajax("site/controllers/googleimport/loadmore",{search:a.searchInput().val(),nextPageToken:e}).done(function(e,t){t||n.addClass("t-hidden"),n.data("token",t),a.itemsContainer().append(e)}).always(function(){a.loadmore=!1,n.removeClass("is-loading")})))},"{searchBtn} click":function(e,t){var n;!0!==a.loadmore&&!0!==a.searching&&(a.searching=!0,a.toggleListing(!1),a.contentContainer().addClass("is-loading"),a.contentContainer().removeClass("is-empty"),n=a.searchForm().serializeObject(),EasyBlog.ajax("site/controllers/googleimport/search",n).done(function(e,t,n){a.loadmoreBtn().removeClass("t-hidden"),t||a.loadmoreBtn().addClass("t-hidden"),a.loadmoreBtn().data("token",t),a.itemsContainer().html(e),n&&(a.contentContainer().addClass("is-empty"),a.listEmptyMsg().html(n))}).always(function(){a.searching=!1,a.toggleListing(!0),a.contentContainer().removeClass("is-loading")}))},"{searchInput} keyup":s.debounce(function(e,t){var n=a.searchInput().val();3<=(n=s.trim(n)).length&&a.searchBtn().click()},500),"{item} click":function(e,t){var n,o;!0!==a.loadmore&&(e=s(e),n=e.data("id"),o=e.data("title"),EasyBlog.dialog({content:EasyBlog.ajax("site/controllers/googleimport/confirmImportStyle",{}),bindings:{"{closeButton} click":function(){this.parent.close()},"{submitButton} click":function(){var e="inline";this.radioPlain().is(":checked")&&(e="plain"),this.parent.close(),a.toggleImportProcess(!0),parent.window.selectGoogleFile(n,o,e,a)}}}))}}}),this.resolve()}),EasyBlog.module("composer/layout/elements",function(i){i(document).on("keyup","[data-date-form] [data-date-day]",function(){var e,t,n,o;i.trim(i(this).val())&&(o=parseInt(i(this).siblings("[data-date-year]").val()||i(this).siblings("[data-date-year]").data("dateDefault")),e=parseInt(i(this).siblings("[data-date-month]").val()||i(this).siblings("[data-date-month]").data("dateDefault")),t=parseInt(i(this).val()||i(this).data("dateDefault")),n=/1|3|5|7|8|10|12/.test(e)?31:30,(n=2==e?(o=o)%400&&(!(o%100)||o%4)?28:29:n)<(t=t<1?1:t)&&(t=n),i.isNumeric(t)?i(this).val(t):i(this).val(""))}),i(document).on("keyup","[data-date-form] [data-date-year]",function(){var e;i.trim(i(this).val())&&(e=parseInt(i(this).val()),i.isNumeric(e=e<1?1:e)?i(this).val(e):i(this).val(""))}),i.fn.listbox=function(n){if(i.isPlainObject(n)||void 0===n)return this.each(function(){var e=i(this),t=r.get(e);if(t)return t.update(n),this;new r(e,n)}),this;if(i.isString(n)){var e,t=i(this[0]),o=r.get(t)||new r(t),t=o[n];return(e=i.isFunction(t)?t.apply(o,i.makeArray(arguments).slice(1)):e)||this}return this},i.fn.listboxitem=function(e){if(void 0===e)return this.each(function(){var e=i(this);r.Item.init(e)}),this;if(i.isString(e)){var t=i(this[0]);r.Item.init(t);var n,o=t.data("listboxitem"),t=o[e];return(n=i.isFunction(t)?t.apply(o,i.makeArray(arguments).slice(1)):n)||this}return this};var r=function(o,e,t){var a={};this.container=o,this.options={},o.data("listbox",this),i.each(r.defaultOptions,function(e,t){var n=o.attr("data-listbox-"+e);void 0!==n&&(a[e]=isNaN(parseInt(n))?n:parseInt(n))}),t&&this.extend(t),this.update(i.extend(!0,{},r.defaultOptions,a,e)),this.init()};r.defaultOptions={toggleDefault:!0,sortable:!0,allowAdd:!0,allowRemove:!0,allowInput:!1,editable:!0,max:0,min:1,customHTML:"",itemTitle:"Title"},r.get=function(e){e=i(e).data("listbox");if(e instanceof r)return e},i.extend(r.prototype,{addButton:function(){return this.container.find("[data-listbox-button-add]")},update:function(e){i.extend(!0,this.options,e)},extend:function(e){i.each(e,function(e,t){i.isFunction(t)&&(r.prototype[e]=t)})},getItems:function(e){var t=this.container.find("[data-listbox-item]");return e&&(t=t.filter(e)),r.Item.init(t),t},getParentItem:function(e){e=i(e).closest("[data-listbox-item]");return r.Item.init(e),e},init:function(){var e=this,t=e.container,n=t.find("[data-listbox-custom-html]");e.options.customHTML=n.html(),n.remove(),e.options.toggleDefault&&t.on("click.listbox.toggleDefault","[data-listbox-button-default]",function(){return e.toggleDefault(this)}),e.options.allowAdd&&t.on("click.listbox.addItem","[data-listbox-button-add]",function(){return e.add(this)}),e.options.allowRemove&&t.on("click.listbox.removeItem","[data-listbox-button-remove]",function(){return e.remove(this)}),e.options.sortable&&this.initSortable(),e.options.customHTML||this.getItems().find("[data-listbox-item-content]").editable(!0)},initSortable:function(){},toggleDefault:function(e){var t=this.getItems(),e=this.getParentItem(e);0!=e.length&&(this.container.trigger("listboxBeforeToggleDefault",[e]),e&&(t.removeClass("is-default"),e.addClass("is-default"),this.container.trigger("listboxAfterToggleDefault",[e])))},isDefault:function(e){return e.hasClass("is-default")},add:function(){var e=this.getItems();0<this.options.max&&e.length>=this.options.max||(e=r.Item.newItem(this.options),this.container.trigger("listboxBeforeAddItem",[e]),e&&(this.addButton().closest("[data-listbox-button-add-wrapper]").before(e),this.container.trigger("listboxAfterAddItem",[e]),0==this.getItems(".is-default").length&&this.toggleDefault(this.getItems(":first"))))},remove:function(e){var t=this.getItems();0<this.options.min&&t.length<=this.options.min||(e=this.getParentItem(e),this.container.trigger("listboxBeforeRemoveItem",[e]),e&&(e.remove(),this.container.trigger("listboxAfterRemoveItem",[e]),this.isDefault(e)&&this.toggleDefault(this.getItems(":first"))))},populate:function(e,o){var a=this;a.getItems().remove(),i.each(e,function(e,t){var n=r.Item.newItem(a.options);i.isFunction(o)&&o(n,t.content,t.id),t.default&&n.addClass("is-default"),a.container.trigger("listboxBeforePopulateItem",[t]),a.addButton().closest("[data-listbox-button-add-wrapper]").before(n),a.container.trigger("listboxAfterPopulateItem",[t])})},toData:function(){var n=[];return i.each(this.getItems(),function(e,t){n.push(i(t).listboxitem("toData"))}),n}}),r.Item=function(e){this.item=e,this.parent=e.parents("[data-listbox]").data("listbox")},r.Item.get=function(e){e=i(e).data("listboxitem");if(e instanceof r.Item)return e},r.Item.init=function(e){return e=i(e),i.each(e,function(e,t){t=i(t),r.Item.get(t)||t.data("listboxitem",new r.Item(t))}),e},r.Item.newItem=function(e){var t=i("<div></div>",{"data-listbox-item":"",class:"eb-composer-manage-tab row-table"}),n=i("<div></div>",{class:"col-cell eb-composer-manage-tab-handler"});e.sortable&&n.append('<i class="fdi fa fa-bars"></i>'),e.toggleDefault&&n.append(' <i class="fdi fa fa-star" data-listbox-button-default></i>'),t.append(n);n=i("<div></div>",{"data-listbox-item-content":"",class:"col-cell eb-composer-manage-tab-name"}).html(e.customHTML?i.buildHTML(e.customHTML):e.itemTitle);return e.allowInput&&n.html('<input type="text" class="eb-composer-manage-tab-name-input" placeholder="'+e.placeholder+'">'),e.editable&&(e.customHTML||n.editable(!0)),t.append(n),e.allowRemove&&t.append(i("<div></div>",{"data-listbox-button-remove":"",class:"col-cell eb-composer-manage-tab-remove"}).html("&times;")),r.Item.init(t),t},i.extend(r.Item.prototype,{isDefault:function(){return this.item.hasClass("is-default")},inputContent:function(e,t){var n=this.item.find("[data-listbox-item-content]");if(t&&this.item.attr("data-id",t),e)return n.find("input").val(e)},content:function(e){var t=this.item.find("[data-listbox-item-content]");return void 0!==e?(t.html(e),this):t.html()},getContent:function(){var e=this.item.find("[data-listbox-item-content]");return 0<e.find("input").length?e.find("input").val():e.html()},getId:function(){var e=this.item.data("id");return e||""},remove:function(){this.parent.remove(this.item)},setDefault:function(){this.parent.toggleDefault(this.item)},toData:function(){return{id:this.getId(),default:this.isDefault()?1:0,content:this.getContent()}}}),EasyBlog.UI=function(e){e=e.document;i(e).on("click.ebtabs",".eb-tabs-menu-item",function(){var e=i(this),t=e.closest(".eb-tabs"),n=t.find("> .eb-tabs-menu").find("> .eb-tabs-menu-item"),o=t.find("> .eb-tabs-content").find("> .eb-tabs-content-item");"toggle"==t.data("eb-tabs-mode")&&e.hasClass("active")?(n.removeClass("active"),o.removeClass("active")):(n.removeClass("active"),e.addClass("active"),o.removeClass("active").where("id",e.data("id")).addClass("active")),t[0<o.filter(".active").length?"addClassAfter":"removeClassAfter"]("is-open",1)})},EasyBlog.UI(window),this.resolve()}),EasyBlog.module("composer/media",function(e){var t=this;EasyBlog.require().library("plupload2","ui/draggable").script("composer/media/uploader","composer/media/editor","composer/vendors/dragselect","composer/vendors/cropper").done(function(d){var e=EasyBlog.Controller("MediaManager",{hostname:"mediaManager",pluginExtendsInstance:!0,elements:["[data-eb-mm-{folder-upload-current-file|folder-upload-stat|folder-upload-completed|folder-upload-total|folder-upload-progress-bar}]","[data-eb-mm-{pagination-previous|pagination-next|pagination-current|pagination-total}]"],defaultOptions:{types:{image:["jpg","jpeg","png","gif","webp","jfif"],video:["3gp","m4v","mp4","flv","wmv","mp3","webm","swf","mov"],imagevideo:["jpg","jpeg","png","gif","jfif","webp","3gp","m4v","mp4","flv","wmv","webm","swf","mov"],audio:["mp3","m4a","aac","ogg"],pdf:["pdf"]},templates:{},selections:{},"{frame}":"[data-mm-frame]","{body}":"[data-mm-body]","{place}":"[data-mm-place]","{browseButton}":"[data-eb-mm-browse-button]","{actions}":"[data-mm-actions]","{layout}":"[data-mm-layout]","{close}":"[data-mm-close]","{insert}":"[data-mm-insert]","{insertGallery}":"[data-mm-insert-gallery]","{loadMore}":"[data-mm-item-loadmore]","{delete}":"[data-mm-delete]","{insertPermalink}":"[data-mm-insert-permalink]","{panel}":"[data-mm-info-panel]","{infoPermalink}":"[data-mm-info-permalink]","{infoTitle}":"[data-mm-info-title]","{infoPreview}":"[data-mm-info-preview]","{form}":"[data-mm-form]","{formInput}":"[data-mm-form] [data-mm-panel-input]","{captionInput}":"[data-mm-form] [data-mm-panel-input]#caption_text","{imageSource}":"[data-mm-form] [data-mm-panel-input]#mm-preview-size","{infoPanel}":"[data-mm-info-panel-wrapper]","{infoPanelLoader}":"[data-mm-info-panel-loading]","{panelState}":"[data-mm-info-state]","{inputSearch}":"[data-mm-search]","{folderTitle}":"[data-mm-folder-title]","{breadcrumbs}":"[data-mm-breadcrumbs]","{breadcrumbBack}":"[data-mm-breadcrumb-back]","{breadcrumb}":"[data-mm-breadcrumb-item]","{breadcrumbSearch}":"[data-mm-breadcrumb-search]","{group}":"[data-group]","{groupList}":"[data-group-list]","{listing}":"[data-mm-listing]","{item}":"[data-mm-item]","{folder}":"[data-mm-folder]","{checkbox}":"[data-mm-item-checkbox]","{checkboxInput}":"[data-mm-item-checkbox-input]","{screens}":"[data-mm-screens]","{selectionCounter}":"[data-mm-selection-counter]","{selectionList}":"[data-mm-selection-list]","{selectionItem}":"[data-selection-wrapper]","{clearSelections}":"[data-mm-clear-selections]","{footer}":"[data-mm-footer]","{dropzoneWrapper}":"[data-dragzone-wrapper]","{dropzone}":"[data-mm-dropzone]","{uploadTemplate}":"[data-eb-mm-upload-template]","{uploadThumbnail}":"[data-eb-mm-upload-thumbnail]","{thumbnail}":"[data-eb-mm-file].type-image i[data-thumbnail]","{flickrButton}":"[data-flickr-login]","{createFolder}":"[data-mm-create-folder]","{selectionTemplate}":"[data-mm-selection-template]","{mobileClosePlaces}":"[data-mm-mobile-close-places]","{mobileOpenPlaces}":"[data-mm-mobile-open-places]","{mobileOpenPanel}":"[data-mm-mobile-panel-open]","{mobileHidePanel}":"[data-mm-mobile-panel-hide]","{errorMessage}":"[data-mm-error-message]"}},function(l,s,t,c,o,e){return{init:function(){l.disableDraggableItems(),s.templates.upload=l.uploadTemplate().detach().html(),s.templates.selection=l.selectionTemplate().detach().html(),o=s.templates,d.each(s.types,function(e,t){for(var n=0;t[n++];)l.types.file=e}),l.addPlugin("uploader"),l.addPlugin("editor");var e=(EasyBlog.MediaManager=l).frame(),t=e.data("uri");e.attr("data-key",t),l.requirementsMessages={width:e.data("requirements-width"),height:e.data("requirements-height")},1==e.data("acl-upload")&&l.uploader.register(e),s.mobile=1==e.data("mobile"),l.editor},bodyPerfectScrollbar:null,panelPerfectScrollbar:null,drag:{ds:null,running:!1,init:function(){if(!window.eb.mobile)return l.drag.ds?(l.drag.ds.start(),void l.drag.ds.setSelectables(document.getElementsByClassName("eb-nmm-content-listing__item"))):void(l.drag.ds=new DragSelect({selectables:document.getElementsByClassName("eb-nmm-content-listing__item"),area:d("[data-mm-body]")[0],multiSelectMode:!1,callback:function(e,t){var n,o=d(t.target);if(!(void 0!==o.data("mm-item-checkbox"))){if(void 0!==o.data("mm-mobile-panel-open"))return t.stopPropagation(),void o.click();if(l.clearSelections().click(),!(e.length<=0)){if("select"==l.mode&&!l.canSelectMultiple()){e=e[e.length-1],o=d(e);if(void 0!==o.data("mm-folder"))return;l.selectItem(o)}"select"==l.mode&&!l.canSelectMultiple()||(n=0,d(e).each(function(){void 0===d(this).data("mm-folder")&&n++}),d(e).each(function(){var e=d(this);void 0===e.data("mm-folder")&&l.selectItem(e,1<n)}))}}}}))},stop:function(){!window.eb.mobile&&l.drag.ds&&l.drag.ds.stop()}},disableDraggableItems:function(){l.find("[data-mm-disabledrag]").on("dragstart drop",function(e){return event.preventDefault(),!1})},open:function(e,t){"post"==e&&(e=l.getCurrentPostUri());var n=l.frame();n.removeClass("t-hidden show-local"),t&&(l.currentFilterType=t),n.removeClass("is-selecting is-browsing can-select-multiple");t="is-browsing";"select"==l.mode&&(t="is-selecting"),n.addClass(t),"gallery"!=l.currentBrowseType&&"thumbnails"!=l.currentBrowseType||n.addClass("can-select-multiple"),n.switchClass("filter-"+l.currentFilterType),l.currentUri&&"places"!=l.currentUri&&(e=l.currentUri),l.setActivePlace(e),e&&l.navigate(e)},hide:function(){l.pauseVideoObject(),l.frame().addClass("t-hidden"),l.selection.clear(),l.panel.hide(),l.currentFilterType="all",l.mode="standard",l.currentBrowseButton=null,l.currentBrowseType=null,l.disabledPanels=null},loading:function(){l.body().removeClass("is-empty").addClass("is-loading")},doneLoading:function(){l.body().removeClass("is-loading")},pauseVideoObject:function(){0<d("video").length&&d("video").get(0).pause()},"{self} composerReady":function(){(c=EasyBlog.Composer).perfectscrollbar.initPs(l.body.selector),c.perfectscrollbar.initPs(l.panel.selector)},"{self} onPerfectScrollbarAfterInit":function(e,t,n,o){const a=d(o);a.hasClass("eb-nmm-content")&&(l.bodyPerfectScrollbar||(l.bodyPerfectScrollbar=n)),a.hasClass("eb-nmm-info-panel__bd")&&(l.panelPerfectScrollbar||(l.panelPerfectScrollbar=n))},types:{"":"file"},getExtension:function(e,t){t=(e=l.getUri(e,t)).lastIndexOf(".");return-1<t?e.slice(t+1).toLowerCase():""},getType:function(e,t){return l.types[l.getExtension(e,t)]||"file"},getPlaceName:function(e){return e.split(":")[0]},getKey:function(e){var t=e;return"_"!==e.substring(0,1)&&(data="_"+d.moxie.btoa(e),data=data.replace(/\+/g,"."),data=data.replace(/\=/g,"-"),data=data.replace(/\//g,"~"),t=data),t},getUri:function(e,t){return e instanceof d&&(e=e.data("key")||""),firstKeyCharacter=e.substring(0,1),"_"!==firstKeyCharacter||t?e:(uri=e.slice(1),uri=uri.replace(/\./g,"+"),uri=uri.replace(/\-/g,"="),uri=uri.replace(/\~/g,"/"),uri=d.moxie.atob(uri,!0),uri)},getParent:function(e){var t=(e=l.getUri(e)).lastIndexOf("/");return-1<t?e.slice(0,t):null},getFilename:function(e){var t=(e=l.getUri(e)).lastIndexOf("/");return-1<t?e.slice(t+1):e},isOpen:function(){return!l.frame().hasClass("t-hidden")},isRoot:function(e){return l.getUri(e).indexOf("/")<0},canInsert:function(){return l.frame().hasClass("has-insertions")},canDelete:function(){return l.frame().hasClass("can-delete")},canSelectMultiple:function(){return"gallery"==l.currentBrowseType||"thumbnails"==l.currentBrowseType},canUpload:function(){return l.frame().hasClass("can-upload")},getCurrentPostUri:function(e){var t="post:"+EasyBlog.Composer.getPostId();return t=void 0!==e&&0<e.length?e+":"+EasyBlog.Composer.getPostId():t},medias:{},mediaLoaders:{},getMedia:function(e){var t=l.getKey(e),n=l.getCurrentPostUri(),e=l.mediaLoaders[e];return e||(l.infoPanelLoader().addClass("is-loading"),e=EasyBlog.ajax("site/views/mediamanager/info",{key:t,currentPostUri:n}).done(function(e){var t=e.uri;l.setMedia(t,e),l.infoPanelLoader().removeClass("is-loading")})),e},setMedia:function(e,t){l.medias[e]=t,l.mediaLoaders[e]=d.Deferred().resolve(t)},getVariations:function(e){e=l.medias[e];if(e)return e.meta.variations||{}},getVariation:function(e,t){if(d.isString(t)){var n=t;switch(n){case"icon":t=["system/icon","system/small","system/small 320","system/thumbnail","system/original"];break;case"small":t=["system/small","system/small 320","system/thumbnail","system/original"];break;case"medium":t=["system/medium","system/large","system/original"];break;case"thumbnail":t=["system/thumbnail","system/original"];break;case"large":t=["system/large","system/original"];break;case"original":t=["system/original"];break;default:t=[n,"system/original"]}}var o,a=l.getVariations(e);return d.each(t,function(e,t){if(d.has(a,t))return o=a[t],!1}),o},createVariation:function(t,e,n,o){var a=l.getKey(t);return EasyBlog.ajax("site/views/mediamanager/createVariation",{key:a,name:e,width:n,height:o}).done(function(e){l.setMedia(t,e)})},removeVariation:function(t,e){var n=l.getKey(t);return EasyBlog.ajax("site/views/mediamanager/deleteVariation",{key:n,name:e}).done(function(e){l.setMedia(t,e)})},mode:"standard",currentFilterType:"all",currentBrowseButton:null,currentFolderUri:null,currentUri:"places",selection:{getLastItem:function(){if(l.selection.total()<=0)return!1;var e=Object.keys(s.selections),e=e[e.length-1];return l.selection.getItem(e)},getItem:function(e){return s.selections[e]},getItems:function(){return s.selections},getKeys:function(){var n=[];return d.each(s.selections,function(e,t){n.push(e)}),n},total:function(){return Object.keys(s.selections).length},hasItems:function(){return!d.isEmptyObject(s.selections)},canCreateGallery:function(){var e=s.selections,n=!0;return d.each(e,function(e,t){if("image"!=t.meta.type)return n=!1}),n},insert:function(e,t){s.selections[e]=t,l.frame().addClass("has-selections"),template=l.getSelectionTemplate(t),l.selectionList().append(template),l.trigger("mediaSelectionUpdated",[s.selections,t])},remove:function(e){var t=l.selection.getItem(e);delete s.selections[e],l.selectionList().find('[data-key="'+e+'"]').remove(),l.trigger("mediaSelectionUpdated",[s.selections,t])},clear:function(){delete s.selections,l.folder().removeClass("is-selected"),l.selectionList().html(""),l.item().removeClass("is-selected"),l.checkboxInput().prop("checked",!1),l.frame().removeClass("has-selections"),l.panel.hide(),s.selections={},l.simulateMetakey=!1,l.trigger("mediaSelectionUpdated",[s.selections])}},setActivePlace:function(e){var t=l.getKey(e);l.currentPlace=e,l.frame().addClass("can-upload can-create-folder can-delete has-insertions"),"posts"!=l.currentPlace&&"users"!=l.currentPlace||l.frame().removeClass("can-upload can-create-folder can-delete"),"easysocial"!=l.currentPlace&&"jomsocial"!=l.currentPlace&&"flickr"!=l.currentPlace&&"unsplash"!=l.currentPlace||l.frame().removeClass("can-upload can-create-folder can-delete"),0<=l.currentPlace.indexOf("amazon")&&l.frame().removeClass("can-create-folder"),l.place().removeClass("is-active"),e==l.getCurrentPostUri()&&(t=l.getKey("post")),l.place('[data-key="'+t+'"]').addClass("is-active")},"{place} click":function(e,t){var n,o;0<l.place(".is-loading").length||(n=e.data("id"),o=e.data("key"),o=l.getUri(o),l.drag.stop(),"post"==n&&(o=l.getCurrentPostUri()),"amazon"==n&&(o=l.getCurrentPostUri(n)),l.currentUri!==o&&(l.breadcrumbData=[],l.selection.clear(),l.setActivePlace(o),e.addClass("is-loading"),s.mobile&&l.frame().removeClass("is-places-open"),c.perfectscrollbar.updatePs(l.bodyPerfectScrollbar,l.body()[0]),l.navigate(o).done(function(){e.removeClass("is-loading").addClass("is-active")})))},"{loadMore} click":function(t,e){var n=s.mobile?"eb-nmm-mobile-actionbar":"eb-nmm-actionbar";const o=l.find("."+n+"[data-mm-disabledrag]");var a=t.data("page"),i=l.getKey(l.currentPlace,!0),n=o.find('[data-mm-breadcrumb-item][data-uri="'+l.currentPlace+'"]').next("[data-mm-breadcrumb-search]").find("input").val();const r=t.find("[data-loadmore-container]");r.addClass("is-loading"),l.selection.clear(),EasyBlog.ajax("site/views/mediamanager/loadmore",{key:i,query:n,page:a}).done(function(e){t.remove(),l.groupList().append(e.contents),l.updateItems(),l.drag.init()})},reload:function(){l.drag.stop(),l.breadcrumbData=[],l.selection.clear(),l.navigate(l.currentUri,void 0,!0),l.panel.hide(),l.frame().removeClass("is-info-panel-open")},updateItems:function(){l.listing().find(l.item.selector).each(function(){var e,t=d(this),n=t.find("[data-cover]");"image"===t.data("type")?(e=n.data("source"),d("<img />").attr("src",e).on("load",function(){d(this).remove(),n.removeClass("is-loading"),n.css("background-image","url("+e+")")})):n.removeClass("is-loading")})},navigate:function(o,a,e,t){var i="";void 0===e&&(e=!1),void 0===a&&(a=!0),(t=void 0===t?!1:t)&&(i=t.query);l.currentUri;var n=l.currentUri,t=l.getKey(o);if(n!==o||e){l.currentUri=o,l.loading();var r=d.Deferred();return l.selection.clear(),l.frame().switchClass("place-"+l.getPlaceName(o)),EasyBlog.ajax("site/views/mediamanager/contents",{key:t,query:i}).done(function(e){l.doneLoading(),e.login?(l.screens().html(e.contents),l.frame().addClass("has-login")):(l.listing().html(e.contents),l.frame().removeClass("has-login"),l.updateItems()),l.uploader.updateUploaderUrl(e);var t=e.meta.items.folder.length,n=e.meta.items.file.length;0==t&&0==n?l.body().addClass("is-empty"):l.body().removeClass("is-empty"),0<t?l.body().addClass("has-folders"):l.body().removeClass("has-folders"),0<n?l.body().addClass("has-files"):l.body().removeClass("has-files"),a&&(t=l.isRoot(o),"easysocial"!=l.currentPlace&&"jomsocial"!=l.currentPlace||(t=e.meta.root),n="posts"!=l.currentPlace&&"users"!=l.currentPlace||"posts"==l.currentPlace&&"posts"==e.meta.place||"users"==l.currentPlace&&"users"==e.meta.place,l.breadcrumbData.push({uri:o,html:e.breadcrumb}),t&&n?(l.breadcrumbBack().addClass("t-hidden"),l.breadcrumbBack().removeAttr("data-uri")):l.breadcrumbBack().removeClass("t-hidden"),"unsplash"!=l.currentPlace&&l.breadcrumbSearch().remove(),l.breadcrumb().remove(),l.breadcrumbs().append(e.breadcrumb)),i&&(l.inputSearch().focus(),l.inputSearch().caret(i.length)),r.resolve(),l.drag.init(),c.perfectscrollbar.updatePs(l.bodyPerfectScrollbar,l.body()[0])}),r}l.uploader.updateUploaderUrl("",t)},getCurrentRequirements:function(e){return!!l.currentRequirements&&l.currentRequirements[e]},getSelectionTemplate:function(e){var t,n=d(o.selection);return n.attr("data-uri",e.uri),n.attr("data-key",e.meta.key),"image"==e.meta.type?(t=e.meta.preview+"?"+d.uid()+"=1",n.find("[data-selection-cover]").css("background-image","url("+t+")")):n.find("[data-selection-cover]").html('<i class="'+e.meta.icon+'"></i>'),n[0]},getUploadTemplate:function(e){var t=d(s.templates.upload);return t.attr("data-id",e.id),t.find("[data-eb-mm-upload-type]").addClass("type-"+e.type),t[0]},folder:{nodes:{},get:function(e){e=l.getKey(e),e=l.folder.selector+"[data-key='"+e+"']";return t.find(e)},remove:function(e){l.folder.get(e).remove(),0==l.folder().length&&l.body().removeClass("has-folders")},insert:function(e,t){l.mediaLoaders[e.uri]||l.setMedia(e.uri,e);e=l.group("[data-type=folder]"),e=l.groupList.inside(e);l.body().removeClass("is-empty"),l.body().addClass("has-folders"),e.prepend(t)},rename:function(e,t){l.getMedia(e).done(function(e){var n,o=e.meta;o.title!=t&&(n=l.folder.get(o.key),l.panelState().addClass("t-hidden"),EasyBlog.ajax("site/views/mediamanager/rename",{key:o.key,filename:t}).done(function(e){l.panelState().removeClass("t-hidden");var t=e.meta.filename;l.folderTitle().val(t),delete l.mediaLoaders[o.uri],l.setMedia(e.uri,e);t=d(e.file);n.replaceWith(t),l.panel().data("uri",e.uri);l.getKey(e.uri);l.selection.remove(o.key)}))})}},"{formInput} change":function(e,t){var n=e.parents(l.panel.selector),e=n.data("uri"),a={key:l.getKey(e)},n=l.formInput.inside(n);0<n.length&&d.each(n,function(e,t){var n=(t=d(t)).attr("name"),o=t.val();t.is("[data-mm-panel-title]")&&l.item("[data-key="+a.key+"]").trigger("mediaTitleChanged",[o]),a["params["+n+"]"]=o}),EasyBlog.ajax("site/views/mediamanager/updateItemMeta",a).done(function(e){l.panelState().removeClass("t-hidden");var t=e.uri;l.setMedia(t,e)})},"{folderTitle} keypress":function(e,t){var n;13!=(t.keyCode||t.which)||0!=(n=d.trim(e.val())).length&&(e=e.parents(l.panel.selector).data("uri"),l.folder.rename(e,n),t.stopPropagation(),t.preventDefault())},"{folderTitle} change":function(e,t){var n=d.trim(e.val());0!=n.length&&(e=e.parents(l.panel.selector).data("uri"),l.folder.rename(e,n))},folderLoading:!1,"{folder} click":function(e,t){var n,o,a,i;l.folderLoading||(n=e.data("uri"),o=e.data("key"),a=!e.hasClass("is-selected"),s.mobile?e.dblclick():((i=l.selection.getLastItem())&&"folder"!=i.meta.type&&delete l.mediaLoaders[n],l.selection.clear(),l.folder().removeClass("is-selected"),e.toggleClass("is-selected",a),a&&(l.folderLoading=!0,l.getMedia(n).done(function(e){l.selection.insert(o,e),l.panel.show(n),l.folderLoading=!1}))))},"{folder} dblclick":function(e,t){t.preventDefault();e=e.data("uri");l.navigate(e)},uploadItems:{},createUploadItem:function(e){var t,n=l.getUploadTemplate(e);return l.uploadItems[e.id]=n,e.type.match("image")&&((t=new d.moxie.Image).onload=function(){t.downsize(100),l.uploadThumbnail.inside(n).css("backgroundImage",d.cssUrl(t.getAsDataURL()))},t.load(e.getSource())),l.uploader.addItem(e,n),n},getFileGroup:function(e){return e=l.group("[data-type="+e+"]")},file:{active:d(),get:function(e){e=l.getKey(e),e=l.file.getSelector(e);return t.find(e)},getSelector:function(e){return l.item.selector+'[data-key="'+e+'"]'},activate:function(e){l.file.deactivate(),l.file.active=e.addClass("active")},deactivate:function(){l.file.active.removeClass("active")},insert:function(e){l.body().removeClass("is-empty"),l.body().addClass("has-files");var t=l.getFileGroup("file");l.groupList.inside(t).prepend(e)},remove:function(e){l.file.get(e).remove(),0==l.item().length&&l.body().removeClass("has-files")}},notice:{show:function(e){l.errorMessage().removeClass("t-hidden").html(e)},hide:function(){l.errorMessage().addClass("t-hidden")}},"{showAllFilesButton} click":function(e){l.folder.of(e).removeClass("filter-new")},panel:{save:function(){var e=l.panel().data("uri");e.length<=0||l.getMedia(e).done(function(e){var t=l.panel().find(">div");e.panel=t.detach()})},populate:function(e){},show:function(t){l.panelState().addClass("t-hidden"),l.panel.save(),l.panel().data("uri",t),l.getMedia(t).done(function(e){l.panel().html(e.panel),l.panel().removeClass("t-hidden"),l.frame().addClass("is-info-panel-open");e=JSON.parse(e.meta.params);t.includes("unsplash")&&(l.captionInput().val(e.attribution),l.imageSource().val("system/medium")),l.panel().find("[data-eb-mm-panel-type]").removeClass("t-hidden"),l.disabledPanels&&d(l.disabledPanels).each(function(){l.panel().find("[data-eb-mm-panel-type="+this+"]").addClass("t-hidden")})})},hide:function(){l.panel().data("uri",""),l.panel().addClass("t-hidden")}},"{flickrButton} click":function(e){var t=e.data("url"),n=screen.width/2-480,e=screen.height/2-325;window.doneLogin=function(){l.currentUri="flickrlogin",l.navigate("flickr")},window.open(t,"","scrollbars=no,resizable=no, width=960,height=650,left="+n+",top="+e)},"{createFolder} click":function(e,t){var o=l.getKey(l.currentUri);EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/createFolderDialog"),bindings:{"{submitButton} click":function(){var e=this.folderName().val(),t=this.folderName(),n=this.alert();t.parent().removeClass("has-error"),""!=d.trim(e)?EasyBlog.ajax("site/views/mediamanager/createFolder",{key:o,folder:e}).done(function(e,t){l.folder.insert(e,t),EasyBlog.dialog().close()}).fail(function(e){t.parent().addClass("has-error"),n.html(e.message).removeClass("t-hidden")}):t.parent().addClass("has-error")}}})},"{clearSelections} click":function(e,t){t.stopPropagation(),l.selection.clear()},"{delete} click":function(e,t){var n;l.selection.hasItems()&&(n=l.selection.getItems(),EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/confirmDelete"),bindings:{"{submitButton} click":function(){var e=l.selection.getKeys();EasyBlog.ajax("site/views/mediamanager/delete",{keys:e}).done(function(){d.each(n,function(e,t){e=l.getUri(e),t="folder"==t.meta.type;l.removeMedia(e,t)}),l.selection.clear(),EasyBlog.dialog().close()})}}}))},"{self} mediaRemove":function(e,t,n,o){n=l.getKey(n);o&&l.folder.remove(n),o||l.file.remove(n);o=l.item().length,n=l.folder().length;0==o&&0==n&&l.body().addClass("is-empty")},refreshMedia:function(e){e=l.getUri(e),delete l.medias[e],delete l.mediaLoaders[e]},removeMedia:function(e,t){l.getKey(e);l.selection.clear(),l.refreshMedia(e),l.trigger("mediaRemove",[e,t])},"{fileRenameButton} click":function(e){var e=l.info.of(e),t=e.data("key"),e=d.trim(l.infoFilename.inside(e).text());EasyBlog.dialog({content:EasyBlog.ajax("site/views/mediamanager/renameFileDialog",{current:e}),bindings:{"{submitButton} click":function(){var e=this.fileName().val();""!=d.trim(e)&&l.file.rename(t,e)}}})},"{paginationPrevious} click, {paginationNext} click":function(e){var e=e.data("page"),t=l.getHint("loading");EasyBlog.ajax("site/views/mediamanager/users",{page:e}).done(function(e){t.replaceWith(e)}),l.display(t)},dropzone:{show:function(){l.selection.clear(),l.frame().find("[data-dragzone]").removeClass("t-hidden")},hide:function(){l.frame().find("[data-dragzone]").addClass("t-hidden")}},dropActivated:!1,"{dropzoneWrapper} dragover":function(e,t){l.canUpload()&&(l.dropActivated||(l.dropActivated=!0,l.dropzone.show(),setTimeout(function(){l.dropzoneWrapper().on("dragleave",function(){l.dropzone.hide(),l.dropActivated=!1,l.dropzoneWrapper().off("dragleave")})},100)))},"{dropzoneWrapper} drop":function(){l.dropzone.hide()},"{selectionItem} click":function(e,t){e=e.data("uri");l.panel.show(e)},"{item} click":function(e,t){s.mobile&&e.find(l.checkbox.selector).click()},simulateMetakey:!1,"{checkbox} click":function(e,t){t.preventDefault(),t.stopPropagation();t=e.siblings(l.checkboxInput),e=e.parents(l.item.selector);l.simulateMetakey=!0,t.prop("checked",!t.is(":checked")).trigger("change"),l.selectItem(e)},"{checkboxInput} change":function(e,t){0==l.checkboxInput(":checked").length&&(l.simulateMetakey=!1)},selectItem:function(e,n){var o,a,t;n=void 0!==n&&n,e.hasClass("type-loadmore")||(l.notice.hide(),o=!e.hasClass("is-selected"),a=e.data("uri"),l.folder().removeClass("is-selected"),l.simulateMetakey=!0,(t=l.selection.getLastItem())&&"folder"==t.meta.type&&l.selection.clear(),"select"==l.mode&&"thumbnails"!=l.currentBrowseType&&"gallery"!=l.currentBrowseType&&l.selection.clear(),e.toggleClass("is-selected",o),e.find(l.checkboxInput).prop("checked",o).trigger("change"),l.getMedia(a).done(function(e){var t=l.getKey(e.uri);o?(l.selection.insert(t,e),s.mobile||n||(l.panel.show(a),c.perfectscrollbar.updatePs(l.panelPerfectScrollbar,l.panel()[0]))):(l.selection.remove(t),t=l.selection.hasItems(),l.panel.hide(),!t||s.mobile||n||(t=l.selection.getLastItem(),l.panel.show(t.uri),c.perfectscrollbar.updatePs(l.panelPerfectScrollbar,l.panel()[0])))}))},"{mobileClosePlaces} click":function(e,t){l.frame().removeClass("is-places-open")},"{mobileOpenPlaces} click":function(e,t){l.frame().addClass("is-places-open")},"{mobileOpenPanel} click":function(e,t){t.stopPropagation();e=e.data("uri");l.frame().addClass("is-info-panel-open"),l.panel.hide(),l.panel.show(e)},"{mobileHidePanel} click":function(e,t){t.stopPropagation(),l.panel.hide(),l.frame().removeClass("is-info-panel-open")},"{insertGallery} click":function(e,t){var n=l.selection.getItems();l.trigger("mediaInsertGallery",[n]),l.hide()},"{insertPermalink} click":function(e,t){var n=l.selection.getItems();l.trigger("mediaInsertPermalink",[n]),l.hide()},"{insert} click":function(e,t){var r=1<l.selection.total(),n=l.selection.getItems(),s=!0;d.each(n,function(e,t){var i=l.getUri(e);l.getMedia(i).done(function(n){var e=d("<div>");e.html(n.info);var t=e.find(EBD.standaloneBlock);if(l.pauseVideoObject(),l.panel().data("uri")==i&&(n.panel=l.panel().find("> div")),n.data=d(n.panel).find("[data-mm-form]").serializeObject(),"image"==n.meta.type){var o=n.meta.variations[n.data.variation],e=l.getCurrentRequirements("width"),a=l.getCurrentRequirements("height");if(e){e=parseInt(e);if(parseInt(o.width)<=e)return s=!1,void l.notice.show(l.requirementsMessages.width.replace("%i",e))}if(a){var a=parseInt(a);if(parseInt(o.height)<=a)return s=!1,void l.notice.show(l.requirementsMessages.height.replace("%i",a))}}d.map(n.data,function(e,t){0==e&&(n.data[t]=!1),1==e&&(n.data[t]=!0)}),"image"==n.meta.type&&"lightbox"==n.data.link&&(a=l.getVariation(n.data.uri,"original"),n.data.popup_url=a.url,n.data.popup_uri=a.uri),"select"==l.mode?l.currentBrowseButton.trigger("mediaSelect",[n,n.data]):l.trigger("mediaInsert",[n,t,n.data,r])})}),s&&l.hide()},"{layout} click":function(e,t){e=e.data("type");l.layout().removeClass("is-active"),l.layout("[data-type="+e+"]").addClass("is-active"),l.listing().removeClass("is-grid is-list").addClass("is-"+e)},"{close} click":function(e,t){l.hide()},breadcrumbData:[],"{breadcrumbBack} click":function(e,t){var n,o,a;"unsplash"!=l.currentPlace&&(l.drag.stop(),l.breadcrumbData.pop(),n=l.breadcrumbData.length-1,a=(o=l.breadcrumbData[n]).uri,0==n&&e.addClass("t-hidden"),o&&(l.breadcrumb().remove(),l.breadcrumbs().append(o.html)),l.drag.init(),l.navigate(a,!1))},"{breadcrumb} click":function(e,t){var n;"unsplash"!=l.currentPlace&&(n=e.data("uri"),e.nextAll().remove(),l.navigate(n,!1))},"{item} mediaTitleChanged":function(e,t,n){e.find("[data-item-title]").html(n)},"{self} keyup":function(e,t){27==t.keyCode&&l.isOpen()&&l.hide()},"{self} mediaUploaderFileFiltered":function(e,t,n,o){var a;l.canUpload()&&(a=l.uploadItems[o.id]||l.createUploadItem(o),l.getType(o.name,!0),l.file.insert(a))},"{self} mediaUploaderFileError":function(e,t,n,o){var a=o.file,a=d(l.uploadItems[a.id]),o=JSON.parse(o.response);a.addClass("is-failed");a=a.find("[data-eb-mm-failed-message]");a.attr("data-original-title",o.message),a.attr("data-eb-provide","tooltip")},"{self} mediaUploaderFileUploaded":function(e,t,n,o,a){var i=a.response.media;l.setMedia(i.uri,i),"image"==i.meta.type&&void 0!==i.meta.params&&(a=JSON.parse(i.meta.params),extension=void 0!==a.extension?a.extension:"","webp"==extension&&l.setMedia(i.meta.fallbackItem.uri,i.meta.fallbackItem)),setTimeout(function(){var e,t=l.uploadItems[o.id];t&&(e=d(i.file).addClass("is-new"),d(t).replaceWith(e),l.drag.init())},600)},"{self} mediaSelectionUpdated":function(e,t,n,o){var a,i,r=l.selection.total();l.selectionCounter().html(r),r<=0?l.actions().removeClass("show-insert show-gallery show-permalink"):(a=c.document.isLegacy(),i=l.selection.getLastItem().meta,o&&"undefined"!==o&&("folder"==(o=o.meta).type&&!a||("folder"==o.type&&a?l.actions().addClass("show-gallery"):(1<=r&&l.actions().addClass("show-insert"),1<r&&l.selection.canCreateGallery()?l.actions().addClass("show-gallery"):l.actions().removeClass("show-gallery"),a&&"pdf"==o.type&&o.id==i.id&&"pdf"==i.type||a&&"pdf"==i.type?l.actions().addClass("show-permalink"):l.actions().removeClass("show-permalink")))))},"{inputSearch} keyup":d.debounce(function(e,t){e=e.val();l.navigate(l.currentPlace,!1,!0,{query:e})},500),"{browseButton} click":function(e,t){var n=e.data("eb-mm-filter"),o=e.data("eb-mm-start-uri"),a=l.getUri(o),i=e.data("eb-mm-browse-place"),r=e.data("eb-mm-browse-type");"post"==a&&(a=l.getCurrentPostUri()),l.notice.hide();var s={width:e.data("min-width"),height:e.data("min-height")};s.width||s.height||(s=!1);o=e.data("eb-mm-disabled-panels")?e.data("eb-mm-disabled-panels"):[];o.length&&(o=o.split(",")),l.mode="select",l.currentBrowseType=r,l.currentBrowseButton=e,l.currentRequirements=s,l.disabledPanels=o,l.currentBrowseButton.trigger("mediaSelectStart",[l.currentBrowseButton]),l.open(a,n),"local"==i?l.frame().addClass("show-local"):l.frame().removeClass("show-local")}}});d("body").addController(e),t.resolve(e)})}),EasyBlog.module("composer/media/editor",function(i){EasyBlog.Controller("MediaManager.Editor",{defaultOptions:{"{editButton}":"[data-mm-edit]","{undoButton}":"[data-mm-editor-undo]","{cropButton}":"[data-mm-editor-crop]","{cropCancelButton}":"[data-mm-editor-crop-cancel]","{cropSaveButton}":"[data-mm-editor-crop-save]","{saveButton}":"[data-mm-editor-save]","{rotateButton}":"[data-mm-editor-rotate]","{flipHorizontalButton}":"[data-mm-editor-flip-horizontal]","{flipVerticalButton}":"[data-mm-editor-flip-vertical]","{wrapper}":"[data-mm-editor]","{closeButton}":"[data-mm-editor-close]","{imageElement}":"[data-mm-editor-image]","{fileName}":"[data-mm-editor-title]","{alert}":"[data-mm-editor-alert]"}},function(a,e,t,o){return{media:null,cropper:null,initialized:!1,isModified:!1,image:null,saving:!1,notify:function(e){a.alert().removeClass("t-d--none"),a.alert().find("[data-message]").html(e)},init:function(){o=a.mediaManager},getCurrentCanvas:function(){return a.cropper.getCroppedCanvas()},history:{snapshots:[],snapshot:function(e){void 0===e&&(e=a.getCurrentCanvas()),a.history.snapshots.push(e),0<=a.history.snapshots.length&&o.frame().addClass("has-changes")},get:function(){var e=a.history.snapshots.length-1;return a.history.snapshots.splice(e,1)[0]},undo:function(){var e=a.history.get();e&&(a.load(e.toDataURL()),a.history.snapshots.length<=0&&o.frame().removeClass("has-changes"))},reload:function(){a.history.actions=[]}},crop:{tmp:{data:null,get:function(){return a.crop.tmp.data},save:function(){a.crop.tmp.data=a.getCurrentCanvas()}},cancel:function(){a.cropper.clear(),a.wrapper().removeClass("is-cropping")},load:function(){a.wrapper().addClass("is-cropping"),a.crop.tmp.save(),a.cropper.crop()},save:function(){a.modified();var e=a.cropper.getCroppedCanvas().toDataURL();a.history.snapshot(a.crop.tmp.get()),a.load(e),a.wrapper().removeClass("is-cropping")}},load:function(e,t,n){if(n=void 0!==n&&n,o.frame().addClass("is-editing"),t&&a.fileName().html(t),a.cropper)return a.cropper.replace(e),n&&(a.history.reload(),a.history.snapshot()),a.cropper;a.image=i('<img crossorigin width="100%">'),a.image.attr("src",e),a.imageElement().append(a.image);e={autoCrop:!1,dragMode:"none",viewMode:1,restore:!1,movable:!1,zoomOnWheel:!1};return composer.options.mobile||(e.minContainerWidth=800,e.minContainerHeight=400),a.cropper=new Cropper(a.image[0],e),a.cropper},doneModified:function(){a.isModified=!1,a.saveButton().addClass("t--invisible")},modified:function(){a.isModified=!0,a.saveButton().removeClass("t--invisible")},flip:function(e){a.modified();var t,n=a.cropper,o=n.getData();a.history.snapshot(),"vertical"==e&&(t=-1*o.scaleY,n.scaleY(t)),"horizontal"==e&&(o=-1*o.scaleX,n.scaleX(o))},rotate:function(e){a.modified(),a.history.snapshot(),a.cropper.rotate(e)},setMedia:function(e){a.media=e},save:function(){var e=a.media;a.saving||(a.saving=!0,a.saveButton().addClass("is-loading"),EasyBlog.ajax("site/views/mediamanager/edit",{key:e.meta.key,image:a.getCurrentCanvas().toDataURL()}).done(function(e,t){a.saveButton().removeClass("is-loading"),a.doneModified(),a.saving=!1,i.map(e.meta.variations,function(e,t){e.url+="?"+i.uid()+"=1"}),o.refreshMedia(e.uri),o.setMedia(e.uri,e),o.reload(),a.notify(t)}))},"{closeButton} click":function(){o.frame().removeClass("is-editing")},"{undoButton} click":function(e,t){a.history.undo()},"{rotateButton} click":function(e,t){e=e.data("degrees");a.rotate(e)},"{flipHorizontalButton} click":function(e,t){a.flip("horizontal")},"{flipVerticalButton} click":function(e,t){a.flip("vertical")},"{cropCancelButton} click":function(e,t){a.crop.cancel()},"{cropSaveButton} click":function(e,t){a.crop.save()},"{cropButton} click":function(e,t){a.crop.load()},"{saveButton} click":function(e,t){a.save()},"{editButton} click":function(e,t){e=e.data("key"),e=o.getUri(e);a.alert().addClass("t-d--none"),o.getMedia(e).done(function(e){e.meta.editorUrl=e.meta.editorUrl+"?"+i.uid()+"=1",a.setMedia(e),a.load(e.meta.editorUrl,e.meta.title)})}}}),this.resolve()}),EasyBlog.module("composer/media/uploader",function(e){var t=this;EasyBlog.require().library("plupload2").done(function(l){EasyBlog.Controller("MediaManager.Uploader",{elements:["[data-eb-mm-{upload-progress|upload-name|upload-size|upload-progress-value|upload-progress-bar}]","[data-eb-mm-upload-{error-text|error-retry}]"],defaultOptions:{"{progressBar}":"[data-eb-mm-upload-progress-bar]"}},function(r,e,t,s){return{init:function(){var e=(s=r.mediaManager).frame().htmlData("mm-uploader");r.defaultUploadOptions=l.extend({runtimes:"html5, html4",autostart:!0},e)},instances:{},targetUrl:null,updateUploaderUrl:function(e,t){void 0===t&&(t=e.meta.key),r.targetUrl=l.uri(r.defaultUploadOptions.url).replaceQueryParam("key",t).toString()},register:function(n,e){var e=l.extend({},r.defaultUploadOptions,e),t=n.data("key");"post"==EasyBlog.MediaManager.getUri(t)&&(t=EasyBlog.MediaManager.getKey(EasyBlog.MediaManager.getCurrentPostUri()));var o=e.extensions.split(",");l.each(EasyBlog.MediaManager.options.types,function(e,t){l(t).filter(function(e,t){return l.inArray(t,o)})}),EasyBlog.MediaManager.options.types.file=o;var a=n.data("type")||"file";e.extensions=EasyBlog.MediaManager.options.types[a].join(","),r.targetUrl=e.url=l.uri(e.url).replaceQueryParam("key",t).toString();var i=n.plupload2(e,!1),e=i.id;return i.uri=s.getUri(t),i.container=n,r.instances[e]=i,l.each(r.plupload,function(e,t){i.bind(e,function(){t.apply(this,arguments),r.trigger("mediaUploader"+e,arguments),n.trigger("mediaUploader"+e,arguments)})}),i.init(),r.uploader=i},plupload:{FileFiltered:function(e,t){t.items=[],t.addedDate=(new Date).getTime()},FilesAdded:function(e,t){e.settings.autostart&&e.start()},BeforeUpload:function(e,t){r.updateAllItems(t)},UploadFile:function(e,t){r.targetUrl&&(e.settings.url=r.targetUrl),r.updateAllItems(t)},UploadProgress:function(e,t){r.updateAllItems(t)},ChunkUploaded:function(e,t){r.updateAllItems(t)},FileUploaded:function(e,t,n){try{var o=l.parseJSON(n.response);n.response=o}catch(e){}r.updateAllItems(t)},Error:function(e,t){var n=t.file;if(n){if("-600"==t.code)return n.status=4,n.error=t.message,EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/cancelFileSizeWarning")}),r.updateAllItems(n),r.trigger("mediaUploaderFileError",arguments),void e.container.trigger("mediaUploaderFileError",arguments);n.status=4,n.error=l.parseJSON(t.response),r.updateAllItems(n),r.trigger("mediaUploaderFileError",arguments),e.container.trigger("mediaUploaderFileError",arguments)}},FilesRemoved:function(e,t){t.status=6,r.updateAllItems(t)},Destroy:function(e){delete r.instances[e.id]},Init:l.noop,PostInit:l.noop,OptionChanged:l.noop,StateChanged:l.noop,QueueChanged:l.noop,Refresh:l.noop,UploadComplete:l.noop},getInstances:function(t){return l.map(r.instances,function(e){return e.uri==t?e:null})},status:{0:"idle",1:"queued",2:"uploading",3:"unused",4:"failed",5:"done",6:"removed"},addItem:function(e,t){e.items.push(t),r.updateItem(e,t)},updateItem:function(e,t){var n,o,t=l(t),a=r.status[e.status];t.switchClass("state-"+a),"uploading"===a&&r.progressBar().removeClass("t-hidden"),e.error?(t.find(r.errorText).html(e.error.message),t.find(r.errorRetry).off("click.mmupload.retry").on("click.mmupload.retry",function(){t.switchClass("state-idle")}),o=t.find(r.uploadProgressBar),r.updateProgressBar(o,100)):(t.find(r.uploadName).html(e.name),t.find(r.uploadSize).html(l.plupload2.formatSize(e.size)),t.find(r.uploadProgressValue).html(e.percent+"%"),n=e.percent,0==e.percent&&(n=5),a=0,(o=t.find(r.uploadProgressBar)).hasClass("progress-bar")?100<=(a=100*Math.ceil(n/5))&&5!=e.status&&(a=90):a=5*Math.ceil(n/5),r.updateProgressBar(o,a))},updateProgressBar:function(e,t){e.hasClass("progress-bar")?e.css("width",t+"%"):e.addClass("o-progress-radial--"+t)},updateAllItems:function(n){n.items&&l.each(n.items,function(e,t){r.updateItem(n,t)})},removeItem:function(e,t){l.pull(e.items,t)}}}),t.resolve()})}),EasyBlog.module("composer/mobile",function(e){EasyBlog.Controller("Composer.Mobile",{defaultOptions:{"{cover}":"[data-composer-mobile-cover]","{info}":"[data-composer-mobile-info]","{hideInfo}":"[data-composer-mobile-hide-info]","{exit}":"[data-composer-mobile-exit]","{options}":"[data-composer-mobile-options]","{optionScreen}":"[data-composer-mobile-options-screen]","{posts}":"[data-composer-mobile-posts]","{location}":"[data-composer-mobile-location]","{revisions}":"[data-composer-mobile-revisions]"}},function(n,e,o,t,a){return{init:function(){o=n.composer,a=o.manager(),o.blocks},hideMobileOptions:function(){a.removeClass("is-mobile-options-open")},"{exit} click":function(e,t){window.location=e.data("url")},"{cover} click":function(e,t){a.addClass("is-cover-open")},"{hideInfo} click":function(e,t){a.removeClass("is-sidebar-open")},"{info} click":function(e,t){a.addClass("is-sidebar-open")},"{posts} click":function(e,t){t.stopPropagation(),n.hideMobileOptions(),o.views.show("posts"),a.addClass("is-posts-open")},"{location} click":function(e,t){t.stopPropagation(),n.hideMobileOptions(),n.trigger("mobileLocationShow"),a.addClass("is-location-open")},"{revisions} click":function(e,t){t.stopPropagation(),n.hideMobileOptions(),a.addClass("is-revisions-open")},"{options} click":function(e,t){t.stopPropagation(),a.addClass("is-mobile-options-open")},"{optionScreen} click":function(e,t){n.hideMobileOptions()},"{self} composerViewShow":function(e,t,n){a.addClass("is-"+n+"-open")},"{self} composerViewHide":function(e,t,n){a.removeClass("is-"+n+"-open").addClass("xyzzz")},"{self} composerBlockDrop":function(){o.manager().removeClass("is-blocks-open")}}}),this.resolve()}),EasyBlog.module("composer/panels",function(e){EasyBlog.require().script().done(function(r){EasyBlog.Controller("Composer.Panels",{hostname:"panels",defaultOptions:{"{panelWrapper}":"[data-eb-composer-panels]","{panel}":"[data-eb-composer-panel]","{panelTab}":"[data-eb-composer-panel-tab]","{showDrawer}":"[data-eb-composer-panel-show-drawer]","{fieldset}":".eb-composer-fieldset","{fieldsetToggle}":".eb-composer-fieldset-toggle input","{customIdInput}":"[data-eb-composer-blocks-id]","{panelSectionHeader}":"[data-eb-composer-panels] [data-eb-composer-block-section-header]","{customCssInput}":"[data-eb-composer-blocks-css]"}},function(i,e,t){return{init:function(){r.each(["autopost","association","seo","post","category","authorship"],function(e,t){i.addPlugin(t)})},panels:[],panel:{get:r.memoize(function(e){return i.panel().where("id",e)})},panelTab:{get:r.memoize(function(e){return i.panelTab().where("id",e)})},allowedRememberPanelTabs:["post-options","fields","seo"],fieldset:{get:function(e,t){return void 0!==t?i.fieldset().where("name",e).where("type",t):i.fieldset().where("name",e)},enable:function(e,t){void 0===t&&(t=!0),i.fieldset.get(e).toggleClass("is-disabled",!t).find(i.fieldsetToggle).prop("checked",!!t)},disable:function(e,t){i.fieldset.enable(e,t=void 0===t?!1:t)},show:function(e){i.fieldset.get(e).removeClass("is-hidden")},hide:function(e){i.fieldset.get(e).addClass("is-hidden")},toggle:function(e,t){i.fieldset.get(e).toggleClass("is-hidden",void 0===t?void 0:!t)}},activate:function(e){i.deactivate(),i.panel.get(e).addClass("active"),i.panelTab.get(e).addClass("active"),i.trigger("composerPanelActivate",[e]),i.composer.perfectscrollbar.updatePs(i.panels[e],i.panelWrapper().find('[data-eb-composer-panel][data-id="'+e+'"]').find("[data-eb-composer-panel-content-viewport]")[0])},deactivate:function(e){e=e||i.panel(".active").data("id"),i.panel.get(e).removeClass("active"),i.panelTab.get(e).removeClass("active"),i.trigger("composerPanelDeactivate",[e])},"{self} composerReady":function(){i.panel().each(function(e,t){t=r(t),EasyBlog.Composer.perfectscrollbar.initPs(t[0].querySelector("[data-eb-composer-panel-content-viewport]"))})},"{self} onPerfectScrollbarAfterInit":function(e,t,n,o){const a=r(o).closest("[data-eb-composer-panel]");o=a.data("id");i.panels[o]=n},"{self} composerBlockExport":function(e,t,n,o){n=blocks.data(n);(n.custom_css||n.custom_id)&&(void 0===o.data&&(o.data={}),n.custom_css&&(o.data.custom_css=n.custom_css),n.custom_id&&(o.data.custom_id=n.custom_id))},"{self} composerBlockActivate":function(e,t,n,o){var a=blocks.data(n),n={id:composer.panels.fieldset.get("custom-id"),css:composer.panels.fieldset.get("custom-css")};n.id.show(),n.css.show(),i.customCssInput().val(""),i.customIdInput().val(""),a.custom_css&&i.customCssInput().val(a.custom_css),a.custom_id&&i.customIdInput().val(a.custom_id)},"{self} composerBlockDeactivate":function(e,t,n,o){n=blocks.data(n);n.custom_css=i.customCssInput().val(),n.custom_id=i.customIdInput().val(),i.customCssInput().val(""),i.customIdInput().val(""),composer.panels.fieldset.get("custom-css").hide(),composer.panels.fieldset.get("custom-id").hide()},"{self} composerBlockRemove":function(){composer.panels.fieldset.get("custom-css").hide(),composer.panels.fieldset.get("custom-id").hide()},"{panelTab} click":function(e){e=e.data("id");i.activate(e)},"{showDrawer} click":function(){r("[data-eb-composer-frame]").toggleClass("show-drawer")},"{fieldsetToggle} change":function(e){i.fieldset.of(e).toggleClass("is-disabled",!e.is(":checked"))},"{panelSectionHeader} click":function(e,t){var n=e.closest("[data-eb-composer-block-section]");n.toggleClass("is-open");var o=i.panelWrapper(),o=parseInt(o.data("remember-panel")),e=e.closest("[data-eb-composer-panel]").data("id");o&&-1!=r.inArray(e,i.allowedRememberPanelTabs)&&(e=n.data("name"),n=n.hasClass("is-open")?1:0,EasyBlog.ajax("site/views/composer/savePanelPreferences",{section:e,isOpen:n}))}}})}),this.resolve()}),EasyBlog.module("composer/panels/association",function(o){EasyBlog.Controller("Composer.Panels.Association",{defaultOptions:{"{selectButton}":"[data-assoc-select]","{clearButton}":"[data-assoc-clear]"}},function(e,t,n){return{"{clearButton} click":function(e,t){e=o(e).data("id");o("input#assoc-postname"+e).val(""),o("input#assoc-postid"+e).val("")},"{selectButton} click":function(e,t){var n=e.data("code"),e=e.data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/browsePosts",{id:e,code:n})})}}}),this.resolve()}),EasyBlog.module("composer/panels/authorship",function(o){EasyBlog.Controller("Composer.Panels.Authorship",{defaultOptions:{"{authorArea}":"[data-eb-composer-author]","{currentAuthor}":"[data-eb-composer-current-author]","{searchAssociates}":"[data-associates-search]","{cancelSearchAssociates}":"[data-associates-search-cancel]","{searchAuthor}":"[data-author-search]","{cancelSearchAuthor}":"[data-author-search-cancel]","{tab}":"[data-author-type]","{tabContent}":"[data-tab-content]","{changeAuthor}":"[data-eb-composer-switch-author]","{authorPicker}":"[data-eb-composer-author-picker]","{authorItem}":"[data-eb-author-item]","{authorList}":"[data-eb-composer-author-list]","{authorCheckbox}":"[data-eb-composer-authoritem]","{activeAuthorId}":"[data-eb-composer-authorid]","{activeAuthorAvatar}":"[data-eb-composer-authoravatar]","{activeAuthorName}":"[data-eb-composer-authorname]","{authorPrevBtn}":"[data-eb-author-prev]","{authorNextBtn}":"[data-eb-author-next]","{associatesList}":"[data-eb-composer-associates-list]","{associateItem}":"[data-associates-item]","{associateCheckbox}":"[data-associates-checkbox]","{activeAssociateName}":"[data-eb-composer-associatename]","{activeAssociateId}":"[data-eb-composer-associateid]","{activeAssociateType}":"[data-eb-composer-associatetype]","{activeAssociateAvatar}":"[data-eb-composer-associateavatar]"}},function(i,e,t){return{init:function(){},"{cancelSearchAssociates} click":function(){i.associateItem().removeClass("hide"),i.searchAssociates().val("")},"{cancelSearchAuthor} click":function(){i.authorItem().removeClass("hide");var e=o.trim(i.searchAuthor().val());i.searchAuthor().val(""),e&&i.loadAuthors(0,"")},"{searchAssociates} keydown":o.debounce(function(e,t){var n=o.trim(e.val()).toLowerCase();n?(e=i.associateItem().filter(function(){return 0==o.trim(o(this).data("title")).toLowerCase().indexOf(n)}))&&(i.associateItem().addClass("hide"),e.removeClass("hide")):i.associateItem().removeClass("hide")},300),"{searchAuthor} keydown":o.debounce(function(e,t){e=o.trim(e.val()).toLowerCase();""!=e&&i.loadAuthors(0,e)},300),associatesLoaded:!1,"{tab} click":function(e,t){e=e.data("type");"associates"==e&&i.loadAssociates(),i.tab().removeClass("active"),i.tab().where("type",e).addClass("active"),i.tabContent().removeClass("active"),i.tabContent().where("type",e).addClass("active")},"{changeAuthor} click":function(e,t){i.authorArea().toggleClass("is-opened"),i.authorPicker().toggleClass("pulled"),1!=i.tab().length?i.loadAuthors("0",""):i.loadAssociates()},"{authorPrevBtn} click":function(e,t){t.preventDefault();t=o.trim(i.searchAuthor().val()).toLowerCase(),e=o(e).data("start"),e=parseInt(e);i.loadAuthors(e=e<0?0:e,t)},"{authorNextBtn} click":function(e,t){t.preventDefault();t=o(e).data("start"),e=o.trim(i.searchAuthor().val()).toLowerCase();i.loadAuthors(t,e)},loadAuthors:function(e,t){var n=o("<div />",{class:"loading-authors"});n.html('<i class="fdi fa fa-circle-o-notch fa-spin"></i>'),i.authorList().html(n),EasyBlog.ajax("site/views/composer/listAuthors",{selected:i.activeAuthorId().val(),limitstart:e,search:t}).done(function(e){i.authorList().html(e)})},loadAssociates:function(){i.associatesLoaded||EasyBlog.ajax("site/views/composer/listAssociates",{source_id:i.activeAssociateId().val(),source_type:i.activeAssociateType().val()}).done(function(e){i.associatesLoaded=!0,i.associatesList().html(e)})},"{authorCheckbox} change":function(e,t){var n=e.parents(i.authorItem.selector).data("avatar"),o=e.parents(i.authorItem.selector).data("id"),e=e.parents(i.authorItem.selector).data("title");i.setActiveAuthor(o,e,n)},"{associateCheckbox} change":function(e,t){var n=e.parents(i.associateItem.selector).data("avatar"),o=e.parents(i.associateItem.selector).data("id"),a=e.parents(i.associateItem.selector).data("title"),e=e.parents(i.associateItem.selector).data("type");"easyblog.sitewide"!=e?i.setActiveAssociate(o,e,a,n):i.removeAssociate()},removeAssociate:function(){i.activeAssociateId().val(0),i.activeAssociateType().val("easyblog.sitewide"),i.activeAssociateName().addClass("hidden"),i.activeAssociateAvatar().addClass("hide")},setActiveAssociate:function(e,t,n,o){i.activeAssociateId().val(e),i.activeAssociateName().html(n).removeClass("hidden"),i.activeAssociateType().val(t),i.activeAssociateAvatar().attr("src",o).removeClass("hide")},setActiveAuthor:function(e,t,n){i.activeAuthorId().val(e),i.activeAuthorName().html(t),i.activeAuthorAvatar().attr("src",n),composer.options.authorId!=e?i.currentAuthor().removeClass("hide"):i.currentAuthor().addClass("hide")}}}),this.resolve()}),EasyBlog.module("composer/panels/autopost",function(o){EasyBlog.Controller("Composer.Panels.AutoPost",{defaultOptions:{"{twitterCheckbox}":"[data-autopost-twitter]","{facebookCheckbox}":"[data-autopost-facebook]","{linkedinCheckbox}":"[data-autopost-linkedin]"}},function(n,e,t){return{itemUpdated:function(e){o(e).is(":checked")?o(e).parent().addClass("checked"):o(e).parent().removeClass("checked")},"{twitterCheckbox} change":function(e,t){n.itemUpdated(e)},"{facebookCheckbox} change":function(e,t){n.itemUpdated(e)},"{linkedinCheckbox} change":function(e,t){n.itemUpdated(e)}}}),this.resolve()}),EasyBlog.module("composer/panels/category",function(o){EasyBlog.Controller("Composer.Panels.Category",{defaultOptions:{fields:null,templates:{},"{template}":"[data-category-primary-template]","{fieldsTab}":"[data-eb-composer-panel-tab][data-id=fields]","{fieldsPanel}":"[data-eb-composer-panel][data-id=fields]","{fieldsPanelForm}":"[data-eb-composer-panel][data-id=fields] [data-scrolly-viewport]","{fieldsForm}":"[data-eb-composer-panel-fields]","{empty}":"[data-eb-composer-fields-empty]","{setPrimaryCategory}":"[data-category-primary-item]","{categoryText}":"[data-title-text]","{primaryCategoryInput}":"[data-category-primary-input]","{primaryCategoryTitle}":"[data-category-primary-title]","{coverPreview}":'[data-toolbar-view][data-type="cover"] [data-cover-placeholder] [data-cover-preview]'}},function(i,e,t,r){return{init:function(){r=EasyBlog.Composer},removeCategory:function(e){var t,n;e.id==i.primaryCategoryInput().val()&&(t=r.category.selected[Object.keys(r.category.selected)[0]],t=(n=o(r.category.item.get(t)).find("[data-category-primary-item]")).data("id"),n=n.data("title"),i.assignPrimaryCategory(t,n)),r.form().find("[data-category="+e.id+"]").remove()},assignPrimaryCategory:function(e,t){i.primaryCategoryInput().val(e);t={id:e,title:t};i.trigger("categorysetprimary",t),i.coverPreview().trigger("onUpdateCategoryDefaultCover",[t])},"{setPrimaryCategory} click":function(e,t){var n=e.data("id"),o=e.data("title");e.parent().hasClass("selected")&&i.assignPrimaryCategory(n,o)},"{self} categorydeselect":function(e,t,n){var o=i.fieldsPanel().find('[data-category-id*="'+n.id+'"]');if(groupId=o.data("group-id"),groupId){categoryIds=o.attr("data-category-id");var a=categoryIds.split(",");if(1<a.length)return(a=jQuery.grep(a,function(e){return e!=n.id}))&&(categoryIds=a.join()),o.attr("data-category-id",categoryIds),void i.removeCategory(n)}o.remove(),0==i.fieldsPanel().find("[data-panel-field]").length&&(i.empty().show(),r.panels.panelTab.get("fields").addClass("hide")),i.removeCategory(n)},"{self} categoryselect":function(e,t,o){EasyBlog.ajax("site/views/categories/getCustomFields",{id:o.id,postId:EasyBlog.Composer.getPostId()}).done(function(e,t){if(0<e.length){if(t){var n=i.fieldsPanel().find('[data-group-id="'+t+'"]'),t=n.data("category-id");if(t)return void n.attr("data-category-id",t+","+o.id)}i.fieldsPanelForm().append(e),0<i.fieldsPanel().find("[data-panel-field]").length&&(r.panels.panelTab.get("fields").removeClass("hide"),i.empty().hide())}}),i.createHiddenInput(o).appendTo(r.form())},createHiddenInput:function(e){return o("<input>").attr("type","hidden").attr("value",e.id).attr("name","categories[]").attr("data-category",e.id)},"{self} composerSaveError":function(e,t,n){n.customCode&&-500==n.customCode?i.fieldsTab().addClass("has-error"):i.fieldsTab().removeClass("has-error")}}}),this.resolve()}),EasyBlog.module("composer/panels/post",function(a){EasyBlog.Controller("Composer.Panels.Post",{defaultOptions:{"{languageSelect}":"[data-composer-language]"}},function(e,t,n,o){return{"{languageSelect} change":function(e,t){var n=a(e).val();"*"!=n?(a("[data-composer-association]").removeClass("t-hidden"),a("[data-composer-association-item]").each(function(){var e=a(this),t=e.data("id");e.data("code")==n?(a(this).find("input#assoc-postname"+t).val(""),a(this).find("input#assoc-postid"+t).val(""),a(this).addClass("hide")):a(this).hasClass("hide")&&a(this).removeClass("hide")})):a("[data-composer-association]").addClass("t-hidden")}}}),this.resolve()}),EasyBlog.module("composer/panels/seo",function(e){var t=this;EasyBlog.require().library("textboxlist").done(function(r){EasyBlog.Controller("Composer.Panels.Seo",{defaultOptions:{"{keywordTemplate}":"[data-keyword-template]","{metaInput}":"[data-meta-description]","{metaCounter}":"[data-meta-counter]","{keywordCounter}":"[data-keyword-counter]","{textboxlist}":"[data-eb-composer-seo-keywords-textboxlist]","{autofillButton}":"[data-eb-composer-seo-keywords-autofill-button]","{jsondata}":"[data-eb-composer-keywords-jsondata]","{keywordsInput}":"[data-eb-keywords]"}},function(a,e,t,n,o,i){return{init:function(){var e;0!=a.metaInput().length&&(r.template("composer/textboxlist/keywords",a.keywordTemplate().detach().html()),a.textboxlist().textboxlist({component:"eb",view:{item:"composer/textboxlist/keywords"}}),a.tagger=a.textboxlist().textboxlist("controller"),e=JSON.parse(a.jsondata().val()),r.each(e,function(e,t){a.tagger.addItem(t)}))},"{textboxlist} listChange":r.debounce(function(){a.keywordCounter().html(a.tagger.getAddedItems().length)},15),"{metaInput} keyup":function(e,t){e=r(e).val().length;a.metaCounter().html(e)},"{autofillButton} click":function(e){var n=a.textboxlist().textboxlist("controller"),t=EasyBlog.Composer.document.getText(),o=r(e).parent();r(o).addClass("is-loading"),EasyBlog.ajax("site/views/composer/suggestKeywords",{data:t}).done(function(e){r(o).removeClass("is-loading"),e&&(r.each(e,function(e,t){n.addItem(t.title)}),a.metaCounter().text(e.length))}).fail(function(e){r(o).removeClass("is-loading"),EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/errorSuggestTagAutoFill",{errorMsg:e})})})},"{self} composerSave":function(e,t,n){0==a.metaInput().length?n.data.keywords="":n.data.keywords=r.pluck(a.tagger.getAddedItems(),"title").join(", "),a.keywordsInput().val(n.data.keywords)}}}),t.resolve()})}),EasyBlog.module("composer/perfectscrollbar",function(e){var t=this;EasyBlog.require().script().done(function(){EasyBlog.Controller("Composer.Perfectscrollbar",{defaultOptions:{}},function(n,e,t,o){return{init:function(){n.composer},initPs:function(t){jQuery(document).ready(function(e){FD.require().script("vendor/perfectscrollbar").done(function(){var e=new PerfectScrollbar(t,{suppressScrollX:!0});n.trigger("onPerfectScrollbarAfterInit",[e,t])})})},updatePs:(e,t)=>{e.update(),t.scrollTop=0}}}),t.resolve()})}),EasyBlog.module("composer/posts",function(o){EasyBlog.Controller("Composer.Posts",{defaultOptions:{"{container}":"[data-posts-container]","{listingContainer}":"[data-posts-listing-container]","{listing}":"[data-posts-listing]","{emptyMessage}":"[data-posts-empty-message]","{insert}":"[data-post-insert]","{wrapper}":"[data-eb-composer-posts]","{result}":"[data-eb-composer-posts-result]","{searchField}":"[data-posts-search]"}},function(a,e,t,i){return{loaded:!1,initialResult:null,initialEmpty:null,loading:!1,init:function(){i=a.composer,blocks=i.blocks,blocks.loadBlockHandler("post")},reset:function(){a.listingContainer().removeClass("is-loading is-empty"),a.listing().html(a.initialResult),a.emptyMessage().html(a.initialEmpty)},"{container} click":function(e,t){t.stopPropagation()},"{searchField} keydown":o.debounce(function(e){var n=a.listingContainer(),e=o.trim(e.val());e.length<1?a.reset():a.loading||(a.loading=!0,n.removeClass("is-empty"),n.addClass("is-loading"),a.listing().html(""),EasyBlog.ajax("site/views/search/search",{query:e}).done(function(e,t){return n.removeClass("is-loading"),a.loading=!1,0==t?(n.addClass("is-empty"),void a.emptyMessage().html(e)):void a.listing().append(e)}))},500),"{insert} click":function(e,t){var n=EasyBlog.Composer.getDoctype(),e=e.htmlData();"ebd"==n?(window.eb.mobile&&i.manager().removeClass("is-posts-open"),n=blocks.constructBlock("post",{title:e.title,url:e.permalink,image:e.image,intro:e.content}),blocks.addBlock(n)):(link=o.create("a").attr({href:e.permalink,title:e.title}).html(e.title),EasyBlog.LegacyEditor.insert(link.toHTML())),i.document.toolbar.posts.hide()},"{composer} composerViewShow":function(e,t,n){var o;void 0===a.initialEmpty&&(a.initialEmpty=a.emptyMessage().html()),"posts"!==n||a.loaded||a.loading||(a.loading=!0,(o=a.listingContainer()).addClass("is-loading"),EasyBlog.ajax("site/views/composer/listArticles",{exclude:i.getPostId()}).done(function(e){o.removeClass("is-loading"),a.loaded=!0,a.loading=!1,0!=e.length?(o.addClass("is-ready"),a.initialResult=e,a.listing().append(e)):o.addClass("is-empty")}))}}}),this.resolve()}),EasyBlog.module("composer/revisions",function(r){EasyBlog.Controller("Composer.Revisions",{defaultOptions:{"{container}":"[data-revisions-container]","{revisionsFieldset}":"[data-eb-revisions-fieldset]","{revisionToggle}":"[data-eb-revisions-dropdown-toggle]","{revisionDropdown}":"[data-eb-pilot-dropdown]","{revisionHandler}":"[data-eb-revisions-handler]","{revisionList}":"[data-eb-revisions-list]","{compareTitle}":"[data-revisions-comparison-title]","{closeComparison}":"[data-revisions-close-comparison]","{compareScreenWrapper}":"[data-eb-composer-revisions]","{compareScreen}":"[data-eb-composer-revisions-compare-screen]","{item}":"[data-eb-composer-revisions-item]","{compareRevision}":"[data-eb-composer-revisions-compare]","{openRevision}":"[data-eb-composer-revisions-open]","{useRevision}":"[data-eb-composer-revisions-use]","{deleteRevision}":"[data-eb-composer-revisions-delete]","{revisionBlocks}":".eb-composer-revisions .ebd-block","{revisionPurge}":"[data-eb-revision-purge]"}},function(a,e,t,i,n,o){return{init:function(){i=a.composer,i.panels,n=i.blocks,compareId=i.frame().data("composer-compare-id"),compareId&&a.initCompareRevision(compareId),a.preventParentScrolling()},preventParentScrolling:function(){a.revisionList().on("mousewheel",function(e){e.stopPropagation()})},"{container} click":function(e,t){t.stopPropagation()},"{item} click":function(e){var t=e.hasClass("active");e.hasClass("is-current")||(a.item().removeClass("active"),e.toggleClass("active",!t))},revisionsLoaded:!1,getRevisionItem:function(e){return r(e).parents(a.item.selector)},"{revisionBlocks} mouseover":function(e,t){e=r(e).data("uid"),e=n.getBlock(e);n.highlight(e)},"{revisionBlocks} mouseout":function(e,t){e=r(e).data("uid"),e=n.getBlock(e);n.unhighlight(e)},"{closeComparison} click":function(e,t){i.frame().switchClass("view-document"),i.views.show("document"),a.compareScreenWrapper().removeClass("active"),a.compareScreen().html("")},"{compareRevision} click":function(e,t){i.frame().switchClass("view-revisions"),i.views.show("revisions"),a.compareScreenWrapper().addClass("active");var n=a.getRevisionItem(e),e=r(n).data("id"),n=EasyBlog.Composer.getRevisionId();EasyBlog.ajax("site/views/revisions/compare",{current:n,target:e}).done(function(e,t){a.compareTitle().html(e),a.compareScreen().html(t)})},initCompareRevision:function(e){i.frame().switchClass("view-revisions"),i.views.show("revisions"),a.compareScreenWrapper().addClass("active");var t=EasyBlog.Composer.getRevisionId();EasyBlog.ajax("site/views/revisions/compare",{current:t,target:e}).done(function(e,t){a.compareTitle().html(e),a.compareScreen().html(t)})},"{useRevision} click":function(e,t){e=a.getRevisionItem(e),e=r(e).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/revisions/confirmUseRevision",{uid:EasyBlog.Composer.getPostId()+"."+e})})},"{deleteRevision} click":function(e,t){var n=r(e).parents(a.item.selector),o=r(n).data("id");EasyBlog.dialog({content:EasyBlog.ajax("site/views/revisions/deleteRevision",{id:o}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/controllers/posts/deleteRevision",{id:o}).done(function(){r(n).remove(),EasyBlog.dialog().close()})}}})},"{revisionPurge} click":function(e,t){i.views.hide("revisions");var n=EasyBlog.Composer.getRevisionId(),o=EasyBlog.Composer.getPostId();EasyBlog.dialog({content:EasyBlog.ajax("site/views/revisions/purgeRevision",{id:o}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/controllers/posts/purgeRevisions",{id:o,revisionid:n}).done(function(o,e){r("[data-eb-composer-revisions-item]").each(function(e,t){var n=r(t).data("id").toString();r.inArray(n,o)<0&&r(t).remove()}),EasyBlog.Composer.setMessage(e)}).fail(function(e){EasyBlog.Composer.setMessage(e)}).always(function(){EasyBlog.dialog().close()})}}})},"{revisionToggle} click":function(e){a.revisionsFieldset().toggleClass("show-revision-list"),EasyBlog.ajax("site/views/revisions/getRevisions",{uid:EasyBlog.Composer.getPostUid()}).done(function(e){a.revisionsLoaded=!0,a.revisionList().html(e)})},"{composer} composerSaveSuccess":function(){a.revisionsLoaded=!1}}}),this.resolve()}),EasyBlog.module("composer/shortcuts",function(e){EasyBlog.Controller("Composer.Shortcuts",{defaultOptions:{"{shortcutsButton}":"[data-composer-shortcuts-button]","{shortcutsPopup}":"[data-composer-shortcuts]","{closePopup}":"[data-shortcuts-close]"}},function(s,e,t,n,o,a){return{init:function(){this.initHelpScreen()},editor:function(e,t,n){if(!s.isHelpOpen()){var o=s.composer.document.toolbar;if(n&&220==t&&o.toggleSidebar(),n&&73==t)return event.preventDefault(),void s.composer.blocks.browser.toggle();n&&80==t&&o.posts.toggle(),n&&76==t&&o.location.toggle(),n&&72==t&&o.revisions.toggle(),n&&71==t&&o.googleimport.toggle()}},composerBlocks:function(e,t,n,o){var a=s.composer.blocks.toolbar,i=s.composer.blocks.getCurrentBlock();if(!(s.isHelpOpen()||i.length<=0))return e&&n&&8==t?(o.preventDefault(),void a.deleteCurrentBlock()):e&&68==t&&n?(o.preventDefault(),void a.duplicateBlock()):(e&&77==t&&n&&a.moveBlock(),e&&83==t&&n&&a.saveBlockAsTemplate(),void(e&&73==t&&n&&(o.preventDefault(),s.composer.blocks.browser.toggle())))},help:function(e,t,n){191==t&&n&&s.toggleHelpScreen(),27==event.keyCode&&s.isHelpOpen()&&s.hideHelpScreen()},media:function(e,t,n){var o,a,i;s.isHelpOpen()||(a=(o=s.composer).document.toolbar,i=EasyBlog.MediaManager,o.document.isLegacy()&&n&&86==t&&a.embedVideo().click(),n&&67==t&&a.cover.toggle(),n&&77==t&&(i.isOpen()?i.hide():i.open("post")))},isMac:function(){return/(Mac)/i.test(navigator.platform)},isWindows:function(){return/(Win)/i.test(navigator.platform)},isHelpOpen:function(){return"none"!=s.shortcutsPopup().css("display")},hideHelpScreen:function(){s.shortcutsPopup().hide()},toggleHelpScreen:function(){s.shortcutsPopup().toggle()},initHelpScreen:function(){s.element.on("keydown",function(e){var t=e.metaKey,n=e.shiftKey,o=e.keyCode,a=s.composer,i=s.composer.blocks.getCurrentBlock();s.isWindows()&&(t=e.ctrlKey);var r=e.target.tagName;if(i.length<=0&&"INPUT"!==r&&"TEXTAREA"!==r)return s.help(t,o,n,e),s.editor(t,o,n,e),void s.media(t,o,n,e);a.document.isLegacy()||s.composerBlocks(t,o,n,e)})},"{shortcutsButton} click":function(){s.toggleHelpScreen()},"{closePopup} click":function(){s.hideHelpScreen()}}}),this.resolve()}),EasyBlog.module("composer/tags",function(p){var e=this,r=40,s=13,f=27,h=37,m=39,g=38,v={38:"up",40:"down",37:"left",39:"right"};EasyBlog.require().library("textboxlist","scrollTo").script("composer/vendors/nearest").done(function(){EasyBlog.Controller("Composer.Tags",{elements:["[data-eb-composer-tags-{textboxlist|readonly}]"],defaultOptions:{templates:{},"{tagTemplate}":"[data-tag-template]",readOnly:!1,"{tags}":"[data-eb-composer-tags]","{tag}":".textboxlist-item","{total}":"[data-eb-composer-tags-total]","{count}":"[data-eb-composer-tags-count]","{suggestions}":".eb-composer-tags-suggestions","{selection}":".eb-composer-tags-selection","{toggleButton}":"[data-eb-composer-tags-toggle-button]","{autofillButton}":"[data-eb-composer-tags-autofill-button]","{itemgroup}":".eb-composer-tags-selection-itemgroup","{item}":".eb-composer-tags-selection-itemgroup > div","{textfield}":"[data-textboxlist-textField]","{jsondata}":"[data-eb-composer-tags-jsondata]","{defaulttags}":"[data-eb-composer-default-tags]","{tagsInput}":"[data-eb-tags]"}},function(l,i,e,c,d,u){return{init:function(){if("0"!=EasyBlog.Composer.options.tags.enabled){i.readOnly=0<l.readonly().length,p.template("composer/textboxlist/item",l.tagTemplate().detach().html()),d=l.selection,c=l.suggestions;var e=parseInt(l.tags().attr("data-eb-composer-tags-max"))||null;l.textboxlist().textboxlist({component:"eb",max:e,ignoreLocked:!0,view:{item:"composer/textboxlist/item"},filterItem:function(e){return p.isString(e)?u.sanitize(e):(e.title=u.sanitize(e.title),e)}}),u=l.tagger=p.extend(l.textboxlist().textboxlist("controller"),l.tagger),c.populate("",!0);for(var t=0,n=JSON.parse(l.jsondata().val());existingTag=n[t++];)"0"==existingTag.id?u.addItem(existingTag.title):u.addItem({id:existingTag.id,title:existingTag.title,key:u.getItemKey(existingTag.title),locked:!1});e=JSON.parse(l.defaulttags().val());p.each(e,function(e,t){u.addLockedItem(t)}),window.tagz=l}},tagger:{sanitize:function(e){return p.trim(e).replace(/,/g,"")},addLockedItem:function(e){e=p.trim(e);var t=u.get(e),n=t&&!t.locked;t&&u.deleteItem(t.id),u.addItem({id:p.uid("item-"),title:e,key:u.getItemKey(e),locked:!0,assigned:n},!0)}},"{textfield} keydown":function(e,t){var n=t.which,o=d.activeItem;switch(n){case g:case r:case h:case m:var a=v[n];(0<o.length||"down"==a)&&(c.navigate(a),t.preventDefault());break;case f:0<o.length?d.deactivate(o):l.suggestions().hasClass("is-showing")?c.collapse():e.val("");break;case s:if(0<o.length)return d.use(o),void t.preventDefault();i.readOnly&&t.preventDefault();break;default:c.populateFromTextfield()}},"{item} mouseover":function(e){d.deactivate(),d.activate(e)},"{item} mouseout":function(e){d.deactivate()},"{item} click":function(e){d.use(e)},"{textboxlist} addItem":function(e,t,n){p(d.get(n.title)).addClass("is-used")},"{textboxlist} removeItem":function(e,t,n){n.assigned?u.addItem(n.title):p(d.get(n.title)).removeClass("is-used")},"{textboxlist} listChange":p.debounce(function(){c.refresh();var e=l.tagger.getAddedItems().length;l.count().text(e)},15),"{self} categoryselect":function(e,t,n){n.tags.length<=0||(n=(n.tags||"").split(","),p.each(n,function(e,t){u.addLockedItem(t)}))},"{self} categorydeselect":function(e,t,n,o){n.tags.length<=0||(n=(n.tags||"").split(","),o=p.pluck(o,"tags").join(",").split(","),o=p.without.apply(null,[n].concat(o)),p.each(o,function(e,t){t=u.get(t);t&&u.removeItem(t.id)}))},"{toggleButton} click":function(e){c[l.suggestions().hasClass("is-showing")?"collapse":"expand"]()},"{autofillButton} click":function(e){var t=l.composer.document.getText(),n=p(e).parent();p(n).addClass("is-loading"),EasyBlog.ajax("site/views/composer/suggestKeywords",{data:t}).done(function(e){p(n).removeClass("is-loading"),e&&p.each(e,function(e,t){u.addItem(t.title)})}).fail(function(e){p(n).removeClass("is-loading"),EasyBlog.dialog({content:EasyBlog.ajax("site/views/composer/errorSuggestTagAutoFill",{errorMsg:e})})})},suggestions:{index:0,tags:[],expand:function(){c.tick++,l.suggestions().addClass("is-showing")},collapse:function(){c.tick++,l.suggestions().removeClass("is-showing")},refresh:function(){var e=l.item(":not(.is-used)");l.suggestions().toggleClass("is-empty",e.length<1),c.count()},show:function(){c.tick++,c.refresh(),c.expand()},hide:function(){var e=++c.tick;c.collapse(),setTimeout(function(){e===c.tick&&c.reset()},500)},set:function(e){e.length<1?(c.hide(),c.tags=[]):(c.reset(),c.tags=e)},reset:function(){c.tags=[],c.i=0,l.itemgroup().empty()},pid:0,tick:0,currentQuery:null,query:p.memoize(function(e){return EasyBlog.ajax("site/views/tags/suggest",{search:e}).fail(function(){c.query.cache.delete(e)})}),populate:function(e,t){c.tick++;var n=++c.pid;c.currentQuery&&c.currentQuery.abort(),e=u.sanitize(e),l.suggestions().addClass("is-busy"),c.currentQuery=c.query(e).done(function(e){c.pid===n&&(c.set(e),c.suggest(t))}).fail(function(){c.pid}).always(function(){l.suggestions().removeClass("is-busy"),c.currentQuery=null})},populateTimer:null,populateFromTextfield:function(){c.tick++,clearTimeout(c.populateTimer),setTimeout(function(){var e=l.textfield(),t=u.sanitize(e.val());""===t?(c.hide(),c.populate("",!0)):c.query.cache.hasOwnProperty(t)?c.populate(t):c.populateTimer=setTimeout(function(){c.populate(t)},250)},1)},suggest:function(e){var t=c.tags;if(!(t.length<1)){for(var n,o,a,i=0,r=t.length,s=[];i<r&&(n=t[c.i]);)o=n.title,a=d.get(o)||d.create(o),s.push(a),u.get(o)?p(a).addClass("is-used"):i++,c.i++;l.itemgroup().append(s),e?c.refresh():c.show()}},navigate:function(e){var t=l.item(),n=l.itemgroup(),o=d.activeItem,t=p(o[0]||l.textfield()[0]).nearest(t,e);0<t.length?(d.activate(t),n.scrollIntoView(t)):0<o.length&&("down"==e&&(c.suggest(),n.scrollIntoView(o)),"up"==e&&d.deactivate())},count:function(){var e=p.pluck(c.tags,"title"),t=p.keys(u.itemsByTitle),t=p.without.apply(null,[e].concat(t)).length;l.total().text(t+"")}},selection:{items:{},activeItem:p(),create:function(e){var t=document.createElement("div");return t.innerHTML=e,d.items[e]=t},get:function(e){return d.items[e]},activate:function(e){d.deactivate(),d.activeItem=e.addClass("active")},deactivate:function(e){d.activeItem.removeClass("active"),d.activeItem=p()},use:function(e){var t=(e=p(e)).text();u.addItem(t)&&(l.textfield().focus(),e.is(d.activeItem)&&(nextItem=e.next(l.item)[0]||e.prev(l.item)[0],d.deactivate(e),nextItem&&d.activate(p(nextItem))),c.refresh(),l.textfield().val(""))}},"{self} composerSave":function(e,t,n){var o;"0"!=EasyBlog.Composer.options.tags.enabled&&(o=l.tagger.getAddedItems(),n.data.tags=p.pluck(o,"title").join(","),l.tagsInput().val(n.data.tags))}}}),e.resolve()})}),EasyBlog.module("composer/templates",function(s){EasyBlog.Controller("Composer.Templates",{defaultOptions:{"{updateTemplate}":"[data-eb-composer-update-template-button]","{templateId}":"[data-eb-composer-template-id]","{saveNewTemplate}":"[data-eb-composer-save-template-button]","{closeTemplateSelector}":"[data-template-close-popup]","{selectTemplate}":"[data-template-item]","{templateBlocks}":"[data-template-blocks]","{deleteTemplate}":"[data-template-delete]","{selectGoogleImport}":"[data-template-googleimport]","{posts}":"[data-eb-composer-posts]","{searchTextfield}":"[data-eb-composer-posts-search-textfield]","{itemGroup}":"[data-eb-composer-posts-item-group]","{list}":"[data-eb-composer-templates-list]"}},function(i,e,t,r){return{init:function(){r=i.composer},"{selectGoogleImport} click":function(e){r.manager().removeClass("show-templates"),s("[data-eb-googleimport]").removeClass("t-hidden"),r.manager().addClass("show-googleimport"),r.googleimport.initOauthPopUp()},"{closeTemplateSelector} click":function(e){var t=i.selectTemplate("[data-blank=1]").data("uid");i.trigger("composerSelectTemplate",[t])},"{selectTemplate} click":function(e){var a=e.data("uid");e.data("blank")?i.trigger("composerSelectTemplate",[a,!1]):EasyBlog.ajax("site/views/composer/renderTemplate",{uid:a}).done(function(e,t,n,o){s("[data-eb-composer-views]").data("post-template-is-locked",o),s("[data-eb-composer-post-template-id]").val(a),n&&(r.document.isLegacy()?r.document.insertContent(n):r.document.loadDocument(n)),o&&(s("[data-toolbar-blocks-wrapper]").remove(),s("[data-eb-composer-media]").remove(),s('[data-toolbar-view][data-type="posts"]').remove()),i.trigger("composerSelectTemplate",[a,t])})},"{deleteTemplate} click":function(e,t){t.stopPropagation();var n=e.parents(i.selectTemplate.selector),o=n.data("uid");EasyBlog.dialog({content:EasyBlog.ajax("site/views/templates/confirmDelete",{id:o,deleteAction:"ajax"}),bindings:{"{submitButton} click":function(){EasyBlog.ajax("site/controllers/templates/delete",{ids:[o]}).done(function(){EasyBlog.dialog().close(),n.remove()})}}})}}}),this.resolve()}),EasyBlog.module("composer/vendors/colorpicker",function(p){var e=".colorpicker-h-panel",t=".colorpicker-sb-panel",n=".colorpicker-hex-input",o={color:"#000000",document:document};p.fn.colorpicker=function(e){var t=(t=this.data("colorpicker"))||new a(this,e);return p.isString(e)?t[e].apply(t,p.makeArray(arguments).slice(1)):this};var a=function(e,t){this.options=p.extend({},o,t),this.element=e,this.init(),e.data("colorpicker",this)};p.extend(a.prototype,{init:function(){this.initHPanel(),this.initSBPanel(),this.initHexInput(),this.silent=!0,this.setHex(this.options.color),this.silent=!1},initHPanel:function(){var l=this;l.generateHueColors(),l.element.on(p.ns("mousedown",".colorpicker.h"),e,function(e){e.preventDefault();function t(e){e=(p.getPointerPosition(e).y-i)/r,a.css({top:100*(e=1<(e=e<0?0:e)?1:e)+"%"}),e=l.getHsb(),l.setHsb(e)}var n=l.hsbPanel(),o=l.hPanel(),a=l.hHandle(),i=o.offset().top,r=o.height();n.addClass("adjusting-h"),t(e);var s=p(l.options.document);s.on(p.ns("mousemove touchmove",".colorpicker.h"),function(e){e.preventDefault(),t(e)}).on(p.ns("mouseup touchend",".colorpicker.h"),function(e){e.preventDefault(),n.removeClass("adjusting-h"),s.off(p.ns("mousemove mouseup touchend",".colorpicker.h"))})})},destroyHPanel:function(){this.element.off(p.ns("mousedown",".colorpicker.h"))},generateHueColors:function(){var e=this.hPanel(),t=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(p.IE<=9)for(var n,o=0;o<=11;o++)n=p('<div class="colorpicker-hue-stop"></div>').attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+t[o]+", endColorstr="+t[o+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+t[o]+", endColorstr="+t[o+1]+')";'),e.append(n);else stopList=t.join(","),e.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ")},initSBPanel:function(){var u=this;u.element.on(p.ns("mousedown",".colorpicker.sb"),t,function(e){function t(e){var e=(t=p.getPointerPosition(e)).x-r,t=t.y-s,e=e/l,t=t/c;a.css({top:100*(t=1<(t=t<0?0:t)?1:t)+"%",left:100*(e=1<(e=e<0?0:e)?1:e)+"%"}),e=u.getHsb(),u.setHsb(e)}var n=u.hsbPanel(),o=u.sbPanel(),a=u.sbHandle(),i=o.offset(),r=i.left,s=i.top,l=o.width(),c=o.height();n.addClass("adjusting-sb"),t(e);var d=p(u.options.document);d.on(p.ns("mousemove touchmove",".colorpicker.sb"),function(e){e.preventDefault(),t(e)}).on(p.ns("mouseup touchend",".colorpicker.sb"),function(){e.preventDefault(),n.removeClass("adjusting-sb"),d.off(p.ns("mousemove mouseup touchend",".colorpicker.sb"))})})},destroySBPanel:function(){this.element.off(p.ns("mousedown",".colorpicker.sb"))},initHexInput:function(){var o=this;o.element.on("input",n,function(e){var t=p.fixHex(p.trim(o.hexInput().val().replace(/\#/g,"")));o.setHex(t)}).on("focusin",n,function(e){o.hexInput().addClass("is-focused")}).on("focusout",n,function(e){var t=o.hexInput(),n=t.data("value");t.removeClass("is-focused").val(n)})},setHsb:function(e){var t=this.hsbPanel();t.hasClass("adjusting-h")||t.hasClass("adjusting-sb")||this.hHandle().css({top:100*(1-e.h/360)+"%"}),t.hasClass("adjusting-sb")||this.sbPanel().css({background:"#"+p.hsbToHex({h:e.h,s:100,b:100})}),this.sbHandle().css({left:e.s+"%",top:100-e.b+"%"});var n="#"+p.hsbToHex(e),t=this.hexInput();t.data("value",n),t.hasClass("is-focused")||t.val(n),this.colorPreview().css("background",n),this.silent||this.element.trigger("colorpickerChange",n,e)},getHsb:function(){var e=this.hHandle();sbHandle=this.sbHandle();e={h:360*(1-parseFloat(e[0].style.top)/100),s:parseFloat(sbHandle[0].style.left),b:100-parseFloat(sbHandle[0].style.top)};return p.fixHsb(e)},setHex:function(e){e=e.replace(/\#/g,"");this.setHsb(p.hexToHsb(e))},getHex:function(){return"#"+p.hsbToHex(this.getHsb())},setRgb:function(e){var t;p.isString(e)&&(e={r:(t=e.match(/\d+/g))[0]||0,g:t[1]||0,b:t[2]||0}),this.setHsb(p.rgbToHsb(e))},getRgb:function(){return p.hsbToRgb(this.getHsb())},setColor:function(e){e.match(/^rgb/i)&&this.setRgb(e),e.match(/^\#/)&&this.setHex(e)},hsbPanel:function(){return this.element.find(".colorpicker-hsb-panel")},hPanel:function(){return this.element.find(e)},sbPanel:function(){return this.element.find(t)},hHandle:function(){return this.element.find(".colorpicker-h-handle")},sbHandle:function(){return this.element.find(".colorpicker-sb-handle")},colorPreview:function(){return this.element.find(".colorpicker-preview")},hexInput:function(){return this.element.find(n)},widget:function(){return this}}),this.resolve()}),EasyBlog.module("composer/vendors/cropper",function(e){var t,n,o=this;t=this,n=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function T(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){var t,n;t=o,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function S(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e){return"number"==typeof e&&!re(e)}function i(e){return void 0===e}function r(e){return"object"===t(e)&&null!==e}function f(e){if(!r(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&se.call(n,"isPrototypeOf")}catch(e){return!1}}function c(e){return"function"==typeof e}function s(e){return Array.from?Array.from(e):le.call(e)}function I(n,o){return n&&c(o)&&(Array.isArray(n)||p(n.length)?s(n).forEach(function(e,t){o.call(n,e,t,n)}):r(n)&&Object.keys(n).forEach(function(e){o.call(n,n[e],e,n)})),n}function _(e,t){t=1<arguments.length&&void 0!==t?t:1e11;return de.test(e)?Math.round(e*t)/t:e}function h(e,t){var n=e.style;I(t,function(e,t){ue.test(t)&&p(e)&&(e="".concat(e,"px")),n[t]=e})}function d(e,t){var n;t&&(p(e.length)?I(e,function(e){d(e,t)}):e.classList?e.classList.add(t):(n=e.className.trim())?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t)}function E(e,t){t&&(p(e.length)?I(e,function(e){E(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")))}function l(e,t,n){t&&(p(e.length)?I(e,function(e){l(e,t,n)}):(n?d:E)(e,t))}function u(e){return e.replace(pe,"$1-$2").toLowerCase()}function m(e,t){return r(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(u(t)))}function g(e,t,n){r(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(u(t)),n)}function v(n,e,o,t){var a=3<arguments.length&&void 0!==t?t:{},i=o;e.trim().split(fe).forEach(function(e){var t;he||(t=n.listeners)&&t[e]&&t[e][o]&&(i=t[e][o],delete t[e][o],0===Object.keys(t[e]).length&&delete t[e],0===Object.keys(t).length&&delete n.listeners),n.removeEventListener(e,i,a)})}function b(i,e,r,t){var s=3<arguments.length&&void 0!==t?t:{},l=r;e.trim().split(fe).forEach(function(o){var e,a;s.once&&!he&&(e=i.listeners,l=function(){delete a[o][r],i.removeEventListener(o,l,s);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(i,t)},(a=void 0===e?{}:e)[o]||(a[o]={}),a[o][r]&&i.removeEventListener(o,a[o][r],s),a[o][r]=l,i.listeners=a),i.addEventListener(o,l,s)})}function y(e,t,n){var o;return c(Event)&&c(CustomEvent)?o=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function F(e){e=e.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function k(e){e=e.match(ge);return null!==e&&(e[1]!==me.protocol||e[2]!==me.hostname||e[3]!==me.port)}function w(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function C(e){var t=e.rotate,n=e.scaleX,o=e.scaleY,a=e.translateX,i=e.translateY,e=[];p(a)&&0!==a&&e.push("translateX(".concat(a,"px)")),p(i)&&0!==i&&e.push("translateY(".concat(i,"px)")),p(t)&&0!==t&&e.push("rotate(".concat(t,"deg)")),p(n)&&1!==n&&e.push("scaleX(".concat(n,")")),p(o)&&1!==o&&e.push("scaleY(".concat(o,")"));e=e.length?e.join(" "):"none";return{WebkitTransform:e,msTransform:e,transform:e}}function x(e,t){var n=e.pageX,o=e.pageY,e={endX:n,endY:o};return t?e:T({startX:n,startY:o},e)}function M(e,t){var n=e.aspectRatio,o=e.height,a=e.width,i=1<arguments.length&&void 0!==t?t:"contain",r=P(a),e=P(o);return r&&e?(t=o*n,"contain"===i&&a<t||"cover"===i&&t<a?o=a/n:a=o*n):r?o=a/n:e&&(a=o*n),{width:a,height:o}}function B(e){var t,n,o,a,i,r,s,l=new DataView(e);try{if(255===l.getUint8(0)&&216===l.getUint8(1))for(var c=l.byteLength,d=2;d+1<c;){if(255===l.getUint8(d)&&225===l.getUint8(d+1)){n=d;break}d+=1}if(n&&(a=n+10,"Exif"===function(e,t,n){var o="";n+=t;for(var a=t;a<n;a+=1)o+=ve(e.getUint8(a));return o}(l,n+4,4)&&(!(s=18761===(i=l.getUint16(a)))&&19789!==i||42!==l.getUint16(a+2,s)||8<=(r=l.getUint32(a+4,s))&&(o=a+r))),o)for(var u,p=l.getUint16(o,s),f=0;f<p;f+=1)if(u=o+12*f+2,274===l.getUint16(u,s)){u+=8,t=l.getUint16(u,s),l.setUint16(u,1,s);break}}catch(e){t=1}return t}function P(e){return 0<e&&e<1/0}var D,e,L="undefined"!=typeof window&&void 0!==window.document,z=L?window:{},A=!(!L||!z.document.documentElement)&&"ontouchstart"in z.document.documentElement,H=L&&"PointerEvent"in z,O="cropper",N="".concat(O,"-crop"),j="".concat(O,"-disabled"),U="".concat(O,"-hidden"),$="".concat(O,"-hide"),R="".concat(O,"-invisible"),W="".concat(O,"-modal"),V="".concat(O,"-move"),q="".concat(O,"Action"),G="".concat(O,"Preview"),X="cropend",K="cropmove",Y="cropstart",J=H?"pointerdown":A?"touchstart":"mousedown",Q=H?"pointermove":A?"touchmove":"mousemove",Z=H?"pointerup pointercancel":A?"touchend touchcancel":"mouseup",ee="image/jpeg",te=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ne=/^data:/,oe=/^data:image\/jpeg;base64,/,ae=/^img|canvas$/i,ie={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},re=Number.isNaN||z.isNaN,se=Object.prototype.hasOwnProperty,le=Array.prototype.slice,ce=Object.assign||function(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];return r(n)&&0<t.length&&t.forEach(function(t){r(t)&&Object.keys(t).forEach(function(e){n[e]=t[e]})}),n},de=/\.\d*(?:0|9){12}\d*$/,ue=/^width|height|left|top|marginLeft|marginTop$/,pe=/([a-z\d])([A-Z])/g,fe=/\s\s*/,he=(e=!1,L&&(D=!1,we=function(){},xe=Object.defineProperty({},"once",{get:function(){return e=!0,D},set:function(e){D=e}}),z.addEventListener("test",we,xe),z.removeEventListener("test",we,xe)),e),me=z.location,ge=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i,ve=String.fromCharCode,be=/^data:.*,/,ye={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,o=this.cropper,a=Number(t.minContainerWidth),t=Number(t.minContainerHeight);d(o,U),E(e,U);t={width:Math.max(n.offsetWidth,0<=a?a:200),height:Math.max(n.offsetHeight,0<=t?t:100)};h(o,{width:(this.containerData=t).width,height:t.height}),d(e,U),E(o,U)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,o=Math.abs(t.rotate)%180==90,a=o?t.naturalHeight:t.naturalWidth,i=o?t.naturalWidth:t.naturalHeight,r=a/i,o=e.width,t=e.height;e.height*r>e.width?3===n?o=e.height*r:t=e.width/r:3===n?t=e.width/r:o=e.height*r;t={aspectRatio:r,naturalWidth:a,naturalHeight:i,width:o,height:t};this.canvasData=t,this.limited=1===n||2===n,this.limitCanvas(!0,!0),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),t.left=(e.width-t.width)/2,t.top=(e.height-t.height)/2,t.oldLeft=t.left,t.oldTop=t.top,this.initialCanvasData=ce({},t)},limitCanvas:function(e,t){var n,o=this.options,a=this.containerData,i=this.canvasData,r=this.cropBoxData,s=o.viewMode,l=i.aspectRatio,c=this.cropped&&r;e&&(e=Number(o.minCanvasWidth)||0,n=Number(o.minCanvasHeight)||0,1<s?(e=Math.max(e,a.width),n=Math.max(n,a.height),3===s&&(e<n*l?e=n*l:n=e/l)):0<s&&(e?e=Math.max(e,c?r.width:0):n?n=Math.max(n,c?r.height:0):c&&((e=r.width)<(n=r.height)*l?e=n*l:n=e/l)),e=(l=M({aspectRatio:l,width:e,height:n})).width,n=l.height,i.minWidth=e,i.minHeight=n,i.maxWidth=1/0,i.maxHeight=1/0),t&&((c?0:1)<s?(n=a.width-i.width,t=a.height-i.height,i.minLeft=Math.min(0,n),i.minTop=Math.min(0,t),i.maxLeft=Math.max(0,n),i.maxTop=Math.max(0,t),c&&this.limited&&(i.minLeft=Math.min(r.left,r.left+(r.width-i.width)),i.minTop=Math.min(r.top,r.top+(r.height-i.height)),i.maxLeft=r.left,i.maxTop=r.top,2===s&&(i.width>=a.width&&(i.minLeft=Math.min(0,n),i.maxLeft=Math.max(0,n)),i.height>=a.height&&(i.minTop=Math.min(0,t),i.maxTop=Math.max(0,t))))):(i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=a.width,i.maxTop=a.height))},renderCanvas:function(e,t){var n,o,a=this.canvasData,i=this.imageData;t&&(n=(o=function(e){var t=e.width,n=e.height,o=e.degree;if(90==(o=Math.abs(o)%180))return{width:n,height:t};var a=o%90*Math.PI/180,i=Math.sin(a),e=Math.cos(a),a=t*e+n*i,e=t*i+n*e;return 90<o?{width:e,height:a}:{width:a,height:e}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0})).width,t=o.height,i=a.width*(n/a.naturalWidth),o=a.height*(t/a.naturalHeight),a.left-=(i-a.width)/2,a.top-=(o-a.height)/2,a.width=i,a.height=o,a.aspectRatio=n/t,a.naturalWidth=n,a.naturalHeight=t,this.limitCanvas(!0,!1)),(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,h(this.canvas,ce({width:a.width,height:a.height},C({translateX:a.left,translateY:a.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,o=n.naturalWidth*(t.width/t.naturalWidth),a=n.naturalHeight*(t.height/t.naturalHeight);ce(n,{width:o,height:a,left:(t.width-o)/2,top:(t.height-a)/2}),h(this.image,ce({width:n.width,height:n.height},C(ce({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,o=Number(e.autoCropArea)||.8,e={width:t.width,height:t.height};n&&(t.height*n>t.width?e.height=e.width/n:e.width=e.height*n),this.cropBoxData=e,this.limitCropBox(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.width=Math.max(e.minWidth,e.width*o),e.height=Math.max(e.minHeight,e.height*o),e.left=t.left+(t.width-e.width)/2,e.top=t.top+(t.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCropBoxData=ce({},e)},limitCropBox:function(e,t){var n,o,a=this.options,i=this.containerData,r=this.canvasData,s=this.cropBoxData,l=this.limited,c=a.aspectRatio;e&&(n=Number(a.minCropBoxWidth)||0,o=Number(a.minCropBoxHeight)||0,e=l?Math.min(i.width,r.width,r.width+r.left,i.width-r.left):i.width,a=l?Math.min(i.height,r.height,r.height+r.top,i.height-r.top):i.height,n=Math.min(n,i.width),o=Math.min(o,i.height),c&&(n&&o?n<o*c?o=n/c:n=o*c:n?o=n/c:o&&(n=o*c),e<a*c?a=e/c:e=a*c),s.minWidth=Math.min(n,e),s.minHeight=Math.min(o,a),s.maxWidth=e,s.maxHeight=a),t&&(l?(s.minLeft=Math.max(0,r.left),s.minTop=Math.max(0,r.top),s.maxLeft=Math.min(i.width,r.left+r.width)-s.width,s.maxTop=Math.min(i.height,r.top+r.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=i.width-s.width,s.maxTop=i.height-s.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&g(this.face,q,n.width>=t.width&&n.height>=t.height?"move":"all"),h(this.cropBox,ce({width:n.width,height:n.height},C({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),y(this.element,"crop",this.getData())}},ke={initPreview:function(){var e=this.element,n=this.crossOrigin,t=this.options.preview,o=n?this.crossOriginUrl:this.url,a=e.alt||"The image to preview",i=document.createElement("img");n&&(i.crossOrigin=n),i.src=o,i.alt=a,this.viewBox.appendChild(i),this.viewBoxImage=i,t&&("string"==typeof(i=t)?i=e.ownerDocument.querySelectorAll(t):t.querySelector&&(i=[t]),I(this.previews=i,function(e){var t=document.createElement("img");g(e,G,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),n&&(t.crossOrigin=n),t.src=o,t.alt=a,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(t)}))},resetPreview:function(){I(this.previews,function(e){var t=m(e,G);h(e,{width:t.width,height:t.height}),e.innerHTML=t.html,function(t,n){if(r(t[n]))try{delete t[n]}catch(e){t[n]=void 0}else if(t.dataset)try{delete t.dataset[n]}catch(e){t.dataset[n]=void 0}else t.removeAttribute("data-".concat(u(n)))}(e,G)})},preview:function(){var r=this.imageData,e=this.canvasData,t=this.cropBoxData,s=t.width,l=t.height,c=r.width,d=r.height,u=t.left-e.left-r.left,p=t.top-e.top-r.top;this.cropped&&!this.disabled&&(h(this.viewBoxImage,ce({width:c,height:d},C(ce({translateX:-u,translateY:-p},r)))),I(this.previews,function(e){var t=m(e,G),n=t.width,o=t.height,a=n,i=o,t=1;s&&(i=l*(t=n/s)),l&&o<i&&(a=s*(t=o/l),i=o),h(e,{width:a,height:i}),h(e.getElementsByTagName("img")[0],ce({width:c*t,height:d*t},C(ce({translateX:-u*t,translateY:-p*t},r))))}))}},H={bind:function(){var e=this.element,t=this.options,n=this.cropper;c(t.cropstart)&&b(e,Y,t.cropstart),c(t.cropmove)&&b(e,K,t.cropmove),c(t.cropend)&&b(e,X,t.cropend),c(t.crop)&&b(e,"crop",t.crop),c(t.zoom)&&b(e,"zoom",t.zoom),b(n,J,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&b(n,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&b(n,"dblclick",this.onDblclick=this.dblclick.bind(this)),b(e.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),b(e.ownerDocument,Z,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&b(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;c(t.cropstart)&&v(e,Y,t.cropstart),c(t.cropmove)&&v(e,K,t.cropmove),c(t.cropend)&&v(e,X,t.cropend),c(t.crop)&&v(e,"crop",t.crop),c(t.zoom)&&v(e,"zoom",t.zoom),v(n,J,this.onCropStart),t.zoomable&&t.zoomOnWheel&&v(n,"wheel",this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&v(n,"dblclick",this.onDblclick),v(e.ownerDocument,Q,this.onCropMove),v(e.ownerDocument,Z,this.onCropEnd),t.responsive&&v(window,"resize",this.onResize)}},A={resize:function(){var e,t,n,o,a,i;this.disabled||(e=this.options,t=this.container,n=this.containerData,1==(o=t.offsetWidth/n.width)&&t.offsetHeight===n.height||(e.restore&&(a=this.getCanvasData(),i=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(I(a,function(e,t){a[t]=e*o})),this.setCropBoxData(I(i,function(e,t){i[t]=e*o})))))},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=this.dragBox,t=N,(e.classList?e.classList.contains(t):-1<e.className.indexOf(t))?"move":"crop"))},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?o=0<e.deltaY?1:-1:e.wheelDelta?o=-e.wheelDelta/120:e.detail&&(o=0<e.detail?1:-1),this.zoom(-o*n,e)))},cropStart:function(e){var t,n=e.buttons,o=e.button;this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(p(n)&&1!==n||p(o)&&0!==o||e.ctrlKey)||(o=this.options,t=this.pointers,e.changedTouches?I(e.changedTouches,function(e){t[e.identifier]=x(e)}):t[e.pointerId||0]=x(e),o=1<Object.keys(t).length&&o.zoomable&&o.zoomOnTouch?"zoom":m(e.target,q),te.test(o)&&!1!==y(this.element,Y,{originalEvent:e,action:o})&&(e.preventDefault(),this.action=o,this.cropping=!1,"crop"===o&&(this.cropping=!0,d(this.dragBox,W))))},cropMove:function(e){var t,n=this.action;!this.disabled&&n&&(t=this.pointers,e.preventDefault(),!1!==y(this.element,K,{originalEvent:e,action:n})&&(e.changedTouches?I(e.changedTouches,function(e){ce(t[e.identifier]||{},x(e,!0))}):ce(t[e.pointerId||0]||{},x(e,!0)),this.change(e)))},cropEnd:function(e){var t,n;this.disabled||(t=this.action,n=this.pointers,e.changedTouches?I(e.changedTouches,function(e){delete n[e.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,l(this.dragBox,W,this.cropped&&this.options.modal)),y(this.element,X,{originalEvent:e,action:t})))}},L={change:function(e){var t=this.options,n=this.canvasData,o=this.containerData,a=this.cropBoxData,i=this.pointers,r=this.action,s=t.aspectRatio,l=a.left,c=a.top,d=a.width,u=a.height,p=l+d,f=c+u,h=0,m=0,g=o.width,v=o.height,b=!0;!s&&e.shiftKey&&(s=d&&u?d/u:1),this.limited&&(h=a.minLeft,m=a.minTop,g=h+Math.min(o.width,n.width,n.left+n.width),v=m+Math.min(o.height,n.height,n.top+n.height));function y(e){switch(e){case"e":p+B.x>g&&(B.x=g-p);break;case"w":l+B.x<h&&(B.x=h-l);break;case"n":c+B.y<m&&(B.y=m-c);break;case"s":f+B.y>v&&(B.y=v-f)}}var k,w,C,x=i[Object.keys(i)[0]],B={x:x.endX-x.startX,y:x.endY-x.startY};switch(r){case"all":l+=B.x,c+=B.y;break;case"e":if(0<=B.x&&(g<=p||s&&(c<=m||v<=f))){b=!1;break}y("e"),(d+=B.x)<0&&(r="w",l-=d=-d),s&&(c+=(a.height-(u=d/s))/2);break;case"n":if(B.y<=0&&(c<=m||s&&(l<=h||g<=p))){b=!1;break}y("n"),u-=B.y,c+=B.y,u<0&&(r="s",c-=u=-u),s&&(l+=(a.width-(d=u*s))/2);break;case"w":if(B.x<=0&&(l<=h||s&&(c<=m||v<=f))){b=!1;break}y("w"),d-=B.x,l+=B.x,d<0&&(r="e",l-=d=-d),s&&(c+=(a.height-(u=d/s))/2);break;case"s":if(0<=B.y&&(v<=f||s&&(l<=h||g<=p))){b=!1;break}y("s"),(u+=B.y)<0&&(r="n",c-=u=-u),s&&(l+=(a.width-(d=u*s))/2);break;case"ne":if(s){if(B.y<=0&&(c<=m||g<=p)){b=!1;break}y("n"),u-=B.y,c+=B.y,d=u*s}else y("n"),y("e"),!(0<=B.x)||p<g?d+=B.x:B.y<=0&&c<=m&&(b=!1),B.y<=0&&!(m<c)||(u-=B.y,c+=B.y);d<0&&u<0?(r="sw",c-=u=-u,l-=d=-d):d<0?(r="nw",l-=d=-d):u<0&&(r="se",c-=u=-u);break;case"nw":if(s){if(B.y<=0&&(c<=m||l<=h)){b=!1;break}y("n"),u-=B.y,c+=B.y,l+=a.width-(d=u*s)}else y("n"),y("w"),!(B.x<=0)||h<l?(d-=B.x,l+=B.x):B.y<=0&&c<=m&&(b=!1),B.y<=0&&!(m<c)||(u-=B.y,c+=B.y);d<0&&u<0?(r="se",c-=u=-u,l-=d=-d):d<0?(r="ne",l-=d=-d):u<0&&(r="sw",c-=u=-u);break;case"sw":if(s){if(B.x<=0&&(l<=h||v<=f)){b=!1;break}y("w"),d-=B.x,l+=B.x,u=d/s}else y("s"),y("w"),!(B.x<=0)||h<l?(d-=B.x,l+=B.x):0<=B.y&&v<=f&&(b=!1),0<=B.y&&!(f<v)||(u+=B.y);d<0&&u<0?(r="ne",c-=u=-u,l-=d=-d):d<0?(r="se",l-=d=-d):u<0&&(r="nw",c-=u=-u);break;case"se":if(s){if(0<=B.x&&(g<=p||v<=f)){b=!1;break}y("e"),u=(d+=B.x)/s}else y("s"),y("e"),!(0<=B.x)||p<g?d+=B.x:0<=B.y&&v<=f&&(b=!1),0<=B.y&&!(f<v)||(u+=B.y);d<0&&u<0?(r="nw",c-=u=-u,l-=d=-d):d<0?(r="sw",l-=d=-d):u<0&&(r="ne",c-=u=-u);break;case"move":this.move(B.x,B.y),b=!1;break;case"zoom":this.zoom((w=T({},k=i),C=0,I(k,function(a,e){delete w[e],I(w,function(e){var t=Math.abs(a.startX-e.startX),n=Math.abs(a.startY-e.startY),o=Math.abs(a.endX-e.endX),e=Math.abs(a.endY-e.endY),n=Math.sqrt(t*t+n*n),n=(Math.sqrt(o*o+e*e)-n)/n;Math.abs(n)>Math.abs(C)&&(C=n)})}),C),e),b=!1;break;case"crop":if(!B.x||!B.y){b=!1;break}k=F(this.cropper),l=x.startX-k.left,c=x.startY-k.top,d=a.minWidth,u=a.minHeight,0<B.x?r=0<B.y?"se":"ne":B.x<0&&(l-=d,r=0<B.y?"sw":"nw"),B.y<0&&(c-=u),this.cropped||(E(this.cropBox,U),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(a.width=d,a.height=u,a.left=l,a.top=c,this.action=r,this.renderCropBox()),I(i,function(e){e.startX=e.endX,e.startY=e.endY})}},we={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&d(this.dragBox,W),E(this.cropBox,U),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ce({},this.initialImageData),this.canvasData=ce({},this.initialCanvasData),this.cropBoxData=ce({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ce(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),E(this.dragBox,W),d(this.cropBox,U)),this},replace:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,I(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,E(this.cropper,j)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,d(this.cropper,j)),this},destroy:function(){var e=this.element;return e[O]&&(e[O]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate()),this},move:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,o=n.left,n=n.top;return this.moveTo(i(e)?e:o+Number(e),i(t)?t:n+Number(t))},moveTo:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(p(e)&&(n.left=e,o=!0),p(t)&&(n.top=t,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),this.zoomTo(n.width*(e=e<0?1/(1-e):1+e)/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var o,a,i,r=this.options,s=this.canvasData,l=s.width,c=s.height,d=s.naturalWidth,u=s.naturalHeight;if(0<=(e=Number(e))&&this.ready&&!this.disabled&&r.zoomable){r=d*e,u=u*e;if(!1===y(this.element,"zoom",{ratio:e,oldRatio:l/d,originalEvent:n}))return this;n?(e=this.pointers,d=F(this.cropper),n=e&&Object.keys(e).length?(i=a=o=0,I(e,function(e){var t=e.startX,e=e.startY;o+=t,a+=e,i+=1}),{pageX:o/=i,pageY:a/=i}):{pageX:n.pageX,pageY:n.pageY},s.left-=(r-l)*((n.pageX-d.left-s.left)/l),s.top-=(u-c)*((n.pageY-d.top-s.top)/c)):f(t)&&p(t.x)&&p(t.y)?(s.left-=(r-l)*((t.x-s.left)/l),s.top-=(u-c)*((t.y-s.top)/c)):(s.left-=(r-l)/2,s.top-=(u-c)/2),s.width=r,s.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return p(e=Number(e))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,p(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(p(t)?t:1,e)},scale:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,o=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(p(e)&&(n.scaleX=e,o=!0),p(t)&&(n.scaleY=t,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var n,o,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.options,a=this.imageData,i=this.canvasData,r=this.cropBoxData;return this.ready&&this.cropped?(n={x:r.left-i.left,y:r.top-i.top,width:r.width,height:r.height},o=a.width/a.naturalWidth,I(n,function(e,t){n[t]=e/o}),e&&(r=Math.round(n.y+n.height),e=Math.round(n.x+n.width),n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=e-n.x,n.height=r-n.y)):n={x:0,y:0,width:0,height:0},t.rotatable&&(n.rotate=a.rotate||0),t.scalable&&(n.scaleX=a.scaleX||1,n.scaleY=a.scaleY||1),n},setData:function(e){var t,n=this.options,o=this.imageData,a=this.canvasData,i={};return this.ready&&!this.disabled&&f(e)&&(t=!1,n.rotatable&&p(e.rotate)&&e.rotate!==o.rotate&&(o.rotate=e.rotate,t=!0),n.scalable&&(p(e.scaleX)&&e.scaleX!==o.scaleX&&(o.scaleX=e.scaleX,t=!0),p(e.scaleY)&&e.scaleY!==o.scaleY&&(o.scaleY=e.scaleY,t=!0)),t&&this.renderCanvas(!0,!0),o=o.width/o.naturalWidth,p(e.x)&&(i.left=e.x*o+a.left),p(e.y)&&(i.top=e.y*o+a.top),p(e.width)&&(i.width=e.width*o),p(e.height)&&(i.height=e.height*o),this.setCropBoxData(i)),this},getContainerData:function(){return this.ready?ce({},this.containerData):{}},getImageData:function(){return this.sized?ce({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&I(["left","top","width","height","naturalWidth","naturalHeight"],function(e){n[e]=t[e]}),n},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&f(e)&&(p(e.left)&&(t.left=e.left),p(e.top)&&(t.top=e.top),p(e.width)?(t.width=e.width,t.height=e.width/n):p(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return(e=this.ready&&this.cropped?{left:t.left,top:t.top,width:t.width,height:t.height}:e)||{}},setCropBoxData:function(e){var t,n,o=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&f(e)&&(p(e.left)&&(o.left=e.left),p(e.top)&&(o.top=e.top),p(e.width)&&e.width!==o.width&&(t=!0,o.width=e.width),p(e.height)&&e.height!==o.height&&(n=!0,o.height=e.height),a&&(t?o.height=o.width/a:n&&(o.width=o.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t,n,o,a,i,r,s,l,c,d,u,p,f,h=this.canvasData,r=(b=this.image,t=this.imageData,n=h,k=e,o=t.aspectRatio,a=t.naturalWidth,y=t.naturalHeight,i=void 0===(f=t.rotate)?0:f,r=void 0===(v=t.scaleX)?1:v,m=void 0===(u=t.scaleY)?1:u,s=n.aspectRatio,l=n.naturalWidth,c=n.naturalHeight,d=void 0===(p=k.fillColor)?"transparent":p,w=k.imageSmoothingEnabled,g=void 0===w||w,v=void 0===(f=k.imageSmoothingQuality)?"low":f,u=void 0===(t=k.maxWidth)?1/0:t,p=void 0===(n=k.maxHeight)?1/0:n,f=void 0===(w=k.minWidth)?0:w,n=void 0===(t=k.minHeight)?0:t,k=(w=document.createElement("canvas")).getContext("2d"),t=M({aspectRatio:s,width:u,height:p}),s=M({aspectRatio:s,width:f,height:n},"cover"),l=Math.min(t.width,Math.max(s.width,l)),c=Math.min(t.height,Math.max(s.height,c)),p=M({aspectRatio:o,width:u,height:p}),n=M({aspectRatio:o,width:f,height:n},"cover"),a=Math.min(p.width,Math.max(n.width,a)),y=Math.min(p.height,Math.max(n.height,y)),y=[-a/2,-y/2,a,y],w.width=_(l),w.height=_(c),k.fillStyle=d,k.fillRect(0,0,l,c),k.save(),k.translate(l/2,c/2),k.rotate(i*Math.PI/180),k.scale(r,m),k.imageSmoothingEnabled=g,k.imageSmoothingQuality=v,k.drawImage.apply(k,[b].concat(S(y.map(function(e){return Math.floor(_(e))})))),k.restore(),w);if(!this.cropped)return r;var m=this.getData(),g=m.x,v=m.y,b=m.width,y=m.height,k=r.width/Math.floor(h.naturalWidth);1!=k&&(g*=k,v*=k,b*=k,y*=k);var w=b/y,m=M({aspectRatio:w,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=M({aspectRatio:w,width:e.minWidth||0,height:e.minHeight||0},"cover"),w=M({aspectRatio:w,width:e.width||(1!=k?r.width:b),height:e.height||(1!=k?r.height:y)}),k=w.width,w=w.height,k=Math.min(m.width,Math.max(h.width,k)),w=Math.min(m.height,Math.max(h.height,w)),m=document.createElement("canvas"),h=m.getContext("2d");m.width=_(k),m.height=_(w),h.fillStyle=e.fillColor||"transparent",h.fillRect(0,0,k,w);w=e.imageSmoothingEnabled,e=e.imageSmoothingQuality;h.imageSmoothingEnabled=void 0===w||w,e&&(h.imageSmoothingQuality=e);var C,x,B,T,I,w=r.width,e=r.height,g=g,v=v;g<=-b||w<g?T=x=C=g=0:g<=0?(x=-g,g=0,T=C=Math.min(w,b+g)):g<=w&&(x=0,T=C=Math.min(b,w-g)),C<=0||v<=-y||e<v?I=B=E=v=0:v<=0?(B=-v,v=0,I=E=Math.min(e,y+v)):v<=e&&(B=0,I=E=Math.min(y,e-v));var E=[g,v,C,E];return 0<T&&0<I&&E.push(x*(b=k/b),B*b,T*b,I*b),h.drawImage.apply(h,[r].concat(S(E.map(function(e){return Math.floor(_(e))})))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||i(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t,n,o=this.options,a=this.dragBox,i=this.face;return this.ready&&!this.disabled&&(n=o.movable&&"move"===e,o.dragMode=e=(t="crop"===e)||n?e:"none",g(a,q,e),l(a,N,t),l(a,V,n),o.cropBoxMovable||(g(i,q,e),l(i,N,t),l(i,V,n))),this}},Ce=z.Cropper,xe=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!e||!ae.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=ce({},ie,f(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,t,o;return e=n,o=[{key:"noConflict",value:function(){return window.Cropper=Ce,n}},{key:"setDefaults",value:function(e){ce(ie,f(e)&&e)}}],(t=[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[O]){if(t[O]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",!(this.originalUrl=e))return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t,n,o,a,i,r,s=this;e&&(this.url=e,this.imageData={},t=this.element,(n=this.options).rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer?ne.test(e)?oe.test(e)?this.read((r=(r=e).replace(be,""),o=atob(r),r=new ArrayBuffer(o.length),I(a=new Uint8Array(r),function(e,t){a[t]=o.charCodeAt(t)}),r)):this.clone():(i=new XMLHttpRequest,r=this.clone.bind(this),this.reloading=!0,(this.xhr=i).onabort=r,i.onerror=r,i.ontimeout=r,i.onprogress=function(){i.getResponseHeader("content-type")!==ee&&i.abort()},i.onload=function(){s.read(i.response)},i.onloadend=function(){s.reloading=!1,s.xhr=null},n.checkCrossOrigin&&k(e)&&t.crossOrigin&&(e=w(e)),i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials="use-credentials"===t.crossOrigin,i.send()):this.clone())}},{key:"read",value:function(e){var t=this.options,n=this.imageData,o=B(e),a=0,i=1,r=1;1<o&&(this.url=function(e,t){for(var n=[],o=new Uint8Array(e);0<o.length;)n.push(ve.apply(null,s(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}(e,ee),a=(o=function(e){var t=0,n=1,o=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:o=-1;break;case 5:t=90,o=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:o}}(o)).rotate,i=o.scaleX,r=o.scaleY),t.rotatable&&(n.rotate=a),t.scalable&&(n.scaleX=i,n.scaleY=r),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,o=t;this.options.checkCrossOrigin&&k(t)&&(n=n||"anonymous",o=w(t)),this.crossOrigin=n,this.crossOriginUrl=o;var a=document.createElement("img");n&&(a.crossOrigin=n),a.src=o||t,a.alt=e.alt||"The image to crop",(this.image=a).onload=this.start.bind(this),a.onerror=this.stop.bind(this),d(a,$),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var n=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;function t(e,t){ce(n.imageData,{naturalWidth:e,naturalHeight:t,aspectRatio:e/t}),n.initialImageData=ce({},n.imageData),n.sizing=!1,n.sized=!0,n.build()}var o,a,i=z.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(z.navigator.userAgent);!e.naturalWidth||i?(o=document.createElement("img"),a=document.body||document.documentElement,(this.sizingImage=o).onload=function(){t(o.width,o.height),i||a.removeChild(o)},o.src=e.src,i||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(o))):t(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){var e,t,n,o,a,i,r,s,l;this.sized&&!this.ready&&(e=this.element,t=this.options,n=this.image,o=e.parentNode,(l=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',i=(a=l.querySelector(".".concat(O,"-container"))).querySelector(".".concat(O,"-canvas")),r=a.querySelector(".".concat(O,"-drag-box")),l=(s=a.querySelector(".".concat(O,"-crop-box"))).querySelector(".".concat(O,"-face")),this.container=o,this.cropper=a,this.canvas=i,this.dragBox=r,this.cropBox=s,this.viewBox=a.querySelector(".".concat(O,"-view-box")),this.face=l,i.appendChild(n),d(e,U),o.insertBefore(a,e.nextSibling),this.isImg||E(n,$),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,d(s,U),t.guides||d(s.getElementsByClassName("".concat(O,"-dashed")),U),t.center||d(s.getElementsByClassName("".concat(O,"-center")),U),t.background&&d(a,"".concat(O,"-bg")),t.highlight||d(l,R),t.cropBoxMovable&&(d(l,V),g(l,q,"all")),t.cropBoxResizable||(d(s.getElementsByClassName("".concat(O,"-line")),U),d(s.getElementsByClassName("".concat(O,"-point")),U)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),c(t.ready)&&b(e,"ready",t.ready,{once:!0}),y(e,"ready"))}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),E(this.element,U))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&a(e.prototype,t),o&&a(e,o),n}();return ce(xe.prototype,ye,ke,H,A,L,we),xe},"object"==typeof exports&&void 0!==o?o.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=n(),o.resolve()}),EasyBlog.module("composer/vendors/dragselect",function(e){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=function(){function y(e){var t=this,n=e.area,o=void 0===n?document:n,a=e.autoScrollSpeed,i=void 0===a?1:a,r=e.callback,s=void 0===r?function(){}:r,l=e.customStyles,c=void 0!==l&&l,d=e.hoverClass,u=void 0===d?"ds-hover":d,p=e.multiSelectKeys,f=void 0===p?["ctrlKey","shiftKey","metaKey"]:p,h=e.multiSelectMode,m=void 0!==h&&h,g=e.onDragMove,v=void 0===g?function(){}:g,b=e.onDragStart,n=void 0===b?function(){}:b,a=e.onDragStartBegin,r=void 0===a?function(){}:a,l=e.onElementSelect,d=void 0===l?function(){}:l,p=e.onElementUnselect,h=void 0===p?function(){}:p,g=e.selectableClass,b=void 0===g?"ds-selectable":g,a=e.selectables,l=void 0===a?[]:a,p=e.selectedClass,g=void 0===p?"ds-selected":p,a=e.selector,p=void 0===a?void 0:a,a=e.selectorClass,a=void 0===a?"ds-selector":a,e=e.zoom,e=void 0===e?1:e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),k(this,"_multiSelectKeyPressed",!1),k(this,"_initialCursorPos",{x:0,y:0}),k(this,"_newCursorPos",{x:0,y:0}),k(this,"_previousCursorPos",{x:0,y:0}),k(this,"_initialScroll",{x:0,y:0}),k(this,"_selected",[]),k(this,"_prevSelected",[]),k(this,"_lastTouch",void 0),k(this,"_onClick",function(e){return t.handleClick(e)}),k(this,"_startUp",function(e){return t.startUp(e)}),k(this,"_handleMove",function(e){return t.handleMove(e)}),k(this,"_end",function(e){return t.reset(e,!0)}),this.selectedClass=g,this.hoverClass=u,this.selectorClass=a,this.selectableClass=b,this.selectables=[],this._initialSelectables=this._toArray(l),this.multiSelectKeys=f,this.multiSelectMode=m,this.autoScrollSpeed=0===i?0:i,this.selectCallback=d,this.unselectCallback=h,this.onDragStartBegin=r,this.moveStartCallback=n,this.moveCallback=v,this.callback=s,this.area=this._handleArea(o),this.customStyles=c,this.zoom=e,this.selector=p||this._createSelector(),this.selector.classList.add(this.selectorClass),this.start()}var e,t,n;return e=y,(t=[{key:"_handleArea",value:function(e){if(e===document)return e;var t=getComputedStyle(e);e.computedBorder=parseInt(t.borderWidth);t=t.position;return"absolute"===t||"relative"===t||"fixed"===t||(e.style.position="relative"),e}},{key:"_handleSelectables",value:function(e,t,n){for(var o=0;o<e.length;o++){var a=e[o],i=this.selectables.indexOf(a);i<0&&!t?this._addSelectable(a,n):-1<i&&t&&this._removeSelectable(a,i,n)}}},{key:"_addSelectable",value:function(e,t){e.classList.add(this.selectableClass),e.addEventListener("click",this._onClick),this.selectables.push(e),t&&this._selected.indexOf(e)<0&&(e.classList.add(this.selectedClass),this._selected.push(e))}},{key:"_removeSelectable",value:function(e,t,n){e.classList.remove(this.hoverClass),e.classList.remove(this.selectableClass),e.removeEventListener("click",this._onClick),this.selectables.splice(t,1),n&&-1<this._selected.indexOf(e)&&(e.classList.remove(this.selectedClass),this._selected.splice(this._selected.indexOf(e),1))}},{key:"handleClick",value:function(e){var t;this.mouseInteraction||this._isRightClick(e)||(t=e.target,this._isMultiSelectKeyPressed(e)?this._prevSelected=this._selected.slice():this._prevSelected=[],this.checkIfInsideSelection(!0),-1<this.selectables.indexOf(t)&&this.toggle(t),this._end(e))}},{key:"_createSelector",value:function(){var e=document.createElement("div");return e.style.position="absolute",this.customStyles||(e.style.background="rgba(0, 0, 255, 0.1)",e.style.border="1px solid rgba(0, 0, 255, 0.45)",e.style.display="none",e.style.pointerEvents="none"),(this.area===document?document.body:this.area).appendChild(e),e}},{key:"start",value:function(){this._handleSelectables(this._initialSelectables),this.area.addEventListener("mousedown",this._startUp),this.area.addEventListener("touchstart",this._startUp,{passive:!1})}},{key:"startUp",value:function(e){if("touchstart"===e.type&&e.preventDefault(),!this._isRightClick(e)&&!this._isScrollbarClick(e,this.area))return this.onDragStartBegin(e),!this._breaked&&(this.mouseInteraction=!0,this.selector.style.display="block",this._isMultiSelectKeyPressed(e)?this._prevSelected=this._selected.slice():this._prevSelected=[],this._getStartingPositions(e),this.checkIfInsideSelection(!0),this.selector.style.display="none",this.moveStartCallback(e),!this._breaked&&(this.area.removeEventListener("mousedown",this._startUp),this.area.removeEventListener("touchstart",this._startUp,{passive:!1}),this.area.addEventListener("mousemove",this._handleMove),this.area.addEventListener("touchmove",this._handleMove,{passive:!1}),document.addEventListener("mouseup",this._end),void document.addEventListener("touchend",this._end)))}},{key:"_isMultiSelectKeyPressed",value:function(e){if(this._multiSelectKeyPressed=!1,this.multiSelectMode)this._multiSelectKeyPressed=!0;else for(var t=0;t<this.multiSelectKeys.length;t++)e[this.multiSelectKeys[t]]&&(this._multiSelectKeyPressed=!0);return this._multiSelectKeyPressed}},{key:"_getStartingPositions",value:function(e){this._initialCursorPos=this._newCursorPos=this._getCursorPos(e,this.area),this._initialScroll=this.getScroll(this.area);e={};e.x=this._initialCursorPos.x+this._initialScroll.x,e.y=this._initialCursorPos.y+this._initialScroll.y,e.w=0,e.h=0,this._updatePos(this.selector,e)}},{key:"handleMove",value:function(e){var t=this._getPosition(e);if(this.moveCallback(e),this._breaked)return!1;this.selector.style.display="block",this._updatePos(this.selector,t),this.checkIfInsideSelection(null),this._autoScroll(e)}},{key:"_getPosition",value:function(e){var t=this._getCursorPos(e,this.area),n=this.getScroll(this.area);this._newCursorPos=t;var o=n.x-this._initialScroll.x,a=n.y-this._initialScroll.y,e={};return t.x>this._initialCursorPos.x-o?(e.x=this._initialCursorPos.x+this._initialScroll.x,e.w=t.x-this._initialCursorPos.x+o):(e.x=t.x+n.x,e.w=this._initialCursorPos.x-t.x-o),t.y>this._initialCursorPos.y-a?(e.y=this._initialCursorPos.y+this._initialScroll.y,e.h=t.y-this._initialCursorPos.y+a):(e.y=t.y+n.y,e.h=this._initialCursorPos.y-t.y-a),e}},{key:"checkIfInsideSelection",value:function(e){for(var t=!1,n=0,o=this.selectables.length;n<o;n++){var a=this.selectables[n],i=this.getScroll(this.area),r={y:this.selector.getBoundingClientRect().top/this.zoom+i.y,x:this.selector.getBoundingClientRect().left/this.zoom+i.x,h:this.selector.offsetHeight,w:this.selector.offsetWidth};this._isElementTouching(a,r,i)?(this._handleSelection(a,e),t=!0):this._handleUnselection(a,e)}return t}},{key:"_handleSelection",value:function(e,t){if(e.classList.contains(this.hoverClass)&&!t)return!1;t=this._selected.indexOf(e);t<0?this.select(e):-1<t&&this._multiSelectKeyPressed&&this.unselect(e),e.classList.add(this.hoverClass)}},{key:"_handleUnselection",value:function(e,t){if(!e.classList.contains(this.hoverClass)&&!t)return!1;var n=this._selected.indexOf(e),t=this._prevSelected.indexOf(e);-1<n&&t<0?this.unselect(e):n<0&&-1<t&&this.select(e),e.classList.remove(this.hoverClass)}},{key:"select",value:function(e){return!(-1<this._selected.indexOf(e))&&(this._selected.push(e),e.classList.add(this.selectedClass),this.selectCallback(e),!this._breaked&&e)}},{key:"unselect",value:function(e){return!(this._selected.indexOf(e)<0)&&(this._selected.splice(this._selected.indexOf(e),1),e.classList.remove(this.selectedClass),this.unselectCallback(e),!this._breaked&&e)}},{key:"toggle",value:function(e){return-1<this._selected.indexOf(e)?this.unselect(e):this.select(e),e}},{key:"_isElementTouching",value:function(e,t,n){var o=e.getBoundingClientRect(),a=o.top/this.zoom+n.y,e=o.left/this.zoom+n.x,n=o.height/this.zoom,o=o.width/this.zoom;return t.x<e+o&&t.x+t.w>e&&t.y<a+n&&t.h+t.y>a}},{key:"_autoScroll",value:function(e){var t=this.isCursorNearEdge(e,this.area),e=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,e=this.area===document?e||document.body:this.area;"top"===t&&0<e.scrollTop?e.scrollTop-=+this.autoScrollSpeed:"bottom"===t?e.scrollTop+=+this.autoScrollSpeed:"left"===t&&0<e.scrollLeft?e.scrollLeft-=+this.autoScrollSpeed:"right"===t&&(e.scrollLeft+=+this.autoScrollSpeed)}},{key:"isCursorNearEdge",value:function(e,t){var n=this._getCursorPos(e,t),o=this.getAreaRect(t),e=Math.max(o.width/10,30),t=Math.max(o.height/10,30);return n.y<t?"top":o.height-n.y<t?"bottom":o.width-n.x<e?"right":n.x<e&&"left"}},{key:"reset",value:function(e,t){var n=this;if(this._previousCursorPos=this._getCursorPos(e,this.area),document.removeEventListener("mouseup",this._end),document.removeEventListener("touchend",this._end),this.area.removeEventListener("mousemove",this._handleMove),this.area.removeEventListener("touchmove",this._handleMove,{passive:!1}),this.area.addEventListener("mousedown",this._startUp),this.area.addEventListener("touchstart",this._startUp,{passive:!1}),t&&this.callback(this.getSelection(),e),this._breaked)return!1;this.selector.style.width="0",this.selector.style.height="0",this.selector.style.display="none",setTimeout(function(){return n.mouseInteraction=!1},100)}},{key:"break",value:function(){var e=this;this._breaked=!0,setTimeout(function(){return e._breaked=!1},100)}},{key:"stop",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0;this.reset(!1,n),this.area.removeEventListener("mousedown",this._startUp),this.area.removeEventListener("touchstart",this._startUp,{passive:!1}),document.removeEventListener("mouseup",this._end),document.removeEventListener("touchend",this._end),this._handleSelectables(a(this.selectables),e,t)}},{key:"getSelection",value:function(){return a(this._selected)}},{key:"getCursorPos",value:function(e,t,n){if(!e)return{x:0,y:0};t=t||!1!==t&&this.area,e=this._getCursorPos(e,t),t=n?{x:0,y:0}:this.getScroll(t);return{x:e.x+t.x,y:e.y+t.y}}},{key:"addSelection",value:function(e,t,n){for(var o=this._toArray(e),a=0,i=o.length;a<i;a++){var r=o[a];this.select(r)}return n||this.addSelectables(o),t&&this.callback(this._selected,!1),this._selected}},{key:"removeSelection",value:function(e,t,n){for(var o=this._toArray(e),a=0,i=o.length;a<i;a++){var r=o[a];this.unselect(r)}return n&&this.removeSelectables(o),t&&this.callback(this._selected,!1),this._selected}},{key:"toggleSelection",value:function(e,t,n){for(var o=this._toArray(e),a=0,i=o.length;a<i;a++){var r=o[a];this._selected.indexOf(r)<0?this.addSelection(r,t,n):this.removeSelection(r,t,n)}return this._selected}},{key:"setSelection",value:function(e,t,n){return this.clearSelection(),this.addSelection(e,t,n),this._selected}},{key:"clearSelection",value:function(e){for(var t=this._selected.slice(),n=0,o=t.length;n<o;n++){var a=t[n];this.unselect(a)}return e&&this.callback(this._selected,!1),this._selected}},{key:"addSelectables",value:function(e,t){var n=this._toArray(e);return this._handleSelectables(n,!1,t),e}},{key:"getSelectables",value:function(){return this.selectables}},{key:"setSelectables",value:function(e,t,n){return this.removeSelectables(this.getSelectables(),t),this.addSelectables(e,n)}},{key:"removeSelectables",value:function(e,t){var n=this._toArray(e);return this._handleSelectables(n,!0,t),e}},{key:"_isRightClick",value:function(e){var t=!1;return"which"in e?t=3===e.which:"button"in e&&(t=2===e.button),t}},{key:"_isScrollbarClick",value:function(e,t){var n=this._getCursorPos(e,t),e=this.getAreaRect(t),t=t.computedBorder||0;return e.width+t<=n.x||e.height+t<=n.y}},{key:"_toArray",value:function(e){if(!e)return[];if(!e.length&&this._isElement(e))return[e];for(var t=[],n=e.length-1;0<=n;n--)t[n]=e[n];return t}},{key:"_isElement",value:function(t){try{return t instanceof HTMLElement||t instanceof SVGElement}catch(e){return"object"===o(t)&&1===t.nodeType&&"object"===o(t.style)&&"object"===o(t.ownerDocument)}}},{key:"_getCursorPos",value:function(e,t){if(!e)return{x:0,y:0};e.touches&&"touchend"!==e.type&&(this._lastTouch=e);var n=(e=e.touches?this._lastTouch.touches[0]:e).pageX||e.clientX,o=e.pageY||e.clientY,e=this.getAreaRect(t||document),t=this.getScroll();return{x:(n-e.left-t.x)/this.zoom,y:(o-e.top-t.y)/this.zoom}}},{key:"getInitialCursorPosition",value:function(){return this._initialCursorPos}},{key:"getCurrentCursorPosition",value:function(){return this._newCursorPos}},{key:"getPreviousCursorPosition",value:function(){return this._previousCursorPos}},{key:"getCursorPositionDifference",value:function(e){var t=this.getCurrentCursorPosition(),e=e?this.getPreviousCursorPosition():this.getInitialCursorPosition();return{x:t.x-e.x,y:t.y-e.y}}},{key:"getScroll",value:function(e){var t={top:(0<document.body.scrollTop?document.body:document.documentElement).scrollTop,left:(0<document.body.scrollLeft?document.body:document.documentElement).scrollLeft};return{y:e&&0<=e.scrollTop?e.scrollTop:t.top,x:e&&0<=e.scrollLeft?e.scrollLeft:t.left}}},{key:"getAreaRect",value:function(e){if(e===document){var t=0<e.documentElement.clientHeight?e.documentElement.clientHeight:window.innerHeight;return{top:0,left:0,bottom:0,right:0,width:0<e.documentElement.clientWidth?e.documentElement.clientWidth:window.innerWidth,height:t}}t=e.getBoundingClientRect();return{top:t.top,left:t.left,bottom:t.bottom,right:t.right,width:e.clientWidth||t.width,height:e.clientHeight||t.height}}},{key:"_updatePos",value:function(e,t){return e.style.left=t.x+"px",e.style.top=t.y+"px",e.style.width=t.w+"px",e.style.height=t.h+"px",e}}])&&i(e.prototype,t),n&&i(e,n),y}();window.DragSelect=t,this.resolve()}),EasyBlog.module("composer/vendors/expanding",function(n){function i(){n(this).data("textareaClone").find("div").text(this.value.replace(/\r\n/g,"\n")+" "),n(this).trigger("resize.expanding")}n.expandingTextarea=n.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},n.expandingTextarea||{});var r=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","boxSizing","webkitBoxSizing","mozBoxSizing","msBoxSizing"],s={position:"absolute",height:"100%",resize:"none"},l={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},c={position:"relative"};n.fn.expandingTextarea=function(e){var t=n.extend({},n.expandingTextarea.opts,e);return"resize"===e?this.trigger("input.expanding"):("destroy"===e?this.filter(".expanding-init").each(function(){var e=n(this).removeClass("expanding-init");e.attr("style",e.data("expanding-styles")||"").removeData("expanding-styles")}):this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var o=n(this),e=o.parent(),a=n(n.parseHTML("<pre class='textareaClone'><div></div></pre>"));o.after(a).data("textareaClone",a),e.css(c),o.data("expanding-styles",o.attr("style")),o.css(s),a.css(l),n.each(r,function(e,t){var n=o.css(t);a.css(t)!==n&&a.css(t,n)}),o.bind("input.expanding propertychange.expanding keyup.expanding",i),i.apply(this),t.resize&&o.bind("resize.expanding",t.resize)}),this)},n(function(){n.expandingTextarea.autoInitialize&&n(n.expandingTextarea.initialSelector).expandingTextarea()}),this.resolve()}),EasyBlog.module("composer/vendors/nearest",function(l){var v={left:[-1,0],up:[0,-1],right:[1,0],down:[0,1]};l.distance=function(e,t,n){n=v[n];var o,a,i,r,s=e.offset(),l=e.outerWidth(),c=e.outerHeight(),d=s.left,u=s.top,p=d+l,f=u+c,h=d+l/2,m=u+c/2,g=t.offset(),e=t.outerWidth(),s=t.outerHeight(),l=g.left,c=g.top,t=l+e,g=c+s,e=l+e/2,s=c+s/2;return 0==n[1]?(n[0]<0?(t<=d&&(o=d-t),e<=d&&(o=null!=o?Math.min(o,d-e):d-e),t<=d&&(o=null!=o?Math.min(o,d-t):d-t)):(p<=l&&(o=l-p),p<=e&&(o=null!=o?Math.min(o,e-p):e-p),d<l&&(o=null!=o?Math.min(o,l-d):l-d)),a=2*Math.min(Math.abs(m-c),Math.abs(m-s),Math.abs(m-g))):0==n[0]&&(n[1]<0?(g<=u&&(a=u-g),s<=u&&(a=null!=a?Math.min(a,u-s):u-s),g<=u&&(a=null!=a?Math.min(a,u-g):u-g)):(f<=c&&(a=c-f),f<=s&&(a=null!=a?Math.min(a,s-f):s-f),u<c&&(a=null!=a?Math.min(a,c-u):c-u)),o=2*Math.min(Math.abs(h-l),Math.abs(h-e),Math.abs(h-t))),null==o||null==a?-1:(i=o,r=a,Math.floor(Math.sqrt(i*i+r*r)))},l.fn.nearest=function(e,t){for(var n,o,a=l(),i=null,r=-1,s=e.length;++r<s;)n=l(e[r]),this[0]!=n[0]&&0<=(o=l.distance(this,n,t))&&(null===i||o<i)&&(i=o,a=n);return a},this.resolve()}),EasyBlog.module("composer/vendors/nouislider",function(e){!function(){"use strict";function b(e){return e.split("").reverse().join("")}function h(e,t){return e.substring(0,t.length)===t}function i(e,t,n){if((e[t]||e[n])&&e[t]===e[n])throw new Error(t)}function y(e){return"number"==typeof e&&isFinite(e)}function n(e,t,n,o,a,i,r,s,l,c,d,u){var p,f,h,m=u,g="",v="";return!!y(u=i?i(u):u)&&((u=!1!==e&&0===parseFloat(u.toFixed(e))?0:u)<0&&(p=!0,u=Math.abs(u)),!1!==e&&(i=u,h=e,e=Math.pow(10,h),u=(Math.round(i*e)/e).toFixed(h)),-1!==(u=u.toString()).indexOf(".")?(f=(h=u.split("."))[0],n&&(g=n+h[1])):f=u,t&&(f=b(f).match(/.{1,3}/g),f=b(f.join(b(t)))),p&&s&&(v+=s),o&&(v+=o),p&&l&&(v+=l),v+=f,v+=g,a&&(v+=a),c?c(v,m):v)}function o(e,t,n,o,a,i,r,s,l,c,d,u){var p,f="";return!(!(u=d?d(u):u)||"string"!=typeof u)&&(s&&h(u,s)&&(u=u.replace(s,""),p=!0),o&&h(u,o)&&(u=u.replace(o,"")),l&&h(u,l)&&(u=u.replace(l,""),p=!0),a&&(l=a,u.slice(-1*l.length)===l)&&(u=u.slice(0,-1*a.length)),t&&(u=u.split(t).join("")),p&&(f+="-"),""!==(f=(f+=u=n?u.replace(n,"."):u).replace(/[^0-9\.\-.]/g,""))&&(f=Number(f),!!y(f=r?r(f):f)&&f))}function a(e,t,n){for(var o=[],a=0;a<r.length;a+=1)o.push(e[r[a]]);return o.push(n),t.apply("",o)}var r=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=function e(t){if(!(this instanceof e))return new e(t);"object"==typeof t&&(t=function(e){for(var t,n,o={},a=0;a<r.length;a+=1)if(void 0===(n=e[t=r[a]]))"negative"!==t||o.negativeBefore?"mark"===t&&"."!==o.thousand?o[t]=".":o[t]=!1:o[t]="-";else if("decimals"===t){if(!(0<=n&&n<8))throw new Error(t);o[t]=n}else if("encoder"===t||"decoder"===t||"edit"===t||"undo"===t){if("function"!=typeof n)throw new Error(t);o[t]=n}else{if("string"!=typeof n)throw new Error(t);o[t]=n}return i(o,"mark","thousand"),i(o,"prefix","negative"),i(o,"prefix","negativeBefore"),o}(t),this.to=function(e){return a(t,n,e)},this.from=function(e){return a(t,o,e)})}}(),function(r){"use strict";function n(e){return e instanceof r||r.zepto&&r.zepto.isZ(e)}function i(n,o,e){var a=this,i=!1;if(this.changeHandler=function(e){var t=a.formatInstance.from(r(this).val());if(!1===t||isNaN(t))return r(this).val(a.lastSetValue),!1;a.changeHandlerMethod.call("",e,t)},this.el=!1,this.formatInstance=e,r.each(t,function(e,t){return!(i=t.call(a,n,o))}),!i)throw new RangeError("(Link) Invalid Link.")}function s(e){this.items=[],this.elements=[],this.origin=e}var t=[function(e,t){if("string"==typeof e&&0===e.indexOf("-inline-"))return this.method=t||"html",this.target=this.el=r(e.replace("-inline-","")||"<div/>"),!0},function(e){if("string"==typeof e&&0!==e.indexOf("-")){this.method="val";var t=document.createElement("input");return t.name=e,t.type="hidden",this.target=this.el=r(t),!0}},function(e){if("function"==typeof e)return this.target=!1,this.method=e,!0},function(e,t){if(n(e)&&!t)return e.is("input, select, textarea")?(this.method="val",this.target=e.on("change.liblink",this.changeHandler)):(this.target=e,this.method="html"),!0},function(e,t){if(n(e)&&("function"==typeof t||"string"==typeof t&&e[t]))return this.method=t,this.target=e,!0}];i.prototype.set=function(e){var t=Array.prototype.slice.call(arguments).slice(1);this.lastSetValue=this.formatInstance.to(e),t.unshift(this.lastSetValue),("function"==typeof this.method?this.method:this.target[this.method]).apply(this.target,t)},s.prototype.push=function(e,t){this.items.push(e),t&&this.elements.push(t)},s.prototype.reconfirm=function(e){for(var t=0;t<this.elements.length;t+=1)this.origin.LinkConfirm(e,this.elements[t])},s.prototype.remove=function(e){for(var t=0;t<this.items.length;t+=1)this.items[t].target.off(".liblink");for(t=0;t<this.elements.length;t+=1)this.elements[t].remove()},s.prototype.change=function(e){if(this.origin.LinkIsEmitting)return!1;this.origin.LinkIsEmitting=!0;var t,n=Array.prototype.slice.call(arguments,1);for(n.unshift(e),t=0;t<this.items.length;t+=1)this.items[t].set.apply(this.items[t],n);this.origin.LinkIsEmitting=!1},r.fn.Link=function(o){var a=this;if(!1===o)return a.each(function(){this.linkAPI&&(r.map(this.linkAPI,function(e){e.remove()}),delete this.linkAPI)});if(void 0===o)o=0;else if("string"!=typeof o)throw new Error("Flag must be string.");return{to:function(e,t,n){return a.each(function(){!function(e,t,n,o){0===e&&(e=this.LinkDefaultFlag),this.linkAPI||(this.linkAPI={}),this.linkAPI[e]||(this.linkAPI[e]=new s(this)),(o=new i(t,n,o||this.LinkDefaultFormatter)).target||(o.target=r(this)),o.changeHandlerMethod=this.LinkConfirm(e,o.el),this.linkAPI[e].push(o,o.el),this.LinkUpdate(e)}.call(this,o,e,t,n)})}}}}(e),function(B){"use strict";function r(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function T(e,t,n){e.addClass(t),setTimeout(function(){e.removeClass(t)},n)}function I(e){return Math.max(Math.min(e,100),0)}function E(e){return B.isArray(e)?e:[e]}function s(e,t){return 100/(t-e)}function l(e,t){return 100*t/(e[1]-e[0])}function c(e,t){for(var n=1;e>=t[n];)n+=1;return n}function t(e,t,n){if(n>=e.slice(-1)[0])return 100;var o=c(n,e),a=e[o-1],i=e[o],e=t[o-1],o=t[o];return e+(n=n,l(i=[a,i],i[0]<0?n+Math.abs(i[0]):n-i[0])/s(e,o))}function n(e,t,n,o){if(100===o)return o;var a,i=c(o,e);return n?(a=e[i-1],((n=e[i])-a)/2<o-a?n:a):t[i-1]?e[i-1]+(e=o-e[i-1],i=t[i-1],Math.round(e/i)*i):o}function o(e,t,n,o){this.xPct=[],this.xVal=[],this.xSteps=[o||!1],this.xNumSteps=[!1],this.snap=t,this.direction=n;var a,i=[];for(a in e)e.hasOwnProperty(a)&&i.push([e[a],a]);for(i.sort(function(e,t){return e[0]-t[0]}),a=0;a<i.length;a++)!function(e,t,n){if("number"==typeof t&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("noUiSlider: 'range' contains invalid value.");if(!r(e="min"===e?0:"max"===e?100:parseFloat(e))||!r(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(e),n.xVal.push(t[0]),e?n.xSteps.push(!isNaN(t[1])&&t[1]):isNaN(t[1])||(n.xSteps[0]=t[1])}(i[a][1],i[a][0],this);for(this.xNumSteps=this.xSteps.slice(0),a=0;a<this.xNumSteps.length;a++)!function(e,t,n){if(!t)return;n.xSteps[e]=l([n.xVal[e],n.xVal[e+1]],t)/s(n.xPct[e],n.xPct[e+1])}(a,this.xNumSteps[a],this)}function i(e,t){if(!r(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function d(e,t){if("object"!=typeof t||B.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new o(t,e.snap,e.dir,e.singleStep)}function u(e,t){if(t=E(t),!B.isArray(t)||!t.length||2<t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function p(e,t){if("boolean"!=typeof(e.snap=t))throw new Error("noUiSlider: 'snap' option must be a boolean.")}function f(e,t){if("boolean"!=typeof(e.animate=t))throw new Error("noUiSlider: 'animate' option must be a boolean.")}function h(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(!0===t&&2===e.handles)e.connect=3;else{if(!1!==t)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function m(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function g(e,t){if(!r(t))throw new Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(t),!e.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function v(e,t){if(!r(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function b(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function y(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=0<=t.indexOf("tap"),o=0<=t.indexOf("drag"),a=0<=t.indexOf("fixed"),t=0<=t.indexOf("snap");e.events={tap:n||t,drag:o,fixed:a,snap:t}}function k(e,t){if("function"==typeof(e.format=t).to&&"function"==typeof t.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function S(e,t,n){for(var o,a,i,r,s=[],l=0;l<e;l+=1)s.push((o=t,a=l,r=i=void 0,i=B("<div><div/></div>").addClass(D[2]),r=["-lower","-upper"],o&&r.reverse(),i.children().addClass(D[3]+" "+D[3]+r[a]),i.appendTo(n)));return s}function w(e,l,t){function s(){return f[["width","height"][l.ort]]()}function c(e){for(var t=[y.val()],n=0;n<e.length;n+=1)y.trigger(e[n],t)}function n(e){return 1===e.length?e[0]:l.dir?e.reverse():e}function d(e){var t=B.inArray(e,x);y[0].linkAPI&&y[0].linkAPI[e]&&y[0].linkAPI[e].change(C[t],h[t].children(),y)}function o(e,t,n,o){return e=e.replace(/\s/g,M+" ")+M,t.on(e,function(e){return!y.attr("disabled")&&(!y.hasClass(D[14])&&((e=function(e){e.preventDefault();var t,n,o=0===e.type.indexOf("touch"),a=0===e.type.indexOf("mouse"),i=0===e.type.indexOf("pointer"),r=e;return 0===e.type.indexOf("MSPointer")&&(i=!0),e.originalEvent&&(e=e.originalEvent),o&&(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY),(a||i)&&(i||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,n=e.clientY+window.pageYOffset),r.points=[t,n],r.cursor=a,r}(e)).calcPoint=e.points[l.ort],void n(e,o)))})}function a(e,t){var n,o=t.handles||h,a=!1,i=100*(e.calcPoint-t.start)/s(),r=o[0][0]!==h[0][0]?1:0;n=t.positions,e=1<o.length,t=i+n[0],n=i+n[1],n=e?(t<0&&(n+=Math.abs(t)),100<n&&(t-=n-100),[I(t),I(n)]):[t,n],a=p(o[0],n[r],1===o.length),(a=1<o.length?p(o[1],n[r?0:1],!1)||a:a)&&c(["nouislide"])}function i(e){B("."+D[15]).removeClass(D[15]),e.cursor&&B("body").css("cursor","").off(M),b.off(M),y.removeClass(D[12]),c(["set","change"])}function r(e,t){1===t.handles.length&&t.handles[0].children().addClass(D[15]),e.stopPropagation(),o(P.move,b,a,{start:e.calcPoint,handles:t.handles,positions:[k[0],k[h.length-1]]}),o(P.end,b,i,null),e.cursor&&(B("body").css("cursor",B(e.target).css("cursor")),1<h.length&&y.addClass(D[12]),B("body").on("selectstart"+M,!1))}function u(e){var t=e.calcPoint,n=0;e.stopPropagation(),B.each(h,function(){n+=this.offset()[l.style]}),n=t<n/2||1===h.length?0:1,t=100*(t-=f.offset()[l.style])/s(),l.events.snap||T(y,D[14],300),p(h[n],t),c(["nouislide","set","change"]),l.events.snap&&r(e,{handles:[h[n]]})}function p(e,t,n){var o=e[0]!==h[0][0]?1:0,a=k[0]+l.margin,i=k[1]-l.margin,r=k[0]+l.limit,s=k[1]-l.limit;return 1<h.length&&(t=o?Math.max(t,a):Math.min(t,i)),!1!==n&&l.limit&&1<h.length&&(t=o?Math.min(t,r):Math.max(t,s)),t=w.getStep(t),(t=I(parseFloat(t.toFixed(7))))!==k[o]&&(e.css(l.style,t+"%"),e.is(":first-child")&&e.toggleClass(D[17],50<t),k[o]=t,C[o]=w.fromStepping(t),d(x[o]),!0)}var f,h,m,g,v,b=B(t.document||document),y=B(e),k=[-1,-1],w=l.spectrum,C=[],x=["lower","upper"].slice(0,l.handles);if(l.dir&&x.reverse(),e.LinkUpdate=d,e.LinkConfirm=function(e,t){var n,e=B.inArray(e,x);return t&&t.appendTo(h[e].children()),l.dir&&1<l.handles&&(e=1===e?0:1),n=e,function(e,t){y.val([n?null:t,n?t:null],!0)}},e.LinkDefaultFormatter=l.format,e.LinkDefaultFlag="lower",e.reappend=function(){for(var e,t=0;t<x.length;t+=1)this.linkAPI&&this.linkAPI[e=x[t]]&&this.linkAPI[e].reconfirm(e)},y.hasClass(D[0]))throw new Error("Slider was already initialized.");m=l.dir,g=l.ort,(v=y).addClass([D[0],D[8+m],D[4+g]].join(" ")),f=B("<div/>").appendTo(v).addClass(D[1]),h=S(l.handles,l.dir,f),function(e,t,n){switch(e){case 1:t.addClass(D[7]),n[0].addClass(D[6]);break;case 3:n[1].addClass(D[6]);case 2:n[0].addClass(D[7]);case 0:t.addClass(D[6])}}(l.connect,y,h),function(e){var t,n;if(!e.fixed)for(t=0;t<h.length;t+=1)o(P.start,h[t].children(),r,{handles:[h[t]]});e.tap&&o(P.start,f,u,{handles:h}),e.drag&&(n=f.find("."+D[7]).addClass(D[10]),e.fixed&&(n=n.add(f.children().not(n).children())),o(P.start,n,r,{handles:h}))}(l.events),e.vSet=function(e){if(y[0].LinkIsEmitting)return this;var t=E(e);return l.dir&&1<l.handles&&t.reverse(),l.animate&&-1!==k[0]&&T(y,D[14],300),e=1<h.length?3:1,function(e,t){var n,o,a;for(l.limit&&(e+=1),n=0;n<e;n+=1)null!==(a=t[o=n%2])&&!1!==a&&("number"==typeof a&&(a=String(a)),!1!==(a=l.format.from(a))&&!isNaN(a)&&!1!==p(h[o],w.toStepping(a),n===3-l.dir)||d(x[o]))}(e=1===t.length?1:e,t),this},e.vGet=function(){for(var e=[],t=0;t<l.handles;t+=1)e[t]=l.format.to(C[t]);return n(e)},e.destroy=function(){return B(this).off(M).removeClass(D.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,t},e.getCurrentStep=function(){return n(B.map(k,function(e,t){var n,o=w.getApplicableStep(e),a=1<(n=(n=String(o[2])).split(".")).length?n[1].length:0,n=C[t],t=100===e?null:o[2],a=Number((n-o[2]).toFixed(a));return[[0===e?null:a>=o[1]?o[2]:o[0]||!1,t]]}))},e.getOriginalOptions=function(){return t},e.getInfo=function(){return[w,l.style,l.ort]},y.val(l.start)}function a(e){var n,o,t,a=(n=e,t={step:{r:!(o={margin:0,limit:0,animate:!0,format:L}),t:i},start:{r:!0,t:u},connect:{r:!0,t:h},direction:{r:!0,t:b},snap:{r:!1,t:p},animate:{r:!1,t:f},range:{r:!0,t:d},orientation:{r:!1,t:m},margin:{r:!1,t:g},limit:{r:!1,t:v},behaviour:{r:!0,t:y},format:{r:!1,t:k}},n=B.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},n),B.each(t,function(e,t){if(void 0===n[e]){if(t.r)throw new Error("noUiSlider: '"+e+"' is required.");return!0}t.t(o,n[e])}),o.style=o.ort?"top":"left",o);return this.each(function(){w(this,a,e)})}function C(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}function x(d,u,p,f){var n,e=d.direction,h={},t=d.xVal[0],o=d.xVal[d.xVal.length-1],m=!1,g=!1,v=0;return d.direction=0,n=f.slice().sort(function(e,t){return e-t}),(f=B.grep(n,function(e,t){return t===B.inArray(e,n)}))[0]!==t&&(f.unshift(t),m=!0),f[f.length-1]!==o&&(f.push(o),g=!0),B.each(f,function(e){var t,n,o,a,i,r,s=f[e],l=f[e+1],c=(c="steps"===p?d.xNumSteps[e]:c)||l-s;if(!1!==s&&void 0!==l)for(t=s;t<=l;t+=c){for(r=(a=(o=d.toStepping(t))-v)/(i=Math.round(a/u)),n=1;n<=i;n+=1)h[(v+n*r).toFixed(5)]=["x",0];a=-1<B.inArray(t,f)?1:"steps"===p?2:0,!e&&m&&(a=0),t===l&&g||(h[o.toFixed(5)]=[t,a]),v=o}}),d.direction=e,h}function _(o,e,n,t,a,i){function r(e,t,n){return'class="'+t+" "+t+"-"+s+" "+t+(t=n[1],n[0],["-normal","-large","-sub"][t])+'" style="'+o+": "+e+'%"'}var s=["horizontal","vertical"][e],l=B("<div/>");return l.addClass("noUi-pips noUi-pips-"+s),B.each(t,function(e,t){n&&(e=100-e),t[1]=t[1]&&a?a(t[0],t[1]):t[1],l.append("<div "+r(e,"noUi-marker",t)+"></div>"),t[1]&&l.append("<div "+r(e,"noUi-value",t)+">"+i.to(t[0])+"</div>")}),l}B(document);var F=B.fn.val,M=".nui",P=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},D=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","","noUi-stacking"];o.prototype.getMargin=function(e){return 2===this.xPct.length&&l(this.xVal,e)},o.prototype.toStepping=function(e){return e=t(this.xVal,this.xPct,e),e=this.direction?100-e:e},o.prototype.fromStepping=function(e){return this.direction&&(e=100-e),t=function(e,t,n){if(100<=n)return e.slice(-1)[0];var o=c(n,t),a=e[o-1],i=e[o],e=t[o-1],o=t[o];return(n-e)*s(e,o)*((i=[a,i])[1]-i[0])/100+i[0]}(this.xVal,this.xPct,e),e=Math.pow(10,7),Number((Math.round(t*e)/e).toFixed(7));var t},o.prototype.getStep=function(e){return this.direction&&(e=100-e),e=n(this.xPct,this.xSteps,this.snap,e),e=this.direction?100-e:e},o.prototype.getApplicableStep=function(e){var t=c(e,this.xPct),e=100===e?2:1;return[this.xNumSteps[t-2],this.xVal[t-e],this.xNumSteps[t-e]]},o.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var L={to:function(e){return e.toFixed(2)},from:Number};B.fn.val=function(o){function a(e){return e.hasClass(D[0])?C:F}if(!arguments.length){var e=B(this[0]);return a(e).call(e)}var i=B.isFunction(o);return this.each(function(e){var t=o,n=B(this);i&&(t=o.call(this,e,n.val())),a(n).call(n,t)})},B.fn.noUiSlider=function(e,t){switch(e){case"step":return this[0].getCurrentStep();case"options":return this[0].getOriginalOptions()}return(t?function(o){return this.each(function(){var e,t,n;this.hasOwnProperty("destroy")?(e=B(this).val(),t=this.destroy(),n=B.extend({},t,o),B(this).noUiSlider(n),this.reappend(),t.start===n.start&&B(this).val(e)):B(this).noUiSlider(o)})}:a).call(this,e)},B.fn.noUiSlider_pips=function(e){var n=e.mode,o=e.density||1,a=e.filter||!1,i=e.values||!1,r=e.format||{to:Math.round},s=e.stepped||!1;return this.each(function(){var e=this.getInfo(),t=function(t,e,n,o){if("range"===e||"steps"===e)return t.xVal;if("count"===e){var a,i=100/(n-1),r=0;for(n=[];(a=r++*i)<=100;)n.push(a);e="positions"}return"positions"===e?B.map(n,function(e){return t.fromStepping(o?t.getStep(e):e)}):"values"===e?o?B.map(n,function(e){return t.fromStepping(t.getStep(t.toStepping(e)))}):n:void 0}(e[0],n,i,s),t=x(e[0],o,n,t);return B(this).append(_(e[1],e[2],e[0].direction,t,a,r))})}}(e),this.resolve()}),EasyBlog.module("composer/vendors/selectionchange",function(e){var i,n,r;function s(e){e=e.getSelection();return e.rangeCount?e.getRangeAt(0):null}function t(e,t,n){e.addEventListener(t,n,!0)}function o(e,t,n){e.removeEventListener(t,n,!0)}function a(e){var t=e.keyCode;(65===t&&e[n]&&!e.shiftKey&&!e.altKey||t<=40&&37<=t&&e.shiftKey)&&setTimeout(p.bind(null,this),0)}function l(e){0===e.button&&(t(this,"mousemove",c),setTimeout(p.bind(null,this),0))}function c(e){1&e.buttons?p(this):o(this,"mousemove",c)}function d(e){0===e.button?setTimeout(p.bind(null,this),0):o(this,"mousemove",c)}function u(){setTimeout(p.bind(null,this.document),0)}function p(e){var t,n,o=i.get(e),a=s(e);(t=a)===(n=o)||t&&n&&r.every(function(e){return t[e]===n[e]})||(i.set(e,a),setTimeout(e.dispatchEvent.bind(e,new Event("selectionchange")),0))}e.selectionchange=(n=/^Mac/.test(navigator.platform)?"metaKey":"ctrlKey",r=["startContainer","startOffset","endContainer","endOffset"],{start:function(e){e=e||document;(i||!function(e){var t=e.onselectionchange;if(void 0!==t)try{return e.onselectionchange=0,null===e.onselectionchange}catch(e){}finally{e.onselectionchange=t}}(e)&&(i="undefined"!=typeof WeakMap?new WeakMap:(console.error("selectionchange: WeakMap not supported"),null)))&&(i.has(e)||(i.set(e,s(e)),t(e,"keydown",a),t(e,"mousedown",l),t(e,"mousemove",c),t(e,"mouseup",d),t(e.defaultView,"focus",u)))},stop:function(e){e=e||document;i&&i.has(e)&&(i.delete(e),o(e,"keydown",a),o(e,"mousedown",l),o(e,"mousemove",c),o(e,"mouseup",d),o(e.defaultView,"focus",u))}}),this.resolve()})});