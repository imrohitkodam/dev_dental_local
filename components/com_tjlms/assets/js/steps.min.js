jQuery(document).ready(function(){jQuery("#MyWizard").on("change",function(e,t){values=jQuery("#selectionSubsPlanForm").serialize();var i=jQuery("#tjlms-steps li.active")[0].id;if("id_step_payment_info"===i?jQuery("#btnWizardNext").hide():jQuery("#btnWizardNext").show(),"id_step_select_subsplan"===i&&"next"===t.direction){if(jQuery("#coupon_chk").is(":checked"))if(!jQuery("#dis_cop").is(":visible")){var a=Joomla.JText._("COM_TJLMS_WANTED_TO_APPLY_COP_BUT_NOT_APPLIED");return alert(a),!1}jQuery.ajax({url:root_url+"index.php?option=com_tjlms&task=buy.save_step_select_subsplan&tmpl=component",type:"POST",data:values,dataType:"json",async:"false",beforeSend:function(){loadingImage()},fail:function(){hideImage(),alert("Something went wrong.")},success:function(e){hideImage(),1==e.failure?(jQuery("#MyWizard").wizard("previous"),alert(e.message)):(jQuery("html, body").animate({scrollTop:0},500),"undefined"!=typeof tjanalytics&&(tjanalytics.ga.addProduct(e.ecTrackingData),tjanalytics.ga.setAction(e.ecTrackingData[0])))}})}if("id_step_billing_info"===i&&"next"===t.direction){var r=document.billing_info_form;if(!document.formvalidator.isValid(r)){var n=Joomla.JText._("COM_TJLMS_REQUIRE_FIELDS");return alert(n),jQuery("#btnWizardNext").show(),jQuery("html, body").animate({scrollTop:0},500),!1}if(jQuery("#accpt_terms").length>0){if(1!=document.getElementById("accpt_terms").checked){jQuery("#btnWizardNext").show();var o=Joomla.JText._("COM_TJLMS_TERMS_AND_CONDITION");return alert(o),!1}jQuery("#btnWizardNext").show(),jQuery("html, body").animate({scrollTop:0},500)}values=jQuery("#billing_info_form").serialize(),jQuery.ajax({url:root_url+"index.php?option=com_tjlms&task=buy.save_step_billinginfo&tmpl=component",type:"POST",data:values,dataType:"json",async:!1,beforeSend:function(){loadingImage()},complete:function(){hideImage()},success:function(e){if(0==e.tnc){var t=Joomla.JText._("COM_TJLMS_TERMS_AND_CONDITION");return alert(t),!1}e.payment_html&&(jQuery("#step_payment_info").html(e.payment_html),jQuery("#system-message-container").html(""),e.single_gateway&&tjlms.gateway.gatewayHtml(e.single_gateway,e.order_id)),e.redirect_invoice_view&&(document.location=e.redirect_invoice_view),"undefined"!=typeof tjanalytics&&(tjanalytics.ga.addProduct(e.ecTrackingData),tjanalytics.ga.setAction(e.ecTrackingData[0]))}})}}),jQuery("#MyWizard").on("changed",function(e,t){var i=jQuery("#tjlms-steps li.active");stepthisactive=i[0].id,stepthisactive==jQuery("#tjlms-steps li").first().attr("id")?jQuery(".tjlms-form #btnWizardPrev").hide():jQuery(".tjlms-form #btnWizardPrev").show(),stepthisactive==jQuery("#tjlms-steps li").last().attr("id")?jQuery(".tjlms-form .prev_next_wizard_actions").hide():(jQuery(".tjlms-form .prev_next_wizard_actions").show(),jQuery("#btnWizardNext").show())}),jQuery("#MyWizard").on("finished",function(e,t){jQuery("#tjlms-steps li.active")[0].id}),jQuery("#btnWizardPrev").on("click",function(){jQuery("#tjlms-steps li.active")[0].id;jQuery("#btnWizardNext").show(),jQuery("#MyWizard").wizard("previous")}),jQuery("#btnWizardNext").on("click",function(){jQuery("#MyWizard").wizard("next","foo")}),jQuery("#btnWizardStep").on("click",function(){jQuery("#MyWizard").wizard("selectedItem")}),jQuery("#MyWizard").on("stepclick",function(e,t){"id_step_payment_info"===jQuery("#tjlms-steps li.active")[0].id&&jQuery("#btnWizardNext").show()}),jQuery("#btnStep2").on("click",function(e,t){jQuery("[data-target=#step2]").trigger("click")})});
